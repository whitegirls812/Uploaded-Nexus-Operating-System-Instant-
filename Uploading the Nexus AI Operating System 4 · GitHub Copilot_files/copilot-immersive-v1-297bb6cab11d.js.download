"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["copilot-immersive-v1","ui_packages_code-mirror_CodeMirror_tsx","ui_packages_code-mirror_autocomplete_theme_ts-ui_packages_code-mirror_extensions_help-panels_-d428aa"],{66661:(e,t,n)=>{function a(e){let t=e.parentNode;if(null===t||!(t instanceof HTMLElement))throw Error();let n=0;t instanceof HTMLOListElement&&1!==t.start&&(n=t.start-1);let a=t.children;for(let t=0;t<a.length;++t)if(a[t]===e)return n+t;return n}n.d(t,{P:()=>Quote,g:()=>MarkdownQuote});let r=0;function i(e){return e.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let o={INPUT:e=>e instanceof HTMLInputElement&&e.checked?"[x] ":"[ ] ",CODE(e){let t=e.textContent||"";return e.parentNode&&"PRE"===e.parentNode.nodeName?(e.textContent=`\`\`\`
${t.replace(/\n+$/,"")}
\`\`\`

`,e):t.indexOf("`")>=0?`\`\` ${t} \`\``:`\`${t}\``},P(e){let t=document.createElement("p");return t.textContent=(e.textContent||"").replace(/<(\/?)(pre|strong|weak|em)>/g,"\\<$1$2\\>"),t},STRONG:e=>`**${e.textContent||""}**`,EM:e=>`_${e.textContent||""}_`,DEL:e=>`~${e.textContent||""}~`,BLOCKQUOTE(e){let t=(e.textContent||"").trim().replace(/^/gm,"> "),n=document.createElement("pre");return n.textContent=`${t}

`,n},A(e){let t=e.textContent||"",n=e.getAttribute("href");return/^https?:/.test(t)&&t===n?t:n?`[${t}](${n})`:t},IMG(e){let t=e.getAttribute("alt")||"",n=e.getAttribute("src");if(!n)throw Error();let a=e.hasAttribute("width")?` width="${i(e.getAttribute("width")||"")}"`:"",r=e.hasAttribute("height")?` height="${i(e.getAttribute("height")||"")}"`:"";return a||r?`<img alt="${i(t)}"${a}${r} src="${i(n)}">`:`![${t}](${n})`},LI(e){let t=e.parentNode;if(!t)throw Error();let n="";if(!function(e){let t=e.childNodes[0],n=e.childNodes[1];return!!t&&e.childNodes.length<3&&("OL"===t.nodeName||"UL"===t.nodeName)&&(!n||n.nodeType===Node.TEXT_NODE&&!(n.textContent||"").trim())}(e))if("OL"===t.nodeName)if(r>0&&!t.previousSibling){let t=a(e)+r+1;n=`${t}\\. `}else n=`${a(e)+1}. `;else n="* ";let i=n.replace(/\S/g," "),o=(e.textContent||"").trim().replace(/^/gm,i),s=document.createElement("pre");return s.textContent=o.replace(i,n),s},OL(e){let t=document.createElement("li");return t.appendChild(document.createElement("br")),e.append(t),e},H1(e){let t=parseInt(e.nodeName.slice(1));return e.prepend(`${Array(t+1).join("#")} `),e},UL:e=>e};o.UL=o.OL;for(let e=2;e<=6;++e)o[`H${e}`]=o.H1;let Quote=class Quote{constructor(){this.selection=window.getSelection(),this.processSelectionText=e=>e}closest(e){let t=this.range.startContainer,n=t instanceof Element?t:t.parentElement;return n?n.closest(e):null}get active(){var e;return((null==(e=this.selection)?void 0:e.rangeCount)||0)>0}get range(){var e;return(null==(e=this.selection)?void 0:e.rangeCount)?this.selection.getRangeAt(0):new Range}set range(e){var t,n;null==(t=this.selection)||t.removeAllRanges(),null==(n=this.selection)||n.addRange(e)}set processSelectionTextFn(e){this.processSelectionText=e}get selectionText(){var e;return this.processSelectionText((null==(e=this.selection)?void 0:e.toString().trim())||"")}get quotedText(){return`> ${this.selectionText.replace(/\n/g,`
> `)}

`}select(e){this.selection&&(this.selection.removeAllRanges(),this.selection.selectAllChildren(e))}insert(e){e.value?e.value=`${e.value}

${this.quotedText}`:e.value=this.quotedText,e.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!1})),e.focus(),e.selectionStart=e.value.length,e.scrollTop=e.scrollHeight}};let MarkdownQuote=class MarkdownQuote extends Quote{constructor(e="",t){super(),this.scopeSelector=e,this.callback=t}get selectionText(){var e,t;if(!this.selection)return"";let n=function(e,t){let n=e.startContainer;if(!n||!n.parentNode||!(n.parentNode instanceof HTMLElement))throw Error("the range must start within an HTMLElement");let i=n.parentNode,o=e.cloneContents();if(t){let e=o.querySelector(t);e&&(o=document.createDocumentFragment()).appendChild(e)}r=0;let s=i.closest("li");if(i.closest("pre")){let e=document.createElement("pre");e.appendChild(o),(o=document.createDocumentFragment()).appendChild(e)}else if(s&&s.parentNode&&("OL"===s.parentNode.nodeName&&(r=a(s)),!o.querySelector("li"))){let e=document.createElement("li");if(!s.parentNode)throw Error();let t=document.createElement(s.parentNode.nodeName);e.appendChild(o),t.appendChild(e),(o=document.createDocumentFragment()).appendChild(t)}return o}(this.range,null!=(e=this.scopeSelector)?e:"");null==(t=this.callback)||t.call(this,n);let i=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.nodeName in o&&!function(e){if(e instanceof HTMLAnchorElement&&1===e.childNodes.length){let t=e.childNodes[0];if(t instanceof HTMLImageElement)return t.src===e.href}return!1}(e)&&("IMG"===e.nodeName||null!=e.firstChild||"INPUT"===e.nodeName&&e instanceof HTMLInputElement&&"checkbox"===e.type)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),s=[],l=i.nextNode();for(;l;)l instanceof HTMLElement&&s.push(l),l=i.nextNode();for(let e of(s.reverse(),s))e.replaceWith(o[e.nodeName](e));let c=document.body;if(!c)return"";let d=document.createElement("div");d.appendChild(n),d.style.cssText="position:absolute;left:-9999px;",c.appendChild(d);let u="";try{let e=document.createRange();e.selectNodeContents(d),this.selection.removeAllRanges(),this.selection.addRange(e),u=this.selection.toString(),this.selection.removeAllRanges(),e.detach()}finally{c.removeChild(d)}return this.processSelectionText(u.trim())}}},79929:(e,t,n)=>{n.d(t,{A:()=>a});let a={messageContainer:"ChatMessage-module__messageContainer--A1rW_","message-action":"ChatMessage-module__message-action--gd8kA",user:"ChatMessage-module__user--x7t7S",ai:"ChatMessage-module__ai--NWwZ0",contentContainer:"ChatMessage-module__contentContainer--s3iSV",message:"ChatMessage-module__message--_amJV",messageContent:"ChatMessage-module__messageContent--cNCus",hasClientConfirmations:"ChatMessage-module__hasClientConfirmations--nYPDm",agentUnauthorizedAvatar:"ChatMessage-module__agentUnauthorizedAvatar--q02uE",skillExecutionText:"ChatMessage-module__skillExecutionText--Fl5HE",fileListItem:"ChatMessage-module__fileListItem--jEMb9",avatar:"ChatMessage-module__avatar--rn6Gb"}},10370:(e,t,n)=>{n.d(t,{A:()=>a});let a={container:"UserMessage-module__container--cAvvK",mention:"UserMessage-module__mention--JZHRf"}},15822:(e,t,n)=>{n.d(t,{v:()=>r});var a=n(54187);async function r({endpoint:e}){let t=new a.l,n=await t.getAuthToken();if(!n)throw Error("No token available");let r=await fetch(e,{headers:{Authorization:n.authorizationHeaderValue,Accept:"application/json"}});if(!r.ok)throw Error("Failed to fetch agent sessions");return await r.json()}},35984:(e,t,n)=>{n.d(t,{E:()=>a});let a=n(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},44246:(e,t,n)=>{n.d(t,{G:()=>r});var a=n(24774);function r(e=null,t="bottom"){return[a.S7.of(()=>({dom:e,top:"top"===t}))]}},13281:(e,t,n)=>{n.d(t,{BE:()=>s,Cw:()=>N,I6:()=>b,Lo:()=>d,Md:()=>f,TB:()=>j,TC:()=>_,TU:()=>m,YH:()=>g,Z3:()=>p,eO:()=>x,e_:()=>v,f9:()=>l,fV:()=>h,tJ:()=>y,td:()=>u,w0:()=>c,ye:()=>C});var a=n(15874),r=n(54528),i=n(6585),o=n(24774);let s=e=>e.state.selection.main,l=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,n)=>{e.dispatch({selection:{anchor:t,head:n}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function p(e,t){let n=e.state.doc.lineAt(t);return{line:n.number-1,ch:t-n.from}}let h=(e,t)=>e.state.doc.line(t),f=(e,t,n)=>{let a=h(e,t);v(e,a.from,a.from,n)},g=(e,t,n)=>{let a=h(e,t);v(e,a.from,a.from+n.length,"")},y=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},x=(e,t,n)=>e.sliceDoc(t,n),v=(e,t,n,a)=>{e.dispatch({changes:{from:t,to:n,insert:a}})},_=(e,t)=>{let n=s(e);v(e,n.from,n.to,t)},b=(e,t)=>new r.ZX(e.state.doc,t).next(),j=(e,t,n)=>{let a=new r.ZX(e.state.doc,t).next();e.dispatch({changes:{from:a.value.from,to:a.value.to,insert:n}})},C=(e,t,n,a,r)=>{if(void 0!==n)try{let s=h(e,t),l=h(e,n);if(s&&l){e.focus();let t=r?l.from+r:l.to;u(e,s.from+(a??0),t),e.dispatch({effects:[o.Lz.scrollIntoView(i.OF.range(s.from,l.to),{y:"center"})]})}}catch{}else try{let n=h(e,t);n&&(e.focus(),l(e,n.from+(a??0)),e.dispatch({effects:[o.Lz.scrollIntoView(n.from,{y:"center"})]}))}catch{}};function N(e){return e.state.facet(a.Xt)}},98637:(e,t,n)=>{n.d(t,{T:()=>d});var a=n(88795),r=n(96235),i=n(60183),o=n(75367),s=n(60039),l=n(96540),c=n(93955);function d(){let{sendAnalyticsEvent:e}=(0,o.s)(),t=function(){let e=function(){let e=(0,a.t)(),t=(0,c.i)();return(0,l.useMemo)(()=>({react_app:"code-view",repository_id:e.id,repository_nwo:`${e.ownerLogin}/${e.name}`,repository_public:e.public,repository_is_fork:e.isFork,actor_id:t?.id,actor_login:t?.login}),[e,t])}(),t=(0,a.t)(),n=(0,r.yH8)(r.tTz,{owner:t.ownerLogin,repo:t.name});return(0,l.useCallback)((t,a,r)=>{let i={target:t,interaction:a,context:r,...e,...{url:window.location.href,user_agent:window.navigator.userAgent,browser_width:window.innerWidth,browser_languages:window.navigator.languages.join(",")}};(0,s.lS)(n,{method:"POST",body:i})},[e,n])}(),n=(0,i.u)("code_nav_ui_events");return{sendRepoClickEvent:(0,l.useCallback)((a,r={})=>{e("repository.click",a,r),n&&t(a,"click",r)},[e,t,n]),sendRepoKeyDownEvent:(0,l.useCallback)((a,r={})=>{e("repository.keydown",a,r),n&&t(a,"keydown",r)},[e,t,n]),sendStats:(0,l.useCallback)((a,r={})=>{e(a,"",r),n&&t(a,"stats",r)},[e,t,n]),sendMarketplaceActionEvent:(0,l.useCallback)((t,n={})=>{e("marketplace.action.click",t,n)},[e])}}},62834:(e,t,n)=>{n.d(t,{o:()=>u});var a=n(5225),r=n(88795),i=n(96235),o=n(60039),s=n(96540);async function l(e){let t=await (0,o.lS)(e);return t.ok?await t.json():void 0}let c=new Map,d=(0,a.A)(l,{cache:c});function u(e,t,n){let a=(0,r.t)(),[o,l]=(0,s.useState)({list:[],directories:[],loading:!0}),c=(0,i.ClY)({repo:a,commitOid:e,includeDirectories:!n});return(0,s.useEffect)(()=>{let e=!1,n=async()=>{l({list:[],directories:[],loading:!0});let t=await d(c);if(e)return;let n=t?.paths||[],a=t?.directories||[];l({list:n.concat(a).sort(),directories:a,error:!t})};return t&&n(),function(){e=!0}},[c,t,n]),o}},21113:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(141),r=n(88795),i=n(96235),o=n(80663),s=n(96540);function l(){let e=(0,r.t)(),{path:t,action:n,refInfo:l}=(0,a.eu)(),[c]=(0,o.I)(()=>!1,!0,[]);function d(e){return e?`?${e}`:""}function u(e){return c?"":void 0===e?window.location.hash:e?`#${e}`:""}return{getItemUrl:s.useCallback(t=>(0,i.IO9)({repo:e,commitish:l.name,action:"directory"===t.contentType?"tree":"blob",path:t.path}),[e.ownerLogin,e.name,l.name]),getUrl(a={}){let r=(0,i.IO9)({repo:e,commitish:a.commitish||l.name,action:a.action||n,path:a.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(a);return a.absolute?new URL(r,window.location.origin).href:r},createPermalink(a={}){let r=(0,i.IO9)({repo:e,commitish:l.currentOid,action:a.action||n,path:a.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(a);return a.absolute?new URL(r,window.location.origin).href:r},isCurrentPagePermalink:()=>!c&&l.name===l.currentOid&&window.location.pathname.includes(l.currentOid)}}},89276:(e,t,n)=>{function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{z:()=>WebWorker});let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){a(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};let MainThreadWorker=class MainThreadWorker{async postMessage(e){if(this.terminated)return;let t={data:this.job({data:e})};this.onmessage?.(t)}terminate(){this.terminated=!0}constructor(e){a(this,"terminated",!1),a(this,"onmessage",void 0),a(this,"job",void 0),this.job=e}}},27406:(e,t,n)=>{n.d(t,{j:()=>o});var a=n(5225),r=n(91385);let i=(0,a.A)(r.fN);function o({data:e}){let{query:t,baseList:n,startTime:a}=e,o=t.replaceAll("\\","");return{query:t,list:n.filter(e=>{var t,n;return t=e,""===(n=o)||(0,r.qA)(n,t)&&i(n,t)>0}).sort((e,t)=>i(o,t)-i(o,e)),baseCount:n.length,startTime:a}}},54187:(e,t,n)=>{n.d(t,{l:()=>AgentSessionsTokenProvider});var a=n(879);let AgentSessionsTokenProvider=class AgentSessionsTokenProvider extends a.J{constructor(){super([],"/copilot/agent-sessions/token","AGENT_SESSIONS_TOKEN")}}},39376:(e,t,n)=>{n.d(t,{p:()=>h});var a=n(52811),r=n(38007),i=n(96540),o=n(83880),s=n(53207),l=n(22069),c=n(34901),d=n(47397),u=n(44435),m=n(88011),p=n(66889);function h({excludeFeedback:e,inputRef:t,isLatestMessage:n,isStreaming:h,removeOutdatedContentPreviewItems:f}){let{message:g}=(0,o.V)(),y=(0,c.bP)("activePlugin","currentUserLogin","mode"),x=(0,m.tD)(),v=(0,d.b)(),_=(0,s.nu)(y.activePlugin),b=(0,l.Th)(g,y.currentUserLogin),j="Copilot"===b.name,C="user"===b.type,N=j||(0,l.yh)(b),S=j&&!!g.agentErrors?.length,w=!S&&!!j&&!!g.error&&g.error.isError,I=j&&!e&&(!n||!h)&&!w,k=(0,i.useRef)(null),T=g.interrupted,E=g.clientConfirmations&&g.clientConfirmations.length>0,A=w&&g.error?.retryable,[R,L]=(0,i.useState)([]),[P,D]=(0,i.useState)(void 0),O=(A||T)&&n,M=(0,i.useMemo)(()=>({openLinksInCurrentTab:"assistive"===y.mode,isStreaming:n&&h,extensions:_?.markdownExtensions?_.markdownExtensions.map(e=>e()):[]}),[y.mode,n,h,_?.markdownExtensions]),B=!w&&(I||N&&!!g.content&&!h)&&(!C||!g.confirmations)||C&&!n||w&&n,F=(0,i.useRef)(0);(0,i.useEffect)(()=>{let e=(g.skillExecutions??[]).find(e=>!R.some(t=>t.slug===e.slug&&t.statusMessage===e.statusMessage));if(e){let t=setTimeout(()=>{F.current=Date.now(),L([...R,e]),D(e)},Math.max(0,2e3-(Date.now()-F.current)));return()=>clearTimeout(t)}},[g.skillExecutions,R]),(0,i.useEffect)(()=>{n&&h&&(0,a.i)("Copilot is responding")},[n,h]),(0,i.useEffect)(()=>{n&&!h&&k.current&&(0,a.C)(k.current)},[n,h]);let $=(0,i.useCallback)(async(e,t,n)=>{if(n)n("accepted"===e.state);else{let n=x();await v.sendChatMessage({thread:(0,u.W)(n),content:`@${b.name} ${(0,p.Z)(e.state)} Confirmation: ${t}`,references:g.references??[],topic:n.currentTopic,context:n.context,confirmations:e,customInstructions:n.customInstructions,model:n.model})}},[x,v,b.name,g.references]),U=(0,i.useCallback)(()=>{window.setTimeout(()=>t?.current?.focus(),1)},[t]),V=(0,i.useCallback)(async()=>{let e=x(),t=(0,u.W)(e);t&&(f?.(),U(),(0,r.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_RETRY",mode:e.mode}),await v.retryLastUnsuccessfulChatMessage(t))},[x,f,U,v]),z=(0,i.useCallback)(async e=>{let t=x(),n=(0,u.W)(t);n&&(f?.(),U(),(0,r.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_RETRY_FOR_NEW_SUBTHREAD",mode:t.mode}),await v.retryUserChatMessage(n,g,e))},[x,v,g,f,U]),W=(0,i.useCallback)(async e=>{let t=x(),n=(0,u.W)(t);n&&(f?.(),await v.editUserChatMessage(n,g,e))},[x,v,g,f]);return{author:b,removeOutdatedContentPreviewItems:f,handleConfirmationAction:$,handleRetryErrorMessage:V,handleRetryCopilotResponse:z,handleEditUserMessage:W,hasClientConfirmations:E,isCopilot:j,isUser:C,isAI:N,isAgentError:S,isError:w,isInterrupted:T,myRef:k,rendererConfig:M,renderFeedback:I,shouldShowMessageActions:B,skillExecutionToUseForRespondingText:P,showRetryButton:O}}},84863:(e,t,n)=>{n.d(t,{Y:()=>u});var a=n(21728),r=n(96540),i=n(22069),o=n(31971),s=n(74244),l=n(34901),c=n(47397),d=n(44435);function u(e){let t,n,u,m,p,h,f,g,y,x,v=(0,a.c)(27),_=(0,l.Pk)(),b=(0,c.b)(),{currentTopic:j,messages:C,selectedThreadID:N}=_;v[0]!==_?(t=(0,d.W)(_),v[0]=_,v[1]=t):t=v[1];let S=t,w=(0,r.useRef)(null),I=e||w;return v[2]!==b||v[3]!==C.length||v[4]!==S?(n=()=>{S&&C.length>0&&b.showTopicPicker(!1)},u=[S,C.length,b],v[2]=b,v[3]=C.length,v[4]=S,v[5]=n,v[6]=u):(n=v[5],u=v[6]),(0,r.useEffect)(n,u),v[7]!==j||v[8]!==N?(m=()=>{let e=j?(0,i.P)(j)?j.name:String(j.id):null;N&&e&&s.J.setSelectedTopic(N,e)},p=[N,j],v[7]=j,v[8]=N,v[9]=m,v[10]=p):(m=v[9],p=v[10]),(0,r.useEffect)(m,p),v[11]!==I?(h=()=>{let e=window.setTimeout(()=>{I.current?.focus()},1);return()=>{window.clearTimeout(e)}},f=[I],v[11]=I,v[12]=h,v[13]=f):(h=v[12],f=v[13]),(0,r.useEffect)(h,f),v[14]!==b||v[15]!==_.context?.[0]||v[16]!==_.currentRepository||v[17]!==_.currentTopic?(g=()=>{let e=_.context?.[0]??(o.W.topicsAsReferences?_.currentRepository:_.currentTopic);return e&&b.generateSuggestions(e),()=>{b.clearSuggestions()}},v[14]=b,v[15]=_.context?.[0],v[16]=_.currentRepository,v[17]=_.currentTopic,v[18]=g):g=v[18],v[19]!==b||v[20]!==_.context||v[21]!==_.currentRepository||v[22]!==_.currentTopic||v[23]!==_.selectedThreadID?(y=[b,_.context,_.currentTopic,_.currentRepository,_.selectedThreadID],v[19]=b,v[20]=_.context,v[21]=_.currentRepository,v[22]=_.currentTopic,v[23]=_.selectedThreadID,v[24]=y):y=v[24],(0,r.useEffect)(g,y),v[25]!==I?(x={textAreaRef:I},v[25]=I,v[26]=x):x=v[26],x}},59220:(e,t,n)=>{n.d(t,{a:()=>s});var a=n(96540),r=n(44669),i=n(13468),o=n(99377);function s(e){let{streamingMessage:t,isWaitingOnCopilot:n,messages:s,selectedThreadID:l}=e,c=(0,a.useMemo)(()=>{let e={id:o.Wp,role:"assistant",content:"",createdAt:"",threadID:l||"",references:[],clientSide:!0,messageIndex:-1},a=(0,i.B)(s);return n?[...a,t??e]:a},[s,t,n,l]);return{messages:c,groupedMessages:(0,r.A)(c)}}},5878:(e,t,n)=>{n.d(t,{g:()=>i});var a=n(21728),r=n(96540);function i(e){let t,n=(0,a.c)(2),[i,o]=(0,r.useState)(!1);return n[0]!==e.current?(t=()=>{let t=e.current,n=t?.lastElementChild;if(!n)return;let a=new IntersectionObserver(e=>{let[t]=e;return o(t?.isIntersecting??!0)},{root:t,threshold:1});return a.observe(n),()=>a.disconnect()},n[0]=e.current,n[1]=t):t=n[1],(0,r.useEffect)(t),i}},6612:(e,t,n)=>{n.d(t,{U:()=>d});var a=n(60439),r=n(6110),i=n(96540),o=n(18312),s=n(34901),l=n(47397),c=n(6901);function d(e,t,n,m,p=!1){let[h,f]=(0,i.useState)(void 0),g=(0,i.useCallback)(()=>f(void 0),[]),{topRepositoriesCache:y,currentRepository:x}=(0,s.Pk)(),v=(0,l.b)(),[_,b]=(0,i.useState)([]),[j,C]=(0,i.useState)(!y&&"initial"),N=(0,i.useRef)(void 0),S=(0,o.useRelayEnvironment)(),w=(0,o.useFragment)(a.Sy,h??null),I=m&&""!==m.trim();if(w&&!y&&!e&&!I){let{topRepositories:e}=w,t=u((e.edges||[]).flatMap(e=>e?.node?[(0,o.readInlineData)(a.R6,e.node)]:[])),{ownerLogin:n,name:r}=x??{};x&&!t.find(e=>`${e.ownerLogin}/${e.name}`==`${n}/${r}`)&&t.splice(0,0,{databaseId:x.id,isInOrganization:"Organization"===x.ownerType,name:x.name,nwo:`${x.ownerLogin}/${x.name}`,ownerLogin:x.ownerLogin,ownerAvatarUrl:`/${x.ownerLogin}.png?s=40`}),setTimeout(()=>v.setTopRepositoryTopics(t),10),C(!1),f(void 0)}let k=(0,i.useCallback)(async()=>{try{let e=await (0,o.fetchQuery)(S,a.m,{topRepositoriesFirst:n,owner:I?m:null}).toPromise();f(e?.viewer)}catch{}finally{C(!1)}},[I,m,S,f,n]);return((0,i.useEffect)(()=>{t&&!I&&k()},[k,I,t,m]),(0,i.useEffect)(()=>{let t=async e=>{C(!0);let t=((await new Promise((t,n)=>{(0,o.fetchQuery)(S,a.XD,{searchQuery:I?(0,c.rl)(m,e,p):(0,r.J4)(e,{includeForks:p})}).subscribe({start:e=>{N.current?.unsubscribe(),N.current=e},next:e=>{t(e)},error:e=>{n(e)}})})).search.nodes||[]).flatMap(e=>e?[(0,o.readInlineData)(a.R6,e)]:[]);b(t.length?u(t):[]),C(!1)};e||I?t(e):y&&b(y)},[e,I,m,S,y,p]),(0,i.useEffect)(()=>{v.setTopRepositoryTopics(void 0)},[v,m]),!y||e||I)?{repositories:_,loading:j,resetTopRepoResults:g}:{repositories:y,loading:!1,resetTopRepoResults:g}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:n,name:a,databaseId:r})=>({databaseId:r??0,isInOrganization:n,name:a,nwo:`${e}/${a}`,ownerLogin:e,ownerAvatarUrl:t}))}},80597:(e,t,n)=>{n.d(t,{G:()=>c});var a=n(21728),r=n(55206),i=n(96540),o=n(34901),s=n(6901),l=n(44435);function c(){let e,t=(0,a.c)(1),n=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,l.W)(e),a=(0,r.O)(t);return(0,s.Ym)(n.current,a)?n.current:(n.current=a,a)},t[0]=e):e=t[0];let c=(0,o.pn)(e);return(0,s.iI)()||c}},39818:(e,t,n)=>{n.d(t,{JE:()=>f,Z3:()=>p,bn:()=>m,kw:()=>g,qj:()=>h});var a=n(21728),r=n(97286),i=n(99837),o=n(96540),s=n(80597),l=n(22069),c=n(34901),d=n(47397),u=n(88011);let m="https://github.com/marketplace?type=apps&copilot_app=true",p="@",h=/^@(?<slug>\S+)$/;function f(e){let t,n,i,o,m,p,h=(0,a.c)(25),{agentsPath:f,model:g}=(0,c.bP)("agentsPath","model"),y=(0,u.tD)(),x=(0,d.b)(),v=!!(0,s.G)(),_=g?.hasLimitedCapabilities;h[0]!==y||h[1]!==v||h[2]!==_?(t=e=>{let{messages:t}=y();if(_||v)return{agents:[],showLimit:!1};let n=(0,l.Q7)(t)[0];return n?{agents:e.filter(e=>e.slug===n.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},h[0]=y,h[1]=v,h[2]=_,h[3]=t):t=h[3];let b=t;h[4]!==f?(n=["copilot-chat","agents",f],h[4]=f,h[5]=n):n=h[5],h[6]!==f||h[7]!==x?(i=()=>f?x.fetchAgents(f):[],h[6]=f,h[7]=x,h[8]=i):i=h[8];let j=(void 0===e||e)&&!_&&!v;h[9]!==b||h[10]!==n||h[11]!==i||h[12]!==j?(o={queryKey:n,queryFn:i,select:b,enabled:j},h[9]=b,h[10]=n,h[11]=i,h[12]=j,h[13]=o):o=h[13];let{isLoading:C,data:N,refetch:S,isStale:w,isFetched:I}=(0,r.I)(o);h[14]!==N||h[15]!==I||h[16]!==w||h[17]!==S?(m=async()=>!I||w?(await S()).data:N,h[14]=N,h[15]=I,h[16]=w,h[17]=S,h[18]=m):m=h[18];let k=m,T=N?.agents,E=N?.showLimit??!1;return h[19]!==k||h[20]!==C||h[21]!==T||h[22]!==E||h[23]!==_?(p={loading:C,disabled:_,availableAgents:T,showLimit:E,imperativelyFetch:k},h[19]=k,h[20]=C,h[21]=T,h[22]=E,h[23]=_,h[24]=p):p=h[24],p}function g({inputOnChange:e,inputRef:t}){let n=(0,i.H)({inputRef:t,fallbackEventHandler:e});return(0,o.useCallback)((e="")=>{t.current?.value&&n(" ",[0,0]);let a=`${p}${e}`;n(a,[0,0],a.length)},[n,t])}},51295:(e,t,n)=>{n.d(t,{O:()=>a});function a(e,t){let n={};for(let a of e){let e=t(a);n[e]??(n[e]=[]),n[e].push(a)}return n}},33900:(e,t,n)=>{n.d(t,{Ld:()=>g,M8:()=>y,Tz:()=>j,W5:()=>m,cx:()=>f,r_:()=>b,vn:()=>_,xG:()=>p});var a=n(21728),r=n(26559),i=n(97665),o=n(40458),s=n(94747),l=n(97286),c=n(60039),d=n(96540),u=n(74244);n(34901),n(47397);let m={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},p={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},h=[p.NotFound,p.Unauthorized,p.ServiceUnavailable,p.QuotaExhausted,p.Forbidden,p.RequestFailed],f=256,g=400;function y(e){var t,n;let r,l,c,d,u,f,g,y,_,b,j=(0,a.c)(22),C=(0,i.jE)();j[0]!==C||j[1]!==e?(r=()=>Promise.all(e.map(e=>C.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),j[0]=C,j[1]=e,j[2]=r):r=j[2];let S=r;j[3]!==e?(l=e.map(v),j[3]=e,j[4]=l):l=j[4],j[5]!==l?(c={queries:l},j[5]=l,j[6]=c):c=j[6];let k=(0,o.E)(c);j[7]===Symbol.for("react.memo_cache_sentinel")?(d=["repos-indexing-state"],j[7]=d):d=j[7],j[8]!==e?(u=()=>N(e),j[8]=e,j[9]=u):u=j[9],j[10]!==S||j[11]!==u?(f={mutationKey:d,mutationFn:u,onSuccess:S},j[10]=S,j[11]=u,j[12]=f):f=j[12];let{mutate:T}=(0,s.n)(f);j[13]!==k?(g={requestStatus:0===(n=(t=k.map(x)).map(e=>e.requestStatus)).length?p.Unknown:n.some(e=>h.includes(e))?p.IndexingError:n.every(e=>e===p.CanIndex)?p.CanIndex:(n.every(e=>e===p.Unknown),p.Unknown),code:w(t.map(e=>e.code)),docs:w(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens},j[13]=k,j[14]=g):g=j[14];let E=g,A=E.code===m.Indexing&&E.requestStatus!==p.IndexingError;return j[15]!==S?(y=()=>void S(),j[15]=S,j[16]=y):y=j[16],I(y,1e4*!!A),j[17]!==T?(_=()=>T(),j[17]=T,j[18]=_):_=j[18],j[19]!==E||j[20]!==_?(b=[E,_],j[19]=E,j[20]=_,j[21]=b):b=j[21],b}function x(e){return e.data}function v(e){return{queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>C(e),placeholderData:{requestStatus:p.Unknown,code:m.Unknown,docs:m.Unknown},staleTime:1/0}}function _(e){let t,n,r,o,c,d,u,h,f,g,y,x=(0,a.c)(23),v=(0,i.jE)();x[0]!==v||x[1]!==e?(t=()=>Promise.resolve(v.invalidateQueries({queryKey:["repo-indexing-state",e]})),x[0]=v,x[1]=e,x[2]=t):t=x[2];let _=t;x[3]!==e?(n=["copilot-chat","repo-indexing-state",e],r=()=>C(e),x[3]=e,x[4]=n,x[5]=r):(n=x[4],r=x[5]),x[6]===Symbol.for("react.memo_cache_sentinel")?(o={requestStatus:p.Unknown,code:m.Unknown,docs:m.Unknown},x[6]=o):o=x[6],x[7]!==n||x[8]!==r?(c={queryKey:n,queryFn:r,placeholderData:o,staleTime:1/0},x[7]=n,x[8]=r,x[9]=c):c=x[9];let b=(0,l.I)(c);x[10]===Symbol.for("react.memo_cache_sentinel")?(d=["repo-indexing-state"],x[10]=d):d=x[10],x[11]!==e?(u=()=>N([e]),x[11]=e,x[12]=u):u=x[12],x[13]!==_||x[14]!==u?(h={mutationKey:d,mutationFn:u,onSuccess:_},x[13]=_,x[14]=u,x[15]=h):h=x[15];let{mutate:j}=(0,s.n)(h),S=b.data,w=S.code===m.Indexing&&S.requestStatus!==p.IndexingError;return x[16]!==_?(f=()=>void _(),x[16]=_,x[17]=f):f=x[17],I(f,1e4*!!w),x[18]!==j?(g=()=>j(),x[18]=j,x[19]=g):g=x[19],x[20]!==S||x[21]!==g?(y=[S,g],x[20]=S,x[21]=g,x[22]=y):y=x[22],y}function b(e){let t,n=(0,a.c)(2);n[0]!==e?(t={queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>S(e),staleTime:1/0},n[0]=e,n[1]=t):t=n[1];let r=(0,l.I)(t);return!r.isError&&!!r.data?.canChat}function j(){let e=u.J.getPanelHeight(),t=u.J.getPanelWidth(),n=(0,d.useRef)(null),a=(0,d.useRef)(e),r=(0,d.useRef)(e),i=(0,d.useRef)(null),o=(0,d.useRef)(t),s=(0,d.useRef)(t),[l,c]=(0,d.useState)(e),[m,p]=(0,d.useState)(t),h=(0,d.useRef)(0);(0,d.useEffect)(()=>{h.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,f),window.innerHeight-h.current),x=e=>Math.min(Math.max(e,g),window.innerWidth-2*h.current),v=(0,d.useCallback)(e=>{if(null!==n.current){let t=n.current-e.clientY,i=y(a.current+t);c(i),r.current=i}if(null!==i.current){let t=i.current-e.clientX,n=x(o.current+t);p(n),s.current=n}},[]),_=(0,d.useCallback)(()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_),null!==n.current&&(u.J.setPanelHeight(r.current),n.current=null),null!==i.current&&(u.J.setPanelWidth(s.current),i.current=null)},[v]),b=(0,d.useCallback)((e,t,r)=>{0===e.button&&(e.preventDefault(),r&&(n.current=e.clientY,a.current=l),t&&(i.current=e.clientX,o.current=m),window.addEventListener("mousemove",v),window.addEventListener("mouseup",_))},[l,m,v,_]),j=(0,d.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(l+4);c(t),u.J.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(l-4);c(t),u.J.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=x(m-4);p(t),u.J.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=x(m+4);p(t),u.J.setPanelWidth(t),e.preventDefault()}},[l,m]);return{panelWidth:m,panelHeight:l,startResize:b,onResizerKeyDown:j}}async function C(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,r.kt)()}});if(!t.ok)return{requestStatus:p.RequestFailed,code:m.Unknown,docs:m.Unknown};let n=await t.json();return{requestStatus:n.can_index,code:n.code_status,docs:n.docs_status}}async function N(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,c.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function S(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json",...(0,r.kt)()}});return t.ok?await t.json():{canChat:!1}}function w(e){return e.every(e=>e===m.Indexed)?m.Indexed:e.every(e=>e===m.Unindexed)?m.Unindexed:e.some(e=>e===m.Indexing)?m.Indexing:e.some(e=>e===m.Unindexed)?m.PartiallyIndexed:m.Unknown}function I(e,t){let n,r,i,o,s=(0,a.c)(6),l=(0,d.useRef)(void 0),c=(0,d.useRef)(e);return s[0]!==e?(n=()=>{c.current=e},r=[e],s[0]=e,s[1]=n,s[2]=r):(n=s[1],r=s[2]),(0,d.useEffect)(n,r),s[3]!==t?(i=()=>{if(t>0)return l.current=window.setInterval(()=>c.current(),t),()=>window.clearInterval(l.current)},o=[t],s[3]=t,s[4]=i,s[5]=o):(i=s[4],o=s[5]),(0,d.useEffect)(i,o),l}},22469:(e,t,n)=>{n.d(t,{s:()=>CopilotImageAttacher});var a=n(38007),r=n(22069),i=n(31971),o=n(53850),s=n(7324);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[n,a]=e.reduce(([e,n],a)=>this.isTypeAllowed(a.type,t)?[[...e,a],n]:[e,[...n,a]],[[],[]]);return[n,a]}static getAttachmentLimit(){return i.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return i.W.dotcomChatFileUpload?3932160:512e3}static makeImageReference(e,t){let n,a=crypto.randomUUID();return i.W.dotcomChatFileUpload&&(n=new s.N(a,e,t)),n||(n=new s.J(a,e)),{id:a,attachment:n,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown",n,s=!1){if(0===e.length)return[];let l=null,c=this.state.selectedThreadID,d=this.manager.getPendingThreadId(n),u=i.W.visionSkipThreadCreate;if(n&&!c&&d&&(c=d),!c&&i.W.dotcomChatFileUpload&&!u)try{c=(l=await this.manager.createThread(n,s)).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}let m=this.state.currentReferences.filter(e=>"image"===e.type).length,p=CopilotImageAttacher.getAttachmentLimit();if(m+e.length>p){let e=i.W.attachMultipleImages?`You can add up to ${p} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,o.d)("file_limit_reached"),[]}let h=i.W.dotcomChatFileUpload,f=`Only images below ${h?"3.75MB":"500KB"} are supported${h?"":" during this preview period"}`,g=[],y=[];for(let n of e){if(!CopilotImageAttacher.isTypeAllowed(n.type,this.state.model))return(0,o.d)("included_unsupported_file",{fileTypes:n.type,uploadType:t}),[];if(n.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError(f),(0,o.d)("size_limit_exceeded",{size:n.size}),[];if(null==c&&!u)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let e=CopilotImageAttacher.makeImageReference(n,c);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,o.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let a=(0,r.Vc)(n.name);this.manager.addReference(a,"image-attacher"),0===y.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),y.push({file:n,placeholder:a,reference:e})}return await Promise.all(y.map(async({file:e,placeholder:n,reference:r})=>{try{l&&await r.attachment.prefetch(),this.manager.setImageAttachmentUploaded(r.id,r.attachment),this.manager.replaceReference(n,r),(0,a.BI)("dotcom_chat.vision.image_added",{uploadType:t}),g.push(r)}catch(a){this.manager.removeReference(n);let t="An unexpected error occurred while reading the file";if("string"==typeof a)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,o.d)("ErrorString",{message:a}),Error(a);if(a instanceof Error)if((0,o.d)(a.name,{message:a.message}),"FileSizeError"===a.name)this.manager.addAmbientError(f);else if("GenericServerError"===a.name&&a.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),a;else throw this.manager.addAmbientError(t),a}})).finally(()=>{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}),s&&n&&l&&this.manager.setPendingThreadId(l.id,n),g}constructor(e,t){l(this,"state",void 0),l(this,"manager",void 0),this.state=e,this.manager=t}}},86571:(e,t,n)=>{n.d(t,{E:()=>CopilotTextAttacher,x:()=>s});var a=n(38007),r=n(22069),i=n(65011);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let s="application/x.clipboard",l=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(i.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),n=0,a=0;for(let r=0;r<t;r++){let t=e.charCodeAt(r);0===t?n++:(t<32||t>126)&&a++}let r=n/t,i=a/t;return r<=.1&&i<=.2}async makeReference(e,t){let n=await e.text(),a=e.name||(t?await t:await this.generateFileName(n,e.type));return this.makeReferenceSync(n,a)}makeReferenceSync(e,t){let n=t.split(".").pop();return(0,a.BI)("copilot.attach_pasted_file",{extension:n,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,n){let a;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let i=await e.text();if(!CopilotTextAttacher.isPlainText(i))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(n)a=this.makeReferenceSync(i,n),this.manager.addReference(a,"text-attacher");else{let n=(0,r.Vc)(e.name);this.manager.addReference(n,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0});try{a=await this.makeReference(e,t),this.manager.replaceReference(n,a)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(n)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return a}async generateFileName(e,t){let n=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",r=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${n}

File contents:
\`\`\`
${e}
\`\`\`
`),i=r.ok?l.exec(r.payload)?.[1]:null;return i?(0,a.BI)("copilot.generate_pasted_file_name.success"):(0,a.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),n=t>0&&t<e.length-1,a=n?e.substring(0,t):e,r=n?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${a}${i}${r}`);)i++;return`${a}${i}${r}`}defaultFileName(e){return e===s?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){o(this,"manager",void 0),o(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};o(CopilotTextAttacher,"fileExtensionsCache",void 0)},26268:(e,t,n)=>{n.d(t,{Q:()=>s});var a=n(31971);let r=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,i=/^@(?<id>[a-zA-Z0-9_.-]+)$/,o={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},s={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,n,a,r,...i]=t.pathname.split("/"),s=i.join("/"),l=o.fromUrlType(r);if(n&&a&&l)return{repo:`${n}/${a}`,type:s?l:"repository",id:s}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=r.exec(e)?.groups;if(!t){if(a.W.pasteTextFiles){let t=i.exec(e)?.groups;if(t)return{repo:"",type:"thread-scoped-file",id:t.id}}return}let n=o.fromMentionType(t.type);return n?{repo:t.repo,type:n,id:t.id}:void 0},isEqual:(e,t)=>s.stringify(e)===s.stringify(t),refersTo(e,t){let n=s.for(t);return null!==n&&s.isEqual(e,n)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},66889:(e,t,n)=>{n.d(t,{Z:()=>a});function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}},36721:(e,t,n)=>{n.d(t,{U:()=>o});var a=n(39818),r=n(22069),i=n(26268);let o=function({references:e,agents:t}){this.parser=function(n){let o=n.split(/(\s+)/),s=[];for(let[n,l]of o.entries()){let o=0===n&&a.qj.exec(l)?.groups?.slug,c=o&&t.find(e=>e.slug===o);if(c){s.push({type:"agent-mention",value:l,data:{mentionedAgent:c}});continue}let d=i.Q.parse(l),u=d&&e?.find(e=>i.Q.refersTo(d,e));if(d){s.push({type:"reference-mention",value:l,data:{mentionedReferenceId:u&&(0,r.Vb)(u),referenceMention:d}});continue}let m=s.at(-1);m?.type==="text"?m.value+=l:s.push({type:"text",value:l})}return{type:"root",children:s}}}},13897:(e,t,n)=>{n.d(t,{O:()=>i,_:()=>o});var a=n(47970),r=n(39818);function i(e){let t=new Set;return(0,a.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function o(e){return r.qj.test(e.split(/\s/)[0]??"")}},99168:(e,t,n)=>{n.d(t,{LU:()=>o,SI:()=>d,by:()=>c,g:()=>u,oR:()=>m,oy:()=>i,wt:()=>l});var a=n(22069),r=n(99377);function i(e){return e.split("#")[0]}function o(e,t){let n=i(e),a=t.get(n)??[],r=a.indexOf(e);return a.length>1&&-1!==r?r+1:null}function s(e,t){return`file:${e.name}#${t}`}function l(e,t,n){switch(e.type){case"thread-scoped-file":return o(s(e,t),n)??void 0;case"draft-issue":return o(m({ref:e,messageIndex:t}).id,n)??void 0}}function c(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??r.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function d(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??r.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function u(e){switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":return{type:"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:e.projects,milestone:e.milestone,templateFormValuesById:e.defaultValuesById};default:return null}}function m({ref:e,messageIndex:t,messageId:n,timestamp:a}){switch(e.type){case"thread-scoped-file":return function(e,t,n=r.Wp,a){return{type:"file",id:s(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:a?new Date(a):new Date,isStreaming:!1,isUserEdited:n===r.Wp}}(e,t,n,a);case"draft-issue":return function({ref:e,messageId:t=r.Wp,messageIndex:n}){return{type:"new-issue",id:`new-issue:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,assignees:e.assignees??[],labels:e.labels??[],issueType:e.issueType,projects:e.projects??[],milestone:e.milestone,isUserEdited:t===r.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{}}}({ref:e,messageIndex:t,messageId:n});default:return null}}},10079:(e,t,n)=>{var a,r,i,o=n(32420),s=n(16058),l=n(65980),c=n(74848),d=n(21728);function u(e){let t,n=(0,d.c)(2);return n[0]!==e.children?(t=(0,c.jsx)(c.Fragment,{children:e.children}),n[0]=e.children,n[1]=t):t=n[1],t}try{u.displayName||(u.displayName="App")}catch{}var m=n(25745),p=n(77191),h=n(47397),f=n(39627),g=n(52523),y=n(84905),x=n(96540);let v={header:"AgentsView-module__header--EkfyX",titleWrapper:"AgentsView-module__titleWrapper--IBUa6",title:"AgentsView-module__title--hjQkI",description:"AgentsView-module__description--kQPCc",input:"AgentsView-module__input--xGGu6",listWrapper:"AgentsView-module__listWrapper--J8G5b",list:"AgentsView-module__list--Fk8ib"};var _=n(38621),b=n(97665),j=n(97286),C=n(94747),N=n(64262),S=n(60039),w=n(15822);let I=JSON.parse('[{"pull":{"id":1,"number":1,"state":"closed","title":"Update #react_props in controller","reviewable_state":"draft","url":"http://github.localhost:80/monalisa/smile/pull/1","labels":[],"comments":0,"assignees_avatar_urls":[],"created_at":"2025-06-23T14:32:33.000-04:00","updated_at":"2025-06-23T14:36:33.000-04:00","merged_at":null,"closed_at":"2025-06-23T14:36:32.000-04:00","author":"monalisa","head_sha":"40d1fd33cf092a2ecb2abb7bf4b9699e9a288269","repository_nwo":"monalisa/smile"},"resource_type":"pull","resource_id":1,"latest_session_updated_at":"2025-04-10T15:28:12.164448308Z","latest_session_state":"in_progress","session_count":2}]');var k=n(29710);function T(e){return setTimeout(e,3e3)}let E=(e,t)=>t.map(t=>({...t,pull:e[t.resource_id]}));var A=n(78168),R=n(42265),L=n(67307),P=n(52369),D=n(81584),O=n(64231),M=n(89169);let B={ListItemOverride:"TaskListItem-module__ListItemOverride--XN37v",titleContainerOverride:"TaskListItem-module__titleContainerOverride--AQ_vT",pullRequest:"TaskListItem-module__pullRequest--nVRKz",titleOverride:"TaskListItem-module__titleOverride--AnlQ1",leadingVisualOverride:"TaskListItem-module__leadingVisualOverride--ifahL"};var F=n(81346),$=n(93715);function U(e){let t,n,a,r,i,o,s=(0,d.c)(23),{pullRequest:l,state:u,revisionCount:m,lastSessionStartDate:p}=e;e:{let e;if(l.inMergeQueue){let e;s[0]===Symbol.for("react.memo_cache_sentinel")?(e={icon:_.GitMergeQueueIcon,color:"attention.fg","data-testid":"icon-git-merge-queue"},s[0]=e):e=s[0],t=e;break e}if("open"===l.state){if("waiting_for_user"===u||"completed"===u){let e;s[1]===Symbol.for("react.memo_cache_sentinel")?(e={icon:_.CheckCircleFillIcon,color:"success.fg","data-testid":"icon-check-circle-fill"},s[1]=e):e=s[1],t=e;break e}if("failed"===u||"timed_out"===u){let e;s[2]===Symbol.for("react.memo_cache_sentinel")?(e={icon:_.StopIcon,color:"danger.fg","data-testid":"icon-stop"},s[2]=e):e=s[2],t=e;break e}if("in_progress"===u){let e;s[3]===Symbol.for("react.memo_cache_sentinel")?(e={icon:V,color:"attention.fg","data-testid":"icon-spinning-circle"},s[3]=e):e=s[3],t=e;break e}if("idle"===u){let e;s[4]===Symbol.for("react.memo_cache_sentinel")?(e={icon:_.DotFillIcon,color:"fg.muted","data-testid":"icon-dot"},s[4]=e):e=s[4],t=e;break e}if("cancelled"===u){let e;s[5]===Symbol.for("react.memo_cache_sentinel")?(e={icon:_.SkipIcon,color:"fg.muted","data-testid":"icon-skip"},s[5]=e):e=s[5],t=e;break e}}if("merged"===l.state){let e;s[6]===Symbol.for("react.memo_cache_sentinel")?(e={icon:_.GitMergeIcon,color:"done.fg","data-testid":"icon-git-merge"},s[6]=e):e=s[6],t=e;break e}if("closed"===l.state){let e;s[7]===Symbol.for("react.memo_cache_sentinel")?(e={icon:_.GitPullRequestClosedIcon,color:"danger.fg","data-testid":"icon-skip"},s[7]=e):e=s[7],t=e;break e}s[8]===Symbol.for("react.memo_cache_sentinel")?(e={icon:_.DotFillIcon,color:"fg.muted","data-testid":"icon-idle"},s[8]=e):e=s[8],t=e}let h=t;s[9]!==l.title||s[10]!==l.url?(n=(0,c.jsx)(D.ao,{containerClassName:`${B.titleContainerOverride} ${B.pullRequest}`,headingClassName:B.titleOverride,value:l.title,href:l.url}),s[9]=l.title,s[10]=l.url,s[11]=n):n=s[11],s[12]!==p?(a=(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(P.V,{children:(0,c.jsx)(M.A,{format:"auto",datetime:p})})}),s[12]=p,s[13]=a):a=s[13],s[14]!==h?(r=(0,c.jsx)(R.B,{children:(0,c.jsx)(L.e,{className:B.leadingVisualOverride,...h})}),s[14]=h,s[15]=r):r=s[15];let f=`${l.repository_nwo}#${l.number} \xb7 ${m} revision${m>1?"s":""} \xb7 ${"merged"===l.state?"Merged":"closed"===l.state?"Closed":u&&function(e){switch(e){case"waiting_for_user":return"Waiting for user";case"in_progress":return"In progress";case"completed":return"Completed";case"failed":return"Failed";case"cancelled":return"Cancelled";case"timed_out":return"Timed out";case"idle":return"Idle";default:return"Unknown state"}}(u)}`;return s[16]!==f?(i=(0,c.jsx)(F.Q,{children:(0,c.jsx)($.U,{children:f})}),s[16]=f,s[17]=i):i=s[17],s[18]!==n||s[19]!==a||s[20]!==r||s[21]!==i?(o=(0,c.jsxs)(A.c,{className:B.ListItemOverride,title:n,metadata:a,children:[r,i]}),s[18]=n,s[19]=a,s[20]=r,s[21]=i,s[22]=o):o=s[22],o}function V(){return(0,c.jsx)(O.gX,{animated:!0})}try{U.displayName||(U.displayName="TaskListItem")}catch{}var z=n(31971),W=n(52311),H=n(34614),q=n(63867);async function G(e=""){let t=await (0,S.lS)(`/_filter/repositories?q=${encodeURIComponent(e)}`);return t.ok?(await t.json()).repositories.map(e=>({name:e.nameWithOwner,enabled:!0,id:e.id})):[]}function K(){let e,t,n,a,r,i,o,s,l,u,f,y,A,R,L,P=(0,d.c)(32),D=z.W.agentSessionsDirectCreationEnabled,O=(0,h.b)(),[M,B]=(0,x.useState)(null),{tasks:F,isLoading:$,isError:U,createSession:V,isCreatingSession:K}=function(){let e,t,n,a,r,i,o,s,l,c=(0,d.c)(27),{idToPullRequestMap:u,tasks:m,useMockSessionData:p,sessionsPollingInterval:h}=(0,N.X)(),f=void 0!==p&&p,g=(0,b.jE)();c[0]!==f?(e=["agent-tasks",f],t=async()=>{if(f)return I;let e=await (0,w.v)({endpoint:"/copilot/agent-tasks"});return E(e.id_to_pull_request_map,e.tasks)},c[0]=f,c[1]=e,c[2]=t):(e=c[1],t=c[2]),c[3]!==u||c[4]!==m?(n=u&&m?E(u,m):void 0,c[3]=u,c[4]=m,c[5]=n):n=c[5];let y=!f&&(void 0===h?3e3:h);c[6]!==e||c[7]!==t||c[8]!==n||c[9]!==y?(a={queryKey:e,queryFn:t,initialData:n,refetchInterval:y},c[6]=e,c[7]=t,c[8]=n,c[9]=y,c[10]=a):a=c[10];let x=(0,j.I)(a);c[11]!==f?(r=async e=>{let{nwo:t,problemStatement:n}=e;return f?(await new Promise(T),{session:k.M[0]}):(await (0,S.lS)(`/${t}/agent-sessions`,{method:"POST",body:{problem_statement:n}})).json()},c[11]=f,c[12]=r):r=c[12],c[13]!==g||c[14]!==f?(i=(e,t)=>{f?g.setQueryData(["agent-tasks",f],e=>[{resource_type:"pull",resource_id:Math.floor(1e4*Math.random()),session_count:1,latest_session_updated_at:new Date().toISOString(),latest_session_state:"in_progress",pull:{id:Math.floor(1e4*Math.random()),number:Math.floor(1e3*Math.random()),title:`Fix: ${t.problemStatement}`,state:"open",repository_nwo:"example/repo",reviewable_state:"draft",labels:[],comments:1,author:"Copilot",created_at:"2023-10-01T12:00:00Z",updated_at:"2023-10-01T12:00:00Z",head_sha:"abc123",url:"https://github.com/example/repo/pull/1"}},...void 0===e?[]:e]):g.invalidateQueries({queryKey:["agent-tasks",f]})},c[13]=g,c[14]=f,c[15]=i):i=c[15],c[16]!==r||c[17]!==i?(o={mutationFn:r,onSuccess:i},c[16]=r,c[17]=i,c[18]=o):o=c[18];let v=(0,C.n)(o);return c[19]!==x.data?(s=x.data||[],c[19]=x.data,c[20]=s):s=c[20],c[21]!==v.isPending||c[22]!==v.mutate||c[23]!==x.isError||c[24]!==x.isLoading||c[25]!==s?(l={tasks:s,isLoading:x.isLoading,isError:x.isError,createSession:v.mutate,isCreatingSession:v.isPending},c[21]=v.isPending,c[22]=v.mutate,c[23]=x.isError,c[24]=x.isLoading,c[25]=s,c[26]=l):l=c[26],l}();P[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],P[0]=e):e=P[0],(0,x.useEffect)(Q,e),P[1]!==O?(t=()=>{O.selectThread(null,{includeThreads:!1,clearTopic:!0})},n=[O],P[1]=O,P[2]=t,P[3]=n):(t=P[2],n=P[3]),(0,x.useEffect)(t,n),P[4]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{let e=async()=>{let e=await G();e.length>0&&B(e[0])};D&&e()},r=[D],P[4]=a,P[5]=r):(a=P[4],r=P[5]),(0,x.useEffect)(a,r),P[6]!==V||P[7]!==O||P[8]!==M?(i=async e=>{let t=e.trim();""!==t&&(D&&M?V({nwo:M.name,problemStatement:t}):O.sendChatMessage({content:t,thread:null,references:[]}))},P[6]=V,P[7]=O,P[8]=M,P[9]=i):i=P[9];let Y=i;P[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)(g.A.Icon,{icon:(0,c.jsx)(_.DependabotIcon,{size:32})}),s=(0,c.jsx)("h2",{className:v.title,children:"Copilot deals with your issues"}),P[10]=o,P[11]=s):(o=P[10],s=P[11]),P[12]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsxs)("div",{className:v.titleWrapper,children:[o,s,(0,c.jsxs)("p",{className:v.description,children:["Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."," ",(0,c.jsx)(H.A,{href:"https://gh.com/copilot-coding-agent-docs",inline:!0,children:"Learn more about Copilot coding agent"}),"."]})]}),P[12]=l):l=P[12],P[13]!==K||P[14]!==M?.name?(u=D?(0,c.jsx)(W.P,{repositoryLoader:G,selectionVariant:"single",selectAllOption:!1,currentSelection:void 0,onSelect:e=>{e&&B(e)},buttonText:M?.name||"Select repository",additionalButtonProps:{disabled:K}}):null,P[13]=K,P[14]=M?.name,P[15]=u):u=P[15];let Z=D&&!M,X=D&&K;return P[16]!==Y||P[17]!==K||P[18]!==Z||P[19]!==X||P[20]!==u?(f=(0,c.jsx)(p.V,{hideAttachmentButton:!0,placeholder:"Add a light/dark mode switcher",size:"large",onSubmit:Y,submitButtonLabel:"Start task",submitInProgress:K,extraToolbarLeft:u,submitDisabled:Z,disabled:X}),P[16]=Y,P[17]=K,P[18]=Z,P[19]=X,P[20]=u,P[21]=f):f=P[21],P[22]===Symbol.for("react.memo_cache_sentinel")?(y=(0,c.jsx)(m.h,{}),P[22]=y):y=P[22],P[23]!==f?(A=(0,c.jsxs)("div",{className:v.header,children:[l,(0,c.jsxs)("div",{className:v.input,children:[f,y]})]}),P[23]=f,P[24]=A):A=P[24],P[25]!==U||P[26]!==$||P[27]!==F?(R=$?(0,c.jsx)(q.A,{}):U?(0,c.jsx)("div",{children:"Sorry something went wrong"}):(0,c.jsx)(g.A.Section,{children:(0,c.jsx)(J,{tasks:F})}),P[25]=U,P[26]=$,P[27]=F,P[28]=R):R=P[28],P[29]!==A||P[30]!==R?(L=(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(g.A.Container,{children:[A,R]})}),P[29]=A,P[30]=R,P[31]=L):L=P[31],L}function Q(){(0,f.D)("Agents \xb7 GitHub Copilot")}function J(e){let t,n,a=(0,d.c)(4),{tasks:r}=e;return a[0]!==r?(t=r.map(Y),a[0]=r,a[1]=t):t=a[1],a[2]!==t?(n=(0,c.jsx)("div",{className:v.listWrapper,children:(0,c.jsx)(y.u,{title:"Pull Requests",titleHeaderTag:"h2",className:v.list,children:t})}),a[2]=t,a[3]=n):n=a[3],n}function Y(e){return(0,c.jsx)(U,{state:e.latest_session_state,merged:null!==e.pull.merged_at,lastSessionStartDate:e.latest_session_updated_at,pullRequest:e.pull,revisionCount:e.session_count},e.pull.id)}try{K.displayName||(K.displayName="AgentsView")}catch{}try{J.displayName||(J.displayName="TaskList")}catch{}var Z=n(48053),X=n(85647),ee=n(96679);let et="agents",en="/copilot/agents";function ea(e,t,n,a,r,i,o,s,l,c,d=0,u=!1){let m=new Date("2025-06-04T20:00:00.000Z"),p=new Date(m.getTime()-24*c*36e5),h=new Date(m.getTime()-24*d*36e5);return{id:e,number:t,state:n,title:a,reviewable_state:r,url:`http://github.localhost:80/monalisa/smile/pull/${t}`,labels:i,comments:o,assignees_avatar_urls:Array.from({length:s},(t,n)=>`https://avatars.githubusercontent.com/u/${e+n}?v=4`),created_at:p.toISOString(),updated_at:h.toISOString(),merged_at:"merged"===n?h.toISOString():void 0,closed_at:"closed"===n||"merged"===n?h.toISOString():void 0,author:l,head_sha:`${a.toLowerCase().replace(/\s+/g,"")}123456789abcdef0123456789abcdef01234567`.substring(0,40),repository_nwo:"monalisa/smile",inMergeQueue:u}}function er(e,t,n,a,r,i,o,s=0,l=0,c){let d=new Date("2025-06-04T20:00:00.000Z"),u=new Date(d.getTime()-60*o*6e4),m=new Date(d.getTime()-60*s*6e4);return{id:e,name:t,user_id:n,agent_id:a,state:r,owner_id:9919,repo_id:4,resource_type:"pull",resource_id:i,created_at:u.toISOString(),last_updated_at:m.toISOString(),completed_at:"completed"===r||"failed"===r?m.toISOString():void 0,workflow_run_id:12340+Math.floor(30*Math.random()),log_entries:[],error:c?{message:c}:null,premium_requests:l}}function ei(e,t){return{resource_type:"pull",resource_id:e.id,session_count:1,latest_session_updated_at:t.last_updated_at,latest_session_state:t.state,pull:e}}(()=>{let e=["cancelled","idle","in_progress","waiting_for_user","completed","failed","timed_out"],t={titles:["Refactor database queries for performance","Implement dark mode theme","Optimize API response times","Add mobile responsive design","Implement caching layer","Add internationalization support","Update documentation and README","Fix critical security vulnerability","Add user authentication system","Initial project setup and configuration","Implement real-time notifications","Add search functionality","Optimize bundle size","Add unit tests coverage","Implement error handling","Add accessibility features","Optimize database connections","Implement feature flags","Migrate to TypeScript","Implement CI/CD pipeline","Add monitoring and alerts"],authors:["alice-dev","bob-backend","charlie-frontend","diana-fullstack","eve-designer","frank-security"],labels:[["performance","database"],["ui","theme","enhancement"],["performance","api"],["mobile","responsive","ui"],["performance","caching","backend"],["i18n","feature","localization"]],errorMessages:["timeout","validation error","resource conflict","permission denied"]},n=1;return[...["open","closed","merged"].flatMap(a=>e.map(e=>{let r=(n-1)%t.titles.length,i=t.titles[r],o=t.authors[(n-1)%t.authors.length],s=t.labels[r%t.labels.length],l=ei(ea(n,n,a,i,Math.random()>.7?"draft":"ready",s,Math.floor(15*Math.random())+1,Math.floor(3*Math.random()),o,n,n),er(`session-${n.toString().padStart(3,"0")}`,`${i.split(" ").slice(0,3).join(" ")} - ${e}`,0x996718+n,1143300+n,e,n,n,n,Math.floor(10*Math.random()),"failed"===e?`Operation failed due to ${t.errorMessages[Math.floor(4*Math.random())]}`:void 0));return n++,l})),ei(ea(n,n,"open","Add feature flags support (in merge queue)","ready",["feature","flags"],5,1,"alice-dev",21,0,!0),er(`session-${n.toString().padStart(3,"0")}`,"Add feature flags support - in_progress",0x996718+n,1143300+n,"in_progress",n,1,0,2,void 0))]})();var eo=n(47139);function es(e){let t,n,a,r=(0,d.c)(6),{onLinkClick:i}=e,o=(0,X.zy)(),s=ee.fV?.pathname||o?.pathname||"";r[0]!==i?(t=(e,t)=>{i?.(e,t)},r[0]=i,r[1]=t):t=r[1];let l=t,u=s===en?"page":void 0;return r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(eo.A,{variant:"success",children:"Preview"}),r[2]=n):n=r[2],r[3]!==l||r[4]!==u?(a=(0,c.jsx)(Z.Vx,{"aria-current":u,displayName:"Agents",href:en,icon:_.DependabotIcon,id:et,onLinkClick:l,label:n}),r[3]=l,r[4]=u,r[5]=a):a=r[5],a}try{es.displayName||(es.displayName="AgentsViewNavigation")}catch{}function el(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ec=/\/copilot\/agents/;let AgentsPlugin=class AgentsPlugin{matchPage(e){return!!e&&ec.test(e.pathname)}matchView(e){return!!e&&ec.test(e.pathname)}constructor(){el(this,"id",et),el(this,"displayName","Agents"),el(this,"routes",[ec]),el(this,"ViewComponent",K),el(this,"NavigationComponent",es)}};var ed=n(53207),eu=n(22069),em=n(34901),ep=n(28120),eh=n(96615),ef=n(68415);let eg="spark",ey="/spark",ex={trailingVisual:"SparkNavigation-module__trailingVisual--qCzSd"};function ev(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(Z.Vx,{"aria-current":ee.fV.pathname===ey?"page":void 0,displayName:"Spark",href:ey,icon:_.SparkleFillIcon,id:eg,contextMenuComponent:(0,c.jsx)(_.ArrowUpRightIcon,{className:ex.trailingVisual})}),t[0]=e):e=t[0],e}try{ev.displayName||(ev.displayName="SparkNavigation")}catch{}function e_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let eb=/\/copilot\/spark/;let SparkPlugin=class SparkPlugin{matchView(e){return this.routes.some(t=>t.test(e.pathname))}constructor(){e_(this,"id",eg),e_(this,"displayName","Spark"),e_(this,"routes",[eb]),e_(this,"NavigationComponent",ev)}};var ej=n(18312),eC=n(33005),eN=n(66343),eS=n(38007),ew=n(10871),eI=n(95726);let ek={container:"ImmersiveDisabled-module__container--EDOnQ",content:"ImmersiveDisabled-module__content--dpYC9",footer:"ImmersiveDisabled-module__footer--xPpOC",bannerContainer:"ImmersiveDisabled-module__bannerContainer--Y_iqm"};function eT(){let e,t,n=(0,d.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:ek.content,children:(0,c.jsx)(eN.A,{})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsxs)("div",{className:ek.container,children:[e,(0,c.jsx)("div",{className:ek.footer,children:(0,c.jsx)("div",{className:ek.bannerContainer,children:(0,c.jsx)(eI.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,c.jsx)(ew.z,{as:"a",href:"https://github.com/settings/copilot",onClick:eE,children:"Settings"})})})})]}),n[1]=t):t=n[1],t}function eE(){return(0,eS.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"})}try{eT.displayName||(eT.displayName="ImmersiveDisabled")}catch{}var eA=n(31637),eR=n(74244),eL=n(6901),eP=n(68714),eD=n(34164),eO=n(99168);function eM(e){let t,n=(0,d.c)(7),{messageId:a,messageIndex:r,messageTimestamp:i}=e,{openPreviewPane:o,openItem:s,updateItem:l}=(0,eC.xx)();return n[0]!==a||n[1]!==r||n[2]!==i||n[3]!==s||n[4]!==o||n[5]!==l?(t=(e,t)=>{let n;switch(e.type){case"file":n=(0,eO.by)(e,a,i);break;case"thread-scoped-file":n=(0,eO.oR)({ref:e,messageIndex:r,messageId:a,timestamp:i});break;case"draft-issue":n=(0,eO.oR)({ref:e,messageIndex:r,messageId:a});break;case"issue":n=(0,eO.SI)(e,a);break;default:return}t?.preventDefault(),l(n),s(n.id),o()},n[0]=a,n[1]=r,n[2]=i,n[3]=s,n[4]=o,n[5]=l,n[6]=t):t=n[6],t}var eB=n(5878),eF=n(70179),e$=n(31075),eU=n(69676),eV=n(82678),ez=n(10569),eW=n(87330),eH=n(15385);"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(e,t,n){let a=Number(4294967295n&t),r=Number(t>>32n);this.setUint32(e+4*!n,a,n),this.setUint32(e+4*!!n,r,n)}});var eq=e=>new DataView(new ArrayBuffer(e)),eG=e=>new Uint8Array(e.buffer||e),eK=e=>(new TextEncoder).encode(String(e)),eQ=e=>Math.min(0xffffffff,Number(e)),eJ=e=>Math.min(65535,Number(e));function eY(e,t=e){return new ReadableStream({async pull(t){let n=0;for(;t.desiredSize>n;){let r=await e.next();if(!r.value){t.close();break}{var a;let e="string"==typeof(a=r.value)?eK(a):a instanceof Uint8Array?a:eG(a);t.enqueue(e),n+=e.byteLength}}},cancel(e){t.throw?.(e)}})}function eZ(e,t,n){var a,r;let[i,o]=t?t instanceof Uint8Array?[t,1]:ArrayBuffer.isView(t)||t instanceof ArrayBuffer?[eG(t),1]:[eK(t),0]:[void 0,0];if(e instanceof File)return{o:eX(i||eK(e.name)),u:BigInt(e.size),l:o};if(e instanceof Response){let t=e.headers.get("content-disposition"),a=t&&t.match(/;\s*filename\*?\s*=\s*(?:UTF-\d+''|)["']?([^;"'\r\n]*)["']?(?:;|$)/i),r=a&&a[1]||e.url&&new URL(e.url).pathname.split("/").findLast(Boolean),s=r&&decodeURIComponent(r),l=n||+e.headers.get("content-length");return{o:eX(i||eK(s)),u:BigInt(l),l:o}}return i=eX(i,void 0!==e||void 0!==n),"string"==typeof e?{o:i,u:BigInt(eK(e).length),l:o}:e instanceof Blob?{o:i,u:BigInt(e.size),l:o}:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?{o:i,u:BigInt(e.byteLength),l:o}:{o:i,u:(a=e,(r=n)>-1?BigInt(r):a?void 0:0n),l:o}}function eX(e,t=1){if(!e||e.every(e=>47===e))throw Error("The file must have a name.");if(t)for(;47===e[e.length-1];)e=e.subarray(0,-1);else 47!==e[e.length-1]&&(e=new Uint8Array([...e,47]));return e}var e0=new Uint32Array(256);for(let e=0;e<256;++e){let t=e;for(let e=0;e<8;++e)t=t>>>1^(1&t&&0xedb88320);e0[e]=t}function e1(e,t=0){t^=-1;for(var n=0,a=e.length;n<a;n++)t=t>>>8^e0[255&t^e[n]];return(-1^t)>>>0}function e2(e,t,n=0){let a=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,r=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;t.setUint16(n,a,1),t.setUint16(n+2,r,1)}var e3=new TextDecoder("utf8",{fatal:1});async function*e4(e){let{i:t}=e;if("then"in t&&(t=await t),t instanceof Uint8Array)yield t,e.m=e1(t,0),e.u=BigInt(t.length);else{e.u=0n;let n=t.getReader();for(;;){let{value:t,done:a}=await n.read();if(a)break;e.m=e1(t,e.m),e.u+=BigInt(t.length),yield t}}}function e5(e){return e instanceof File||e instanceof Response?[[e],[e]]:[[e.input,e.name,e.size],[e.input,e.lastModified]]}var e6=e=>(function(e){let t=BigInt(22),n=0n,a=0;for(let r of e){if(!r.o)throw Error("Every file must have a non-empty name.");if(void 0===r.u)throw Error(`Missing size for file "${(new TextDecoder).decode(r.o)}".`);let e=r.u>=4294967295n,i=n>=4294967295n;n+=BigInt(46+r.o.length+(e&&8))+r.u,t+=BigInt(r.o.length+46+(12*i|28*e)),a||(a=e)}return(a||n>=4294967295n)&&(t+=BigInt(76)),t+n})(function*(e){for(let t of e)yield eZ(...e5(t)[0])}(e)),e7=n(93116);let e8={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--woWrK"};function e9(e){let t,n,a,r,i=(0,d.c)(5),{regionName:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(e7.E.Visual,{children:(0,c.jsx)(_.AlertIcon,{size:"medium"})}),n=(0,c.jsx)(e7.E.Heading,{children:"Something went wrong"}),i[0]=t,i[1]=n):(t=i[0],n=i[1]),i[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(H.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),i[2]=a):a=i[2],i[3]!==o?(r=(0,c.jsx)("div",{className:e8.errorFallbackContainer,children:(0,c.jsxs)(e7.E,{children:[t,n,(0,c.jsxs)(e7.E.Description,{children:[o," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",a,"."]})]})}),i[3]=o,i[4]=r):r=i[4],r}try{e9.displayName||(e9.displayName="ErrorFallback")}catch{}let te={container:"ContentPreview-module__container--bV98v",toolbar:"ContentPreview-module__toolbar--b58FL",actions:"ContentPreview-module__actions--AGnBu",tabsContainer:"ContentPreview-module__tabsContainer--bNywg",tabs:"ContentPreview-module__tabs--Si9sh",rightDivider:"ContentPreview-module__rightDivider--Ta3Js",leftDivider:"ContentPreview-module__leftDivider--X7WDV",content:"ContentPreview-module__content--o15no"};var tt=n(83831),tn=n(83987),ta=n(1896),tr=n(98386),ti=n(46309);let to={container:"DraftIssueTreeBlock-module__container--Qc8JY",rootNode:"DraftIssueTreeBlock-module__rootNode--nK1YZ",inlineButton:"DraftIssueTreeBlock-module__inlineButton--JGx_e",truncateText:"DraftIssueTreeBlock-module__truncateText--gyBpg",subIssueHeader:"DraftIssueTreeBlock-module__subIssueHeader--hSiZN"};var ts=n(30581);let tl={anchor:"VersionSelector-module__anchor--HA1Ko"};function tc(e){let t,n,a,r,i,o=(0,d.c)(16),{item:s,onVersionSelect:l}=e,{versionedItems:u,openItem:m}=(0,eC.xx)(),p=(0,eO.oy)(s.id),h=u.get(p)??[],f=h.indexOf(s.id);if((0,x.useEffect)(()=>{l&&h.length>1&&l(`Version${f+1}`)},[f,l,h.length]),h.length<=1)return null;let g=ez.W,y=f+1;o[0]!==y?(t=(0,c.jsx)(ez.W.Button,{variant:"invisible",className:tl.anchor,children:(0,c.jsx)(ts.g,{version:y,"data-testid":"version-selector"})}),o[0]=y,o[1]=t):t=o[1];let v=ez.W,_=eH.l;o[2]!==s.id||o[3]!==l||o[4]!==m?(n=(e,t)=>(0,c.jsxs)(eH.l.Item,{onSelect:()=>{m(e),l&&l(`Version${t+1}`)},selected:e===s.id,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(ts.g,{version:t+1})}),"Version ",t+1]},e),o[2]=s.id,o[3]=l,o[4]=m,o[5]=n):n=o[5];let b=h.map(n);return o[6]!==_||o[7]!==b?(a=(0,c.jsx)(_,{selectionVariant:"single",children:b}),o[6]=_,o[7]=b,o[8]=a):a=o[8],o[9]!==v.Overlay||o[10]!==a?(r=(0,c.jsx)(v.Overlay,{children:a}),o[9]=v.Overlay,o[10]=a,o[11]=r):r=o[11],o[12]!==g||o[13]!==t||o[14]!==r?(i=(0,c.jsxs)(g,{children:[t,r]}),o[12]=g,o[13]=t,o[14]=r,o[15]=i):i=o[15],i}try{tc.displayName||(tc.displayName="VersionSelector")}catch{}var td=n(653),tu=n(21059),tm=n(13432),tp=n(42080),th=n(75367),tf=n(2724),tg=n(57119),ty=n(96240);async function tx(e,t,n,a=null,r=!1,i=[],o=[],s=!0){try{let l=await (0,tg.$)({issueMetadata:n,environment:t});if(l.errors&&l.errors.length>0)throw Error(l.errors.map(e=>e.message).join(", "));let c=l.issue,d=c.id;if(i.push(c),o.length>0&&function(e,t,n){for(let a of t)(0,ty.Z)({environment:n,issueId:e,projectId:a.id})}(c.id,o,t),void 0!==e.children&&e.children.length>0&&s&&await Promise.all(e.children.map(e=>{let r={repositoryId:n.repositoryId,title:e.item.name,body:e.item.body,labelIds:n.labelIds,assigneeIds:n.assigneeIds,milestoneId:n.milestoneId,issueTypeId:n.issueTypeId,issueTemplate:a,parentIssueId:d};return tx(e,t,r,a,!1,i,o)})),r)return{parentIssue:c,createdIssues:i}}catch(e){return e}}function tv({issueTemplate:e,issueNode:t,issueFormRef:n,isBulkCreate:a,onClose:r,onCreateSuccess:i,onCreateBulkSuccess:o}){let[s,l]=x.useState(!1),d=x.useRef(null),{repository:u}=(0,tu.u)(),m=!e&&!u?.isBlankIssuesEnabled,{labels:p,assignees:h,projects:f,milestone:g,issueType:y,clearSessionData:v}=(0,tu.u)(),{sendAnalyticsEvent:_}=(0,th.s)(),b=(0,ej.useRelayEnvironment)(),j=(0,x.useCallback)(()=>{v(),n.current?.clearSessionStorage()},[v,n]),C=(0,x.useCallback)(()=>{j(),r?.()},[j,r]),N=async()=>{let r;if(void 0===t||void 0===u)return;let s={repositoryId:u.id,title:t.item.name,body:t.item.body,labelIds:p.length>0?p.map(e=>e.id):void 0,assigneeIds:h.length>0?h.map(e=>e.id):void 0,milestoneId:g?.id,issueTypeId:y?.id,issueTemplate:e?.fileName};if(e&&(0,tm.GQ)(e.data)&&n.current){let e=n.current.getInvalidInputs();e.length>0?r=r||e[0]:s.body=n.current.markdown()??""}if(r)return void r?.focus();let l=await tx(t,b,s,e?.fileName,!0,[],f,a);l instanceof Error||l&&l.parentIssue&&(_("analytics.click","ISSUE_CREATE_NEW_ISSUE_BUTTON",{issueId:l.parentIssue.id,issueNumber:l.parentIssue.number,issueNWO:`${l.parentIssue.repository.owner.login}/${l.parentIssue.repository.name}`}),C(),a?o(l):i({issue:l.parentIssue,createMore:!1}))};if(m)return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tp.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:d,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),l(!0)},children:"Create"}),s&&(0,c.jsx)(tf.l,{title:"Select a template",onClose:()=>l(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>l(!1)}],returnFocusRef:d,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."})]});if(z.W.draftIssueTree)if(t?.parent!==null)return null;else return(0,c.jsx)(tp.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-with-bulk-option-button",ref:d,showKeybindingHint:!0,onClick:async e=>{e.preventDefault(),await N()},children:a?"Create all":"Create"});return(0,c.jsx)(td.l,{hideCreateMore:!0,className:"width-auto"})}try{tv.displayName||(tv.displayName="CreateIssueButton")}catch{}var t_=n(58314),tb=n(13233),tj=n(7096);function tC(e){let t,n,a,r,i,o=(0,d.c)(20),{className:s,messageId:l,messageIndex:u,messageTimestamp:m,references:p,size:h}=e;o[0]!==l||o[1]!==u||o[2]!==m?(t={messageId:l,messageIndex:u,messageTimestamp:m},o[0]=l,o[1]=u,o[2]=m,o[3]=t):t=o[3];let f=eM(t),{updateItem:g,versionedItems:y}=(0,eC.xx)();return o[4]!==l||o[5]!==u||o[6]!==m||o[7]!==p||o[8]!==g?(n=()=>{for(let e of p){let t=(0,eO.oR)({ref:e,messageIndex:u,messageId:l,timestamp:m});null!=t&&g(t)}},a=[l,u,m,p,g],o[4]=l,o[5]=u,o[6]=m,o[7]=p,o[8]=g,o[9]=n,o[10]=a):(n=o[9],a=o[10]),(0,x.useEffect)(n,a),o[11]!==u||o[12]!==y?(r=e=>(0,eO.wt)(e,u,y),o[11]=u,o[12]=y,o[13]=r):r=o[13],o[14]!==s||o[15]!==f||o[16]!==p||o[17]!==h||o[18]!==r?(i=(0,c.jsx)(tj.t,{references:p,onClickReference:f,size:h,className:s,getReferenceVersion:r}),o[14]=s,o[15]=f,o[16]=p,o[17]=h,o[18]=r,o[19]=i):i=o[19],i}try{tC.displayName||(tC.displayName="ChatMessageReferences")}catch{}var tN=n(91936);let tS=(0,x.createContext)(null),tw=()=>{let e=(0,x.useContext)(tS);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{tS.displayName||(tS.displayName="ContentPreviewBlockContext")}catch{}var tI=n(35714),tk=n(47970),tT=n(83880),tE=n(23896),tA=n(99377),tR=n(65011),tL=n(57746);function tP(e){let t,n,a,r=(0,d.c)(4),{className:i}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,c.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,c.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),r[1]=n):n=r[1],r[2]!==i?(a=(0,c.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:i,children:[t,n]}),r[2]=i,r[3]=a):a=r[3],a}try{tP.displayName||(tP.displayName="ExpandIcon")}catch{}let tD={container:"FileBlock-module__container--zWu5c",header:"FileBlock-module__header--X7DLN",language:"FileBlock-module__language--fbEB2",name:"FileBlock-module__name--rkkGx",previewCode:"FileBlock-module__previewCode--EieE9",isClipped:"FileBlock-module__isClipped--Z6AMg",expandIconContainer:"FileBlock-module__expandIconContainer--JwHHA",insightsButtonContainer:"FileBlock-module__insightsButtonContainer--BRMgP"};function tO(e){let t,n,a,r,i,o,s,l,u,m,p,h,f,g,y,v,b,j,C,N=(0,d.c)(71),{language:S,name:w,code:I,line:k,children:T,isClipped:E,isStreaming:A,index:R,startOffset:L,endOffset:P}=e,{message:D}=(0,tT.V)(),{updateItem:O,openItem:M,openPreviewPane:B,versionedItems:F,getOpenItems:$}=(0,eC.xx)(),{messageIndex:U,messageId:V,messageTimestamp:z,autoOpenPreviewPane:W,markdown:H,hasAutoOpenedPreviewPaneRef:G,setHasAutoOpenedPreviewPane:K}=tw(),{name:Q}=(0,tR.vL)(S),J=`file:${w}`,Y=`${J}#${U}.${k}`,Z=!!I,X=F.get(J)??[],ee=X.indexOf(Y),et=X.length>1&&-1!==ee?ee+1:null;N[0]!==$||N[1]!==Y||N[2]!==R||N[3]!==M||N[4]!==B?(t=(e,t)=>{(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive"}),M(Y,void 0===t||t||$().length<1||0===R),e&&B()},N[0]=$,N[1]=Y,N[2]=R,N[3]=M,N[4]=B,N[5]=t):t=N[5];let en=t;N[6]!==I||N[7]!==Y||N[8]!==A||N[9]!==S||N[10]!==H||N[11]!==V||N[12]!==z||N[13]!==w||N[14]!==Z||N[15]!==O?(n=()=>{let e=I?.trimEnd();Z&&V!==tA.Wp&&-1!==H.indexOf(e)&&O({messageId:V,id:Y,language:S,name:w,value:I,type:"file",timestamp:new Date(z),isStreaming:A,isUserEdited:!1})},a=[I,S,V,w,O,Y,Z,z,A,H],N[6]=I,N[7]=Y,N[8]=A,N[9]=S,N[10]=H,N[11]=V,N[12]=z,N[13]=w,N[14]=Z,N[15]=O,N[16]=n,N[17]=a):(n=N[16],a=N[17]),(0,x.useEffect)(n,a),N[18]!==W||N[19]!==G||N[20]!==A||N[21]!==V||N[22]!==en||N[23]!==Z||N[24]!==K?(r=()=>{A&&Z&&V!==tA.Wp&&(en(W&&!G.current,!1),K(!0))},i=[A,Z,en,W,V,G,K],N[18]=W,N[19]=G,N[20]=A,N[21]=V,N[22]=en,N[23]=Z,N[24]=K,N[25]=r,N[26]=i):(r=N[25],i=N[26]),(0,x.useEffect)(r,i);let[ea,er]=(0,x.useState)(!1),{publicCodeReferences:ei,codeVulnerabilities:eo}=(0,tE.R)(D.copilotAnnotations,L,P);N[27]!==en?(o=()=>en(!0),N[27]=en,N[28]=o):o=N[28];let es=`View file: ${w}`,el=`chat-message-view-file-${w}`,ec=A?(0,c.jsx)(q.A,{size:"small",className:tN.sX}):tR.Yr.has(Q)?(0,c.jsx)(_.MarkdownIcon,{className:tN.sX}):(0,c.jsx)(_.CodeIcon,{className:tN.sX});N[29]!==w?(s=(0,c.jsx)("span",{className:tD.name,children:w}),N[29]=w,N[30]=s):s=N[30],N[31]!==et?(l=null!==et&&(0,c.jsx)(ts.g,{version:et}),N[31]=et,N[32]=l):l=N[32],N[33]!==tD.language||N[34]!==ec||N[35]!==s||N[36]!==l?(u=(0,c.jsxs)("div",{className:tD.language,children:[ec,s,l]}),N[33]=tD.language,N[34]=ec,N[35]=s,N[36]=l,N[37]=u):u=N[37],N[38]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsx)("div",{className:tD.expandIconContainer,children:(0,c.jsx)(tP,{})}),N[38]=m):m=N[38],N[39]!==tD.header||N[40]!==u?(p=(0,c.jsxs)("div",{className:tD.header,children:[u,m]}),N[39]=tD.header,N[40]=u,N[41]=p):p=N[41];let ed=E&&tD.isClipped;return N[42]!==ed?(h=(0,eD.$)(tD.previewCode,ed),N[42]=ed,N[43]=h):h=N[43],N[44]!==T?(f=(0,c.jsx)("code",{children:T}),N[44]=T,N[45]=f):f=N[45],N[46]!==h||N[47]!==f?(g=(0,c.jsx)("pre",{className:h,"aria-hidden":!0,children:f}),N[46]=h,N[47]=f,N[48]=g):g=N[48],N[49]!==el||N[50]!==p||N[51]!==g||N[52]!==tD.container||N[53]!==o||N[54]!==es?(y=(0,c.jsxs)("button",{className:tD.container,onClick:o,"aria-label":es,"data-testid":el,children:[p,g]}),N[49]=el,N[50]=p,N[51]=g,N[52]=tD.container,N[53]=o,N[54]=es,N[55]=y):y=N[55],N[56]!==eo||N[57]!==ei.length||N[58]!==er?(v=(ei.length>0||eo.length>0)&&(0,c.jsx)("div",{className:tD.insightsButtonContainer,children:(0,c.jsx)(eW.K,{variant:"invisible",size:"small",icon:_.ShieldIcon,"aria-label":"Code insights",onClick:()=>er(!0)})}),N[56]=eo,N[57]=ei.length,N[58]=er,N[59]=v):v=N[59],N[60]!==y||N[61]!==v?(b=(0,c.jsxs)("div",{className:"position-relative",children:[y,v]}),N[60]=y,N[61]=v,N[62]=b):b=N[62],N[63]!==eo||N[64]!==ea||N[65]!==ei||N[66]!==er?(j=ea&&(0,c.jsx)(tL.t,{publicCodeReferences:ei,codeVulnerabilities:eo,onClose:()=>er(!1)}),N[63]=eo,N[64]=ea,N[65]=ei,N[66]=er,N[67]=j):j=N[67],N[68]!==b||N[69]!==j?(C=(0,c.jsxs)(c.Fragment,{children:[b,j]}),N[68]=b,N[69]=j,N[70]=C):C=N[70],C}try{tO.displayName||(tO.displayName="FileBlock")}catch{}let tM="data-fileblock-props",tB=(0,tI.F)(tM),tF=/^name=(?<name>[^\s]+)/,t$=/^name=(?<name>[^\s]+)\n?/,tU={code:(e,t)=>{let n=(0,tI.k)(e,tM);return n?(0,c.jsx)(tO,{...n,children:e.children}):t}},tV=/^type=(?<type>[^\s]+)\n?/,tz=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e;var tW=n(20382),tH=n(13468);function tq(e){let{messages:t}=(0,em.Pk)(),n=(0,tH.B)(t);return function(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let a of n){let n=/\(image(\d+)\)/,r=parseInt(a.match(n)[1],10),i=t.length-r,o=t[i]?.chatAttachmentUrl||t[i]?.url;if(o){let t=a.replace(n,`(${o})`);e=e.replace(a,t)}}return e}(e,(0,x.useMemo)(()=>n.flatMap(e=>e.mediaContent||[]),[n]))}let tG={container:"DraftIssueBlock-module__container--xuyX4",icon:"DraftIssueBlock-module__icon--unPEF",previewText:"DraftIssueBlock-module__previewText--G_AS3"},tK="data-draft-issue-block",tQ={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title&&(t.title=e.title),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"type"in e&&"string"==typeof e.type&&(t.issueType=e.type),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),t}},tJ=e=>{try{let t=(0,tW.Hh)(e);return tQ.fromUnknown(t)}catch{return null}};function tY({yaml:e,isStreaming:t}){let[n,a]=(0,x.useState)(t);(0,x.useEffect)(()=>{t&&a(!0)},[t]);let{updateItem:r,openItem:i,openPreviewPane:o,versionedItems:s,items:l}=(0,eC.xx)(),{messageId:d,messageIndex:u,autoOpenPreviewPane:m,hasAutoOpenedPreviewPaneRef:p,setHasAutoOpenedPreviewPane:h}=tw();e=tq(e);let f=(0,x.useRef)({}),g=(0,x.useMemo)(()=>{let t=tJ(e);return null!=t?(f.current=t,t):f.current},[e]);(0,x.useEffect)(()=>(0,eS.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"}),[]);let y=null!=g.tag?`new-issue:${g.tag}#${u}`:void 0,v=null!=y?(0,eO.LU)(y,s):null,b=null!=y?l.get(y):void 0,j=g.repository||b?.type!=="new-issue"?g.repository:b.repository||"",C=(0,x.useCallback)(({userInitiated:e})=>{null!=y&&(i(y,e),(e||m&&!p.current)&&(o(),h(!0)),(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[y,i,m,p,o,h]);(0,x.useEffect)(()=>{null!=y&&r({messageId:d,name:g.title??"",body:g.body,repository:j,id:y,type:"new-issue",tag:g.tag??"",isStreaming:t,template:g.template,issueType:g.issueType,milestone:g.milestone,assignees:g.assignees?.sort()??[],labels:g.labels?.sort()??[],projects:g.projects?.sort()??[],isUserEdited:!1,defaultValuesById:g.templateFormValues??{}})},[y,t,j,g.assignees,g.body,g.tag,g.title,g.labels,g.template,g.issueType,g.projects,g.milestone,g.templateFormValues,d,r]),(0,x.useEffect)(()=>{null!=y&&n&&C({userInitiated:!1})},[y,C,n]);let N=(0,x.useCallback)(()=>C({userInitiated:!0}),[C]);return(0,c.jsxs)("div",{className:tG.container,role:"button",onClick:N,onKeyDown:e=>{("Enter"===e.code||"Space"===e.code)&&N()},tabIndex:0,children:[t?(0,c.jsx)(q.A,{size:"small",className:tN.sX}):(0,c.jsx)(_.IssueDraftIcon,{className:tG.icon}),(0,c.jsx)("span",{className:tG.previewText,children:g.title}),null!=v&&(0,c.jsx)(ts.g,{version:v})]})}try{tY.displayName||(tY.displayName="DraftIssueBlock")}catch{}let tZ=(0,tI.F)(tK),tX={div:(e,t)=>{let n=(0,tI.k)(e,tK);return n?(0,c.jsx)(tY,{...n}):t}};var t0=n(95629),t1=n(17063),t2=n(630),t3=n(25862),t4=n(70924),t5=n(83779),t6=n(50146),t7=n(12528);function t8(e,t){for(let n of(t(e),e.children))t8(n,t)}function t9(){let e,t=(0,d.c)(3),{items:n,versionedItems:a}=(0,eC.xx)();if(t[0]!==n||t[1]!==a){let r=[...a.entries()].filter(nn).map(e=>{let[,t]=e,a=t.at(-1);return a?n.get(a):void 0}).filter(nt);for(let t of(e=r.reduce(ne,new Map),r)){if(!t.parentTag)continue;let n=e.get(t.parentTag),a=e.get(t.tag);n&&a&&(a.parent=n,n.children.push(a))}t[0]=n,t[1]=a,t[2]=e}else e=t[2];return e}function ne(e,t){return e.set(t.tag,{item:t,parent:null,children:[]}),e}function nt(e){return!!e}function nn(e){let[t]=e;return t.startsWith("new-issue:")}function na({data:e,isStreaming:t}){e=tq(e);let n=(0,x.useRef)([]),a=(0,x.useMemo)(()=>{let t=function(e){try{let t=(0,tW.gh)(e);if(Array.isArray(t))return t.map(tQ.fromUnknown).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}(e);return t&&(n.current=t),n.current},[e]),[r,i]=(0,x.useState)(t);(0,x.useEffect)(()=>{t&&i(!0)},[t]);let{updateItem:o,openItem:s,openPreviewPane:l,versionedItems:d}=(0,eC.xx)(),{messageId:u,messageIndex:m,autoOpenPreviewPane:p,hasAutoOpenedPreviewPaneRef:h,setHasAutoOpenedPreviewPane:f}=tw(),g=(0,x.useCallback)(e=>e.tag?`new-issue:${e.tag}#${m}`:void 0,[m]);(0,x.useEffect)(()=>{for(let e of a){let n=g(e);n&&o({messageId:u,type:"new-issue",id:n,tag:e.tag??"",parentTag:e.parentTag,name:e.title??"",body:e.body,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort()??[],labels:e.labels?.sort()??[],projects:e.projects?.sort()??[],defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t})}},[g,t,a,u,m,o]);let y=(0,x.useCallback)((e,t)=>{let n=g(e);n&&(s(n,t),(t||p&&!h.current)&&(l(),f(!0)),(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[g,s,p,h,l,f]),v=(0,x.useMemo)(()=>{let e=a.reduce((e,t)=>(e.set(t.tag,{item:t,parent:null,children:[]}),e),new Map);for(let t of a){if(!t.parentTag)continue;let n=e.get(t.parentTag),a=e.get(t.tag);n&&a&&(a.parent=n,n.children.push(a))}return Array.from(e.values()).filter(e=>!e.item.parentTag)},[a]);(0,x.useEffect)(()=>{if(r)for(let e of v)y(e.item,!1)},[r,v,y]);let b=e=>{let n=g(e.item),a=n?(0,eO.LU)(n,d):null;return(0,c.jsx)(t1.r,{title:(0,c.jsx)(t4.T,{value:e.item.title??"",onClick:()=>y(e.item,!0),trailingBadges:null!=a?[(0,c.jsx)(ts.g,{version:a},`${e.item.tag}#${a}`)]:void 0}),subItems:e.children.length?e.children.map(b):void 0,defaultExpanded:!0,className:"py-1",children:(0,c.jsx)(t2.Q,{children:(0,c.jsx)(t3.D,{children:t?(0,c.jsx)(q.A,{size:"small",className:tN.sX}):(0,c.jsx)(_.IssueDraftIcon,{className:"fgColor-muted"})})})},e.item.tag)};return(0,c.jsx)(c.Fragment,{children:v.map(e=>{let n=g(e.item),a=n?(0,eO.LU)(n,d):null,r=-1;return t8(e,()=>r++),(0,c.jsxs)("div",{className:to.container,children:[(0,c.jsxs)("div",{className:to.rootNode,children:[t?(0,c.jsx)(q.A,{size:"small",className:tN.sX}):(0,c.jsx)(_.IssueDraftIcon,{className:"fgColor-muted"}),(0,c.jsx)("button",{onClick:()=>y(e.item,!0),className:(0,eD.$)(to.inlineButton,to.truncateText),children:e.item.title}),null!=a&&(0,c.jsx)(ts.g,{"data-testid":"version-label",version:a})]}),e.children.length>0&&(0,c.jsx)(t0.v,{title:"Sub-issues",header:(0,c.jsx)(t5.s,{title:(0,c.jsx)(t6.c,{title:"Sub-issues",className:"p-0 my-1",children:(0,c.jsx)(t7.A,{children:r})}),className:to.subIssueHeader}),children:e.children.map(b)})]},e.item.tag)})})}try{na.displayName||(na.displayName="DraftIssueTreeBlock")}catch{}let nr="data-draft-tree-issue-block",ni=(0,tI.F)(nr);var no=n(72534);function ns(e){let t,n,a,r,i,o,s=(0,d.c)(28),{owner:l,repo:u,issueNumber:m,href:p,children:h}=e,{updateItem:f,openItem:g,openPreviewPane:y,items:v}=(0,eC.xx)(),{messageId:_}=tw(),b=(0,em.A3)("messages"),j=Number(m),C=`issue:${l}/${u}/${j}`;s[0]!==C||s[1]!==v?(t=v.get(C),s[0]=C,s[1]=v,s[2]=t):t=s[2];let N=t;s[3]!==N?.name||s[4]!==_||s[5]!==b||s[6]!==j||s[7]!==l||s[8]!==u?(n=function(e,t,n,a,r){if(!n||!a||!r||isNaN(r))return;let i=e.find(e=>e.id===t),o=i?.references,s=o?.find(e=>"issue"===e.type&&e.number===r&&e.repository.name===a&&e.repository.owner===n),l=s?.title;if(l)return l;let c=o?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${a}`&&e.data.number===r),d=c?.data;return d?.title}(b,_,l,u,j)??N?.name??`Issue #${j}`,s[3]=N?.name,s[4]=_,s[5]=b,s[6]=j,s[7]=l,s[8]=u,s[9]=n):n=s[9];let S=n;return s[10]!==p||s[11]!==C||s[12]!==_||s[13]!==j||s[14]!==l||s[15]!==u||s[16]!==S||s[17]!==f?(a=()=>{l&&u&&f({messageId:_,name:S,number:j,owner:l,repo:u,id:C,href:p,type:"issue"})},r=[C,_,p,j,l,u,S,f],s[10]=p,s[11]=C,s[12]=_,s[13]=j,s[14]=l,s[15]=u,s[16]=S,s[17]=f,s[18]=a,s[19]=r):(a=s[18],r=s[19]),(0,x.useEffect)(a,r),s[20]!==C||s[21]!==g||s[22]!==y?(i=e=>{e.metaKey||e.ctrlKey||(g(C),y(),(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},s[20]=C,s[21]=g,s[22]=y,s[23]=i):i=s[23],s[24]!==h||s[25]!==p||s[26]!==i?(o=(0,c.jsx)(H.A,{href:p,onClick:i,target:"_blank",rel:"noreferrer",children:h}),s[24]=h,s[25]=p,s[26]=i,s[27]=o):o=s[27],o}try{ns.displayName||(ns.displayName="IssueLinkBlock")}catch{}let nl="data-issuelink-props",nc=(0,tI.F)(nl),nd=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,nu={span:(e,t)=>{let n=(0,tI.k)(e,nl);return n?(0,c.jsx)(ns,{...n}):t}};var nm=n(27851),np=n(39459),nh=n(70892);let nf={list:"IssueListBlock-module__list--GM7vt",streaming:"IssueListBlock-module__streaming--HSaKx",toggleContent:"IssueListBlock-module__toggleContent--QwoUs",item:"IssueListBlock-module__item--Z3Nv7",link:"IssueListBlock-module__link--xHV6N",content:"IssueListBlock-module__content--kXyl1",metadata:"IssueListBlock-module__metadata--fIv1v",header:"IssueListBlock-module__header--tb2Am",title:"IssueListBlock-module__title--KvqP1",unknownTitle:"IssueListBlock-module__unknownTitle--tj7iM",number:"IssueListBlock-module__number--FIbRR",labels:"IssueListBlock-module__labels--ergn3",labelIcon:"IssueListBlock-module__labelIcon--AdciQ",description:"IssueListBlock-module__description--FVdIE",icon:"IssueListBlock-module__icon--KVpem",open:"IssueListBlock-module__open--yTQ0j",draft:"IssueListBlock-module__draft--FrF8w",done:"IssueListBlock-module__done--SRM4P",closed:"IssueListBlock-module__closed--jfPZH",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--SawNd",toggleButton:"IssueListBlock-module__toggleButton--BwD3L",shimmer:"IssueListBlock-module__shimmer--BIYQB",toggleIcon:"IssueListBlock-module__toggleIcon--RYlGV"},ng={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),t}};function ny(e){let t,n,a,r,i,o=(0,d.c)(8),{item:s,isStreaming:l}=e,u=s.author;return s.merged_at?(r=s.merged_at,i="Merged"):s.closed_at?(r=s.closed_at,i="Closed"):s.created_at&&(r=s.created_at,i="Opened"),o[0]!==r?(n=(t=r?new Date(r):null)&&isNaN(t.getTime()),o[0]=r,o[1]=t,o[2]=n):(t=o[1],n=o[2]),n&&(t=null),o[3]!==i||o[4]!==u||o[5]!==l||o[6]!==t?(a=u&&t||!l?(0,c.jsxs)("span",{className:nf.description,children:[u," ",u?i?.toLowerCase():i," ",t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(M.A,{date:t,format:"micro"})," ago"]})]}):null,o[3]=i,o[4]=u,o[5]=l,o[6]=t,o[7]=a):a=o[7],a}let nx=e=>{try{let t=(0,tW.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(ng.fromUnknown);return null}catch{return null}};function nv(e){let t,n,a,r,i,o,s,l,u,m,p,h=(0,d.c)(39),{data:f,type:g,isStreaming:y}=e;h[0]!==f?(t=()=>nx(f)??[],h[0]=f,h[1]=t):t=h[1];let[v,b]=(0,x.useState)(t),{updateItem:j,openItem:C,openPreviewPane:N}=(0,eC.xx)(),{messageId:S}=tw(),[w,I]=(0,x.useState)(!0);h[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,nm.G7)("copilot_issue_list_show_more"),h[2]=n):n=h[2];let k=n;h[3]!==w||h[4]!==v?(a=k&&w?v.slice(0,10):v,h[3]=w,h[4]=v,h[5]=a):a=h[5];let T=a,E=k&&v.length>10;h[6]!==f?(r=()=>b(e=>nx(f)??e),i=[f],h[6]=f,h[7]=r,h[8]=i):(r=h[7],i=h[8]),(0,x.useEffect)(r,i),h[9]!==g?(o=()=>{"issue"===g?(0,eS.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):(0,eS.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"})},s=[g],h[9]=g,h[10]=o,h[11]=s):(o=h[10],s=h[11]),(0,x.useEffect)(o,s);let A=y&&nf.streaming;if(h[12]!==A?(l=(0,eD.$)(nf.list,A),h[12]=A,h[13]=l):l=h[13],h[14]!==y||h[15]!==S||h[16]!==C||h[17]!==N||h[18]!==g||h[19]!==j||h[20]!==T){let e;h[22]!==y||h[23]!==S||h[24]!==C||h[25]!==N||h[26]!==g||h[27]!==j||h[28]!==T.length?(e=(e,t)=>{let n={...e,type:g},a=y&&t===T.length-1,{icon:r,colorClass:i}=function(e){let t,n=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(n=(0,c.jsx)(_.IssueDraftIcon,{"aria-label":"Draft issue"}),t=nf.draft):"closed"===e.state&&e.draft&&(n=(0,c.jsx)(_.SkipIcon,{"aria-label":"Closed draft issue"}),t=nf.draft):(n=(0,c.jsx)(_.IssueClosedIcon,{"aria-label":"Closed issue"}),t=nf.done):(n=(0,c.jsx)(_.IssueOpenedIcon,{"aria-label":"Open issue"}),t=nf.open);else if("pr"===e.type){let a="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!a&&e.draft?(n=(0,c.jsx)(_.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),t=nf.draft):"open"!==e.state||a||e.draft?"closed"!==e.state||a?"closed"===e.state&&a&&(n=(0,c.jsx)(_.GitMergeIcon,{"aria-label":"Merged pull request"}),t=nf.done):(n=(0,c.jsx)(_.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),t=nf.closed):(n=(0,c.jsx)(_.GitPullRequestIcon,{"aria-label":"Pull request"}),t=nf.open)}return{icon:n,colorClass:t}}(n);return(0,c.jsx)("li",{className:nf.item,children:(0,c.jsxs)("div",{className:nf.content,children:[(0,c.jsx)("div",{className:(0,eD.$)(i,nf.icon),children:r}),(0,c.jsxs)("div",{className:nf.header,children:[a&&!n.title?null:(0,c.jsx)("a",{...(0,tr.G)("issue-list-item-link"),href:n.url??"#",className:nf.link,onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),n.url))if("issue"===n.type){(0,eS.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:e,repo:t,number:a}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(n.url);if(e&&t&&a){let r=`issue:${e}/${t}/${a}`;j({messageId:S,name:n.title??`Issue #${a}`,number:a,owner:e,repo:t,id:r,href:n.url,type:"issue"}),C(r),N()}}else(0,eS.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(n.url,"_self")},target:"_blank",rel:"noreferrer",children:n.title||void 0===n.number?(0,c.jsxs)(c.Fragment,{children:[n.title?(0,c.jsx)("span",{className:nf.title,children:n.title}):(0,c.jsx)("span",{className:(0,eD.$)(nf.title,nf.unknownTitle),children:"Unknown issue"}),void 0!==n.number&&(0,c.jsxs)("span",{className:nf.number,children:["#",n.number]})]}):(0,c.jsxs)("span",{className:nf.title,children:["#",n.number]})}),(0,c.jsxs)("div",{className:nf.labels,children:[n.labels?.length?n.labels.map(nb):null,0!==n.comments&&void 0!==n.comments&&(0,c.jsxs)(eo.A,{size:"small",variant:"secondary",children:[(0,c.jsx)(_.CommentIcon,{className:nf.labelIcon,size:12}),n.comments]})]})]}),(0,c.jsx)(ny,{item:n,isStreaming:a}),(0,c.jsx)("div",{className:nf.metadata,children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,c.jsx)("div",{className:nf.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,c.jsx)(_.PersonIcon,{size:12})}):(0,c.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,c.jsx)(nh.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(n_)})})})]})},t)},h[22]=y,h[23]=S,h[24]=C,h[25]=N,h[26]=g,h[27]=j,h[28]=T.length,h[29]=e):e=h[29],u=T.map(e),h[14]=y,h[15]=S,h[16]=C,h[17]=N,h[18]=g,h[19]=j,h[20]=T,h[21]=u}else u=h[21];return h[30]!==w||h[31]!==E||h[32]!==y||h[33]!==v?(m=E&&(0,c.jsx)("li",{className:nf.item,children:(0,c.jsx)("div",{className:(0,eD.$)(nf.content,nf.toggleContent),children:(0,c.jsxs)("button",{type:"button",className:(0,eD.$)(nf.toggleButton,y&&nf.shimmer),onClick:()=>I(!w),"aria-expanded":!w,"aria-controls":"issue-list",children:[(0,c.jsx)("span",{className:nf.toggleIcon,children:w?(0,c.jsx)(_.UnfoldIcon,{size:16}):(0,c.jsx)(_.FoldIcon,{size:16})}),w?`Show ${v.length-10} more`:"Show less"]})})}),h[30]=w,h[31]=E,h[32]=y,h[33]=v,h[34]=m):m=h[34],h[35]!==u||h[36]!==m||h[37]!==l?(p=(0,c.jsx)("div",{children:(0,c.jsxs)("ul",{id:"issue-list",className:l,children:[u,m]})}),h[35]=u,h[36]=m,h[37]=l,h[38]=p):p=h[38],p}function n_(e){return(0,c.jsx)(np.r,{src:e,alt:"Assignee avatar"},e)}function nb(e){return(0,c.jsx)(eo.A,{size:"small",variant:"secondary",children:e},e)}try{ny.displayName||(ny.displayName="Description")}catch{}try{nv.displayName||(nv.displayName="ListBlock")}catch{}let nj="data-issues-list-block",nC=(0,tI.F)(nj),nN={div:(e,t)=>{let n=(0,tI.k)(e,nj);return n?(0,c.jsx)(nv,{...n}):t}},nS={markdownOverrides:"MarkdownViewer-module__markdownOverrides--ghD5J"},nw=e=>{let t,n,a,r,i,o,s,l,u,m,p,h,f,g,y,v,_,b=(0,d.c)(35);b[0]!==e?({messageId:a,messageIndex:r,messageTimestamp:i,autoOpenPreviewPane:t,markdown:n,...o}=e,b[0]=e,b[1]=t,b[2]=n,b[3]=a,b[4]=r,b[5]=i,b[6]=o):(t=b[1],n=b[2],a=b[3],r=b[4],i=b[5],o=b[6]);let j=(0,x.useRef)(!1);b[7]===Symbol.for("react.memo_cache_sentinel")?(s=e=>{j.current=e},b[7]=s):s=b[7];let C=s;b[8]!==o.extensions?(u=o.extensions??[],m=function(e){return{transformMarkdown:t=>(0,tk.YR)(t,"code",t=>{let n=t.lang??"",{name:a,code:r}=function(e,t){let n=e&&tF.exec(e);if(n)return{name:n.groups?.name,code:t};let a=t$.exec(t);return a?{name:a.groups?.name,code:t.replace(t$,"")}:{code:t}}(t.meta??void 0,t.value);if(!a)return;e.includes(a)||e.push(a);let i=r.split(`
`,6),o=6===i.length,s=o?i.join(`
`):`${i.join(`
`)}
`,l=t.position?.start.line??0;t.value=s,t.data={...t.data,hName:"code",hProperties:{[tB]:JSON.stringify({language:n,name:a,code:r,line:l,isStreaming:t.isStreaming??!1,isClipped:o,index:e.indexOf(a),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,tk.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&tB in a.properties&&n.children.splice(t,1,a)}),reactComponents:tU}}([]),b[8]=o.extensions,b[9]=u,b[10]=m):(u=b[9],m=b[10]),b[11]===Symbol.for("react.memo_cache_sentinel")?(p={transformMarkdown:e=>(0,tk.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=nd.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:a="",number:r=""}=t.groups;e.data={hName:"span",hProperties:{[nc]:JSON.stringify({owner:n,repo:a,issueNumber:r,href:e.url,children:(0,no.d)(e)})}}}),reactComponents:nu},h={transformMarkdown:e=>(0,tk.YR)(e,"code",e=>{if("list"!==e.lang)return;let t=tz(tV.exec(e.meta??"")?.groups?.type??"");("issue"===t||"pr"===t)&&(e.data={hName:"div",hProperties:{[nC]:JSON.stringify({data:e.value,type:t,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,tk.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&nC in a.properties&&n.children.splice(t,1,a)}),reactComponents:nN},b[11]=p,b[12]=h):(p=b[11],h=b[12]),b[13]!==u||b[14]!==m?(f=[...u,m,p,h],b[13]=u,b[14]=m,b[15]=f):f=b[15];let N=f;if(z.W.draftIssueUI){let e,t,n=N;b[16]===Symbol.for("react.memo_cache_sentinel")?(e={transformMarkdown:e=>(0,tk.YR)(e,"code",e=>{"yaml"===e.lang&&"draft-issue"===tz(tV.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[tZ]:JSON.stringify({yaml:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,tk.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&tZ in a.properties&&n.children.splice(t,1,a)}),reactComponents:tX},b[16]=e):e=b[16],b[17]!==N?(t=[...n,e],b[17]=N,b[18]=t):t=b[18],N=t}if(z.W.draftIssueTree){let e,t,n=N;b[19]===Symbol.for("react.memo_cache_sentinel")?(e={transformMarkdown:e=>(0,tk.YR)(e,"code",e=>{"yaml"===e.lang&&"draft-issue-tree"===tz(tV.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[ni]:JSON.stringify({data:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,tk.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&ni in a.properties&&n.children.splice(t,1,a)}),reactComponents:{div:(e,t)=>{let n=(0,tI.k)(e,nr);return n?(0,c.jsx)(na,{...n}):t}}},b[19]=e):e=b[19],b[20]!==N?(t=[...n,e],b[20]=N,b[21]=t):t=b[21],N=t}return l=N,b[22]!==t||b[23]!==n||b[24]!==a||b[25]!==r||b[26]!==i?(y={messageId:a,messageIndex:r,messageTimestamp:i,autoOpenPreviewPane:t,markdown:n,hasAutoOpenedPreviewPaneRef:j,setHasAutoOpenedPreviewPane:C},b[22]=t,b[23]=n,b[24]=a,b[25]=r,b[26]=i,b[27]=y):y=b[27],g=y,b[28]!==l||b[29]!==n||b[30]!==o?(v=(0,c.jsx)(tN.To,{...o,markdown:n,extensions:l,chatMode:"immersive",className:nS.markdownOverrides}),b[28]=l,b[29]=n,b[30]=o,b[31]=v):v=b[31],b[32]!==v||b[33]!==g?(_=(0,c.jsx)(tS.Provider,{value:g,children:v}),b[32]=v,b[33]=g,b[34]=_):_=b[34],_},nI=x.memo(nw);try{nw.displayName||(nw.displayName="MarkdownViewer")}catch{}try{nI.displayName||(nI.displayName="MemoizedMarkdownViewer")}catch{}let nk={timelineEvent:"TimelineEvents-module__timelineEvent--Piv5d",icon:"TimelineEvents-module__icon--IYNGr",situationalTimelineEvent:"TimelineEvents-module__situationalTimelineEvent--vlwlp TimelineEvents-module__timelineEvent--Piv5d",references:"TimelineEvents-module__references--r1iWF ChatMessage-module__references--Kunt2"};function nT(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function nE(e,t){return e.references?.some(e=>nT(e)&&(void 0===t||e.name.startsWith(`timeline-event: {"type": "${t}"`)))??!1}function nA(e){let t,n,a,r=(0,d.c)(10),{message:i,messageIndex:o,isViewingSharedThread:s,isSharedMessage:l,isLatestMessage:u}=e;return r[0]!==i||r[1]!==o?(t=nE(i)&&(0,c.jsx)(nR,{message:i,messageIndex:o}),r[0]=i,r[1]=o,r[2]=t):t=r[2],r[3]!==u||r[4]!==l||r[5]!==s?(n=(0,c.jsx)(nP,{isViewingSharedThread:s,isSharedMessage:l,isLatestMessage:u}),r[3]=u,r[4]=l,r[5]=s,r[6]=n):n=r[6],r[7]!==t||r[8]!==n?(a=(0,c.jsxs)(c.Fragment,{children:[t,n]}),r[7]=t,r[8]=n,r[9]=a):a=r[9],a}function nR(e){let t,n,a,r,i,o,s,l=(0,d.c)(24),{message:u,messageIndex:m}=e,{updateItem:p}=(0,eC.xx)();if(l[0]!==u.createdAt||l[1]!==u.id||l[2]!==u.references||l[3]!==m||l[4]!==p?(t=()=>{if(u.references)for(let e of u.references){let t=(0,eO.oR)({ref:e,messageIndex:m,messageId:u.id,timestamp:u.createdAt});null!=t&&p(t)}},n=[u.references,u.id,m,u.createdAt,p],l[0]=u.createdAt,l[1]=u.id,l[2]=u.references,l[3]=m,l[4]=p,l[5]=t,l[6]=n):(t=l[5],n=l[6]),(0,x.useEffect)(t,n),l[7]!==u.references){a=Symbol.for("react.early_return_sentinel");e:{let e=u.references?.filter(nL);if(!e){a=void 0;break e}for(let t of(r=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),n=t.icon||_.CheckIcon;r.push({type:e.type,markdownContent:e.markdownContent,icon:n})}}l[7]=u.references,l[8]=a,l[9]=r}else a=l[8],r=l[9];return a!==Symbol.for("react.early_return_sentinel")?a:(l[10]!==u.createdAt||l[11]!==u.id||l[12]!==u.references||l[13]!==m?(i=u.references&&u.references.length>0&&(0,c.jsx)(tC,{className:nk.references,messageId:u.id,messageTimestamp:u.createdAt,messageIndex:m,references:u.references,size:"medium"}),l[10]=u.createdAt,l[11]=u.id,l[12]=u.references,l[13]=m,l[14]=i):i=l[14],l[15]!==u.content||l[16]!==u.createdAt||l[17]!==u.id||l[18]!==m||l[19]!==r?(o=r.map(e=>{let{type:t,markdownContent:n,icon:a}=e;return(0,c.jsxs)("div",{className:nk.timelineEvent,children:[(0,c.jsx)(a,{className:nk.icon}),(0,c.jsx)(nw,{autoOpenPreviewPane:!1,markdown:n,messageId:u.id,messageIndex:m,messageTimestamp:u.createdAt,accessibleHeader:(0,eu.hV)("Timeline",u.content??"")})]},t)}),l[15]=u.content,l[16]=u.createdAt,l[17]=u.id,l[18]=m,l[19]=r,l[20]=o):o=l[20],l[21]!==i||l[22]!==o?(s=(0,c.jsxs)(c.Fragment,{children:[i,o]}),l[21]=i,l[22]=o,l[23]=s):s=l[23],s)}function nL(e){return nT(e)}function nP(e){let t,n,a,r=(0,d.c)(9),{isSharedMessage:i,isViewingSharedThread:o,isLatestMessage:s}=e;return r[0]!==i||r[1]!==o?(t=i&&!o&&(0,c.jsxs)("div",{className:nk.situationalTimelineEvent,children:[(0,c.jsx)(_.LinkIcon,{className:nk.icon})," Messages up to this point are included in shared link"]}),r[0]=i,r[1]=o,r[2]=t):t=r[2],r[3]!==s||r[4]!==o?(n=s&&z.W.copilotDuplicateThread&&o&&(0,c.jsxs)("div",{className:nk.situationalTimelineEvent,children:[(0,c.jsx)(_.RepoForkedIcon,{className:nk.icon})," Messages beyond this point will start a new private conversation"]}),r[3]=s,r[4]=o,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(a=(0,c.jsxs)(c.Fragment,{children:[t,n]}),r[6]=t,r[7]=n,r[8]=a):a=r[8],a}try{nA.displayName||(nA.displayName="TimelineEvents")}catch{}try{nR.displayName||(nR.displayName="UserMessageTimelineEvent")}catch{}try{nP.displayName||(nP.displayName="SituationalTimelineEvents")}catch{}let nD={container:"FailureState-module__container--_USh9",icon:"FailureState-module__icon--mLSLn",heading:"FailureState-module__heading--zWxg1",subtitle:"FailureState-module__subtitle--RsZIp"};function nO(e){let t,n,a,r,i,o=(0,d.c)(11),{title:s,description:l,icon:u}=e;return o[0]!==u?(t=(0,c.jsx)(u,{size:24,className:nD.icon}),o[0]=u,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),o[2]=n):n=o[2],o[3]!==s?(a=(0,c.jsx)("h2",{className:nD.heading,children:s}),o[3]=s,o[4]=a):a=o[4],o[5]!==l?(r=(0,c.jsx)("p",{className:nD.subtitle,children:l}),o[5]=l,o[6]=r):r=o[6],o[7]!==t||o[8]!==a||o[9]!==r?(i=(0,c.jsxs)("div",{className:nD.container,children:[t,n,a,r]}),o[7]=t,o[8]=a,o[9]=r,o[10]=i):i=o[10],i}try{nO.displayName||(nO.displayName="FailureState")}catch{}var nM=n(96395),nB=n(52374),nF=n(11057),n$=n(69487);function nU(e){return(0,n$.readInlineData)(nB.G1,e)}function nV(e){return!!e}var nz=n(23812),nW=n(46996);function nH(e){let{messages:t}=(0,em.Pk)();return`new-issue:${e}#${t.length}`}function nq(e){let{openItem:t,updateItem:n}=(0,eC.xx)(),{selectedThreadID:a}=(0,em.Pk)(),r=nH(e.tag),i=`edited-${a}-${r}`,[o,s]=(0,nz.Fo)(i,void 0);return(0,x.useCallback)((i,o=!1)=>{let l,c=!1;for(l in i)(0,nW.A)(i[l],e[l])||(c=!0,"name"!==l&&"body"!==l&&"defaultValuesById"!==l&&(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:a,repository:e.repository,issueTag:e.tag,userChangedField:l,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[l])}));if(!c)return;let d={...e,...i};!o&&(d.id=r,d.isUserEdited=!0,z.W.copilotPersistEditedDraftIssues&&s(d)),n(d),t(d.id)},[e,n,t,a,r,s])}function nG(e){return(0,nM.vM)(e.login)?nM.A9:e.login}function nK(e){return(0,nM.vM)(e.login)?nM.A9:e.login}let nQ=function(){var e={defaultValue:100,kind:"LocalArgument",name:"count"},t={defaultValue:"",kind:"LocalArgument",name:"labelNames"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},a={defaultValue:null,kind:"LocalArgument",name:"repo"},r=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],i=[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s=[o,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n,a],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"LabelPickerLabel",selections:s,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,a,t,e],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:s,storageKey:null}],storageKey:null},o],storageKey:null}]},params:{id:"b807cb351c9187646a1c1af734d12afb",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}}}();nQ.hash="e88ca04244b8cb67aad293081213c7ad";var nJ=n(73966);function nY(e){return(0,nJ.P5)(e)}function nZ(e){return!!e}function nX(e){return e.name}function n0(e){return e.name}var n1=n(71400);function n2(e){return(0,n$.readInlineData)(n1.xm,e)}function n3(e){return!!e}var n4=n(90189);function n5(e){return!1===e.hasReachedItemsLimit}function n6(e){return!1===e.closed}function n7(e){return e.toLowerCase()}function n8(e,t){return e.set(t.id,t),e}function n9(e){return(0,n$.readInlineData)(n4.dW,e)}function ae(e){return!!e}function at(e){return e?.node}function an(e){return(0,n$.readInlineData)(n4.dW,e)}function aa(e){return!!e}function ar(e){return e?.node}function ai(e){return(0,n$.readInlineData)(n4.dW,e)}function ao(e){return!!e}function as(e){return e?.node}function al(e){return(0,n$.readInlineData)(n4.dW,e)}function ac(e){return!!e}function ad(e){return e.title}function au(e){return e.title}var am=n(3213);function ap(e){return(0,n$.readInlineData)(am.sH,e)}function ah(e){return!!e}function af(e){return e?.node}function ag(e,t){return e?.toLowerCase()===t?.toLowerCase()}var ay=n(44435);function ax({draftIssue:e,template:t,issueFormRef:n,onCreate:a,onChange:r,onClose:i,onBeforeCreate:o,onFieldChange:s}){let{name:l,body:u="",defaultValuesById:m}=e,{repository:p,clearSessionData:f}=(0,tu.u)(),[g,y]=(0,x.useState)(l),[v,b]=(0,x.useState)(u),C=function(){let e,t=(0,d.c)(3),n=(0,h.b)(),a=(0,em.Pk)();return t[0]!==n||t[1]!==a?(e=async(e,t)=>{let r;if(e.parentMessageID&&(r=a.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!r||!r.content)return;let i={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,text:r.content,icon:_.XIcon};await n.sendChatMessage({thread:(0,ay.W)(a),content:r.content,references:[...r.references??[],i],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model,parentMessageId:e.id})},t[0]=n,t[1]=a,t[2]=e):e=t[2],e}(),N=(0,em.Pk)(),S=(0,x.useCallback)(()=>{f(),n.current?.clearSessionStorage()},[f,n]),w=(0,x.useCallback)(()=>{S(),i?.()},[S,i]);if((0,x.useEffect)(()=>{y(l),b(u)},[u,l]),!function(e){let t,n,a,r,i,o,s,l=(0,d.c)(26),{repository:c,assignees:u,setAssignees:m}=(0,tu.u)(),[p,h]=(0,x.useState)(u),f=c?.owner.login,g=c?.name;l[0]!==e.assignees||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,assignees:e.assignees},l[0]=e.assignees,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:v}=function(e){let t,n,a,r,i,o=(0,d.c)(16),{owner:s,repo:l,assignees:c}=e,u=(0,ej.useRelayEnvironment)();o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,nF.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),o[0]=t):t=o[0];let m=t;return o[1]!==u?(n=JSON.stringify(u),o[1]=u,o[2]=n):n=o[2],o[3]!==c||o[4]!==s||o[5]!==l||o[6]!==n?(a=["copilot-immersive-assignees",n,m,s,l,c],o[3]=c,o[4]=s,o[5]=l,o[6]=n,o[7]=a):a=o[7],o[8]!==c||o[9]!==u||o[10]!==s||o[11]!==l?(r=async()=>{if(!s||!l||!c)return[];let e=await (0,eh.SD)({environment:u,query:nB.OE,variables:{owner:s,name:l,loginNames:c.join(",")??[],first:c.length??0,capabilities:m}}).toPromise();return(e?.repository?.suggestedActors?.nodes??[]).filter(nV).map(nU)},o[8]=c,o[9]=u,o[10]=s,o[11]=l,o[12]=r):r=o[12],o[13]!==a||o[14]!==r?(i={queryKey:a,queryFn:r},o[13]=a,o[14]=r,o[15]=i):i=o[15],(0,j.I)(i)}(t);l[4]!==v?(n=v?.map(nK)??[],l[4]=v,l[5]=n):n=l[5],l[6]!==e||l[7]!==n?(a={...e,assignees:n},l[6]=e,l[7]=n,l[8]=a):a=l[8];let _=nq(a);l[9]!==y||l[10]!==c||l[11]!==v||l[12]!==m?(r=()=>{!y&&v&&(c?.viewerIssueCreationPermissions?.assignable?m(v):null!=c&&m([]))},l[9]=y,l[10]=c,l[11]=v,l[12]=m,l[13]=r):r=l[13];let b=c?.viewerIssueCreationPermissions?.assignable;l[14]!==y||l[15]!==c||l[16]!==v||l[17]!==m||l[18]!==b?(i=[y,v,m,b,c],l[14]=y,l[15]=c,l[16]=v,l[17]=m,l[18]=b,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==u||l[21]!==p||l[22]!==y||l[23]!==_?(o=()=>{y||p===u||(_({assignees:u.map(nG)}),h(u))},s=[y,p,u,_],l[20]=u,l[21]=p,l[22]=y,l[23]=_,l[24]=o,l[25]=s):(o=l[24],s=l[25]),(0,x.useEffect)(o,s)}(e),!function(e){let t,n,a,r,i,o,s,l=(0,d.c)(26),{repository:c,labels:u,setLabels:m}=(0,tu.u)(),[p,h]=(0,x.useState)(u),f=c?.owner.login,g=c?.name;l[0]!==e.labels||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,labels:e.labels},l[0]=e.labels,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:v}=function(e){let t,n,a,r,i=(0,d.c)(15),{owner:o,repo:s,labels:l}=e,c=(0,ej.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==l||i[3]!==o||i[4]!==s||i[5]!==t?(n=["copilot-immersive-labels",t,o,s,l],i[2]=l,i[3]=o,i[4]=s,i[5]=t,i[6]=n):n=i[6],i[7]!==c||i[8]!==l||i[9]!==o||i[10]!==s?(a=async()=>{if(!o||!s||!l)return[];let e=await (0,eh.SD)({environment:c,query:nQ,variables:{owner:o,repo:s,labelNames:l.join(","),count:l.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(nZ).map(nY)},i[7]=c,i[8]=l,i[9]=o,i[10]=s,i[11]=a):a=i[11],i[12]!==n||i[13]!==a?(r={queryKey:n,queryFn:a},i[12]=n,i[13]=a,i[14]=r):r=i[14],(0,j.I)(r)}(t);l[4]!==v?(n=v?.map(n0)??[],l[4]=v,l[5]=n):n=l[5],l[6]!==e||l[7]!==n?(a={...e,labels:n},l[6]=e,l[7]=n,l[8]=a):a=l[8];let _=nq(a);l[9]!==y||l[10]!==c||l[11]!==v||l[12]!==m?(r=()=>{!y&&v&&(c?.viewerIssueCreationPermissions?.labelable?m(v):null!=c&&m([]))},l[9]=y,l[10]=c,l[11]=v,l[12]=m,l[13]=r):r=l[13];let b=c?.viewerIssueCreationPermissions?.labelable;l[14]!==y||l[15]!==c||l[16]!==v||l[17]!==m||l[18]!==b?(i=[y,v,m,b,c],l[14]=y,l[15]=c,l[16]=v,l[17]=m,l[18]=b,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==u||l[21]!==p||l[22]!==y||l[23]!==_?(o=()=>{y||p===u||(_({labels:u.map(nX)}),h(u))},s=[y,p,u,_],l[20]=u,l[21]=p,l[22]=y,l[23]=_,l[24]=o,l[25]=s):(o=l[24],s=l[25]),(0,x.useEffect)(o,s)}(e),!function(e){let t,n,a,r,i,o,s,l=(0,d.c)(30),{repository:c,issueType:u,setIssueType:m}=(0,tu.u)(),[p,h]=(0,x.useState)(u),f=c?.owner.login,g=c?.name;l[0]!==f||l[1]!==g?(t={owner:f,repo:g},l[0]=f,l[1]=g,l[2]=t):t=l[2];let{isLoading:y,data:v}=function(e){let t,n,a,r,i=(0,d.c)(13),{owner:o,repo:s}=e,l=(0,ej.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==s||i[4]!==t?(n=["copilot-immersive-issue-types",t,o,s],i[2]=o,i[3]=s,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==o||i[8]!==s?(a=async()=>{if(!o||!s)return[];let e=await (0,eh.SD)({environment:l,query:am.xS,variables:{owner:o,repo:s,issueTypesPageSize:25}}).toPromise();if(!e?.repository)return[];let t=(0,n$.readInlineData)(am.Jc,e.repository);return(t?.issueTypes?.edges?.flatMap(af)??[]).filter(ah).map(ap)},i[6]=l,i[7]=o,i[8]=s,i[9]=a):a=i[9],i[10]!==n||i[11]!==a?(r={queryKey:n,queryFn:a},i[10]=n,i[11]=a,i[12]=r):r=i[12],(0,j.I)(r)}(t);e:{let t;if(!e.issueType||y){n=null;break e}l[3]!==e.issueType||l[4]!==v?(t=v?.find(t=>ag(t.name,e.issueType)),l[3]=e.issueType,l[4]=v,l[5]=t):t=l[5],n=t}let _=n,b=_?.name;l[6]!==e||l[7]!==b?(a={...e,issueType:b},l[6]=e,l[7]=b,l[8]=a):a=l[8];let C=nq(a);l[9]!==y||l[10]!==c||l[11]!==_||l[12]!==m?(r=()=>{y||(c?.viewerIssueCreationPermissions?.typeable?m(_??null):null!=c&&m(null))},l[9]=y,l[10]=c,l[11]=_,l[12]=m,l[13]=r):r=l[13];let N=c?.viewerIssueCreationPermissions?.typeable;l[14]!==y||l[15]!==c||l[16]!==_||l[17]!==m||l[18]!==N?(i=[y,_,m,N,c],l[14]=y,l[15]=c,l[16]=_,l[17]=m,l[18]=N,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==u||l[21]!==p?.name||l[22]!==y||l[23]!==C?(o=()=>{y||ag(p?.name,u?.name)||(C({issueType:u?.name}),h(u))},l[20]=u,l[21]=p?.name,l[22]=y,l[23]=C,l[24]=o):o=l[24],l[25]!==u||l[26]!==p||l[27]!==y||l[28]!==C?(s=[y,p,u,C],l[25]=u,l[26]=p,l[27]=y,l[28]=C,l[29]=s):s=l[29],(0,x.useEffect)(o,s)}(e),!function(e){let t,n,a,r,i,o,s=(0,d.c)(28),{repository:l,milestone:c,setMilestone:u}=(0,tu.u)(),[m,p]=(0,x.useState)(c),h=l?.owner.login,f=l?.name;s[0]!==e.milestone||s[1]!==h||s[2]!==f?(t={owner:h,repo:f,milestone:e.milestone},s[0]=e.milestone,s[1]=h,s[2]=f,s[3]=t):t=s[3];let{isLoading:g,data:y}=function(e){let t,n,a,r,i=(0,d.c)(15),{owner:o,repo:s,milestone:l}=e,c=(0,ej.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==l||i[3]!==o||i[4]!==s||i[5]!==t?(n=["copilot-immersive-milestones",t,o,s,l],i[2]=l,i[3]=o,i[4]=s,i[5]=t,i[6]=n):n=i[6],i[7]!==c||i[8]!==l||i[9]!==o||i[10]!==s?(a=async()=>{if(!o||!s||!l)return null;let e=await (0,n$.fetchQuery)(c,n1.KK,{owner:o,repo:s,query:l,count:1}).toPromise();return(e?.repository?.milestones?.nodes||[]).filter(n3).map(n2)[0]??null},i[7]=c,i[8]=l,i[9]=o,i[10]=s,i[11]=a):a=i[11],i[12]!==n||i[13]!==a?(r={queryKey:n,queryFn:a},i[12]=n,i[13]=a,i[14]=r):r=i[14],(0,j.I)(r)}(t),v=y?.title;s[4]!==e||s[5]!==v?(n={...e,milestone:v},s[4]=e,s[5]=v,s[6]=n):n=s[6];let _=nq(n);s[7]!==g||s[8]!==l||s[9]!==y||s[10]!==u?(a=()=>{g||(l?.viewerIssueCreationPermissions?.milestoneable?u(y??null):null!=l&&u(null))},s[7]=g,s[8]=l,s[9]=y,s[10]=u,s[11]=a):a=s[11];let b=l?.viewerIssueCreationPermissions?.milestoneable;s[12]!==g||s[13]!==l||s[14]!==y||s[15]!==u||s[16]!==b?(r=[g,y,u,b,l],s[12]=g,s[13]=l,s[14]=y,s[15]=u,s[16]=b,s[17]=r):r=s[17],(0,x.useEffect)(a,r),s[18]!==c||s[19]!==m?.title||s[20]!==g||s[21]!==_?(i=()=>{var e,t;g||(e=m?.title,t=c?.title,e?.toLowerCase()===t?.toLowerCase())||(_({milestone:c?.title}),p(c))},s[18]=c,s[19]=m?.title,s[20]=g,s[21]=_,s[22]=i):i=s[22],s[23]!==c||s[24]!==m||s[25]!==g||s[26]!==_?(o=[g,m,c,_],s[23]=c,s[24]=m,s[25]=g,s[26]=_,s[27]=o):o=s[27],(0,x.useEffect)(i,o)}(e),!function(e){let t,n,a,r,i,o,s,l=(0,d.c)(26),{repository:c,projects:u,setProjects:m}=(0,tu.u)(),[p,h]=(0,x.useState)(u),f=c?.owner.login,g=c?.name;l[0]!==e.projects||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,projects:e.projects},l[0]=e.projects,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:v}=function(e){let t,n,a,r,i=(0,d.c)(15),{owner:o,repo:s,projects:l}=e,c=(0,ej.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==o||i[3]!==l||i[4]!==s||i[5]!==t?(n=["copilot-immersive-projects",t,o,s,l],i[2]=o,i[3]=l,i[4]=s,i[5]=t,i[6]=n):n=i[6],i[7]!==c||i[8]!==o||i[9]!==l||i[10]!==s?(a=async()=>{if(!o||!s||!l||!l.length)return[];let e=await (0,n$.fetchQuery)(c,n4.BT,{owner:o,repo:s,query:l.join(",")}).toPromise(),t=(e?.repository?.projectsV2?.nodes??[]).filter(ac).map(al),n=(e?.repository?.recentProjects?.edges??[]).map(as).filter(ao).map(ai),a=[...[...t,...n,...(e?.repository?.owner?.projectsV2?.edges??[]).map(ar).filter(aa).map(an),...(e?.repository?.owner?.recentProjects?.edges??[]).map(at).filter(ae).map(n9)].reduce(n8,new Map).values()],r=new Set(l.map(n7));return a.filter(n6).filter(n5).filter(e=>r.has(e.title.toLowerCase()))},i[7]=c,i[8]=o,i[9]=l,i[10]=s,i[11]=a):a=i[11],i[12]!==n||i[13]!==a?(r={queryKey:n,queryFn:a},i[12]=n,i[13]=a,i[14]=r):r=i[14],(0,j.I)(r)}(t);l[4]!==v?(n=v?.map(au)??[],l[4]=v,l[5]=n):n=l[5],l[6]!==e||l[7]!==n?(a={...e,projects:n},l[6]=e,l[7]=n,l[8]=a):a=l[8];let _=nq(a);l[9]!==y||l[10]!==c||l[11]!==v||l[12]!==m?(r=()=>{!y&&v&&(c?.viewerIssueCreationPermissions?.triageable?m(v):null!=c&&m([]))},l[9]=y,l[10]=c,l[11]=v,l[12]=m,l[13]=r):r=l[13];let b=c?.viewerIssueCreationPermissions?.triageable;l[14]!==y||l[15]!==c||l[16]!==v||l[17]!==m||l[18]!==b?(i=[y,v,m,b,c],l[14]=y,l[15]=c,l[16]=v,l[17]=m,l[18]=b,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==u||l[21]!==p||l[22]!==y||l[23]!==_?(o=()=>{y||p===u||(_({projects:u.map(ad)}),h(u))},s=[y,p,u,_],l[20]=u,l[21]=p,l[22]=y,l[23]=_,l[24]=o,l[25]=s):(o=l[24],s=l[25]),(0,x.useEffect)(o,s)}(e),null==p)return(0,c.jsx)(ta.Q,{optionConfig:{useViewportQueries:!1}});let I=N.messages.find(t=>t.id===e.messageId),k=I?.parentMessageIndex!==void 0?N.messages[I.parentMessageIndex]:void 0;if(z.W.draftIssueTemplateFormUI&&I&&k){let e=t&&(0,tm.GQ)(t.data),n=0===Object.keys(m||{}).length,a=!N.isWaitingOnCopilot,r=I.messageIndex===N.messages.length-1,i="assistant"===I.role,o=nE(k,"automatic-retry");if(e&&n)if(!a)return(0,c.jsx)(ta.Q,{optionConfig:{useViewportQueries:!1}});else if(r&&i&&!o)return C(I,"Copilot failed to use the issue template, retrying\u2026"),(0,c.jsx)(ta.Q,{optionConfig:{useViewportQueries:!1}});else return(0,c.jsx)(nO,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:_.IssueDraftIcon})}return(0,c.jsx)(t_.e,{repository:p,title:g,body:v,setTitle:e=>{y(e),r?.({name:e})},setBody:e=>{b(e),r?.({body:e})},clearOnCreate:w,issueFormRef:n,onCreateSuccess:({issue:e})=>a?.(e),onCreateError:tb.l,onCancel:w,onBeforeCreate:o,defaultValuesById:m,selectedTemplate:t,onFieldChange:s})}try{ax.displayName||(ax.displayName="CreateIssueForm")}catch{}let av={container:"CreateIssuePreview-module__container--UdBdV",toolbar:"CreateIssuePreview-module__toolbar--KnRki FilePreview-module__toolbar--toYCM",toolbarLeft:"CreateIssuePreview-module__toolbarLeft--WCzxL FilePreview-module__toolbarLeft--FG_Fy",toolbarLeftWithDivider:"CreateIssuePreview-module__toolbarLeftWithDivider--vKdFh FilePreview-module__toolbarLeft--FG_Fy",toolbarActions:"CreateIssuePreview-module__toolbarActions--euLmx FilePreview-module__toolbarActions--GZPSm",feedbackLink:"CreateIssuePreview-module__feedbackLink--i1Sf3",subIssueIndicator:"CreateIssuePreview-module__subIssueIndicator--mHFti FilePreview-module__toolbarLeft--FG_Fy",form:"CreateIssuePreview-module__form--t92hw"};var a_=n(66576),ab=n(60439),aj=n(19139);let aC={container:"RepositoryPicker-module__container--LguWf",label:"RepositoryPicker-module__label--UrLpA",ssoBanner:"RepositoryPicker-module__ssoBanner--iob3k"};function aN(e){let t,n,a,r,i,o,s,l,u,m,p=(0,d.c)(25),{draftIssue:h,resolvedDraftIssueRepo:f,loadingDraftIssueRepo:g,topReposQuery:y}=e,[v,_]=(0,x.useState)(void 0),{repository:b,setRepository:j}=(0,tu.u)(),C=(0,ej.useFragment)(ab.Sy,y?.viewer);e:{let e,n;if(null==C){t=void 0;break e}p[0]!==C?.topRepositories.edges?(e=C?.topRepositories.edges||[],p[0]=C?.topRepositories.edges,p[1]=e):e=p[1],p[2]!==e?(n=e.flatMap(aI),p[2]=e,p[3]=n):n=p[3],t=n}let N=t;p[4]!==j?(n=e=>{null!=e&&j(e)},p[4]=j,p[5]=n):n=p[5];let S=n;!function(e,t,n,a){let r,i,o,s,l,c=(0,d.c)(13),{repository:u,setRepository:m}=(0,tu.u)(),[p,h]=(0,x.useState)(u),f=nq(e);t?.nameWithOwner,u?.nameWithOwner,r=!n&&t?.nameWithOwner==null||t?.nameWithOwner===u?.nameWithOwner,c[0]!==e.isStreaming||c[1]!==n||c[2]!==t||c[3]!==m||c[4]!==a?(i=()=>{e.isStreaming||n||(null!=t?m(t):null!=a&&a.length>0?m(a[0]):m(void 0))},o=[e.isStreaming,n,t,m,a],c[0]=e.isStreaming,c[1]=n,c[2]=t,c[3]=m,c[4]=a,c[5]=i,c[6]=o):(i=c[5],o=c[6]),(0,x.useEffect)(i,o),c[7]!==u||c[8]!==p||c[9]!==f||c[10]!==r?(s=()=>{p!==u&&(f({repository:u?.nameWithOwner},r),h(u))},l=[f,u,r,p],c[7]=u,c[8]=p,c[9]=f,c[10]=r,c[11]=s,c[12]=l):(s=c[11],l=c[12]),(0,x.useEffect)(s,l)}(h,f,g,N),p[6]!==b||p[7]!==g||p[8]!==N?(a=()=>{g||null==b||null==N||N.find(e=>e.id===b.id)||_(b.id)},r=[b,g,N],p[6]=b,p[7]=g,p[8]=N,p[9]=a,p[10]=r):(a=p[9],r=p[10]),(0,x.useEffect)(a,r);let{ssoOrganizations:w}=(0,em.Pk)();if(p[11]!==w?(o=w?.map(aw)??[],p[11]=w,p[12]=o):o=p[12],i=o,!g&&null==b&&(null==N||0===N.length))return null;let I=b??N?.[0],k=h.isStreaming||g||null==f;p[13]===Symbol.for("react.memo_cache_sentinel")?(s=(0,c.jsx)(a_.A,{className:(0,eD.$)(aC.label,"sr-only"),required:!0,children:"Repository"}),p[13]=s):s=p[13],p[14]!==k?(l={hasIssuesEnabled:!0,readonly:k},p[14]=k,p[15]=l):l=p[15];let T=y?y.viewer:null;return p[16]!==i?(u=(0,c.jsx)(aj.x,{className:aC.ssoBanner,forceWrap:!0,protectedOrgs:i,maxVisibleOrgNames:0,redirectURI:aS}),p[16]=i,p[17]=u):u=p[17],p[18]!==v||p[19]!==S||p[20]!==I||p[21]!==u||p[22]!==l||p[23]!==T?(m=(0,c.jsxs)("div",{className:aC.container,children:[s,(0,c.jsx)(ab.ow,{initialRepository:I,onSelect:S,options:l,topRepositoriesData:T,enforceAtleastOneSelected:!0,subtitle:u},v)]}),p[18]=v,p[19]=S,p[20]=I,p[21]=u,p[22]=l,p[23]=T,p[24]=m):m=p[24],m}function aS(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function aw(e){return e.login}function aI(e){return e?.node?[(0,ej.readInlineData)(ab.R6,e.node)]:[]}try{aN.displayName||(aN.displayName="RepositoryPicker")}catch{}var ak=n(9039);function aT({issue:e}){let{openItem:t,versionedItems:n}=(0,eC.xx)(),a=t9(),r=function(){let e,t=(0,d.c)(4),n=(0,h.b)(),a=(0,em.Pk)(),{updateItem:r}=(0,eC.xx)();return t[0]!==n||t[1]!==a||t[2]!==r?(e=async e=>{let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},i={...e,parentTag:void 0,isUserEdited:!1};r(i);let o=(0,eO.g)(i);await n.sendChatMessage({thread:(0,ay.W)(a),content:"Unlink the sub-issue from its parent issue",references:[t,o],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=n,t[1]=a,t[2]=r,t[3]=e):e=t[3],e}(),i=a.get(e.tag),o=i?i.children:[],s=(0,x.useMemo)(()=>{if(!i)return 0;let e=-1;return t8(i,()=>e++),e},[i]);if(!z.W.draftIssueTree)return null;let l=e=>{let a=(0,eO.LU)(e.item.id,n);return(0,c.jsx)(t1.r,{title:(0,c.jsx)(t4.T,{value:e.item.name,onClick:()=>{t(e.item.id,!0)},trailingBadges:null!=a?[(0,c.jsx)(ts.g,{version:a},`${e.item.tag}#${a}`)]:void 0}),secondaryActions:(0,c.jsx)(ak.o,{actions:[],staticMenuActions:[{key:"unlink",render:()=>(0,c.jsxs)(eH.l.Item,{onSelect:()=>r(e.item),children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.LinkIcon,{})}),"Unlink sub-issue"]},`${e.item.tag}-unlink`)}]}),subItems:e.children?.length?e.children.map(l):void 0,defaultExpanded:!0,children:(0,c.jsx)(t2.Q,{children:(0,c.jsx)(t3.D,{children:(0,c.jsx)(_.IssueDraftIcon,{})})})},e.item.tag)};return(0,c.jsx)("div",{className:"mt-2 border rounded-2",children:(0,c.jsx)(t0.v,{title:"Sub-issues",header:(0,c.jsx)(t5.s,{title:(0,c.jsx)(t6.c,{title:"Sub-issues",className:"p-0",children:(0,c.jsx)(t7.A,{children:s})}),className:"border-0 bgColor-default"}),children:o.map(l)})})}try{aT.displayName||(aT.displayName="SubissuesList")}catch{}let aE=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i=[n,a,r,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],o=[n,a,r,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:i,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:o,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}}}();aE.hash="582a468668cd62a5a95ad0f91f7ea5e5";let aA={kind:"InlineDataFragment",name:"TemplatePickerForm"};aA.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let aR={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};aR.hash="fa6038bb9389af7bff23ba3491dd0507";var aL=n(80597),aP=n(56424),aD=n(55847);function aO(e,t){return e.filename.localeCompare(t.filename)}function aM(e){return(0,n$.readInlineData)(aA,e)}function aB(e){return(0,n$.readInlineData)(aR,e)}function aF(e){let t,n=(0,d.c)(2),{draftIssue:a}=e;return null!=(0,aL.G)()?null:(n[0]!==a?(t=(0,c.jsx)(a$,{draftIssue:a}),n[0]=a,n[1]=t):t=n[1],t)}function a$(e){let t,n,a,r,i=(0,d.c)(10),{draftIssue:o}=e,{repository:s}=(0,tu.u)(),l=s?.owner.login,u=s?.name;i[0]!==l||i[1]!==u?(t={owner:l,repo:u},i[0]=l,i[1]=u,i[2]=t):t=i[2];let{data:m}=function(e){let t,n,a,r,i=(0,d.c)(13),{owner:o,repo:s}=e,l=(0,ej.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==s||i[4]!==t?(n=["copilot-immersive-templates",t,o,s],i[2]=o,i[3]=s,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==o||i[8]!==s?(a=async()=>{if(!o||!s)return[];let e=await (0,n$.fetchQuery)(l,aE,{owner:o,repo:s}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(aB),...(e?.repository?.issueForms||[]).map(aM)].sort(aO)},i[6]=l,i[7]=o,i[8]=s,i[9]=a):a=i[9],i[10]!==n||i[11]!==a?(r={queryKey:n,queryFn:a},i[10]=n,i[11]=a,i[12]=r):r=i[12],(0,j.I)(r)}(t);if(null==m||0===m.length)return null;i[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)("span",{children:"/"}),i[3]=n):n=i[3],i[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(a_.A,{className:(0,eD.$)(aC.label,"sr-only"),children:"Template"}),i[4]=a):a=i[4];let p=s?.nameWithOwner,h=s?.isBlankIssuesEnabled;return i[5]!==o||i[6]!==p||i[7]!==h||i[8]!==m?(r=(0,c.jsxs)(c.Fragment,{children:[n,(0,c.jsxs)("div",{className:aC.container,children:[a,(0,c.jsx)(aU,{templates:m,draftIssue:o,repositoryNwo:p,isBlankIssuesEnabled:h})]})]}),i[5]=o,i[6]=p,i[7]=h,i[8]=m,i[9]=r):r=i[9],r}function aU(e){let t,n,a,r,i,o,s,l,u=(0,d.c)(23),{templates:m,draftIssue:p,isBlankIssuesEnabled:f,repositoryNwo:g}=e,[y,v]=(0,x.useState)("");e:{let e;if(!y){t=m;break e}u[0]!==y||u[1]!==m?(e=m?.filter(e=>e.name?.toLowerCase().includes(y.toLowerCase())),u[0]=y,u[1]=m,u[2]=e):e=u[2],t=e}let b=t,[j,C]=(0,x.useState)(void 0);u[3]!==p.template||u[4]!==m?(n=()=>{if(!p.template)return void C(void 0);let e=p.template.split("/").pop();C(m?.find(t=>t.filename===e))},a=[m,p.template],u[3]=p.template,u[4]=m,u[5]=n,u[6]=a):(n=u[5],a=u[6]),(0,x.useEffect)(n,a);let N=function(){let e,t=(0,d.c)(3),n=(0,h.b)(),a=(0,em.Pk)();return t[0]!==n||t[1]!==a?(e=async(e,t,r)=>{let i=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the selected draft issue with the \`${t.filename}\` template${r?` in the \`${r}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` field.`:"Update the selected draft issue to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the `tag` field."}];if(e.isUserEdited){let t={...e,...r&&{repository:r}};i.push((0,eO.g)(t))}await n.sendChatMessage({thread:(0,ay.W)(a),content:t?`Use the '${t.name}' template`:"Remove the template",references:i,topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=n,t[1]=a,t[2]=e):e=t[2],e}(),S=(0,x.useRef)(null),w=null!=f&&!f;return u[7]!==b?(r=b??[],u[7]=b,u[8]=r):r=u[8],u[9]!==j?(i=j?[j]:[],u[9]=j,u[10]=i):i=u[10],u[11]!==j||u[12]!==w?(o=e=>(0,c.jsxs)(aD.Q,{trailingVisual:_.TriangleDownIcon,...e,ref:S,children:[j?(0,c.jsx)("span",{children:j.name}):"Select template",w&&(0,c.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),u[11]=j,u[12]=w,u[13]=o):o=u[13],u[14]!==p||u[15]!==N||u[16]!==g?(s=async e=>{let[t]=e;C(t),await N(p,t,g)},u[14]=p,u[15]=N,u[16]=g,u[17]=s):s=u[17],u[18]!==r||u[19]!==i||u[20]!==o||u[21]!==s?(l=(0,c.jsx)(aP.O,{items:r,initialSelectedItems:i,placeholderText:"Select template",selectionVariant:"single",filterItems:v,renderAnchor:o,getItemKey:az,convertToItemProps:aV,onSelectionChange:s,selectPanelRef:S,height:"large",width:"medium"}),u[18]=r,u[19]=i,u[20]=o,u[21]=s,u[22]=l):l=u[22],l}function aV(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function az(e){return e.filename}try{aF.displayName||(aF.displayName="TemplatePicker")}catch{}try{a$.displayName||(a$.displayName="TemplatePickerWrapper")}catch{}try{aU.displayName||(aU.displayName="TemplatePickerInternal")}catch{}var aW=n(24058),aH=n(79300),aq=n(40616),aG=n(27221);let aK=e=>{let{messages:t}=(0,em.Pk)(),n=(0,tH.B)(t);return(0,x.useMemo)(()=>{if(null!=e)return async t=>{let a=t.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),r=new Set;for(let e of a||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&r.add(t)}if(r.size>0){let a=Array.from(r).map(async e=>{let t=await fetch(e),n=await t.blob(),a=n.type.split("/")[1],r=`copilot-image.${a}`,i=await createImageBitmap(n),o=i.width;return i.close(),{file:new File([n],r,{type:n.type}),url:e,width:o}}),i=await Promise.all(a);for(let n of(await Promise.all(i.map(async t=>{if(t)return{uploadedFile:await (0,aG.QM)(t.file,e.databaseId?.toString()),originalUrl:t.url,width:t.width}}))))if(n){let{uploadedFile:e,originalUrl:a,width:r}=n,i=e.url;if(i){let e=RegExp(`!\\[(.*?)\\]\\(${a}\\)`,"g");t=t.replace(e,`<img alt="$1" width="${r}" src="${i}" />`)}}(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:r.size,threadId:n[0]?.threadID})}return t}},[n,e])};function aQ(e){let t,n,a,r,i,o,s,l,u,m,p,f,g,y,v,_,b,C,N,S,w,I,k,T,E=(0,d.c)(78),{isPreviewOpening:A,issue:R,onClose:L}=e,{openItem:P}=(0,eC.xx)(),D=t9();E[0]!==R.tag||E[1]!==D?(t=D.get(R.tag),E[0]=R.tag,E[1]=D,E[2]=t):t=E[2];let O=t,M=z.W.draftIssueTree&&O?.parent===null&&O?.children.length>0,[B,F]=(0,x.useState)(A);E[3]!==B?(n=()=>{if(B){let e=setTimeout(()=>F(!1),400);return()=>clearTimeout(e)}},a=[B],E[3]=B,E[4]=n,E[5]=a):(n=E[4],a=E[5]),(0,x.useEffect)(n,a);let{selectedThreadID:$}=(0,em.Pk)(),{isLoading:U,data:V}=function(){let e,t,n,a,r=(0,d.c)(9),i=(0,ej.useRelayEnvironment)();return r[0]!==i?(e=JSON.stringify(i),r[0]=i,r[1]=e):e=r[1],r[2]!==e?(t=["copilot-immersive-top-repos",e],r[2]=e,r[3]=t):t=r[3],r[4]!==i?(n=async()=>await (0,ab.Xl)(i,10,!0).toPromise(),r[4]=i,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(a={queryKey:t,queryFn:n},r[6]=t,r[7]=n,r[8]=a):a=r[8],(0,j.I)(a)}();E[6]!==R.repository?(r=R.repository?.split("/")??[],E[6]=R.repository,E[7]=r):r=E[7];let[W,q]=r;E[8]!==W||E[9]!==q?(i={owner:W,repo:q},E[8]=W,E[9]=q,E[10]=i):i=E[10];let{isLoading:G,data:K}=function(e){let t,n,a,r,i=(0,d.c)(13),{owner:o,repo:s}=e,l=(0,ej.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==s||i[4]!==t?(n=["copilot-immersive-current-repo",t,o,s],i[2]=o,i[3]=s,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==o||i[8]!==s?(a=async()=>{if(!o||!s)return null;let e=await (0,ab.DW)(l,o,s).toPromise();if(e?.repository!=null)return(0,ej.readInlineData)(ab.R6,e.repository)},i[6]=l,i[7]=o,i[8]=s,i[9]=a):a=i[9],i[10]!==n||i[11]!==a?(r={queryKey:n,queryFn:a},i[10]=n,i[11]=a,i[12]=r):r=i[12],(0,j.I)(r)}(i),Q=aK(K),J=function(e){let t,n=(0,d.c)(9),{tag:a}=e,r=(0,em.Pk)(),i=(0,h.b)(),{items:o,updateItem:s,openItem:l,closeItem:c,openPreviewPane:u}=(0,eC.xx)(),m=nH(a);return n[0]!==c||n[1]!==o||n[2]!==i||n[3]!==l||n[4]!==u||n[5]!==r||n[6]!==s||n[7]!==m?(t=async e=>{(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED",mode:"immersive",threadId:(0,ay.W)(r)?.id,repositoryId:e.repository.databaseId,issueNumber:e.number,chatReferrer:document.referrer});let t=e.number,n=e.repository.owner.login,a=e.repository.name,d=e.title,p=`issue:${n}/${a}/${t}`;s({id:p,messageId:tA.Wp,name:d,owner:n,repo:a,number:t,href:e.url,type:"issue"}),c(m),l(p),u();let h=[{type:"text",name:`timeline-event: {"type": "issue-created", "markdownContent": "Issue saved to [${n}/${a}#${t}](${e.url})"}`,text:`Fetch the issue details and return them in a code block with YAML following this example format:
\`\`\`list type="issue"
data:
- url: ${e.url}
  state: "open"
  draft: false
  title: "${d}"
  number: ${t}
  author: ${r.currentUserLogin}
  created_at: "2025-03-27T12:00:00Z"
  closed_at: "2025-03-27T12:00:00Z"
  labels:
  - name: "bug"
  - name: "good first issue"
\`\`\``}],f=o.get(m);f?.type==="new-issue"&&h.push((0,eO.g)(f)),await i.sendChatMessage({thread:(0,ay.W)(r),content:`Saved the issue to [${n}/${a}#${t}](${e.url})`,references:h,topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model})},n[0]=c,n[1]=o,n[2]=i,n[3]=l,n[4]=u,n[5]=r,n[6]=s,n[7]=m,n[8]=t):t=n[8],t}(R),Y=function(e){let t,n=(0,d.c)(9),{tag:a}=e,r=(0,em.Pk)(),i=(0,h.b)(),{items:o,updateItem:s,openItem:l,closeItem:c,openPreviewPane:u}=(0,eC.xx)(),m=nH(a);return n[0]!==c||n[1]!==o||n[2]!==i||n[3]!==l||n[4]!==u||n[5]!==r||n[6]!==s||n[7]!==m?(t=async e=>{let{parentIssue:t,createdIssues:n}=e;(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_BULK_CREATED",mode:"immersive",threadId:(0,ay.W)(r)?.id,repositoryId:t.repository.databaseId});let a=[];for(let e of n){let t=e.number,n=e.repository.owner.login,i=e.repository.name,o=e.title;s({id:`issue:${n}/${i}/${t}`,messageId:tA.Wp,name:o,owner:n,repo:i,number:t,href:e.url,type:"issue"}),a.push(`[${n}/${i}#${t}](${e.url})`),e.url,r.currentUserLogin}let d=`issue:${t.repository.owner.login}/${t.repository.name}/${t.number}`;c(m),l(d),u();let p=[{type:"text",name:'timeline-event: {"type": "issue-created", "markdownContent": "Creating issues..."}',text:`Fetch the details for all saved issues and return them in a code block with YAML following this example format:
\`\`\`list type="issue"
data:
\`\`\``}],h=o.get(m);h?.type==="new-issue"&&p.push((0,eO.g)(h)),await i.sendChatMessage({thread:(0,ay.W)(r),content:`Saved the issues to ${a.join(", ")} in repo ${t.repository.name}`,references:p,topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model})},n[0]=c,n[1]=o,n[2]=i,n[3]=l,n[4]=u,n[5]=r,n[6]=s,n[7]=m,n[8]=t):t=n[8],t}(R),Z=nq(R),X=function(e,t){let n,a=(0,d.c)(3);return a[0]!==e||a[1]!==t?(n=(n,a,r)=>{if(!z.W.draftIssueTemplateFormUI)return;let i=n||`${aW.y}-${a}`;if(e.defaultValuesById&&e.defaultValuesById[i]===r)return;let o={...e,defaultValuesById:{...e.defaultValuesById}};o.defaultValuesById[i]=r,t(o,!1)},a[0]=e,a[1]=t,a[2]=n):n=a[2],n}(R,Z),ee=(0,x.useRef)(null),et=function(e){let t,n=(0,d.c)(2);n[0]!==e.current?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e.current,n[1]=t):t=n[1];let a=t;return(0,x.useSyncExternalStore)(aJ,a)}(ee),en=O?.parent?.item.id,ea=z.W.draftIssueTree&&void 0!==en,er=(0,x.useRef)(null),ei=K?.id??"",eo=R.template||"";E[11]!==ei||E[12]!==eo?(o={repoId:ei,filename:eo},E[11]=ei,E[12]=eo,E[13]=o):o=E[13];let{isLoading:es,data:el}=function(e){let t,n,a,r,i=(0,d.c)(13),{repoId:o,filename:s}=e,l=(0,ej.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(n=["copilot-immersive-template-payload",t,o,s],i[2]=s,i[3]=o,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==s||i[8]!==o?(a=async()=>{if(!z.W.draftIssueTemplateFormUI||!o||!s)return null;let e=await (0,ej.fetchQuery)(l,aH.F,{repoId:o,filename:s}).toPromise();return e&&e.node?(0,aq.EV)(e.node)??null:null},i[6]=l,i[7]=s,i[8]=o,i[9]=a):a=i[9],i[10]!==n||i[11]!==a?(r={queryKey:n,queryFn:a},i[10]=n,i[11]=a,i[12]=r):r=i[12],(0,j.I)(r)}(o),ec=K??void 0;E[14]!==ec?(s={repository:ec},E[14]=ec,E[15]=s):s=E[15];let ed=s;if(B||U||es){let e;return E[16]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(ta.Q,{optionConfig:{useViewportQueries:!1}}),E[16]=e):e=E[16],e}if(null==V&&!G&&null==K){let e;return E[17]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("span",{children:"No repositories found."}),E[17]=e):e=E[17],e}let eu=`${R.id}@${$}`;E[18]!==et||E[19]!==eu?(l=(0,tt.S)({storageKeyPrefix:eu,insidePortal:et}),E[18]=et,E[19]=eu,E[20]=l):l=E[20],E[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,tr.G)("create-issue-preview"),E[21]=u):u=E[21];let ep=ea?av.toolbarLeftWithDivider:av.toolbarLeft;E[22]!==R?(m=(0,c.jsx)(tc,{item:R}),E[22]=R,E[23]=m):m=E[23],E[24]!==ep||E[25]!==m?(p=(0,c.jsx)("div",{className:ep,children:m}),E[24]=ep,E[25]=m,E[26]=p):p=E[26],E[27]!==O?.parent?.item||E[28]!==P||E[29]!==en||E[30]!==ea?(f=ea&&(0,c.jsxs)("div",{className:(0,eD.$)(av.subIssueIndicator,to.truncateText),children:["Edit sub-issue of"," ",(0,c.jsx)("button",{onClick:()=>P(en,!0),className:(0,eD.$)(to.inlineButton,to.truncateText),children:O?.parent?.item.name})]}),E[27]=O?.parent?.item,E[28]=P,E[29]=en,E[30]=ea,E[31]=f):f=E[31],E[32]===Symbol.for("react.memo_cache_sentinel")?(g=(0,c.jsx)(H.A,{href:"https://gh.io/copilot-create-issues-feedback",className:av.feedbackLink,children:"Give feedback"}),E[32]=g):g=E[32],E[33]!==J?(y=e=>{let{issue:t}=e;return J?.(t)},E[33]=J,E[34]=y):y=E[34],E[35]!==O||E[36]!==M||E[37]!==L||E[38]!==Y||E[39]!==y||E[40]!==el?(v=(0,c.jsxs)("div",{className:av.toolbarActions,children:[g,(0,c.jsx)(tv,{issueTemplate:el,issueNode:O,issueFormRef:er,isBulkCreate:M,onClose:L,onCreateSuccess:y,onCreateBulkSuccess:Y})]}),E[35]=O,E[36]=M,E[37]=L,E[38]=Y,E[39]=y,E[40]=el,E[41]=v):v=E[41],E[42]!==p||E[43]!==f||E[44]!==v?(_=(0,c.jsxs)("div",{className:av.toolbar,children:[p,f,v]}),E[42]=p,E[43]=f,E[44]=v,E[45]=_):_=E[45],E[46]!==R||E[47]!==K||E[48]!==G||E[49]!==V?(b=(0,c.jsx)(aN,{draftIssue:R,resolvedDraftIssueRepo:K,loadingDraftIssueRepo:G,topReposQuery:V}),E[46]=R,E[47]=K,E[48]=G,E[49]=V,E[50]=b):b=E[50],E[51]!==R?(C=(0,c.jsx)(aF,{draftIssue:R}),E[51]=R,E[52]=C):C=E[52],E[53]!==b||E[54]!==C?(N=(0,c.jsxs)(ti.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[b,C]}),E[53]=b,E[54]=C,E[55]=N):N=E[55];let eh=el??void 0;return E[56]!==R||E[57]!==Z||E[58]!==L||E[59]!==J||E[60]!==X||E[61]!==eh||E[62]!==Q?(S=(0,c.jsx)(ax,{draftIssue:R,template:eh,issueFormRef:er,onCreate:J,onChange:Z,onClose:L,onBeforeCreate:Q,onFieldChange:X}),E[56]=R,E[57]=Z,E[58]=L,E[59]=J,E[60]=X,E[61]=eh,E[62]=Q,E[63]=S):S=E[63],E[64]!==O||E[65]!==R?(w=O?.children&&O.children.length>0&&(0,c.jsx)(aT,{issue:R}),E[64]=O,E[65]=R,E[66]=w):w=E[66],E[67]!==N||E[68]!==S||E[69]!==w?(I=(0,c.jsxs)("div",{className:av.form,children:[N,S,w]}),E[67]=N,E[68]=S,E[69]=w,E[70]=I):I=E[70],E[71]!==_||E[72]!==I?(k=(0,c.jsxs)("div",{className:av.container,ref:ee,children:[_,I]}),E[71]=_,E[72]=I,E[73]=k):k=E[73],E[74]!==ed||E[75]!==l||E[76]!==k?(T=(0,c.jsx)(tn.S,{optionConfig:l,preselectedData:ed,...u,children:k}),E[74]=ed,E[75]=l,E[76]=k,E[77]=T):T=E[77],T}function aJ(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{aQ.displayName||(aQ.displayName="CreateIssuePreview")}catch{}var aY=n(76325),aZ=n(8579),aX=n(16945),a0=n(23125),a1=n(67621);let a2=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)},a3={container:"FilePreview-module__container--_pENP",previewContainer:"FilePreview-module__previewContainer--vjKjn",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--bIVZV",toolbar:"FilePreview-module__toolbar--toYCM",toolbarLeft:"FilePreview-module__toolbarLeft--FG_Fy",toolbarLoC:"FilePreview-module__toolbarLoC--cjBe0",toolbarActions:"FilePreview-module__toolbarActions--GZPSm",footer:"FilePreview-module__footer--pwLuO"};var a4=n(50539);let a5={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function a6(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}let a7={container:"SandboxView-module__container--_qS7F",iframe:"SandboxView-module__iframe--bgP8I"},a8={error:"ErrorMessage-module__error--EPInF",errorIcon:"ErrorMessage-module__errorIcon--qRxBg",errorHeader:"ErrorMessage-module__errorHeader--ePU6Q"};function a9(e){let t,n=(0,d.c)(4),{error:a}=e;if(n[0]!==a){let e,r,i=a?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("span",{className:a8.errorIcon,children:(0,c.jsx)(_.StopIcon,{size:24})}),r=(0,c.jsx)("h2",{className:a8.errorHeader,children:"HTML rendering failed"}),n[2]=e,n[3]=r):(e=n[2],r=n[3]),t=(0,c.jsxs)("div",{className:a8.error,children:[e,r,i.length>0?(0,c.jsx)("p",{children:i.map(re)}):(0,c.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=a,n[1]=t}else t=n[1];return t}function re(e){return(0,c.jsxs)(c.Fragment,{children:[e,(0,c.jsx)("br",{})]},`error-line-${e}}`)}try{a9.displayName||(a9.displayName="ErrorMessage")}catch{}function rt(e){let t,n,a,r,i=(0,d.c)(14),{content:o,inlineScripts:s,inlineStyles:l,headScripts:u,bodyScripts:m,styles:p,viewscreenUrl:h}=e,f=(0,nm.G7)("viewscreen_sandbox");i[0]!==h?(n=new URL("view/sandbox?url=client://sandbox",h).toString(),t=new URL(n,ee.fV.origin),i[0]=h,i[1]=t,i[2]=n):(t=i[1],n=i[2]);let g=t.origin,y=(0,x.useRef)(null),v=(0,x.useRef)(null);i[3]!==m||i[4]!==o||i[5]!==u||i[6]!==s||i[7]!==l||i[8]!==p?(a={content:o,headScripts:u,bodyScripts:m,inlineScripts:s,inlineStyles:l,styles:p},i[3]=m,i[4]=o,i[5]=u,i[6]=s,i[7]=l,i[8]=p,i[9]=a):a=i[9];let{renderState:_,errorMessage:b}=function(e,t,n,a){let r,i,o,s,l,c,u=(0,d.c)(16),[m,p]=(0,x.useState)(a5.LOADING),[h,f]=(0,x.useState)();u[0]!==t||u[1]!==e||u[2]!==a?(r=n=>(function(e,t,n,a,r,i){let o=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!o)return;let s=o.body,l=n.current?.contentWindow;switch(s){case"hello":a6(l,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),a6(l,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":i(a5.ERROR),o.payload?.error&&r(o.payload.error);break;case"loading":i(a5.LOADING);break;case"loaded":if(!n.current||!a.current)return;i(a5.LOADED);break;case"ready":if(!n.current||!a.current)return;i(a5.READY)}})(n,0,e,t,f,p),u[0]=t,u[1]=e,u[2]=a,u[3]=r):r=u[3];let g=r;return u[4]!==g?(i=()=>(window.addEventListener("message",g),()=>window.removeEventListener("message",g)),o=[g],u[4]=g,u[5]=i,u[6]=o):(i=u[5],o=u[6]),(0,x.useEffect)(i,o),u[7]!==t||u[8]!==e||u[9]!==n||u[10]!==m?(s=()=>{m===a5.READY&&e.current&&t.current&&function(e,t,n){let a={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}};a6(e.contentWindow,a)}(e.current,t.current,n)},l=[t,e,n,m],u[7]=t,u[8]=e,u[9]=n,u[10]=m,u[11]=s,u[12]=l):(s=u[11],l=u[12]),(0,x.useEffect)(s,l),u[13]!==h||u[14]!==m?(c={renderState:m,errorMessage:h},u[13]=h,u[14]=m,u[15]=c):c=u[15],c}(y,v,a,g);if(!f)return null;for(let e of((0,eS.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:f}),Array.from(new Set([...u||[],...m||[],...p||[]].map(e=>{try{return new URL(e,g).origin}catch{return null}}).filter(Boolean)))))(0,eS.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return i[10]!==b||i[11]!==_||i[12]!==n?(r=(0,c.jsx)("div",{ref:v,className:a7.container,children:_===a5.ERROR?(0,c.jsx)(a9,{error:b}):(0,c.jsx)("iframe",{ref:y,className:a7.iframe,sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),i[10]=b,i[11]=_,i[12]=n,i[13]=r):r=i[13],r}try{rt.displayName||(rt.displayName="SandboxView")}catch{}let rn={loadingContainer:"HtmlPreview-module__loadingContainer--b987j",loadingHead:"HtmlPreview-module__loadingHead--abHb3",loadingText:"HtmlPreview-module__loadingText--WYXW5"};function ra(e,t,n){let a=`file:${e}`;if(!n.has(a))return null;let r=n.get(a)??[],i=r[r.length-1];if(!i)return null;let o=t.get(i);return o&&"file"===o.type?o:null}function rr(e){let t,n,a=(0,d.c)(15),{file:r}=e,{previewUrl:i}=(0,N.X)(),{items:o,versionedItems:s}=(0,eC.xx)(),{scripts:l,styles:u,files:m}=function(e,t,n){let a=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>ra(e,t,n)),r=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(e).map(e=>ra(e,t,n)),i=Array.from(e.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...a.map(e=>e?.value??""),...i,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:r.map(e=>e?.value??"").join(`
`),files:a.concat(r)}}(r.value,o,s),[p,h]=(0,x.useState)(!1),f=(r.isStreaming||m.some(ri))&&!p;a[0]!==f||a[1]!==h?(t=()=>{if(f){let e=setTimeout(()=>{h(!0)},3e3);return()=>clearTimeout(e)}},a[0]=f,a[1]=h,a[2]=t):t=a[2],(0,x.useEffect)(t),a[3]!==r.value?(n=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],a=[];for(let r of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(r)?n.push(r):a.push(r);return{headScripts:n,bodyScripts:a,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(r.value),a[3]=r.value,a[4]=n):n=a[4];let{headScripts:g,bodyScripts:y,styles:v}=n;if(f){let e;return a[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsxs)("div",{className:rn.loadingContainer,children:[(0,c.jsx)("div",{className:rn.loadingHead,children:(0,c.jsx)(a4.N,{animationType:"thinking",loopAnimation:!0})}),(0,c.jsx)("p",{className:rn.loadingText,children:"Preparing your preview\u2026"})]}),a[5]=e):e=a[5],e}{let e;return a[6]!==y||a[7]!==v||a[8]!==r.id||a[9]!==r.value||a[10]!==g||a[11]!==i||a[12]!==l||a[13]!==u?(e=(0,c.jsx)(rt,{inlineScripts:l,inlineStyles:u,headScripts:g,bodyScripts:y,styles:v,content:r.value,viewscreenUrl:i},r.id),a[6]=y,a[7]=v,a[8]=r.id,a[9]=r.value,a[10]=g,a[11]=i,a[12]=l,a[13]=u,a[14]=e):e=a[14],e}}function ri(e){return!e||e.isStreaming}try{rr.displayName||(rr.displayName="HtmlPreview")}catch{}var ro=n(24880),rs=n(45968),rl=n(74022);let rc={markdownPreview:"MarkdownPreview-module__markdownPreview--TTDgv",spinner:"MarkdownPreview-module__spinner--hV_1B",error:"MarkdownPreview-module__error--MpG_1",errorIcon:"MarkdownPreview-module__errorIcon--ZskC4",errorHeader:"MarkdownPreview-module__errorHeader--WHC6c"};function rd(e){let t,n,a,r=(0,d.c)(7),{file:i}=e,o=function(e,t){let n,a,r,i,o=(0,d.c)(6),[s,l]=(0,x.useState)(e);return 2e3!==o[0]?(a=(0,rl.A)(l,t),o[0]=t,o[1]=a):a=o[1],n=a,o[2]!==n||o[3]!==e?(r=()=>n(e),i=[n,e],o[2]=n,o[3]=e,o[4]=r,o[5]=i):(r=o[4],i=o[5]),(0,x.useEffect)(r,i),s}(i.value,2e3);r[0]!==i.name||r[1]!==o?(t={queryKey:["copilot-immersive","MarkdownPreview",o,i.name],queryFn:async()=>{let e=await (0,S.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:o,filename:i.name}});if(!e.ok)throw Error(`Failed to load rendered markdown (${e.status} on ${e.url})`);return await e.json()},placeholderData:ro.rX,staleTime:1/0},r[0]=i.name,r[1]=o,r[2]=t):t=r[2];let{status:s,data:l}=(0,j.I)(t);return r[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,eD.$)("readme html-blob blob",rc.markdownPreview),r[3]=n):n=r[3],r[4]!==l||r[5]!==s?(a=(0,c.jsx)("div",{className:n,children:"pending"===s?(0,c.jsx)("div",{className:rc.spinner,children:(0,c.jsx)(q.A,{srText:"Loading Markdown preview\u2026"})}):"error"===s?(0,c.jsxs)("div",{className:rc.error,children:[(0,c.jsx)("span",{className:rc.errorIcon,children:(0,c.jsx)(_.StopIcon,{size:24})}),(0,c.jsx)("h2",{className:rc.errorHeader,children:"Markdown rendering failed"}),(0,c.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,c.jsx)(rs.$6,{className:"markdown-body",html:l.html})}),r[4]=l,r[5]=s,r[6]=a):a=r[6],a}try{rd.displayName||(rd.displayName="MarkdownPreview")}catch{}function ru(e){let t,n,a,r,i,o,s,l,u,m,p,f,g,y,v=(0,d.c)(44),{isPreviewOpening:b,file:C,onClose:N}=e,{updateItem:S}=(0,eC.xx)(),w=(0,em.Pk)();v[0]!==C.isStreaming||v[1]!==C.messageId||v[2]!==w.messages?(t=C.isStreaming?w.messages[w.messages.length-1]:w.messages.find(e=>e.id===C.messageId),v[0]=C.isStreaming,v[1]=C.messageId,v[2]=w.messages,v[3]=t):t=v[3];let I=t,{linesOfCode:k,isPreviewable:T,size:E}=function(e){let t,n,a,r,i=(0,d.c)(12);if(i[0]!==e.language||i[1]!==e.value){let r,o,s=new Blob([e.value]).size;i[5]===Symbol.for("react.memo_cache_sentinel")?(r=new Set(["markdown","html"]),i[5]=r):r=i[5];let l=r;i[6]!==e.value?(o=e.value.split(`
`),i[6]=e.value,i[7]=o):o=i[7],t=o.length,n=l.has(e.language),a=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(s),i[0]=e.language,i[1]=e.value,i[2]=t,i[3]=n,i[4]=a}else t=i[2],n=i[3],a=i[4];return i[8]!==t||i[9]!==n||i[10]!==a?(r={linesOfCode:t,isPreviewable:n,size:a},i[8]=t,i[9]=n,i[10]=a,i[11]=r):r=i[11],r}(C);!function(e,t){let n,a,r,i,o,s,l,c=(0,d.c)(25),{reference:u}=e,m=(0,h.b)(),p=u?.type;c[0]!==u?(n=u?(0,eu.Vb)(u):void 0,c[0]=u,c[1]=n):n=c[1],c[2]!==p||c[3]!==n?(a=["copilot-reference-preview","copilot","references",p,n],c[2]=p,c[3]=n,c[4]=a):a=c[4],c[5]!==e||c[6]!==m||c[7]!==u||c[8]!==t?(r=async()=>{if(!u||"file"!==u.type||e.value)return null;let n=await m.service.hydrateReference(u);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},c[5]=e,c[6]=m,c[7]=u,c[8]=t,c[9]=r):r=c[9],c[10]!==a||c[11]!==r?(i={queryKey:a,queryFn:r,staleTime:Number.POSITIVE_INFINITY},c[10]=a,c[11]=r,c[12]=i):i=c[12];let{isLoading:f,isError:g,data:y}=(0,j.I)(i);c[13]!==y||c[14]!==e||c[15]!==t?(o=()=>{y?.contents&&e.value!==y.contents&&t({...e,value:y.contents,isStreaming:!1})},c[13]=y,c[14]=e,c[15]=t,c[16]=o):o=c[16];let v=y?.contents;c[17]!==e||c[18]!==v||c[19]!==t?(s=[v,e,t],c[17]=e,c[18]=v,c[19]=t,c[20]=s):s=c[20],(0,x.useEffect)(o,s),c[21]!==y||c[22]!==g||c[23]!==f?(l={isLoading:f,isError:g,data:y},c[21]=y,c[22]=g,c[23]=f,c[24]=l):l=c[24]}(C,S);let[A,R]=(0,x.useState)("code"),[L,P]=(0,x.useState)(void 0);v[4]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{P(e)},v[4]=n):n=v[4];let D=n;v[5]!==I?.error?.type||v[6]!==N?(a=()=>{(I?.error?.type==="publicCode"||I?.error?.type==="filtered")&&N()},v[5]=I?.error?.type,v[6]=N,v[7]=a):a=v[7];let O=I?.error;v[8]!==N||v[9]!==O?(r=[O,N],v[8]=N,v[9]=O,v[10]=r):r=v[10],(0,x.useEffect)(a,r),v[11]!==T||v[12]!==A?(i=T&&(0,c.jsxs)(aX.I,{"aria-label":"File view",onChange:e=>{let t=0===e?"preview":"code";R(t),(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:[(0,c.jsx)(aX.I.Button,{selected:"preview"===A,children:"Preview"}),(0,c.jsx)(aX.I.Button,{selected:"code"===A,children:"Code"})]}),v[11]=T,v[12]=A,v[13]=i):i=v[13],v[14]!==C?(o=(0,c.jsx)(tc,{item:C,onVersionSelect:D}),v[14]=C,v[15]=o):o=v[15];let M=1===k?"line":"lines";return v[16]!==k||v[17]!==E||v[18]!==M?(s=(0,c.jsxs)("p",{className:a3.toolbarLoC,children:[k," ",M," \xb7 ",E]}),v[16]=k,v[17]=E,v[18]=M,v[19]=s):s=v[19],v[20]!==i||v[21]!==o||v[22]!==s?(l=(0,c.jsxs)("div",{className:a3.toolbarLeft,children:[i,o,s]}),v[20]=i,v[21]=o,v[22]=s,v[23]=l):l=v[23],v[24]!==C.value?(u=(0,c.jsx)(aZ.T,{textToCopy:C.value,ariaLabel:"Copy code",onCopy:rm}),v[24]=C.value,v[25]=u):u=v[25],v[26]!==C.name||v[27]!==C.value||v[28]!==L?(m=(0,c.jsx)(eW.K,{"aria-label":"Download code",icon:_.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=C.name.lastIndexOf(".");if(e>0){let t=C.name.substring(0,e),n=C.name.substring(e);return void 0!==L?`${t}_${L}${n}`:C.name}return void 0!==L?`${C.name}_${L}`:C.name})();a2(new File([C.value],e)),(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),v[26]=C.name,v[27]=C.value,v[28]=L,v[29]=m):m=v[29],v[30]!==u||v[31]!==m?(p=(0,c.jsxs)("div",{className:a3.toolbarActions,children:[u,m]}),v[30]=u,v[31]=m,v[32]=p):p=v[32],v[33]!==l||v[34]!==p?(f=(0,c.jsxs)("div",{className:a3.toolbar,children:[l,p]}),v[33]=l,v[34]=p,v[35]=f):f=v[35],v[36]!==C||v[37]!==b||v[38]!==T||v[39]!==A?(g=T&&"preview"===A?(0,c.jsx)(rf,{file:C}):(0,c.jsx)(rh,{file:C,isPreviewOpening:b}),v[36]=C,v[37]=b,v[38]=T,v[39]=A,v[40]=g):g=v[40],v[41]!==f||v[42]!==g?(y=(0,c.jsxs)("div",{className:a3.container,children:[f,g]}),v[41]=f,v[42]=g,v[43]=y):y=v[43],y}function rm(){return(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}let rp=(0,a0.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function rh({file:e,isPreviewOpening:t}){let{openItem:n,updateItem:a,versionedItems:r}=(0,eC.xx)(),i=(0,x.useRef)(!1),o=function(e,t){let n=e.get((0,eO.oy)(t.id))??[];return n[n.length-1]===t.id}(r,e),s=!e.reference||"thread-scoped-file"===e.reference.type,l=s&&!e.isStreaming&&o,u=(0,x.useId)(),m=function(e){let t,n,a,r=(0,d.c)(6);return r[0]!==e?(n=function({language:e,value:t}){var n;let a=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 8;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,a),indentWithTabs:"tab"===a,lineWrapping:function(e){let t=(0,tR.vL)(e);return t?.wrap??!1}(e)}}(e),r[0]=e,r[1]=n):n=r[1],t=n,r[2]!==t.indentUnit||r[3]!==t.indentWithTabs||r[4]!==t.lineWrapping?(a={indentUnit:t.indentUnit,indentWithTabs:t.indentWithTabs,lineWrapping:t.lineWrapping},r[2]=t.indentUnit,r[3]=t.indentWithTabs,r[4]=t.lineWrapping,r[5]=a):a=r[5],a}(e),[p,h]=(0,x.useState)(),f=p?.id===e.id?p.value:e.value,{messages:g}=(0,em.Pk)(),y=(0,x.useRef)(null),v=(0,x.useRef)(null),_=e=>{v.current=e},b=(0,x.useRef)(null);(0,x.useEffect)(()=>{if(!b.current)return;let e=b.current.querySelector(".cm-scroller");if(y.current=e,!e)return;let t=()=>{_(e.scrollTop)};return e.addEventListener("wheel",t,{passive:!0}),e.addEventListener("touchstart",t,{passive:!0}),e.addEventListener("mousedown",t),e.addEventListener("keydown",t),()=>{e.removeEventListener("wheel",t),e.removeEventListener("touchstart",t),e.removeEventListener("mousedown",t),e.removeEventListener("keydown",t)}},[]),(0,x.useEffect)(()=>{let t=y.current;t&&(e.isUserEdited||(t.scrollTop=v.current??0))},[e.isUserEdited,f]),(0,x.useEffect)(()=>{t&&(i.current=!0)},[t]);let j=(0,a1.K)((0,x.useCallback)(t=>{if(l&&t!==e.value)if(e.isUserEdited)h({value:t,id:e.id}),rp(e,t,a);else{let r={...e,messageId:tA.Wp,id:`file:${e.name}#${g.length}`,timestamp:new Date,isUserEdited:!0,value:t};a(r),n(r.id),h({value:t,id:r.id})}},[e,l,g.length,n,a]));return(0,c.jsxs)("div",{ref:b,className:a3.codeMirrorContainer,children:[(0,c.jsxs)("span",{id:u,className:"sr-only",children:[e.name," file contents"]}),(0,c.jsx)(aY.default,{ariaLabelledBy:u,containerClassName:a3.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!l,spacing:m,value:f,onChange:j,focusNextRenderRef:i,placeholder:"Loading...",hideHelp:!0}),s&&!o&&(0,c.jsx)("div",{className:a3.footer,children:"Switch to the latest version to edit this file."})]})}function rf(e){let t=(0,d.c)(4),{file:n}=e;if("markdown"===n.language){let e;return t[0]!==n?(e=(0,c.jsx)("div",{className:a3.previewContainer,children:(0,c.jsx)(rd,{file:n})}),t[0]=n,t[1]=e):e=t[1],e}if("html"!==n.language)return null;{let e;return t[2]!==n?(e=(0,c.jsx)("div",{className:a3.previewContainer,children:(0,c.jsx)(rr,{file:n})}),t[2]=n,t[3]=e):e=t[3],e}}try{ru.displayName||(ru.displayName="FilePreview")}catch{}try{rh.displayName||(rh.displayName="CodeMirrorView")}catch{}try{rf.displayName||(rf.displayName="PreviewComponent")}catch{}let rg={container:"ImagePreview-module__container--AUrb4",imageElement:"ImagePreview-module__imageElement--DNVl1"};function ry(e){let t,n=(0,d.c)(3),{image:a}=e;return n[0]!==a.altText||n[1]!==a.url?(t=(0,c.jsx)("div",{className:rg.container,children:(0,c.jsx)("img",{className:rg.imageElement,src:a.url,alt:a.altText})}),n[0]=a.altText,n[1]=a.url,n[2]=t):t=n[2],t}try{ry.displayName||(ry.displayName="ImagePreview")}catch{}var rx=n(77009),rv=n(80019);let r_={container:"IssuePreview-module__container--XUu9S"},rb=(0,x.memo)(function(e){let t,n,a,r,i,o,s,l,u,m=(0,d.c)(17),{isPreviewOpening:p,issue:h,onClose:f}=e,[g,y]=(0,x.useState)(p);if(m[0]!==g?(t=()=>{if(g){let e=setTimeout(()=>y(!1),400);return()=>clearTimeout(e)}},n=[g],m[0]=g,m[1]=t,m[2]=n):(t=m[1],n=m[2]),(0,x.useEffect)(t,n),m[3]!==h.href?(r=(0,c.jsx)(eW.K,{icon:_.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(h.href,"_blank")}}),m[3]=h.href,m[4]=r):r=m[4],a=r,m[5]!==f||m[6]!==a?(o={navigate:tb.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:f,additionalHeaderActions:a,showRepositoryPill:!0},m[5]=f,m[6]=a,m[7]=o):o=m[7],i=o,m[8]!==h.number||m[9]!==h.owner||m[10]!==h.repo?(l={owner:h.owner,repo:h.repo,number:h.number,type:"Issue"},m[8]=h.number,m[9]=h.owner,m[10]=h.repo,m[11]=l):l=m[11],s=l,g){let e;return m[12]!==i?(e=(0,c.jsx)(ta.Q,{optionConfig:i}),m[12]=i,m[13]=e):e=m[13],e}return m[14]!==s||m[15]!==i?(u=(0,c.jsx)("div",{className:r_.container,children:(0,c.jsx)(rv.e,{children:(0,c.jsx)(rx.cI,{itemIdentifier:s,optionConfig:i})})}),m[14]=s,m[15]=i,m[16]=u):u=m[16],u});try{rb.displayName||(rb.displayName="IssuePreview")}catch{}function rj(e){let t,n=(0,d.c)(16),{isOpening:a,onClose:r,previewItem:i}=e,o=null;switch(i.type){case"file":{let e;n[0]!==a||n[1]!==r||n[2]!==i?(e=(0,c.jsx)(ru,{isPreviewOpening:a,file:i,onClose:r}),n[0]=a,n[1]=r,n[2]=i,n[3]=e):e=n[3],o=e;break}case"issue":{let e;n[4]!==a||n[5]!==r||n[6]!==i?(e=(0,c.jsx)(rb,{isPreviewOpening:a,issue:i,onClose:r}),n[4]=a,n[5]=r,n[6]=i,n[7]=e):e=n[7],o=e;break}case"new-issue":{let e;n[8]!==a||n[9]!==r||n[10]!==i?(e=(0,c.jsx)(aQ,{isPreviewOpening:a,issue:i,onClose:r}),n[8]=a,n[9]=r,n[10]=i,n[11]=e):e=n[11],o=e;break}case"image":{let e;n[12]!==i?(e=(0,c.jsx)(ry,{image:i}),n[12]=i,n[13]=e):e=n[13],o=e}}return n[14]!==o?(t=o?(0,c.jsx)(eF.t,{fallback:(0,c.jsx)(e9,{regionName:"This workbench item"}),children:o}):null,n[14]=o,n[15]=t):t=n[15],t}try{rj.displayName||(rj.displayName="ContentPreviewItem")}catch{}let rC={tabContainer:"ContentPreviewTab-module__tabContainer--TyGLZ",tabContent:"ContentPreviewTab-module__tabContent--zNIXv",isActive:"ContentPreviewTab-module__isActive--xbw0T",mainButton:"ContentPreviewTab-module__mainButton--Y_fZZ",icon:"ContentPreviewTab-module__icon--Ff5yz",title:"ContentPreviewTab-module__title--WZajJ",closeButton:"ContentPreviewTab-module__closeButton--DACs7"};function rN(e){let t=(0,d.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(q.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(_.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(_.CodeIcon,{}),t[2]=e):e=t[2],e}}function rS(e){let t=(0,d.c)(5),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,c.jsx)(rN,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"image":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(_.ImageIcon,{}),t[2]=e):e=t[2],e}case"issue":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(_.IssueOpenedIcon,{}),t[3]=e):e=t[3],e}case"new-issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(_.IssueDraftIcon,{}),t[4]=e):e=t[4],e}default:return null}}let rw=(0,x.forwardRef)(function(e,t){let n,a,r,i,o,s,l,u,m,p,h,f,g,y,v,b,j=(0,d.c)(38);if(j[0]!==e){let{onClick:t,onClose:c,isActive:d,item:u,controlHintId:m,tabPanelId:p,...h}=e;i=t,a=d,r=u,n=m,l=p,o=h,s=()=>{c&&c(),(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},j[0]=e,j[1]=n,j[2]=a,j[3]=r,j[4]=i,j[5]=o,j[6]=s,j[7]=l}else n=j[1],a=j[2],r=j[3],i=j[4],o=j[5],s=j[6],l=j[7];let C=s,N=(0,x.useRef)(null),S=r.name;j[8]!==a?(u=(0,eD.$)(rC.tabContent,{[rC.isActive]:a}),j[8]=a,j[9]=u):u=j[9];let w=a?"true":void 0;j[10]!==i?(m=e=>{i&&i(e),(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},j[10]=i,j[11]=m):m=j[11],j[12]!==C?(p=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":C();break;case"tab":if(e.shiftKey)break;e.preventDefault(),N.current?.focus()}},h=e=>{1===e.button&&C()},j[12]=C,j[13]=p,j[14]=h):(p=j[13],h=j[14]),j[15]!==r?(f=(0,c.jsx)("span",{className:rC.icon,children:(0,c.jsx)(rS,{item:r})}),j[15]=r,j[16]=f):f=j[16];let I=`content-preview-tab-${r.id}`;j[17]!==I||j[18]!==S?(g=(0,c.jsx)("span",{className:rC.title,"data-title":S,"data-testid":I,children:S}),j[17]=I,j[18]=S,j[19]=g):g=j[19],j[20]!==n||j[21]!==t||j[22]!==o||j[23]!==w||j[24]!==m||j[25]!==p||j[26]!==h||j[27]!==f||j[28]!==g||j[29]!==l?(y=(0,c.jsxs)("button",{className:rC.mainButton,type:"button",role:"tab","aria-selected":w,"aria-describedby":n,"aria-controls":l,onClick:m,onKeyDown:p,onAuxClick:h,ref:t,...o,children:[f,g]}),j[20]=n,j[21]=t,j[22]=o,j[23]=w,j[24]=m,j[25]=p,j[26]=h,j[27]=f,j[28]=g,j[29]=l,j[30]=y):y=j[30];let k=`Close ${S}`;return j[31]!==C||j[32]!==k?(v=(0,c.jsx)("div",{className:rC.closeButton,children:(0,c.jsx)(eW.K,{icon:_.XIcon,size:"small",variant:"invisible","aria-label":k,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:C,ref:N})}),j[31]=C,j[32]=k,j[33]=v):v=j[33],j[34]!==y||j[35]!==v||j[36]!==u?(b=(0,c.jsx)("div",{className:rC.tabContainer,children:(0,c.jsxs)("div",{className:u,children:[y,v]})}),j[34]=y,j[35]=v,j[36]=u,j[37]=b):b=j[37],b});try{rN.displayName||(rN.displayName="CodeTabIcon")}catch{}try{rS.displayName||(rS.displayName="TabIcon")}catch{}try{rw.displayName||(rw.displayName="ContentPreviewTab")}catch{}function rI(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,c.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{rI.displayName||(rI.displayName="DiceIcon")}catch{}let rk={container:"EmptyState-module__container--iHvWJ",icon:"EmptyState-module__icon--e1df9",heading:"EmptyState-module__heading--p3oK5",subtitle:"EmptyState-module__subtitle--oksOj"};function rT(e){let t,n,a,r,i,o,s,l,u,m,p,f,g=(0,d.c)(23),{isOpening:y}=e,v=(0,h.b)(),b=(0,em.Pk)(),j=(0,X.zy)(),C=(0,x.useRef)(null);g[0]!==b?(t=(0,ay.W)(b),g[0]=b,g[1]=t):t=g[1];let S=t,w=(0,N.X)();g[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],g[2]=n):n=g[2];let[I,k]=(0,x.useState)(n);g[3]!==w.icebreakers?(a=()=>{var e;if(Array.isArray(e=w.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=w.icebreakers.find(rE);e&&e.data.length>0&&k(e.data)}},g[3]=w.icebreakers,g[4]=a):a=g[4],g[5]!==j||g[6]!==w.icebreakers?(r=[w.icebreakers,j],g[5]=j,g[6]=w.icebreakers,g[7]=r):r=g[7],(0,x.useEffect)(a,r),g[8]!==y?(i=()=>{y&&C.current&&window.requestAnimationFrame(()=>{C.current?.focus()})},o=[y],g[8]=y,g[9]=i,g[10]=o):(i=g[9],o=g[10]),(0,x.useEffect)(i,o),g[11]!==S||g[12]!==I||g[13]!==v||g[14]!==b?(s=()=>{if(0===I.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(I),t=0===b.messages.length?S:(0,ay.W)(b),n=b.currentUserLogin,a=e.message;v.sendChatMessage({thread:t,content:a.replaceAll("$$USERNAME$$",n),references:b.currentReferences,topic:b.currentTopic,context:b.context,customInstructions:b.customInstructions,model:b.model}),(0,eS.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:b.currentTopic?.name,mode:"immersive",suggestionId:e.id})},g[11]=S,g[12]=I,g[13]=v,g[14]=b,g[15]=s):s=g[15];let T=s;return g[16]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsx)(_.BrowserIcon,{size:24,className:rk.icon}),p=(0,c.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),l=(0,c.jsx)("h2",{className:rk.heading,children:"View files directly within Copilot"}),u=(0,c.jsx)("p",{className:rk.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),g[16]=l,g[17]=u,g[18]=m,g[19]=p):(l=g[16],u=g[17],m=g[18],p=g[19]),g[20]!==T||g[21]!==b.isWaitingOnCopilot?(f=(0,c.jsxs)("div",{className:rk.container,children:[m,p,l,u,(0,c.jsx)(aD.Q,{ref:C,leadingVisual:rI,onClick:T,disabled:b.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),g[20]=T,g[21]=b.isWaitingOnCopilot,g[22]=f):f=g[22],f}function rE(e){return"interactional"===e.type}try{rT.displayName||(rT.displayName="EmptyState")}catch{}let rA={container:"LoadingState-module__container--a0Cz6"};function rR(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:rA.container,children:(0,c.jsx)(q.A,{size:"large"})}),t[0]=e):e=t[0],e}try{rR.displayName||(rR.displayName="LoadingState")}catch{}function rL(e,t,n={}){(0,eS.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function rP({returnFocusRef:e}){let t=(0,eC.tZ)(),{items:n,allOpenItems:a,selectedItem:r,openItem:i,closeItem:o,closeAllItems:s,closePreviewPane:l,showLoadingState:d}=(0,eC.xx)(),u=(0,e$.S)(t),m=t&&!u,p=u&&!t,h=a.map(e=>n.get(e)).filter(e=>e?.type==="file"),f=(0,x.useId)(),g=(0,x.useId)(),y=(0,x.useId)(),v=a.map(e=>n.get(e)).filter(e=>!!e);(0,x.useEffect)(()=>{p&&e.current?.focus()},[p,e]);let b=async()=>{let e=h.map(e=>new File([e.value],e.name));a2(new File([await (function(e,t={}){let n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return("bigint"==typeof t.length||Number.isInteger(t.length))&&t.length>0&&(n["Content-Length"]=String(t.length)),t.metadata&&(n["Content-Length"]=String(e6(t.metadata))),new Response(function(e,t={}){let n=function(e){let t=e[Symbol.iterator in e?Symbol.iterator:Symbol.asyncIterator]();return{async next(){let e=await t.next();if(e.done)return e;let[n,a]=e5(e.value);return{done:0,value:Object.assign(function(e,t){if(void 0===t||t instanceof Date||(t=new Date(t)),e instanceof File)return{isFile:1,t:t||new Date(e.lastModified),i:e.stream()};if(e instanceof Response)return{isFile:1,t:t||new Date(e.headers.get("Last-Modified")||Date.now()),i:e.body};if(void 0===t)t=new Date;else if(isNaN(t))throw Error("Invalid modification date.");if(void 0===e)return{isFile:0,t:t};if("string"==typeof e)return{isFile:1,t:t,i:eK(e)};if(e instanceof Blob)return{isFile:1,t:t,i:e.stream()};if(e instanceof Uint8Array||e instanceof ReadableStream)return{isFile:1,t:t,i:e};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{isFile:1,t:t,i:eG(e)};if(Symbol.asyncIterator in e)return{isFile:1,t:t,i:eY(e[Symbol.asyncIterator]())};throw TypeError("Unsupported input format.")}(...a),eZ(...n))}},throw:t.throw?.bind(t),[Symbol.asyncIterator](){return this}}}(e);return eY(async function*(e,t){let n=[],a=0n,r=0n,i=0;for await(let o of e){let e=function({o:e,l:t},n){return 8*(!t||(n??function(e){try{e3.decode(e)}catch{return 0}return 1}(e)))}(o,t.buffersAreUTF8);yield function(e,t=0){let n=eq(30);return n.setUint32(0,0x504b0304),n.setUint32(4,0x2d000800|t),e2(e.t,n,10),n.setUint16(26,e.o.length,1),eG(n)}(o,e),yield new Uint8Array(o.o),o.isFile&&(yield*e4(o));let s=o.u>=4294967295n,l=12*(a>=4294967295n)|28*s;yield function(e,t){let n=eq(16+8*!!t);return n.setUint32(0,0x504b0708),n.setUint32(4,e.isFile?e.m:0,1),t?(n.setBigUint64(8,e.u,1),n.setBigUint64(16,e.u,1)):(n.setUint32(8,eQ(e.u),1),n.setUint32(12,eQ(e.u),1)),eG(n)}(o,s),n.push(function(e,t,n=0,a=0){let r=eq(46);return r.setUint32(0,0x504b0102),r.setUint32(4,0x2d032d00),r.setUint16(8,2048|n),e2(e.t,r,12),r.setUint32(16,e.isFile?e.m:0,1),r.setUint32(20,eQ(e.u),1),r.setUint32(24,eQ(e.u),1),r.setUint16(28,e.o.length,1),r.setUint16(30,a,1),r.setUint16(40,e.isFile?33204:16893,1),r.setUint32(42,eQ(t),1),eG(r)}(o,a,e,l)),n.push(o.o),l&&n.push(function(e,t,n){let a=eq(n);return a.setUint16(0,1,1),a.setUint16(2,n-4,1),16&n&&(a.setBigUint64(4,e.u,1),a.setBigUint64(12,e.u,1)),a.setBigUint64(n-8,t,1),eG(a)}(o,a,l)),s&&(a+=8n),r++,a+=BigInt(46+o.o.length)+o.u,i||(i=s)}let o=0n;for(let e of n)yield e,o+=BigInt(e.length);if(i||a>=4294967295n){let e=eq(76);e.setUint32(0,0x504b0606),e.setBigUint64(4,BigInt(44),1),e.setUint32(12,0x2d032d00),e.setBigUint64(24,r,1),e.setBigUint64(32,r,1),e.setBigUint64(40,o,1),e.setBigUint64(48,a,1),e.setUint32(56,0x504b0607),e.setBigUint64(64,a+o,1),e.setUint32(72,1,1),yield eG(e)}let s=eq(22);s.setUint32(0,0x504b0506),s.setUint16(8,eJ(r),1),s.setUint16(10,eJ(r),1),s.setUint32(12,eQ(o),1),s.setUint32(16,eQ(a),1),yield eG(s)}(n,t),n)}(e,t),{headers:n})})(e).blob()],"files.zip"))},j=v.find(e=>e.id===r)??v[0],C=(0,x.useCallback)((e=!1)=>{if(j){let t=e&&1===v.length;o(j.id),t&&(l(),(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},[o,l,v.length,j]),N=(0,x.useRef)([]),S=(0,x.useRef)(null);(0,eV.G)({containerRef:S,focusableElementFilter:e=>"tab"===e.role,bindKeys:eU.z0.ArrowHorizontal|eU.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},[v]);let w=!(0,eB.g)(S),I=e=>{let t=v[e];if(!t)return;let n=N.current[e+1]??N.current[e-1]??S.current;n?.focus();let a=1===v.length;o(t.id),a&&l(),rL("filePreviewTab.close",t)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:te.toolbar,children:[(0,c.jsx)("div",{className:(0,eD.$)(te.actions,te.rightDivider),children:(0,c.jsx)(rD,{})}),(0,c.jsx)("div",{className:te.tabsContainer,children:(0,c.jsxs)("div",{className:te.tabs,role:"tablist","aria-label":"Workbench items",ref:S,tabIndex:-1,onWheel:e=>{e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft+=e.deltaY)},children:[v.map((e,t)=>(0,c.jsx)(rw,{id:e.id===r?f:void 0,tabPanelId:e.id===r?g:void 0,controlHintId:y,isActive:e.id===r,onClick:()=>{i(e.id),rL("filePreviewTab.click",e)},onClose:()=>I(t),item:e,ref:e=>{N.current[t]=e}},e.id)),(0,c.jsx)("span",{id:y,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),(0,c.jsx)("span",{})]})}),a.length>0&&(0,c.jsx)("div",{className:(0,eD.$)(te.actions,w&&te.leftDivider),children:(0,c.jsxs)(ez.W,{children:[(0,c.jsx)(ez.W.Anchor,{children:(0,c.jsx)(eW.K,{icon:_.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,c.jsx)(ez.W.Overlay,{children:(0,c.jsxs)(eH.l,{children:[h.length>0&&(0,c.jsxs)(eH.l.Item,{onSelect:b,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.FileZipIcon,{})}),"Download all files"]}),(0,c.jsxs)(eH.l.Item,{onSelect:()=>{s(),(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.XIcon,{})}),"Close all tabs"]})]})})]})})," "]}),(0,c.jsx)("div",{className:te.content,role:"tabpanel",id:g,"aria-labelledby":f,children:d?(0,c.jsx)(rR,{}):j?(0,c.jsx)(rj,{isOpening:m,previewItem:j,onClose:C}):(0,c.jsx)(rT,{isOpening:m})})]})}function rD(){let e,t=(0,d.c)(2),{closePreviewPane:n}=(0,eC.xx)();return t[0]!==n?(e=(0,c.jsx)(eW.K,{variant:"invisible",icon:_.SidebarCollapseIcon,"aria-label":"Close workbench",onClick:()=>{n(),(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}}),t[0]=n,t[1]=e):e=t[1],e}function rO(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:te.toolbar,children:(0,c.jsx)("div",{className:(0,eD.$)(te.actions,te.rightDivider),children:(0,c.jsx)(rD,{})})}),(0,c.jsx)("div",{className:(0,eD.$)(te.content),children:(0,c.jsx)(e9,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function rM(e){let t,n,a,r,i=(0,d.c)(9),o=(0,x.useId)();return i[0]!==o?(t=(0,c.jsx)("h2",{id:o,className:"sr-only",children:"Workbench"}),i[0]=o,i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(rO,{}),i[2]=n):n=i[2],i[3]!==e?(a=(0,c.jsx)(eF.t,{fallback:n,children:(0,c.jsx)(rP,{...e})}),i[3]=e,i[4]=a):a=i[4],i[5]!==o||i[6]!==t||i[7]!==a?(r=(0,c.jsxs)("div",{"aria-labelledby":o,className:te.container,tabIndex:-1,"data-testid":"content-preview",role:"dialog",children:[t,a]}),i[5]=o,i[6]=t,i[7]=a,i[8]=r):r=i[8],r}try{rP.displayName||(rP.displayName="ContentPreviewInner")}catch{}try{rD.displayName||(rD.displayName="CloseContentPreviewButton")}catch{}try{rO.displayName||(rO.displayName="ContentPreviewFallback")}catch{}try{rM.displayName||(rM.displayName="ContentPreview")}catch{}function rB(){let e=(0,X.zy)(),t=ee.fV.pathname;return(!t||z.W.newThreadNavigate)&&(t=e.pathname),(0,x.useMemo)(()=>t.includes("/share/"),[t])}let rF=/\/copilot\/c\/([^/]+)/,r$=/\/copilot\/share\/([^/]+)/;function rU(){let e,t=(0,d.c)(2),n=(0,X.zy)(),a=ee.fV.pathname||n.pathname||"",{threadID:r}=(0,X.g)();e:{let n;t[0]!==a?(n=a.match(rF)||a.match(r$),t[0]=a,t[1]=n):n=t[1];let r=n;if(!r){e=null;break e}let[,i]=r;e=i??null}let i=e;return z.W.newThreadNavigate?r??null:i}function rV(e,t){let n,a,r=(0,d.c)(17),i=(0,em.Pk)(),{currentReferences:o,context:s}=i,l=(0,h.b)(),{reloadQuota:c}=(0,eA.xR)();r[0]!==i?(n=(0,ay.W)(i),r[0]=i,r[1]=n):n=r[1];let u=n,{updateItem:m}=(0,eC.xx)(),p=rB(),f=rU(),g=(0,aL.G)();return r[2]!==s||r[3]!==o||r[4]!==e||r[5]!==g||r[6]!==p||r[7]!==l||r[8]!==t||r[9]!==c||r[10]!==i.customInstructions||r[11]!==i.model||r[12]!==i.skillOptions||r[13]!==u||r[14]!==f||r[15]!==m?(a=async n=>{if(c("handle_message_submit"),""===n.trim())return;for(let e of o){let n=(0,eO.oR)({ref:e,messageIndex:t});null!=n&&m({...n,isUserEdited:!1})}let a={thread:u,content:n,references:o,topic:e.current,context:s,customInstructions:i.customInstructions,model:i.model,customCopilotId:g,skillOptions:i.skillOptions};if(p){let e=await l.continueSharedThread(f);if(e){let{thread:t,messages:n}=e,r=n.at(-1)?.id;await l.sendChatMessage({...a,thread:t,parentMessageId:r})}}else await l.sendChatMessage(a)},r[2]=s,r[3]=o,r[4]=e,r[5]=g,r[6]=p,r[7]=l,r[8]=t,r[9]=c,r[10]=i.customInstructions,r[11]=i.model,r[12]=i.skillOptions,r[13]=u,r[14]=f,r[15]=m,r[16]=a):a=r[16],a}var rz=n(66871),rW=n(26807);function rH(){let e,t=(0,d.c)(3),n=(0,h.b)(),a=(0,rW.Z)();return t[0]!==n||t[1]!==a?(e=async e=>{window.location.pathname!==eu.Jz&&(z.W.newThreadNavigate?a(eu.Jz):(0,rz.kd)(eu.Jz),n.dispatch({type:"SELECT_PLUGIN",plugin:null}),await n.selectThread(null,e))},t[0]=n,t[1]=a,t[2]=e):e=t[2],e}var rq=n(75718);let rG={banner:"ChatInputBanners-module__banner--QlUDL"},rK={container:"QuotaExceededBanner-module__container--BbiER"};function rQ(){let e,t,n,a,r=(0,d.c)(12),{isLicensedLimited:i,chatQuotaRemaining:o,premiumChatQuotaRemaining:s,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,eA.xR)(),[u,m]=(0,x.useState)(rJ);r[0]!==o||r[1]!==c||r[2]!==l?(e=()=>{if(z.W.premiumRequestQuotasEnabled&&void 0!==o){let e=eR.J.getQuotaExceededBannerFlag();z.W.premiumRequestQuotasEnabled&&!c&&l?null===e?(eR.J.setQuotaExceededBannerFlag(!0),m(!0)):m(e):(eR.J.removeQuotaExceededBannerFlag(),m(!1))}},r[0]=o,r[1]=c,r[2]=l,r[3]=e):e=r[3],r[4]!==o||r[5]!==c||r[6]!==s||r[7]!==l?(t=[o,s,c,l],r[4]=o,r[5]=c,r[6]=s,r[7]=l,r[8]=t):t=r[8],(0,x.useEffect)(e,t),r[9]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{eR.J.setQuotaExceededBannerFlag(!1),m(!1)},r[9]=n):n=r[9];let p=n,h=u&&!i&&void 0!==o&&z.W.premiumRequestQuotasEnabled;return r[10]!==h?(a={visible:h,onDismiss:p},r[10]=h,r[11]=a):a=r[11],a}function rJ(){return eR.J.getQuotaExceededBannerFlag()??!1}function rY(e){let t,n,a,r,i=(0,d.c)(13),{onDismiss:o}=e,{canUpgradePlan:s,canPurchaseAdditionalQuota:l,resetDate:u}=(0,eA.xR)(),m=`You have reached your monthly limit for premium requests. ${s?`Select an upgrade option or switch to the default model. Limit resets on ${u}.`:`Enable additional requests or switch to the default model. Limit resets on ${u}.`}`;i[0]!==l||i[1]!==s?(t=s?(0,c.jsx)(ew.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:r0,children:"Upgrade"}):l?(0,c.jsx)(ew.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:rX,children:"Enable additional requests"}):null,i[0]=l,i[1]=s,i[2]=t):t=i[2];let p=t;i[3]!==l||i[4]!==s?(n=s&&l?(0,c.jsx)(H.A,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:rZ,children:"Enable additional requests"}):null,i[3]=l,i[4]=s,i[5]=n):n=i[5];let h=n;return i[6]!==o?(a=()=>{o(),(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_DISMISS",mode:"immersive"})},i[6]=o,i[7]=a):a=i[7],i[8]!==m||i[9]!==p||i[10]!==h||i[11]!==a?(r=(0,c.jsx)("div",{className:rK.container,children:(0,c.jsx)(eI.l,{variant:"upsell",title:"Limit reached",description:m,hideTitle:!0,primaryAction:p,secondaryAction:h,onDismiss:a})}),i[8]=m,i[9]=p,i[10]=h,i[11]=a,i[12]=r):r=i[12],r}function rZ(){(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function rX(){(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function r0(){(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{rY.displayName||(rY.displayName="QuotaExceededBanner")}catch{}let r1=z.W.premiumRequestQuotasEnabled?eu.mF:10;function r2(){let e,t,n,a,r=(0,d.c)(10),{isLicensedLimited:i,chatQuotaRemaining:o,premiumChatQuotaRemaining:s,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,eA.xR)(),[u,m]=(0,x.useState)(r3);r[0]!==o||r[1]!==i||r[2]!==c||r[3]!==s||r[4]!==l?(e=()=>{if((i||z.W.premiumRequestQuotasEnabled)&&void 0!==o){let e=eR.J.getMeterBannerFlag();o>0&&o<=r1||!i&&s>0&&s<=r1||!i&&l&&c?null===e?(eR.J.setMeterBannerFlag(!0),m(!0)):m(e):(eR.J.removeMeterBannerFlag(),m(!1))}},t=[i,o,s,c,l],r[0]=o,r[1]=i,r[2]=c,r[3]=s,r[4]=l,r[5]=e,r[6]=t):(e=r[5],t=r[6]),(0,x.useEffect)(e,t),r[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{eR.J.setMeterBannerFlag(!1),m(!1)},r[7]=n):n=r[7];let p=n,h=u&&void 0!==o&&(i||z.W.premiumRequestQuotasEnabled);return r[8]!==h?(a={visible:h,onDismiss:p},r[8]=h,r[9]=a):a=r[9],a}function r3(){return eR.J.getMeterBannerFlag()??!1}function r4(e){let t,n,a,r,i,o=(0,d.c)(18),{onDismiss:s,className:l}=e,{isLicensedLimited:u,canUpgradePlan:m,canPurchaseAdditionalQuota:p,premiumInteractionsQuotaExceeded:h,resetDate:f}=(0,eA.xR)(),g=u?`You have used ${100-r1}% of your free requests this month.`:h?`You have used all premium requests available this month. You will be charged per additional premium request until the limit resets on ${f}.`:`You have used ${100-r1}% of your premium responses this month. ${m?"Upgrade to increase your limit.":"Enable additional requests to get more usage after the limit is reached."}`;o[0]!==p||o[1]!==m||o[2]!==h?(t=m&&!h?(0,c.jsx)(ew.z,{as:"a",href:eu.Zs,onClick:r8,children:"Upgrade"}):p&&!h?(0,c.jsx)(ew.z,{as:"a",href:eu.pF,onClick:r7,children:"Enable additional requests"}):(0,c.jsx)(ew.z,{as:"a",href:eu.MB,onClick:r6,children:"Manage billing"}),o[0]=p,o[1]=m,o[2]=h,o[3]=t):t=o[3];let y=t;o[4]!==p||o[5]!==m||o[6]!==h?(n=m&&p&&!h?(0,c.jsx)(H.A,{as:"a",href:eu.Zs,onClick:r5,children:"Enable additional requests"}):null,o[4]=p,o[5]=m,o[6]=h,o[7]=n):n=o[7];let x=n;return o[8]!==s?(a=()=>{s(),(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})},o[8]=s,o[9]=a):a=o[9],o[10]!==g||o[11]!==y||o[12]!==x||o[13]!==a?(r=(0,c.jsx)(eI.l,{variant:"info",title:"Limit reached soon",description:g,hideTitle:!0,primaryAction:y,secondaryAction:x,onDismiss:a}),o[10]=g,o[11]=y,o[12]=x,o[13]=a,o[14]=r):r=o[14],o[15]!==l||o[16]!==r?(i=(0,c.jsx)("div",{className:l,children:r}),o[15]=l,o[16]=r,o[17]=i):i=o[17],i}function r5(){(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function r6(){(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_MANAGE_BILLING",mode:"immersive"})}function r7(){(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function r8(){(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{r4.displayName||(r4.displayName="QuotaMeterBanner")}catch{}function r9(){let e,t,n,a,r=(0,d.c)(12),{ambientError:i}=(0,em.Pk)(),o=r2(),s=rQ();return r[0]!==i?(e=i&&(0,c.jsx)(rq.P,{ambientError:i,useLargerBorderRadius:!0}),r[0]=i,r[1]=e):e=r[1],r[2]!==s.onDismiss||r[3]!==s.visible?(t=s.visible&&(0,c.jsx)(rY,{onDismiss:s.onDismiss}),r[2]=s.onDismiss,r[3]=s.visible,r[4]=t):t=r[4],r[5]!==o.onDismiss||r[6]!==o.visible?(n=o.visible&&(0,c.jsx)(r4,{className:rG.banner,onDismiss:o.onDismiss}),r[5]=o.onDismiss,r[6]=o.visible,r[7]=n):n=r[7],r[8]!==e||r[9]!==t||r[10]!==n?(a=(0,c.jsxs)(c.Fragment,{children:[e,t,n]}),r[8]=e,r[9]=t,r[10]=n,r[11]=a):a=r[11],a}try{r9.displayName||(r9.displayName="ChatInputBanners")}catch{}let ie={container:"Layout-module__container--ON_wj",left:"Layout-module__left--LHTG3",main:"Layout-module__main--JKQM5",content:"Layout-module__content--s7QoY",footer:"Layout-module__footer--raJHn",spaceBannerContainer:"Layout-module__spaceBannerContainer--hYIu0",chatInputContainer:"Layout-module__chatInputContainer--DXrKy",previewPane:"Layout-module__previewPane--vF1ZO",active:"Layout-module__active--nDCtU",viewer:"Layout-module__viewer--M_UyD",fullscreenPreviewPane:"Layout-module__fullscreenPreviewPane--i4oKD",fullscreenPluginPane:"Layout-module__fullscreenPluginPane--nfB0s"},it={notificationsSection:"NotificationsSection-module__notificationsSection--ArEtE",spaceBannerContainer:"NotificationsSection-module__spaceBannerContainer--XY6vv",banner:"NotificationsSection-module__banner--gFs8T"},ia={container:"FreeChatExceededBanner-module__container--tU_jX"};function ir(){let e,t,n=(0,d.c)(3),{resetDate:a}=(0,eA.xR)(),r=`You have reached your free plan limit. Limit resets on ${a}.`;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(ew.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:ii,children:"Upgrade"}),n[0]=e):e=n[0];let i=e;return n[1]!==r?(t=(0,c.jsx)("div",{className:ia.container,children:(0,c.jsx)(eI.l,{variant:"upsell",title:"Limit reached",description:r,hideTitle:!0,primaryAction:i})}),n[1]=r,n[2]=t):t=n[2],t}function ii(){(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{ir.displayName||(ir.displayName="FreeChatExceededBanner")}catch{}function io(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(eI.l,{title:"Chat is disabled",variant:"warning",description:"Conversation unavailable. The linked space may have been deleted, or you might be signed out of your organization.",hideTitle:!0}),t[0]=e):e=t[0],e}function is(e){let t,n=(0,d.c)(3),{customCopilot:a}=e,r=(0,X.Zp)();return n[0]!==a||n[1]!==r?(t=a&&(0,c.jsx)(eI.l,{title:"Chat is disabled",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue chatting.",hideTitle:!0,primaryAction:(0,c.jsx)(ew.z,{as:"a",href:(0,eL.Cb)(a),onClick:e=>{e.preventDefault(),r((0,eL.Cb)(a))},children:"Edit"})}),n[0]=a,n[1]=r,n[2]=t):t=n[2],t}function il(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(eI.l,{title:"Reference size exceeded",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function ic(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(eI.l,{title:"Reference not found",variant:"critical",description:"We couldn't access that repository. Make sure it exists and that you have permission to use it.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function id(e){let t,n,a,r=(0,d.c)(7),{errorMessages:i,onDismiss:o}=e;if(0===i.length)return null;r[0]!==i?(t=Array.from(new Set(i)),r[0]=i,r[1]=t):t=r[1];let s=t;r[2]!==s?(n=1===s.length?s[0]:(0,c.jsxs)(c.Fragment,{children:["Errors during attachment upload:",(0,c.jsx)("ul",{style:{paddingLeft:"1.2em"},children:s.map(iu)})]}),r[2]=s,r[3]=n):n=r[3];let l=n;return r[4]!==l||r[5]!==o?(a=(0,c.jsx)(eI.l,{variant:"critical",description:l,title:"Error during attachment upload",hideTitle:!0,className:"mb-3",onDismiss:o}),r[4]=l,r[5]=o,r[6]=a):a=r[6],a}function iu(e){return(0,c.jsx)("li",{children:e},e)}try{io.displayName||(io.displayName="SpaceDeletedBanner")}catch{}try{is.displayName||(is.displayName="SpaceSizeExceededBanner")}catch{}try{il.displayName||(il.displayName="ReferenceSizeExceededBanner")}catch{}try{ic.displayName||(ic.displayName="AssociatedRepositoryReferenceNotFoundBanner")}catch{}try{id.displayName||(id.displayName="UploadErrorBanner")}catch{}let im={spaceHomepage:"spaceHomepage",customCopilotDisabled:"customCopilotDisabled",customCopilotSizeExceeded:"customCopilotSizeExceeded"};function ip(e){let t=(0,d.c)(4),{variant:n,customCopilot:a}=e;switch(n){case im.customCopilotDisabled:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(io,{}),t[0]=e):e=t[0],e}case im.customCopilotSizeExceeded:{let e;return t[1]!==a?(e=(0,c.jsx)(is,{customCopilot:a}),t[1]=a,t[2]=e):e=t[2],e}case im.spaceHomepage:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(c.Fragment,{}),t[3]=e):e=t[3],e}default:return null}}function ih(e,t){let n,a,r=(0,d.c)(9),{isPending:i,data:o,error:s}=(0,eP.Ao)(e),l=s instanceof eP.i9,c=s instanceof eP.OW;if(s&&!l&&!c)throw s;let u=i||l||c||!o?void 0:o;r[0]!==u||r[1]!==e||r[2]!==i||r[3]!==t?(n=function(e,t,n,a){if(e&&!a)return im.spaceHomepage;if(n)return null;let r=!!t;return e&&!r?im.customCopilotDisabled:(0,eL.Hh)(t)?im.customCopilotSizeExceeded:null}(e,u,i,t),r[0]=u,r[1]=e,r[2]=i,r[3]=t,r[4]=n):n=r[4];let m=n;return r[5]!==u||r[6]!==i||r[7]!==m?(a={variant:m,customCopilot:u,isLoading:i},r[5]=u,r[6]=i,r[7]=m,r[8]=a):a=r[8],a}try{ip.displayName||(ip.displayName="SpaceConversationBanner")}catch{}function ig(){let e,t,n=(0,d.c)(16),{ambientError:a,customCopilots:r,selectedThreadID:i}=(0,em.Pk)(),o=(0,aL.G)();n[0]!==o||n[1]!==r?(e=(0,eL.JB)(r,o),n[0]=o,n[1]=r,n[2]=e):e=n[2];let s=!!e,{chatQuotaExceeded:l,isLicensedLimited:u}=(0,eA.xR)(),{variant:m,customCopilot:p}=ih(o,i),h=(!m||s)&&!(u&&l),f=r2(),g=rQ(),y=m===im.customCopilotDisabled,x=m===im.customCopilotSizeExceeded,v=h&&a,_=h&&g.visible,b=h&&f.visible,j=!h,C=y||x,N=y||x||v||_||b||j;return n[3]!==a||n[4]!==p||n[5]!==g||n[6]!==f||n[7]!==v||n[8]!==j||n[9]!==_||n[10]!==b||n[11]!==N||n[12]!==y||n[13]!==C||n[14]!==x?(t=N&&(0,c.jsxs)("section",{"aria-label":"Notifications",className:it.notificationsSection,children:[C&&(0,c.jsxs)("div",{className:it.spaceBannerContainer,children:[y&&(0,c.jsx)(io,{}),x&&(0,c.jsx)(is,{customCopilot:p})]}),v&&(0,c.jsx)(rq.P,{ambientError:a,useLargerBorderRadius:!0}),!C&&(0,c.jsxs)(c.Fragment,{children:[_&&(0,c.jsx)(rY,{onDismiss:g.onDismiss}),b&&(0,c.jsx)(r4,{className:it.banner,onDismiss:f.onDismiss}),j&&(0,c.jsx)(ir,{})]})]}),n[3]=a,n[4]=p,n[5]=g,n[6]=f,n[7]=v,n[8]=j,n[9]=_,n[10]=b,n[11]=N,n[12]=y,n[13]=C,n[14]=x,n[15]=t):t=n[15],t}try{ig.displayName||(ig.displayName="NotificationsSection")}catch{}function iy(e){let t,n,a,r,i,o=(0,d.c)(17),{textAreaRef:s,handleUserSubmit:l,nextMessageIndex:u}=e,m=(0,em.Pk)(),{chatQuotaExceeded:h,isLicensedLimited:f}=(0,eA.xR)(),g=rH(),y=function(){let e,t=(0,d.c)(2),{figmaAuthUrl:n}=(0,N.X)();if(n){if(t[0]!==n){let a=new URL(n,location.origin);a.searchParams.set("return_url",location.pathname+location.search),e=a.toString(),t[0]=n,t[1]=e}else e=t[1];return e}}();o[0]!==u?(t={messageIndex:u},o[0]=u,o[1]=t):t=o[1];let x=eM(t),{versionedItems:v,items:_}=(0,eC.xx)();if(o[2]!==_){for(let[,e]of(a=new Set,_))"file"===e.type&&a.add(e.name);o[2]=_,o[3]=a}else a=o[3];n=a;let b=!(f&&h);return o[4]!==b||o[5]!==n||o[6]!==y||o[7]!==l||o[8]!==g||o[9]!==u||o[10]!==x||o[11]!==m||o[12]!==s||o[13]!==v?(r=b?(0,c.jsxs)(c.Fragment,{children:[z.W.groupNotifications&&(0,c.jsx)(ig,{}),!z.W.groupNotifications&&(0,c.jsx)(r9,{}),(0,c.jsx)(p.V,{showModelPicker:!0,onNewThreadSelected:g,textAreaRef:s,onSubmit:l,isStreaming:!!m.streamingMessage,size:"large",onSelectReference:x,getReferenceVersion:e=>(0,eO.wt)(e,u,v),existingFileNames:n,figmaAuthUrl:y})]}):!z.W.groupNotifications&&(0,c.jsx)(ir,{}),o[4]=b,o[5]=n,o[6]=y,o[7]=l,o[8]=g,o[9]=u,o[10]=x,o[11]=m,o[12]=s,o[13]=v,o[14]=r):r=o[14],o[15]!==r?(i=(0,c.jsx)("div",{className:ie.chatInputContainer,children:r}),o[15]=r,o[16]=i):i=o[16],i}try{iy.displayName||(iy.displayName="ChatInputContainer")}catch{}var ix=n(22469),iv=n(53850),i_=n(86571);let ib=(0,x.createContext)(void 0);function ij(e){let t,n,a,r,i,o,s=(0,d.c)(12),{children:l,model:u,state:m,manager:p}=e,[h,f]=(0,x.useState)(!1);s[0]!==p||s[1]!==u||s[2]!==m?(t=async(e,t)=>{if(!e)return;[...e].some(iN)&&!u.capabilities.supports.vision&&(p.addAmbientError(`The ${u.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,iv.d)("vision_not_supported_for_model",{modelId:u.id,uploadType:t}));let[n,a]=ix.s.getAllowedFiles([...e],u);if(n.length>0&&new ix.s(m,p).addImageAttachments(n,t),z.W.pasteTextFiles&&a.length>0){let e=[],n=new i_.E(p);await Promise.allSettled(a.map(async t=>{await i_.E.isAttachable(t)?await n.addAttachment(t):e.push(t.type)})),e.length>0&&(0,iv.d)("included_unsupported_file",{fileTypes:e.join(","),uploadType:t})}},s[0]=p,s[1]=u,s[2]=m,s[3]=t):t=s[3];let g=t;return s[4]!==g?(n=()=>{let e=e=>{e.preventDefault(),f(!1),g(e.dataTransfer?.files||null,"drag")},t=()=>{f(!0)},n=()=>{f(!1)};return window.addEventListener("dragover",iC),window.addEventListener("drop",e),window.addEventListener("dragenter",t),window.addEventListener("dragleave",n),()=>{window.removeEventListener("dragover",iC),window.removeEventListener("drop",e),window.removeEventListener("dragenter",t),window.removeEventListener("dragleave",n)}},a=[g],s[4]=g,s[5]=n,s[6]=a):(n=s[5],a=s[6]),(0,x.useEffect)(n,a),s[7]!==h?(i={isDragging:h},s[7]=h,s[8]=i):i=s[8],r=i,s[9]!==l||s[10]!==r?(o=(0,c.jsx)(ib.Provider,{value:r,children:l}),s[9]=l,s[10]=r,s[11]=o):o=s[11],o}function iC(e){e.preventDefault()}function iN(e){return e.type.startsWith("image/")}try{ib.displayName||(ib.displayName="DragDropContext")}catch{}try{ij.displayName||(ij.displayName="DragDropProvider")}catch{}var iS=n(33484),iw=n(75320),iI=n(74302),ik=n(7479),iT=n(40961),iE=n(84464),iA=n(53526),iR=n(73451),iL=n(9591);let iP={hideOnDesktop:"ConversationActions-module__hideOnDesktop--zHNNV"};var iD=n(48071),iO=n(640),iM=n(52464);let iB={container:"ConversationSharingDialog-module__container--AYIbb",innerContainer:"ConversationSharingDialog-module__innerContainer--aF_PO",sharedLinkContainer:"ConversationSharingDialog-module__sharedLinkContainer--ccuni",textInputContainer:"ConversationSharingDialog-module__textInputContainer--IoJB6",textInput:"ConversationSharingDialog-module__textInput--hqfoz",success:"ConversationSharingDialog-module__success--IlwFA",spinner:"ConversationSharingDialog-module__spinner--yV4lB",successIcon:"ConversationSharingDialog-module__successIcon--tw4y6",mutedText:"ConversationSharingDialog-module__mutedText--VVQZ_",warningText:"ConversationSharingDialog-module__warningText--Pp3s_",snapshotText:"ConversationSharingDialog-module__snapshotText--Rrl0m",buttonStack:"ConversationSharingDialog-module__buttonStack--uAtQJ",lockIcon:"ConversationSharingDialog-module__lockIcon--zZ_aM",cancelButton:"ConversationSharingDialog-module__cancelButton--TjQ9X",quickFadeUp:"ConversationSharingDialog-module__quickFadeUp--FrM1T"},iF=e=>{let t,n,a,r,i,o,s,l,u,m,p,f,g,y,v,b,j,C,N,S,w,I,k,T,E,A=(0,d.c)(82),{closeDialog:R,threadId:L}=e,P=(0,em.Pk)(),D=(0,h.b)(),[O,M]=(0,x.useState)(!1),[B,F]=(0,x.useState)(!1),[$,U]=(0,x.useState)(!1),[V,W]=(0,x.useState)(!1),{selectedThreadID:H,ssoOrganizations:G,apiUrl:K,threads:Q}=P;A[0]!==H||A[1]!==L||A[2]!==Q?(t=Q.get(L||H),A[0]=H,A[1]=L,A[2]=Q,A[3]=t):t=A[3];let J=t;A[4]!==J?.sharedID?(n=()=>J?.sharedID||"",A[4]=J?.sharedID,A[5]=n):n=A[5];let[Y,Z]=(0,x.useState)(n);A[6]!==J?(a=()=>J?.sharedMessageID?J.sharedMessageID:"",A[6]=J,A[7]=a):a=A[7];let[X,et]=(0,x.useState)(a),en=ee.fV.origin,ea=`${en}/copilot/share/${Y}`;A[8]!==O?(r=()=>{if(O){let e=setTimeout(()=>M(!1),1500);return()=>clearTimeout(e)}},i=[O],A[8]=O,A[9]=r,A[10]=i):(r=A[9],i=A[10]),(0,x.useEffect)(r,i),A[11]!==$?(o=()=>{if($){let e=setTimeout(()=>U(!1),1500);return()=>clearTimeout(e)}},s=[$],A[11]=$,A[12]=o,A[13]=s):(o=A[12],s=A[13]),(0,x.useEffect)(o,s),A[14]!==ea?(l=async()=>{try{await (0,iO.D)(ea),M(!0),(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},A[14]=ea,A[15]=l):l=A[15];let er=l;A[16]!==J?.sharedID||A[17]!==H||A[18]!==L?(u=()=>{(L||H)&&Z(J?.sharedID||"")},A[16]=J?.sharedID,A[17]=H,A[18]=L,A[19]=u):u=A[19];let ei=J?.sharedID;A[20]!==H||A[21]!==ei||A[22]!==L?(m=[ei,H,L],A[20]=H,A[21]=ei,A[22]=L,A[23]=m):m=A[23],(0,x.useEffect)(u,m),A[24]!==K||A[25]!==D||A[26]!==H||A[27]!==G||A[28]!==L?(p=async()=>{F(!0);let e=L||H,t=new iD.k(K,G),n=await t.shareThread(e,z.W.copilotShareActiveSubthread&&e===H?D.FindLastMessageID():"");if(n.ok){F(!1);let{sharedAt:t,sharedID:a,sharedMessageID:r}=n.payload;Z(a),U(!0),et(r),D.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:a,sharedAt:t,sharedMessageID:r}}),(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:a})}else F(!1)},A[24]=K,A[25]=D,A[26]=H,A[27]=G,A[28]=L,A[29]=p):p=A[29];let eo=p;A[30]!==K||A[31]!==D||A[32]!==H||A[33]!==Y||A[34]!==V||A[35]!==G||A[36]!==L?(f=async()=>{if(!V)return void W(!0);W(!1),F(!0);let e=L||H,t=new iD.k(K,G),n=await t.unshareThread(e);if(n.ok){F(!1),et("");let{sharedID:t,sharedAt:a,sharedMessageID:r}=n.payload;D.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:a,sharedMessageID:r}}),(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:Y})}else F(!1)},A[30]=K,A[31]=D,A[32]=H,A[33]=Y,A[34]=V,A[35]=G,A[36]=L,A[37]=f):f=A[37];let es=f;A[38]!==eo||A[39]!==B||A[40]!==Y?(g=()=>{if(!Y)return(0,c.jsx)(aD.Q,{variant:"primary",disabled:B,onClick:eo,children:"Share"})},A[38]=eo,A[39]=B,A[40]=Y,A[41]=g):g=A[41];let el=g;A[42]!==es||A[43]!==B||A[44]!==Y?(y=()=>{if(Y)return(0,c.jsx)(aD.Q,{variant:"danger",disabled:B,onClick:es,children:"Unshare"})},A[42]=es,A[43]=B,A[44]=Y,A[45]=y):y=A[45];let ec=y;A[46]!==O||A[47]!==B||A[48]!==Y||A[49]!==V||A[50]!==$?(v=()=>B?(0,c.jsxs)("div",{className:iB.quickFadeUp,children:[(0,c.jsx)(q.A,{size:"small",className:iB.spinner}),Y?"Unsharing conversation...":"Sharing conversation..."]}):V?(0,c.jsxs)("div",{className:iB.quickFadeUp,children:[(0,c.jsx)(iM.A,{size:"medium",className:iB.warningText,children:"Confirm unsharing this conversation?"}),(0,c.jsx)(aD.Q,{variant:"default",onClick:()=>W(!1),className:iB.cancelButton,children:"Cancel"})]}):O?(0,c.jsxs)("div",{className:iB.quickFadeUp,children:[(0,c.jsx)(_.CheckIcon,{className:iB.successIcon}),(0,c.jsx)(iM.A,{size:"medium",className:iB.success,children:"Copied to clipboard"})]}):$?(0,c.jsxs)("div",{className:iB.quickFadeUp,children:[(0,c.jsx)(_.CheckIcon,{className:iB.successIcon}),(0,c.jsx)(iM.A,{size:"medium",className:iB.success,children:"Conversation shared"})]}):Y?(0,c.jsxs)("div",{children:[(0,c.jsx)(_.UnlockIcon,{className:iB.lockIcon}),(0,c.jsx)(iM.A,{size:"medium",className:iB.mutedText,children:"Visible to anyone with the link"})]}):(0,c.jsx)("div",{}),A[46]=O,A[47]=B,A[48]=Y,A[49]=V,A[50]=$,A[51]=v):v=A[51];let ed=v,eu=Y?"Conversation shared":"Share conversation";A[52]!==X||A[53]!==Y?(b=(0,c.jsx)(ti.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:X?(0,c.jsxs)("span",{children:[(0,c.jsx)("span",{className:iB.snapshotText,children:"This shared conversation is a snapshot"}),", accessible to anyone with the link. It will not update with new messages."]}):Y?(0,c.jsx)("span",{children:"This conversation and future messages are visible to anyone with the link. If private repository content is included, repository access is required to view."}):(0,c.jsx)("span",{children:"When shared, this conversation and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view."})}),A[52]=X,A[53]=Y,A[54]=b):b=A[54];let ep=Y&&ea,eh=Y?void 0:"https://github.com/copilot/share/\u2026";return A[55]!==er||A[56]!==Y?(j=Y?(0,c.jsx)(iL.A.Action,{onClick:()=>void er(),icon:_.CopyIcon,"aria-label":"Copy link"}):void 0,A[55]=er,A[56]=Y,A[57]=j):j=A[57],A[58]!==ep||A[59]!==eh||A[60]!==j?(C=(0,c.jsx)("div",{className:iB.innerContainer,children:(0,c.jsx)("div",{className:iB.sharedLinkContainer,children:(0,c.jsx)("div",{className:iB.textInputContainer,children:(0,c.jsx)(iL.A,{"aria-label":"Shared link",size:"large",readOnly:!0,value:ep,placeholder:eh,className:iB.textInput,trailingAction:j})})})}),A[58]=ep,A[59]=eh,A[60]=j,A[61]=C):C=A[61],A[62]!==b||A[63]!==C?(N=(0,c.jsxs)(ti.B,{direction:"vertical",gap:"condensed",children:[b,C]}),A[62]=b,A[63]=C,A[64]=N):N=A[64],A[65]!==ed?(S=ed(),A[65]=ed,A[66]=S):S=A[66],A[67]!==el?(w=el(),A[67]=el,A[68]=w):w=A[68],A[69]!==ec?(I=ec(),A[69]=ec,A[70]=I):I=A[70],A[71]!==S||A[72]!==w||A[73]!==I?(k=(0,c.jsxs)(ti.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:iB.buttonStack,children:[S,w,I]}),A[71]=S,A[72]=w,A[73]=I,A[74]=k):k=A[74],A[75]!==N||A[76]!==k?(T=(0,c.jsxs)("div",{className:iB.container,children:[N,k]}),A[75]=N,A[76]=k,A[77]=T):T=A[77],A[78]!==R||A[79]!==eu||A[80]!==T?(E=(0,c.jsx)(tf.l,{title:eu,onClose:R,width:"large",children:T}),A[78]=R,A[79]=eu,A[80]=T,A[81]=E):E=A[81],E};try{iF.displayName||(iF.displayName="ConversationSharingDialog")}catch{}function i$(e){let t,n,a,r,i,o,s,l,u=(0,d.c)(21),{onOpenDialog:m,showShare:p,hideShareOnDesktop:h,isShared:f}=e,g=void 0===p||p,y=void 0!==h&&h,x=void 0!==f&&f,{canShareThread:v}=(0,N.X)(),{isWaitingOnCopilot:b,messages:j}=(0,em.Pk)(),C=(0,eu.Q7)(j).length>0||b;return u[0]!==m?(t=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),m("rename")},u[0]=m,u[1]=t):t=u[1],u[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.PencilIcon,{})}),u[2]=n):n=u[2],u[3]!==t?(a=(0,c.jsxs)(eH.l.Item,{onSelect:t,children:[n,"Rename"]}),u[3]=t,u[4]=a):a=u[4],u[5]!==v||u[6]!==y||u[7]!==x||u[8]!==m||u[9]!==C||u[10]!==g?(r=g&&v&&(0,c.jsxs)(eH.l.Item,{className:y?iP.hideOnDesktop:void 0,disabled:C,onSelect:()=>{(0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),m("share")},children:[(0,c.jsx)(eH.l.LeadingVisual,{children:x?(0,c.jsx)(_.UnlockIcon,{}):(0,c.jsx)(_.LockIcon,{})}),"Share"]}),u[5]=v,u[6]=y,u[7]=x,u[8]=m,u[9]=C,u[10]=g,u[11]=r):r=u[11],u[12]!==m?(i=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),m("delete")},u[12]=m,u[13]=i):i=u[13],u[14]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.TrashIcon,{})}),u[14]=o):o=u[14],u[15]!==i?(s=(0,c.jsxs)(eH.l.Item,{variant:"danger",onSelect:i,children:[o,"Delete"]}),u[15]=i,u[16]=s):s=u[16],u[17]!==s||u[18]!==a||u[19]!==r?(l=(0,c.jsxs)(c.Fragment,{children:[a,r,s]}),u[17]=s,u[18]=a,u[19]=r,u[20]=l):l=u[20],l}function iU(e){let t,n,a,r,i,o=(0,d.c)(28),{visibleDialog:s,onClose:l,threadName:u,threadId:m,selectedThreadId:p,onStartLoading:f,onFinishLoading:g}=e,{threads:y}=(0,em.Pk)(),x=(0,h.b)(),v=rH();o[0]!==l?(t=()=>{l(),(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})},o[0]=l,o[1]=t):t=o[1];let _=t;o[2]!==x||o[3]!==v||o[4]!==l||o[5]!==g||o[6]!==f||o[7]!==p||o[8]!==m||o[9]!==y?(n=async()=>{l(),(0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),f();let e=y.get(m);e&&(m===p&&await v({clearTopic:!0,includeThreads:!1}),await x.deleteThread(e)),g()},o[2]=x,o[3]=v,o[4]=l,o[5]=g,o[6]=f,o[7]=p,o[8]=m,o[9]=y,o[10]=n):n=o[10];let b=n;o[11]!==x||o[12]!==l||o[13]!==g||o[14]!==f||o[15]!==m||o[16]!==y?(a=async e=>{l(),(0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),f();let t=y.get(m);t&&await x.renameThread(t,e),g()},o[11]=x,o[12]=l,o[13]=g,o[14]=f,o[15]=m,o[16]=y,o[17]=a):a=o[17];let j=a;return o[18]!==_||o[19]!==b||o[20]!==l||o[21]!==j||o[22]!==m||o[23]!==u||o[24]!==s?(r="delete"===s?(0,c.jsx)(iV,{onCancel:l,onConfirm:b}):"rename"===s?(0,c.jsx)(iz,{currentName:u,onCancel:l,onSubmit:j}):"share"===s?(0,c.jsx)(iF,{closeDialog:_,threadId:m}):null,o[18]=_,o[19]=b,o[20]=l,o[21]=j,o[22]=m,o[23]=u,o[24]=s,o[25]=r):r=o[25],o[26]!==r?(i=(0,c.jsx)(c.Fragment,{children:r}),o[26]=r,o[27]=i):i=o[27],i}let iV=e=>{let t,n=(0,d.c)(3),{onConfirm:a,onCancel:r}=e;return n[0]!==r||n[1]!==a?(t=(0,c.jsx)(iA.K,{title:"Delete conversation",onClose:e=>{"confirm"===e?((0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"}),a()):((0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),r())},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this conversation? This action cannot be undone."}),n[0]=r,n[1]=a,n[2]=t):t=n[2],t},iz=e=>{let t,n,a,r,i,o,s,l,u,m,p,h,f,g=(0,d.c)(34),{currentName:y,onCancel:v,onSubmit:_}=e,[b,j]=(0,x.useState)(void 0),C=(0,x.useRef)(null),N=(0,x.useId)(),S=(0,x.useId)();g[0]!==_?(t=e=>{e.preventDefault();let t=C.current?.value?.trim()??"";t?t.length>100?j("max_length"):_(t):j("required")},g[0]=_,g[1]=t):t=g[1];let w=t;g[2]!==v?(n=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),v()},g[2]=v,g[3]=n):n=g[3];let I=n;return g[4]!==S?(a=(0,c.jsx)("span",{id:S,children:"Rename conversation"}),g[4]=S,g[5]=a):a=g[5],g[6]!==I?(r={content:"Cancel",onClick:I},g[6]=I,g[7]=r):r=g[7],g[8]!==N?(i={content:"Update",buttonType:"primary",type:"submit",form:N,onClick:iW},g[8]=N,g[9]=i):i=g[9],g[10]!==r||g[11]!==i?(o=[r,i],g[10]=r,g[11]=i,g[12]=o):o=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(s=(0,c.jsx)(iR.A.Label,{visuallyHidden:!0,children:"Rename conversation"}),g[13]=s):s=g[13],g[14]!==y||g[15]!==S?(l=(0,c.jsx)(iL.A,{"aria-labelledby":S,ref:C,defaultValue:y,maxLength:100,block:!0}),g[14]=y,g[15]=S,g[16]=l):l=g[16],g[17]!==b?(u="required"===b&&(0,c.jsx)(iR.A.Validation,{variant:"error",children:"Enter a name"}),g[17]=b,g[18]=u):u=g[18],g[19]!==b?(m="max_length"===b&&(0,c.jsx)(iR.A.Validation,{variant:"error",children:"Name cannot exceed 100 characters"}),g[19]=b,g[20]=m):m=g[20],g[21]!==m||g[22]!==l||g[23]!==u?(p=(0,c.jsxs)(iR.A,{required:!0,children:[s,l,u,m]}),g[21]=m,g[22]=l,g[23]=u,g[24]=p):p=g[24],g[25]!==N||g[26]!==w||g[27]!==p?(h=(0,c.jsx)("form",{id:N,onSubmit:w,children:p}),g[25]=N,g[26]=w,g[27]=p,g[28]=h):h=g[28],g[29]!==I||g[30]!==h||g[31]!==a||g[32]!==o?(f=(0,c.jsx)(tf.l,{title:a,onClose:I,width:"small",footerButtons:o,initialFocusRef:C,children:h}),g[29]=I,g[30]=h,g[31]=a,g[32]=o,g[33]=f):f=g[33],f};try{i$.displayName||(i$.displayName="ConversationActions")}catch{}try{iU.displayName||(iU.displayName="ConversationActionDialogs")}catch{}try{iV.displayName||(iV.displayName="DeleteDialog")}catch{}try{iz.displayName||(iz.displayName="RenameDialog")}catch{}function iW(){return(0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}var iH=n(89985),iq=n(91321);let iG={shareButton:"ManageSharedConversationButton-module__shareButton--A4cNu",menuButton:"ManageSharedConversationButton-module__menuButton--BAXN7",successState:"ManageSharedConversationButton-module__successState--o6D7d",hideOnMobile:"ManageSharedConversationButton-module__hideOnMobile--HzeSN"},iK={container:"UnshareConversationDialog-module__container--vV3vj",buttonStack:"UnshareConversationDialog-module__buttonStack--IQJqH",threadInfoStack:"UnshareConversationDialog-module__threadInfoStack--iNgZ2",threadTitle:"UnshareConversationDialog-module__threadTitle--aYFcp",threadDescription:"UnshareConversationDialog-module__threadDescription--Cpoli"},iQ=e=>{let t,n,a,r,i,o,s,l,u,m,p,f,g,y,v,_,b,j,C,N,S=(0,d.c)(60),{closeDialog:w,threadId:I}=e,k=(0,em.Pk)(),T=(0,h.b)(),{selectedThreadID:E,ssoOrganizations:A,apiUrl:R,threads:L}=k,[P,D]=(0,x.useState)(k.messages);S[0]!==I||S[1]!==L?(t=()=>{let e=L.get(I);return e?.sharedID||""},S[0]=I,S[1]=L,S[2]=t):t=S[2];let[O,M]=(0,x.useState)(t),B=(0,x.useRef)(""!==O),F=(0,x.useRef)("");S[3]!==P||S[4]!==O||S[5]!==k.apiUrl||S[6]!==k.ssoOrganizations||S[7]!==I?(n=()=>{let e=async()=>{if(0===P.filter(e=>e.threadID===I).length){let e=new iD.k(k.apiUrl,k.ssoOrganizations),t=await e.listSharedThreadMessages(O);t.ok&&D(t.payload.messages)}};F.current!==O&&O&&(F.current=O,e())},a=[O,I,P,k.apiUrl,k.ssoOrganizations],S[3]=P,S[4]=O,S[5]=k.apiUrl,S[6]=k.ssoOrganizations,S[7]=I,S[8]=n,S[9]=a):(n=S[8],a=S[9]),(0,x.useEffect)(n,a),S[10]!==E||S[11]!==I||S[12]!==L?(r=L.get(I||E),S[10]=E,S[11]=I,S[12]=L,S[13]=r):r=S[13];let $=r,U=P[P.length-1],V=U?.content||"";S[14]!==E||S[15]!==I||S[16]!==L?(i=()=>{let e=I||E;if(e){let t=L.get(e);M(t?.sharedID||"")}},S[14]=E,S[15]=I,S[16]=L,S[17]=i):i=S[17],S[18]!==T||S[19]!==E||S[20]!==I||S[21]!==L?(o=[T,M,E,L,I],S[18]=T,S[19]=E,S[20]=I,S[21]=L,S[22]=o):o=S[22],(0,x.useEffect)(i,o),S[23]!==R||S[24]!==w||S[25]!==T||S[26]!==E||S[27]!==O||S[28]!==A||S[29]!==I?(s=async()=>{let e=I||E,t=new iD.k(R,A),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:a,sharedMessageID:r}=n.payload;T.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:a,sharedMessageID:r}}),B.current=!1,w(),(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:O})}},S[23]=R,S[24]=w,S[25]=T,S[26]=E,S[27]=O,S[28]=A,S[29]=I,S[30]=s):s=S[30];let z=s;S[31]!==w?(l=()=>{w()},S[31]=w,S[32]=l):l=S[32];let W=l;S[33]!==z||S[34]!==O?(u=()=>{if(O)return(0,c.jsx)(aD.Q,{onClick:z,variant:"danger",children:"Unshare"})},S[33]=z,S[34]=O,S[35]=u):u=S[35];let H=u;S[36]!==w?(m=()=>(0,c.jsx)(aD.Q,{onClick:w,children:"Cancel"}),S[36]=w,S[37]=m):m=S[37];let q=m;S[38]===Symbol.for("react.memo_cache_sentinel")?(p=(0,c.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),S[38]=p):p=S[38];let G=$?.name||"";return S[39]!==G?(f=(0,c.jsx)("span",{className:iK.threadTitle,children:G}),S[39]=G,S[40]=f):f=S[40],S[41]!==V?(g=(0,c.jsx)("span",{className:iK.threadDescription,children:V}),S[41]=V,S[42]=g):g=S[42],S[43]!==f||S[44]!==g?(y=(0,c.jsxs)(ti.B,{direction:"vertical",className:iK.threadInfoStack,"aria-label":"Thread information",children:[f,g]}),S[43]=f,S[44]=g,S[45]=y):y=S[45],S[46]===Symbol.for("react.memo_cache_sentinel")?(v=(0,c.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),S[46]=v):v=S[46],S[47]!==q?(_=q(),S[47]=q,S[48]=_):_=S[48],S[49]!==H?(b=H(),S[49]=H,S[50]=b):b=S[50],S[51]!==_||S[52]!==b?(j=(0,c.jsxs)(ti.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:iK.buttonStack,children:[_,b]}),S[51]=_,S[52]=b,S[53]=j):j=S[53],S[54]!==y||S[55]!==j?(C=(0,c.jsxs)("div",{className:iK.container,children:[p,y,v,j]}),S[54]=y,S[55]=j,S[56]=C):C=S[56],S[57]!==W||S[58]!==C?(N=(0,c.jsx)(tf.l,{title:"Unshare conversation",onClose:W,width:"large",children:C}),S[57]=W,S[58]=C,S[59]=N):N=S[59],N};try{iQ.displayName||(iQ.displayName="UnshareConversationDialog")}catch{}let iJ=e=>{let t,n,a,r,i,o,s,l,u,m,p,h,f,g,y,v,b,j,C=(0,d.c)(45),{openDialog:N}=e,{selectedThreadID:S,threads:w}=(0,em.Pk)(),[I,k]=(0,x.useState)(!1),[T,E]=(0,x.useState)(!1),[A,R]=(0,x.useState)(!1),[L,P]=(0,x.useState)("Copy link");C[0]!==S||C[1]!==w?(t=w.get(S)?.sharedID,C[0]=S,C[1]=w,C[2]=t):t=C[2];let D=t,O=`${ee.fV.origin}/copilot/share/${D||"\u2026"}`,{messages:M}=(0,em.Pk)(),B=(0,eu.Q7)(M).length>0;C[3]!==B?(n=()=>B?"Disabled for Copilot extensions":"Anyone with the link can view this conversation",C[3]=B,C[4]=n):n=C[4];let F=n;C[5]!==S||C[6]!==O||C[7]!==D?(a=async e=>{"preventDefault"in e&&(e.preventDefault(),e.stopPropagation());try{await (0,iO.D)(O),E(!0),P("Copied!"),setTimeout(()=>{E(!1),P("Copy link")},2e3),(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive",originalThreadId:S,sharedThreadId:D})}catch{}},C[5]=S,C[6]=O,C[7]=D,C[8]=a):a=C[8];let $=a;C[9]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{k(!0),(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_OPEN",mode:"immersive"})},C[9]=r):r=C[9];let U=r;C[10]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{k(!1),(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_CLOSE",mode:"immersive"})},C[10]=i):i=C[10];let V=i;C[11]!==B||C[12]!==N?(o=()=>{B||N()},C[11]=B,C[12]=N,C[13]=o):o=C[13];let z=o,W=F();C[14]!==B||C[15]!==z?(s=(0,c.jsx)(aD.Q,{leadingVisual:_.UnlockIcon,onClick:z,inactive:B,children:"Share"}),C[14]=B,C[15]=z,C[16]=s):s=C[16],C[17]!==W||C[18]!==s?(l=(0,c.jsx)(iH.m,{text:W,direction:"n",type:"label",children:s}),C[17]=W,C[18]=s,C[19]=l):l=C[19],C[20]===Symbol.for("react.memo_cache_sentinel")?(u=(0,c.jsx)(ez.W.Button,{"aria-label":"Additional share options",icon:_.TriangleDownIcon,className:iG.menuButton}),C[20]=u):u=C[20],C[21]!==T?(m=(0,c.jsx)(eH.l.LeadingVisual,{children:T?(0,c.jsx)(_.CheckIcon,{className:iG.successState}):(0,c.jsx)(_.CopyIcon,{})}),C[21]=T,C[22]=m):m=C[22];let H=T?iG.successState:void 0;return C[23]!==L||C[24]!==H?(p=(0,c.jsx)("span",{className:H,children:L}),C[23]=L,C[24]=H,C[25]=p):p=C[25],C[26]!==$||C[27]!==m||C[28]!==p?(h=(0,c.jsxs)(eH.l.Item,{onSelect:$,children:[m,p]},"copy-link"),C[26]=$,C[27]=m,C[28]=p,C[29]=h):h=C[29],C[30]===Symbol.for("react.memo_cache_sentinel")?(f=(0,c.jsxs)(eH.l.Item,{variant:"danger",onSelect:U,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.UnlinkIcon,{})}),"Unshare"]},"Unshare-link"),C[30]=f):f=C[30],C[31]!==h?(g=(0,c.jsx)(ez.W.Overlay,{width:"small",children:(0,c.jsx)(eH.l,{children:(0,c.jsxs)(c.Fragment,{children:[h,f]})})}),C[31]=h,C[32]=g):g=C[32],C[33]!==A||C[34]!==g?(y=(0,c.jsxs)(ez.W,{open:A,onOpenChange:R,children:[u,g]}),C[33]=A,C[34]=g,C[35]=y):y=C[35],C[36]!==y||C[37]!==l?(v=(0,c.jsxs)(iq.A,{"data-testid":"manage-shared-conversations",className:`${iG.shareButton} ${iG.hideOnMobile}`,children:[l,y]}),C[36]=y,C[37]=l,C[38]=v):v=C[38],C[39]!==S||C[40]!==I?(b=I&&(0,c.jsx)(iQ,{threadId:S,closeDialog:V}),C[39]=S,C[40]=I,C[41]=b):b=C[41],C[42]!==v||C[43]!==b?(j=(0,c.jsxs)(c.Fragment,{children:[v,b]}),C[42]=v,C[43]=b,C[44]=j):j=C[44],j};try{iJ.displayName||(iJ.displayName="ManageSharedConversationButton")}catch{}let iY={shareButton:"ShareConversationButton-module__shareButton--_CML9",hideOnMobile:"ShareConversationButton-module__hideOnMobile--AYVjz"},iZ=e=>{let t,n,a,r,i=(0,d.c)(11),{openDialog:o}=e,{messages:s}=(0,em.Pk)(),l=(0,eu.Q7)(s).length>0;i[0]!==l||i[1]!==o?(t=()=>{l||o()},i[0]=l,i[1]=o,i[2]=t):t=i[2];let u=t;i[3]!==l?(n=()=>l?"Disabled for Copilot extensions":"This conversation has not yet been shared",i[3]=l,i[4]=n):n=i[4];let m=n();return i[5]!==l||i[6]!==u?(a=(0,c.jsx)(aD.Q,{leadingVisual:_.LockIcon,inactive:l,onClick:u,className:`${iY.shareButton} ${iY.hideOnMobile}`,children:"Share"}),i[5]=l,i[6]=u,i[7]=a):a=i[7],i[8]!==m||i[9]!==a?(r=(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(iH.m,{text:m,direction:"n",type:"label",children:a})}),i[8]=m,i[9]=a,i[10]=r):r=i[10],r};try{iZ.displayName||(iZ.displayName="ShareConversationButton")}catch{}let iX=()=>{let e,t,n,a,r,i,o=(0,d.c)(12),{selectedThreadID:s,threads:l}=(0,em.Pk)();o[0]!==s||o[1]!==l?(e=s&&l.get(s)?.sharedID,o[0]=s,o[1]=l,o[2]=e):e=o[2];let u=!!e,[m,p]=(0,x.useState)(!1);o[3]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{p(!0),(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_OPEN",mode:"immersive"})},o[3]=t):t=o[3];let h=t;o[4]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{p(!1),(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})},o[4]=n):n=o[4];let f=n;return o[5]!==u?(a=u?(0,c.jsx)(iJ,{openDialog:h}):(0,c.jsx)(iZ,{openDialog:h}),o[5]=u,o[6]=a):a=o[6],o[7]!==m?(r=m&&(0,c.jsx)(iF,{closeDialog:f}),o[7]=m,o[8]=r):r=o[8],o[9]!==a||o[10]!==r?(i=(0,c.jsxs)(c.Fragment,{children:[a,r]}),o[9]=a,o[10]=r,o[11]=i):i=o[11],i};try{iX.displayName||(iX.displayName="ConversationSharingButton")}catch{}let i0={header:"Header-module__header--ufLgW",rightControls:"Header-module__rightControls--Ce65x",editedPromptIndicator:"Header-module__editedPromptIndicator--k1vcE",leadingVisual:"Header-module__leadingVisual--O6MuP"};var i1=n(8386),i2=n(56221);let i3={dialog:"ManageSharedConversationsDialog-module__dialog--kEiyu",actionButtons:"ManageSharedConversationsDialog-module__actionButtons--JL7Md",alertIcon:"ManageSharedConversationsDialog-module__alertIcon--vcDiF",footer:"ManageSharedConversationsDialog-module__footer--qEM5d",mutedText:"ManageSharedConversationsDialog-module__mutedText--ZU5NV",footerContent:"ManageSharedConversationsDialog-module__footerContent--x0AC3",footerLeft:"ManageSharedConversationsDialog-module__footerLeft--hfY2Z",footerRight:"ManageSharedConversationsDialog-module__footerRight--bhyxU",confirmationText:"ManageSharedConversationsDialog-module__confirmationText--h4QXT",quickFadeUp:"ManageSharedConversationsDialog-module__quickFadeUp--L_rid",conversationLink:"ManageSharedConversationsDialog-module__conversationLink--kiSX1"},i4=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},i5=({closeDialog:e})=>{let t=(0,h.b)(),n=(0,em.Pk)(),[a,r]=(0,x.useState)(0),[i,o]=(0,x.useState)([]),[s,l]=(0,x.useState)(!0),[d,u]=(0,x.useState)(!1),[m,p]=(0,x.useState)(null),[f,g]=(0,x.useState)(!1),[y,v]=(0,x.useState)(5>i.length),b=5*a,j=i.slice(b,b+5);(0,x.useEffect)(()=>{(async()=>{let e=await t.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:i4(e.updatedAt),sharedUrl:`${ee.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ee.fV.origin}/copilot/c/${e.id}`}))),l(!1)})()},[t]),(0,x.useEffect)(()=>{y&&a>0&&i.length<=5*a&&r(0);let e=5<i.length;e!==y&&v(e)},[i,a,5,y]);let C=(0,x.useCallback)(()=>{e()},[e]),N=(0,x.useCallback)(async()=>{if(!f)return void g(!0);g(!1),l(!0);try{(await t.unshareAllThreads()).ok&&(o([]),await t.fetchThreads())}finally{l(!1)}},[f,t]),S=e=>{p(e),u(!0)},w=async()=>{u(!1),p(null),l(!0);let e=await t.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:i4(e.updatedAt),sharedUrl:`${ee.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ee.fV.origin}/copilot/c/${e.id}`}))),l(!1)},I=s||"error"===n.sharedThreadsLoading.state||0===i.length,k=(0,x.useMemo)(()=>{if(!i.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{f?N():g(!0)}};return f?[{buttonType:"default",content:"Cancel",onClick:()=>g(!1)},e]:[e]},[i.length,f,N]),T=e=>1===e?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`,E=(0,x.useMemo)(()=>s?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===n.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[s,n.sharedThreadsLoading.state]);return(0,c.jsxs)(tf.l,{title:"Manage shared conversations",width:"xlarge",className:i3.dialog,position:{narrow:"fullscreen",regular:"center"},onClose:C,renderFooter:()=>k?.length?(0,c.jsx)(tf.l.Footer,{className:i3.footer,children:(0,c.jsxs)("div",{className:i3.footerContent,children:[(0,c.jsx)("div",{className:i3.footerLeft,children:f&&(0,c.jsx)("div",{className:`${i3.confirmationText} ${i3.quickFadeUp}`,children:T(i.length)})}),(0,c.jsx)("div",{className:i3.footerRight,children:(0,c.jsx)(tf.l.Buttons,{buttons:k})})]})}):null,children:[I?(0,c.jsxs)(e7.E,{children:[(0,c.jsx)(e7.E.Visual,{children:E.isSpinner?(0,c.jsx)(ti.B,{direction:"horizontal",align:"center",children:(0,c.jsx)(q.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,c.jsx)("div",{className:i3.mutedText,children:"error"===E.result?(0,c.jsx)(_.AlertIcon,{size:"medium",className:i3.alertIcon,"aria-label":"Error loading shared conversations"}):(0,c.jsx)(_.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,c.jsx)(e7.E.Heading,{children:E.heading}),(0,c.jsx)(e7.E.Description,{children:E.description})]}):(0,c.jsxs)(i1.X.Container,{children:[(0,c.jsx)(i2.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Conversation",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,c.jsx)(H.A,{href:e.threadUrl,className:i3.conversationLink,children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,c.jsx)("span",{className:i3.mutedText,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,c.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:i3.actionButtons,children:[(0,c.jsx)(aZ.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,c.jsx)(eW.K,{"aria-label":"Unshare conversation",title:"Unshare conversation",icon:_.UnlinkIcon,variant:"invisible",onClick:()=>S(e)})]})})}],data:j}),i.length>5&&(0,c.jsx)(i1.X.Pagination,{"aria-label":"Shared conversations pagination",pageSize:5,defaultPageIndex:a,totalCount:i.length,onChange:e=>{r(e.pageIndex)},showPages:!1})]}),d&&m&&(0,c.jsx)(iQ,{threadId:m.id,closeDialog:w})]})};try{i5.displayName||(i5.displayName="ManageSharedConversationsDialog")}catch{}var i6=n(74547);let i7=()=>{let e=(0,em.Pk)(),t=(0,aL.G)(),n=(0,eL.JB)(e.customCopilots,t),a=(0,eL.mM)(),r=(0,eL.FQ)(),i=a||n,o=!r&&n;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];i&&e.push({label:"Spaces",href:eu.VR}),o&&n&&e.push({label:n.name,href:(0,eL.Cb)(n)}),(0,i6.FC)(e)}}},i8={dialog:"SystemPromptDialog-module__dialog--DZtq2",content:"SystemPromptDialog-module__content--OeMCM",description:"SystemPromptDialog-module__description--eb7_P",textareaContainer:"SystemPromptDialog-module__textareaContainer--MN8c4",textarea:"SystemPromptDialog-module__textarea--MK1JE"},i9=(0,x.forwardRef)(function(e,t){let n,a,r,i,o,s,l,u=(0,d.c)(12),m=(0,h.b)(),[p,f]=(0,x.useState)(!1),[g,y]=(0,x.useState)(void 0);u[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:()=>f(!0)}),u[0]=n):n=u[0],(0,x.useImperativeHandle)(t,n),u[1]!==m?(a=()=>{(async()=>{y(await m.getSystemPrompt())})()},r=[m],u[1]=m,u[2]=a,u[3]=r):(a=u[2],r=u[3]),(0,x.useEffect)(a,r),u[4]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{f(!1),(0,eS.BI)("dotcom_chat.activate",{target:"SYSTEM_PROMPT_DIALOG_CLOSE",mode:"immersive"})},u[4]=i):i=u[4];let v=i;u[5]!==g?(o=()=>(0,c.jsxs)("div",{className:i8.content,children:[(0,c.jsxs)("p",{className:i8.description,children:["The system prompt for"," ",(0,c.jsx)(H.A,{muted:!0,inline:!0,href:"https://github.com/copilot",children:"GitHub Copilot"})," ","is a set of instructions that guides the LLM to provide enhanced functionality and output quality based on user input."]}),(0,c.jsx)("div",{className:i8.textareaContainer,children:(0,c.jsx)("textarea",{className:i8.textarea,readOnly:!0,children:g})})]}),u[5]=g,u[6]=o):o=u[6];let _=o;return u[7]!==p||u[8]!==_?(s=p&&(0,c.jsx)(tf.l,{onClose:v,title:"System prompt",renderBody:_,className:i8.dialog}),u[7]=p,u[8]=_,u[9]=s):s=u[9],u[10]!==s?(l=(0,c.jsx)(c.Fragment,{children:s}),u[10]=s,u[11]=l):l=u[11],l});try{i9.displayName||(i9.displayName="SystemPromptDialog")}catch{}function oe(e){let t,n,a,r,i,o,s,l,u,m,p,g,y,v,b,j,C,S,w,I,k,T,E,A,R,L,P,D,O,M,B,F,$,U,V,W,H=(0,d.c)(74),{showPreviewPaneButton:q,conversationSpecificItems:G,customButtons:K}=e,Q=void 0===q||q,J=(0,h.b)(),Y=(0,em.Pk)(),{currentTopic:Z,repoCustomInstructionsEnabled:X,selectedThreadID:ee,threads:et,messagesLoading:en,currentReferences:ea}=Y,er=(0,em.pn)(or),ei=rB(),es=(0,aL.G)(),el=(0,eL.JB)(Y.customCopilots,es);el?(0,f.D)(`${er} \xb7 GitHub Copilot Spaces \xb7 ${el.name}`):ei?(0,f.D)("Shared conversation \xb7 GitHub Copilot"):(0,f.D)(`${er} \xb7 GitHub Copilot`);let{updateGlobalNavigationBreadcrumbs:ec}=i7();H[0]!==ec?(t=()=>{ec()},H[0]=ec,H[1]=t):t=H[1],H[2]!==es||H[3]!==ec?(n=[ec,es],H[2]=es,H[3]=ec,H[4]=n):n=H[4],(0,x.useEffect)(t,n);let ed=(0,x.useRef)(null),ep=(0,x.useRef)(null);H[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,ik.X)(),H[5]=r):r=H[5],a=r,H[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,nm.G7)("copilot_staff_prompt_dialog")&&a,H[6]=i):i=H[6];let eh=i,[ef,eg]=(0,x.useState)(!1),[ey,ex]=(0,x.useState)(!1),ev=(0,x.useRef)(null),e_=!!eR.J.settings?.instructionPrompt,{isLicensedLimited:eb}=(0,eA.xR)(),ej=z.W.repoCustomInstructions||z.W.repoCustomInstructionsPreview,eC=(0,x.useRef)(null),[eN,ew]=(0,x.useState)(null),eI=Z?.customInstructions||[];z.W.topicsAsReferences&&(eI=(0,eu.NJ)(ea));let ek=ej&&eI.length>0,[eT,eE,eP]=(0,iE.B)(!1),{canShareThread:eO}=(0,N.X)(),eM="loaded"===en.state,[eB,eF]=(0,x.useState)(!1),e$=eO&&!ei&&ee&&!es&&eM;return H[7]!==e$?(o=e$&&(0,c.jsx)(iX,{}),H[7]=e$,H[8]=o):o=H[8],H[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,eD.$)(e_&&i0.editedPromptIndicator),H[9]=s):s=H[9],H[10]!==eT?(l=(0,c.jsx)(ez.W.Anchor,{children:(0,c.jsx)(eW.K,{icon:_.KebabHorizontalIcon,"aria-label":"Menu",onClick:oa,className:s,loading:eT})}),H[10]=eT,H[11]=l):l=H[11],H[12]!==ei||H[13]!==es||H[14]!==ee||H[15]!==et?(u=ee&&!ei&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(eH.l.Group,{children:[(0,c.jsx)(eH.l.GroupHeading,{children:"Conversation"}),(0,c.jsx)(i$,{onOpenDialog:ew,isShared:!!et.get(ee)?.sharedID,showShare:!es,hideShareOnDesktop:!0})]}),(0,c.jsx)(eH.l.Divider,{})]}),H[12]=ei,H[13]=es,H[14]=ee,H[15]=et,H[16]=u):u=H[16],H[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsx)(eH.l.GroupHeading,{children:"Prompt"}),H[17]=m):m=H[17],H[18]!==J||H[19]!==X||H[20]!==ek?(p=ek&&(0,c.jsxs)(eH.l.Item,{onSelect:()=>{J.toggleRepoCustomInstructions(!X)},children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.RepoIcon,{})}),X?"Disable custom instructions":"Enable custom instructions"]}),H[18]=J,H[19]=X,H[20]=ek,H[21]=p):p=H[21],H[22]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{ex(!0),(0,eS.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},H[22]=g):g=H[22],H[23]===Symbol.for("react.memo_cache_sentinel")?(y=(0,c.jsxs)(eH.l.Item,{onSelect:g,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.NoteIcon,{})}),"Personal instructions"]}),H[23]=y):y=H[23],H[24]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{ep.current?.openDialog(),(0,eS.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SYSTEM_PROMPT",mode:"immersive"})},H[24]=v):v=H[24],H[25]===Symbol.for("react.memo_cache_sentinel")?(b=(0,c.jsxs)(eH.l.Item,{onSelect:v,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.CpuIcon,{})}),"System prompt"]}),j=eh&&(0,c.jsxs)(eH.l.Item,{onSelect:()=>eg(!0),children:[(0,c.jsx)(eH.l.LeadingVisual,{children:e_?(0,c.jsx)("span",{className:(0,eD.$)(i0.editedPromptIndicator,i0.leadingVisual),children:(0,c.jsx)(_.BeakerIcon,{})}):(0,c.jsx)(_.BeakerIcon,{})}),"Edit prompt",(0,c.jsx)(eH.l.TrailingVisual,{children:(0,c.jsx)(eo.A,{variant:"attention",children:"Staff"})})]}),H[25]=b,H[26]=j):(b=H[25],j=H[26]),H[27]!==p?(C=(0,c.jsxs)(eH.l.Group,{children:[m,p,y,b,j]}),H[27]=p,H[28]=C):C=H[28],H[29]===Symbol.for("react.memo_cache_sentinel")?(S=(0,c.jsx)(eH.l.Divider,{}),H[29]=S):S=H[29],H[30]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{eF(!0)},H[30]=w):w=H[30],H[31]===Symbol.for("react.memo_cache_sentinel")?(I=(0,c.jsxs)(eH.l.Item,{onSelect:w,children:["Manage shared conversations",(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.ListUnorderedIcon,{})})]}),H[31]=I):I=H[31],H[32]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{ed.current?.openDialog(),(0,eS.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},H[32]=k):k=H[32],H[33]===Symbol.for("react.memo_cache_sentinel")?(T=(0,c.jsxs)(eH.l.Item,{onSelect:k,children:["Give feedback",(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.CommentIcon,{})})]}),H[33]=T):T=H[33],H[34]!==eb?(E=eb&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(eH.l.LinkItem,{href:"/github-copilot/signup/copilot_individual",onClick:on,children:["Upgrade to Pro",(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.CopilotIcon,{})})]})}),H[34]=eb,H[35]=E):E=H[35],H[36]===Symbol.for("react.memo_cache_sentinel")?(A=(0,c.jsxs)(eH.l.LinkItem,{href:"/settings/copilot",onClick:ot,children:["Settings",(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.GearIcon,{})})]}),H[36]=A):A=H[36],H[37]!==E?(R=(0,c.jsxs)(eH.l.Group,{children:[I,T,E,A]}),H[37]=E,H[38]=R):R=H[38],H[39]!==G||H[40]!==u||H[41]!==C||H[42]!==R?(L=(0,c.jsx)(ez.W.Overlay,{width:"small",children:(0,c.jsxs)(eH.l,{children:[G,u,C,S,R]})}),H[39]=G,H[40]=u,H[41]=C,H[42]=R,H[43]=L):L=H[43],H[44]!==L||H[45]!==l?(P=(0,c.jsxs)(ez.W,{anchorRef:eC,children:[l,L]}),H[44]=L,H[45]=l,H[46]=P):P=H[46],H[47]!==Q?(D=Q&&(0,c.jsx)(oi,{}),H[47]=Q,H[48]=D):D=H[48],H[49]===Symbol.for("react.memo_cache_sentinel")?(O=(0,c.jsx)(i9,{ref:ep}),M=(0,c.jsx)(iS.l,{ref:ed,mode:"immersive",returnFocusRef:eC}),H[49]=O,H[50]=M):(O=H[49],M=H[50]),H[51]!==eN||H[52]!==ee||H[53]!==eE||H[54]!==eP||H[55]!==er?(B=ee&&(0,c.jsx)(iU,{visibleDialog:eN,onClose:()=>{(0,iT.flushSync)(()=>ew(null)),eC.current?.focus()},threadName:er,threadId:ee,selectedThreadId:ee,onStartLoading:eE,onFinishLoading:eP}),H[51]=eN,H[52]=ee,H[53]=eE,H[54]=eP,H[55]=er,H[56]=B):B=H[56],H[57]!==K||H[58]!==P||H[59]!==D||H[60]!==B||H[61]!==o?(F=(0,c.jsxs)("div",{className:i0.rightControls,children:[o,K,P,D,O,M,B]}),H[57]=K,H[58]=P,H[59]=D,H[60]=B,H[61]=o,H[62]=F):F=H[62],H[63]!==ef?($=ef&&(0,c.jsx)(iI.X,{promptDialogRef:ev,onDismiss:()=>eg(!1)}),H[63]=ef,H[64]=$):$=H[64],H[65]!==ey?(U=ey&&(0,c.jsx)(iw.Y,{onDismiss:()=>ex(!1),returnFocusRef:eC}),H[65]=ey,H[66]=U):U=H[66],H[67]!==eB?(V=eB&&(0,c.jsx)(i5,{closeDialog:()=>{eF(!1)}}),H[67]=eB,H[68]=V):V=H[68],H[69]!==F||H[70]!==$||H[71]!==U||H[72]!==V?(W=(0,c.jsxs)("div",{className:i0.header,children:[F,$,U,V]}),H[69]=F,H[70]=$,H[71]=U,H[72]=V,H[73]=W):W=H[73],W}function ot(){return(0,eS.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function on(){return(0,eS.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_UPGRADE_PRO",mode:"immersive"})}function oa(){return(0,eS.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}function or(e){return(0,eu.CB)((0,ay.W)(e))}function oi(){let e,t=(0,d.c)(3),n=(0,eC.tZ)(),{openPreviewPane:a}=(0,eC.xx)();return t[0]!==a||t[1]!==n?(e=!n&&(0,c.jsx)(eW.K,{icon:_.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),a()}}),t[0]=a,t[1]=n,t[2]=e):e=t[2],e}try{oe.displayName||(oe.displayName="Header")}catch{}try{oi.displayName||(oi.displayName="PreviewPaneButton")}catch{}var oo=n(44669),os=n(40136),ol=n(70066),oc=n(84863),od=n(59220),ou=n(17515),om=n(8387),op=n(45064),oh=n(56521),of=n(40509),og=n(57531);let oy=e=>{let t,n,a,r,i=(0,d.c)(12),{functionCall:o,manager:s,panelWidth:l,messageInterrupted:u}=e,{functionMetadata:m,functionRenderer:p,parsedArgs:h}=(0,og.BO)(o);return i[0]!==o||i[1]!==u?(n=u&&"started"===o.status?{...o,status:"error"}:o,i[0]=o,i[1]=u,i[2]=n):n=i[2],t=n,i[3]!==m||i[4]!==p||i[5]!==t||i[6]!==s||i[7]!==l||i[8]!==h?(a=m&&p&&h&&p(t,m,s,l,h,!1),i[3]=m,i[4]=p,i[5]=t,i[6]=s,i[7]=l,i[8]=h,i[9]=a):a=i[9],i[10]!==a?(r=(0,c.jsx)(c.Fragment,{children:a}),i[10]=a,i[11]=r):r=i[11],r};try{oy.displayName||(oy.displayName="FunctionCallBadge")}catch{}var ox=n(4699),ov=n(87928),o_=n(5279),ob=n(85332),oj=n(79311),oC=n(39376),oN=n(84842),oS=n(88011),ow=n(90851),oI=n(97785);let ok={imageAttachment:"ChatImageAttachment-module__imageAttachment--YlPWs"},oT=e=>{let t,n,a,r,i=(0,d.c)(18),{messageId:o,src:s,alt:l,name:u,mode:m,squareView:p}=e,{openPreviewPane:h,openItem:f,updateItem:g}=(0,eC.xx)(),y=`image:${s}`;i[0]!==y||i[1]!==f||i[2]!==h?(t=e=>{e.metaKey||e.ctrlKey||((0,eS.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),f(y),h(),e.preventDefault())},i[0]=y,i[1]=f,i[2]=h,i[3]=t):t=i[3];let v=t;return i[4]!==l||i[5]!==y||i[6]!==o||i[7]!==u||i[8]!==s||i[9]!==g?(n=()=>{g({altText:l,id:y,messageId:o,name:u,type:"image",url:s})},a=[y,l,o,u,s,g],i[4]=l,i[5]=y,i[6]=o,i[7]=u,i[8]=s,i[9]=g,i[10]=n,i[11]=a):(n=i[10],a=i[11]),(0,x.useEffect)(n,a),i[12]!==l||i[13]!==m||i[14]!==v||i[15]!==p||i[16]!==s?(r=(0,c.jsx)("div",{className:ok.imageAttachment,children:(0,c.jsx)(oI.o,{src:s,alt:l,onClick:v,mode:m,useOverlay:!0,squareView:p})}),i[12]=l,i[13]=m,i[14]=v,i[15]=p,i[16]=s,i[17]=r):r=i[17],r},oE=(0,x.memo)(oT);try{oT.displayName||(oT.displayName="ChatImageAttachmentUnmemoized")}catch{}try{oE.displayName||(oE.displayName="ChatImageAttachment")}catch{}let oA={chatMessage:"ChatMessage-module__chatMessage--rtt38",user:"ChatMessage-module__user--UoWHh",editing:"ChatMessage-module__editing--BMp49",content:"ChatMessage-module__content--MYneF",imageGrid:"ChatMessage-module__imageGrid--juCGt",imageRow:"ChatMessage-module__imageRow--HFSCK",references:"ChatMessage-module__references--Kunt2",messageArea:"ChatMessage-module__messageArea--CoOmf",userMessage:"ChatMessage-module__userMessage--xvIFp",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--DJyyk",actions:"ChatMessage-module__actions--Jllb6",ai:"ChatMessage-module__ai--WrCO3",latest:"ChatMessage-module__latest--IZwZP",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--MCwTL",avatar:"ChatMessage-module__avatar--KYI8V",sharedThreadActions:"ChatMessage-module__sharedThreadActions--Z9ffu ChatMessage-module__actions--Jllb6",skillExecutionText:"ChatMessage-module__skillExecutionText--pIBPI",errorFallback:"ChatMessage-module__errorFallback--d0bNW",blinkingCursor:"ChatMessage-module__blinkingCursor--M3kDA"},oR={container:"ChatPagingComponent-module__container--nH9hp",disabledButton:"ChatPagingComponent-module__disabledButton--hCGPC",pageIndicator:"ChatPagingComponent-module__pageIndicator--HoVKG"};function oL(e){let t,n,a,r,i,o,s=(0,d.c)(23),{currentPage:l,totalPages:u,onPrev:m,onNext:p,isUserMessage:h}=e,f=(0,em.A3)("isWaitingOnCopilot");if(l<1)throw Error("currentPage must be greater than or equal to 1");if(u<1)throw Error("totalPages must be greater than or equal to 1");if(l>u)throw Error("currentPage must be less than or equal to totalPages");let g=1===l||f,y=l===u||f,x=g?oR.disabledButton:"",v=y?oR.disabledButton:"";s[0]!==l||s[1]!==h||s[2]!==m||s[3]!==g?(t=()=>{if(g)return;let e=h?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE";(0,eS.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),m(l-1)},s[0]=l,s[1]=h,s[2]=m,s[3]=g,s[4]=t):t=s[4];let b=t;s[5]!==l||s[6]!==h||s[7]!==y||s[8]!==p?(n=()=>{if(y)return;let e=h?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE";(0,eS.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),p(l+1)},s[5]=l,s[6]=h,s[7]=y,s[8]=p,s[9]=n):n=s[9];let j=n;return s[10]!==b||s[11]!==x?(a=(0,c.jsx)(eW.K,{variant:"invisible","aria-label":"Previous response",onClick:b,icon:_.ChevronLeftIcon,className:x}),s[10]=b,s[11]=x,s[12]=a):a=s[12],s[13]!==l||s[14]!==u?(r=(0,c.jsxs)("span",{className:oR.pageIndicator,children:[l,"/",u]}),s[13]=l,s[14]=u,s[15]=r):r=s[15],s[16]!==j||s[17]!==v?(i=(0,c.jsx)(eW.K,{variant:"invisible","aria-label":"Next response",onClick:j,icon:_.ChevronRightIcon,className:v}),s[16]=j,s[17]=v,s[18]=i):i=s[18],s[19]!==a||s[20]!==r||s[21]!==i?(o=(0,c.jsxs)("div",{className:oR.container,"data-testid":"chat-paging-component",children:[a,r,i]}),s[19]=a,s[20]=r,s[21]=i,s[22]=o):o=s[22],o}try{oL.displayName||(oL.displayName="ChatPagingComponent")}catch{}let oP={container:"ClientConfirmations-module__container--gWbBU",text:"ClientConfirmations-module__text--WHq3j"};function oD(e){let t,n,a,r=(0,d.c)(5),{authorName:i,clientConfirmations:o}=e,s=o?.[0]?.state;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eD.$)("my-1",oP.container),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(_.CheckIcon,{}),r[1]=n):n=r[1],r[2]!==i||r[3]!==s?(a=(0,c.jsx)("div",{className:t,children:(0,c.jsxs)("span",{className:oP.text,children:[n," ",i," ",s," the action"]})}),r[2]=i,r[3]=s,r[4]=a):a=r[4],a}try{oD.displayName||(oD.displayName="ClientConfirmations")}catch{}let oO={container:"UserMessageEdit-module__container--rqkMG",input:"UserMessageEdit-module__input--LbiZ1",inputContainer:"UserMessageEdit-module__inputContainer--tewB2",actions:"UserMessageEdit-module__actions--_YMp2"},oM=e=>{let t,n,a,r,i,o,s,l,u,m,p,h,f,g=(0,d.c)(25),{messageContent:y,onSubmit:v,onCancel:_}=e,b=(0,em.A3)("isWaitingOnCopilot"),[j,C]=(0,x.useState)(y),N=(0,x.useRef)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{N.current&&(N.current.style.height="auto",N.current.style.height=`${N.current.scrollHeight}px`)},g[0]=t):t=g[0],g[1]!==j?(n=[j],g[1]=j,g[2]=n):n=g[2],(0,x.useEffect)(t,n),g[3]!==j||g[4]!==v?(a=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),v(j)},g[3]=j,g[4]=v,g[5]=a):a=g[5];let S=a;g[6]!==y||g[7]!==_?(r=()=>{_(),C(y),(0,eS.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})},g[6]=y,g[7]=_,g[8]=r):r=g[8];let w=r,I=b?void 0:S;return g[9]!==w||g[10]!==I?(i={"copilot-chat:send-message":I,"github:cancel":w},g[9]=w,g[10]=I,g[11]=i):i=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(o=(0,tr.G)("user-message-edit-box"),g[12]=o):o=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(s=e=>C(e.target.value),g[13]=s):s=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{N.current&&(N.current.style.height="auto",N.current.style.height=`${N.current.scrollHeight}px`)},g[14]=l):l=g[14],g[15]!==j?(u=(0,c.jsx)("div",{className:oO.inputContainer,children:(0,c.jsx)("textarea",{ref:N,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,placeholder:"Ask Copilot",value:j,onChange:s,className:oO.input,autoFocus:!0,onInput:l,onFocus:oB})}),g[15]=j,g[16]=u):u=g[16],g[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsx)(tp.cQ,{commandId:"github:cancel",children:"Cancel"}),g[17]=m):m=g[17],g[18]===Symbol.for("react.memo_cache_sentinel")?(p=(0,tr.G)("user-message-edit-submit"),g[18]=p):p=g[18],g[19]!==b?(h=(0,c.jsxs)("div",{className:oO.actions,children:[m,(0,c.jsx)(tp.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...p,disabled:b,children:"Send"})]}),g[19]=b,g[20]=h):h=g[20],g[21]!==u||g[22]!==h||g[23]!==i?(f=(0,c.jsxs)(tp.tL,{commands:i,className:oO.container,...o,children:[u,h]}),g[21]=u,g[22]=h,g[23]=i,g[24]=f):f=g[24],f};try{oM.displayName||(oM.displayName="UserMessageEdit")}catch{}function oB(e){return e.target.setSelectionRange(0,e.target.value.length)}let oF=({excludeFeedback:e,inputRef:t,isLatestMessage:n,isLatestUserMessage:a,isFirstReply:r,isStreaming:i,panelWidth:o,parentMessage:s,messageIndex:l,autoOpenPreviewPane:d,...u})=>{let{message:m}=(0,tT.V)(),p=(0,h.b)(),f=(0,em.bP)("customCopilots","editingMessage","mode","wrapCodeLines"),g=(0,oS.tD)(),{items:y,versionedItems:v,openItem:b,removeItems:j,getOpenItems:C,openItemsBeforeSubthreadChange:N,setOpenItemsBeforeSubthreadChange:S,enableLoadingState:w,disableLoadingState:I}=(0,eC.xx)(),k=(0,x.useCallback)(()=>{let e=g(),t=[],n=m;for(;null!=n;)t.push(n.id),n=void 0!==n.selectedChildIndex?e.messages[n.selectedChildIndex]:void 0;let a=new Map;for(let[e,t]of y){let n=a.get(t.messageId)||[];n.push(e),a.set(t.messageId,n)}let r=[];for(let e of t){let t=a.get(e);if(t)for(let e of t)r.push(e)}for(let[e,t]of y)t.messageId===tA.Wp&&r.push(e);let i=C();S([...i]),r.some(e=>i.includes(e))&&w(),j(r)},[y,w,g,m,C,j,S]),{author:T,handleConfirmationAction:E,handleRetryErrorMessage:A,handleRetryCopilotResponse:R,handleEditUserMessage:L,hasClientConfirmations:P,isAgentError:D,isAI:O,isCopilot:M,isError:B,isInterrupted:F,isUser:$,myRef:U,rendererConfig:V,renderFeedback:W,shouldShowMessageActions:H,skillExecutionToUseForRespondingText:q,showRetryButton:G}=(0,oC.p)({excludeFeedback:e,inputRef:t,isLatestMessage:n,isStreaming:i,removeOutdatedContentPreviewItems:k}),K=rB(),Q=f.editingMessage===m.id,J=i&&!B&&!m.confirmations&&!H&&n&&(!e||O),Y=(s?.childMessageIndexes?.findIndex(e=>e===l)||0)+1||1,Z=s?.childMessageIndexes?.length||1,X=Z>=oN.L9,ee=p.maxMessagesReached(),et=Z>1,en=(0,x.useMemo)(()=>m.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[m.mediaContent]),ea=(0,x.useMemo)(()=>z.W.attachImagesImmersive&&void 0!==en&&en.length>0||!1,[en]),er=H&&K&&(M||et),ei=(0,x.useRef)(null),eo=(0,ow.M)(e=>{let t=v.get((0,eO.oy)(e))?.at(-1);t&&b(t,!1)});(0,x.useEffect)(()=>{if(ei.current!==m.id&&n&&N.length>0){let e=setTimeout(()=>{for(let e of N)eo.current(e);I(),S([])});return()=>clearTimeout(e)}ei.current=m.id},[I,m.id,N,n,S,eo]);let es=(0,x.useCallback)(()=>{let{messages:e}=g(),t=Y-1;p.setSelectedMessage(e[s.childMessageIndexes[t-1]]),k()},[Y,p,s,k,g]),el=(0,x.useCallback)(()=>{let{messages:e}=g(),t=Y-1;p.setSelectedMessage(e[s.childMessageIndexes[t+1]]),k()},[Y,p,s,k,g]),ec=rH(),{model:ed,availableModels:ep}=(0,em.bP)("model","availableModels"),eh=ed;m.model&&(eh=(ep??[eh]).find(e=>e.id===m.model)||eh);let ef=()=>p.startEditingMessage(m.id),eg=(0,aL.G)(),ey=!!(0,eL.JB)(f.customCopilots,eg),ex=X||ee||!!eg&&!ey,ev=M&&i&&n&&!m.content,e_=(0,x.useCallback)(e=>{p.setWrapCodeLines(e)},[p]),eb=i?nw:nI;return(0,c.jsxs)("div",{className:(0,eD.$)("message-container",oA.chatMessage,$&&oA.user,O&&oA.ai,Q?oA.editing:"",n&&oA.latest),ref:U,...(0,tr.G)(`message-${B?"error":i?"streaming":m.id}`),children:[O?(0,c.jsx)(op.W,{isLoading:i&&n,isLoadingSkills:(m.skillExecutions??[]).length>0&&i&&""===m.content&&n,isError:B&&m.error?.type!=="agentUnauthorized",className:oA.avatar,mode:f.mode,isFirstMessage:r,message:m.content||"",createdAt:m.createdAt}):null,$&&ea&&(0,c.jsx)("div",{className:en?.length===4?oA.imageGrid:oA.imageRow,children:en?.map(e=>(0,c.jsx)(oE,{name:e?.name||"Uploaded image",messageId:m.id,src:e?.url||"",alt:`Uploaded image${e?.name?`: ${e.name}`:""}`,mode:f.mode,squareView:en?.length>=2},e?.url||""))}),$&&m.references&&m.references.length>0&&(0,c.jsx)(tC,{className:oA.references,messageId:m.id,messageTimestamp:m.createdAt,messageIndex:l,references:m.references,size:"medium"}),!Q&&(0,c.jsx)("div",{className:oA.content,children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:(0,eD.$)("js-snippet-clipboard-copy-unpositioned",oA.messageArea),children:[P?(0,c.jsx)(oD,{authorName:T.name,clientConfirmations:m.clientConfirmations??[]}):$?(0,c.jsx)(ob.R,{accessibleHeader:(0,eu.hV)("You",m.content??""),className:oA.userMessage}):(0,c.jsxs)(c.Fragment,{children:[!z.W.newImmersiveReferencesUI&&M&&m.skillExecutions?.map((e,t)=>(0,c.jsx)(oy,{functionCall:e,manager:p,panelWidth:o,messageInterrupted:m.interrupted},t)),ev&&(z.W.newImmersiveReferencesUI?(0,c.jsx)(oj.b,{className:(0,eD.$)(oA.skillExecutionText,"mb-2"),children:`${(0,og.WA)(q)}...`}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:oA.blinkingCursor,children:"\u258B"}),(0,c.jsx)("span",{className:"sr-only",children:"Waiting for reply\u2026"})]})),z.W.newImmersiveReferencesUI&&m.references&&m.references.length>0&&m.content&&(0,c.jsx)(tj.s,{className:"mb-2",references:m.references,isImmersive:!0}),!P&&m.content&&(0,c.jsx)(o$,{children:(0,c.jsx)(eb,{autoOpenPreviewPane:d,markdown:m.content,messageId:m.id,messageIndex:l,messageTimestamp:m.createdAt,accessibleHeader:(0,eu.hV)("Copilot",m.content??""),copilotAnnotations:m.copilotAnnotations,wrapCodeLines:f.wrapCodeLines,onWrapCodeLinesChange:e_,...V})}),B?(0,c.jsx)(oh.K,{manager:p}):null,D&&m.agentErrors&&(0,c.jsx)(oh.h,{errors:m.agentErrors}),F?(0,c.jsx)(ox.h,{messageHasContent:!!m.content||!!m.skillExecutions?.length}):null,O&&!ev&&(0,eu.Ye)(m.confirmations).map((e,t)=>"indexrepo"===e.confirmation.name?null:(0,c.jsx)(om.m,{confirmation:e,handleConfirmation:E,isLatestMessage:n},t))]}),et&&!n&&(0,c.jsxs)("div",{className:oA.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[Y,"/",Z]})]}),J&&(0,c.jsx)("div",{className:oA.actionsPlaceholder}),!H&&G&&(0,c.jsx)(ov.$,{handleRetryMessage:A,disabled:ex}),H&&!K&&(0,c.jsxs)(o_.M,{"aria-label":"Message tools",className:oA.actions,"data-testid":"nonshared-toolbar",children:[$&&(a?(0,c.jsx)(tp.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:ef,icon:_.PencilIcon,disabled:ex,...(0,tr.G)("edit-message-button")}):(0,c.jsx)(eW.K,{variant:"invisible","aria-label":"Edit message",onClick:ef,icon:_.PencilIcon,disabled:ex,...(0,tr.G)("edit-message-button")})),M&&(0,c.jsxs)(c.Fragment,{children:[W&&(0,c.jsx)(of.G,{iconSize:"medium"}),!!m.content&&!i&&(0,c.jsx)(aZ.T,{textToCopy:m.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,eS.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),G&&B?(0,c.jsx)(ov.$,{handleRetryMessage:A,disabled:ex}):O&&!B&&!m.clientSide&&(0,c.jsx)(ov.$,{handleRetryMessage:R,disabled:ex,showModelPicker:!!ep&&ep.length>1,model:eh,navigateToNewThread:ec}),et&&(0,c.jsx)(oL,{currentPage:Y,totalPages:Z,onPrev:es,onNext:el,isUserMessage:$})]}),er&&(0,c.jsxs)(o_.M,{"aria-label":"Message tools",className:oA.sharedThreadActions,"data-testid":"shared-toolbar",children:[M&&(0,c.jsx)(c.Fragment,{children:!!m.content&&!i&&(0,c.jsx)(aZ.T,{textToCopy:m.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,eS.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),et&&(0,c.jsx)(oL,{currentPage:Y,totalPages:Z,onPrev:es,onNext:el,isUserMessage:$})]})]})}),Q&&(0,c.jsx)(oM,{messageContent:m.content||"",onSubmit:L,onCancel:()=>p.cancelEditingMessage()})]})},o$=e=>{let t,n,a=(0,d.c)(3),{children:r}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(eI.l,{className:oA.errorFallback,variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),a[0]=t):t=a[0],a[1]!==r?(n=(0,c.jsx)(eF.t,{fallback:t,children:r}),a[1]=r,a[2]=n):n=a[2],n},oU=e=>{let t,n,a,r,i,o,s,l,u=(0,d.c)(23);u[0]!==e?({message:a,messageIndex:r,isSharedMessage:n,isLatestMessage:t,...i}=e,u[0]=e,u[1]=t,u[2]=n,u[3]=a,u[4]=r,u[5]=i):(t=u[1],n=u[2],a=u[3],r=u[4],i=u[5]);let m=rB();return u[6]!==t||u[7]!==n||u[8]!==m||u[9]!==a||u[10]!==r||u[11]!==i?(o=!nE(a)&&(0,c.jsx)(oF,{...i,messageIndex:r,isSharedMessage:n,isLatestMessage:t,isViewingSharedThread:m}),u[6]=t,u[7]=n,u[8]=m,u[9]=a,u[10]=r,u[11]=i,u[12]=o):o=u[12],u[13]!==t||u[14]!==n||u[15]!==m||u[16]!==a||u[17]!==r?(s=(0,c.jsx)(nA,{message:a,messageIndex:r,isViewingSharedThread:m,isSharedMessage:n,isLatestMessage:t}),u[13]=t,u[14]=n,u[15]=m,u[16]=a,u[17]=r,u[18]=s):s=u[18],u[19]!==a||u[20]!==o||u[21]!==s?(l=(0,c.jsxs)(tT.$,{message:a,children:[o,s]}),u[19]=a,u[20]=o,u[21]=s,u[22]=l):l=u[22],l},oV=(0,x.memo)(oU),oz=e=>{let t,n,a=(0,d.c)(7),{message:r}=e,i=(0,em.Pk)();a[0]!==r||a[1]!==i.messages?(t=(0,tH.CX)(i.messages,r),a[0]=r,a[1]=i.messages,a[2]=t):t=a[2];let o=t,s="user"===r.role&&i.messages.findLast(oH)?.id===r.id;return a[3]!==s||a[4]!==o||a[5]!==e?(n=(0,c.jsx)(oV,{...e,parentMessage:o,isLatestUserMessage:s}),a[3]=s,a[4]=o,a[5]=e,a[6]=n):n=a[6],n},oW=e=>{let t,n=(0,d.c)(2);return n[0]!==e?(t=(0,c.jsx)(o$,{children:(0,c.jsx)(oz,{...e})}),n[0]=e,n[1]=t):t=n[1],t};try{oF.displayName||(oF.displayName="InnerChatMessage")}catch{}try{o$.displayName||(o$.displayName="MessageErrorBoundary")}catch{}try{oU.displayName||(oU.displayName="ChatMessageUnmemoized")}catch{}try{oV.displayName||(oV.displayName="ChatMessageMemoized")}catch{}try{oz.displayName||(oz.displayName="ChatMessageWrapped")}catch{}try{oW.displayName||(oW.displayName="ChatMessage")}catch{}function oH(e){return"user"===e.role}var oq=n(94232);let oG={ConversationLoader:"ConversationLoader-module__ConversationLoader--iaHbr",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--PYCmE",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--rnmbz",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--jPmNg"};function oK(){let e,t,n=(0,d.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:oG.ConversationLoader__userGroup,children:(0,c.jsx)(oq.O,{variant:"rounded",height:"20px",width:"random"})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsxs)("div",{className:oG.ConversationLoader,"data-testid":"conversation-loader",children:[e,(0,c.jsxs)("div",{className:oG.ConversationLoader__assistantGroup,children:[(0,c.jsx)(oq.O,{className:oG.ConversationLoader__assistantAvatar,variant:"elliptical",sx:{position:"absolute",height:24}}),Array.from({length:Math.floor(4*Math.random())+2}).map(oQ)]})]}),n[1]=t):t=n[1],t}function oQ(e,t){return(0,c.jsx)(oq.O,{variant:"rounded",height:"20px",width:"random"},t)}try{oK.displayName||(oK.displayName="ConversationLoader")}catch{}let oJ={container:"ErrorState-module__container--DKNLc",icon:"ErrorState-module__icon--Grz_W",description:"ErrorState-module__description--uIC8b",sso:"ErrorState-module__sso--b2klG"};function oY(e){let t,n,a,r,i,o=(0,d.c)(11),{title:s,description:l,ssoOrgs:u}=e,m=u&&u.length>0;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(e7.E.Visual,{children:(0,c.jsx)(_.AlertIcon,{size:"medium",className:oJ.icon})}),o[1]=n):n=o[1],o[2]!==s?(a=(0,c.jsx)(e7.E.Heading,{as:"h2",children:s}),o[2]=s,o[3]=a):a=o[3],o[4]!==l||o[5]!==m||o[6]!==u?(r=(void 0!==l||m)&&(0,c.jsxs)("div",{className:oJ.description,children:[(0,c.jsx)(e7.E.Description,{children:(0,c.jsx)("span",{children:l})}),(0,c.jsx)("div",{className:oJ.sso,children:m&&(0,c.jsx)(aj.x,{protectedOrgs:u})})]}),o[4]=l,o[5]=m,o[6]=u,o[7]=r):r=o[7],o[8]!==a||o[9]!==r?(i=(0,c.jsxs)("div",{className:oJ.container,children:[t,(0,c.jsxs)(e7.E,{border:!1,children:[n,a,r]})]}),o[8]=a,o[9]=r,o[10]=i):i=o[10],i}function oZ(){let e,t,n,a,r,i=(0,d.c)(6),{helpUrl:o}=(0,N.X)();i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(e7.E.Visual,{children:(0,c.jsx)(_.LockIcon,{size:"medium",className:oJ.icon})}),n=(0,c.jsx)(e7.E.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),i[1]=t,i[2]=n):(t=i[1],n=i[2]),i[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(e7.E.Description,{children:(0,c.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),i[3]=a):a=i[3];let s=`${o}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`;return i[4]!==s?(r=(0,c.jsxs)("div",{className:oJ.container,children:[e,(0,c.jsxs)(e7.E,{border:!1,children:[t,n,(0,c.jsxs)("div",{className:oJ.description,children:[a,(0,c.jsx)(H.A,{inline:!0,href:s,children:"Learn more"})]})]})]}),i[4]=s,i[5]=r):r=i[5],r}try{oY.displayName||(oY.displayName="ErrorState")}catch{}try{oZ.displayName||(oZ.displayName="SharedThreadForbidden")}catch{}let oX={container:"ImmersiveChat-module__container--Q4j2R",emptyContent:"ImmersiveChat-module__emptyContent--IQfnX",messageContent:"ImmersiveChat-module__messageContent--fpzTL",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--MQEF2",hidden:"ImmersiveChat-module__hidden--K3ci9"},o0=e=>{let t,n,a,r,i,o,s,l,u,m,p,h=(0,d.c)(44),{inputRef:f,panelWidth:g,isMobile:y}=e,{scrollToBottom:v}=(0,os.b)(),_=(0,em.Pk)(),{isWaitingOnCopilot:b,messagesLoading:j,streamingMessage:C,messages:N}=_,{reloadQuota:S,premiumChatQuotaRemaining:w,isLicensedLimited:I}=(0,eA.xR)();h[0]!==_?(n=(0,ay.W)(_),t=(0,eu.CB)(n),h[0]=_,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let k=t,T=n?.sharedMessageID,{messages:E,groupedMessages:A}=(0,od.a)(_);h[3]!==E?(a=E.find(o6)?.id,h[3]=E,h[4]=a):a=h[4];let R=a;h[5]!==v?(r=()=>v("instant"),i=[v],h[5]=v,h[6]=r,h[7]=i):(r=h[6],i=h[7]),(0,ou.N)(r,i);let L=(0,e$.S)(_.streamingMessage);if(h[8]!==I||h[9]!==b||h[10]!==E.length||h[11]!==j.state||h[12]!==w||h[13]!==L||h[14]!==S||h[15]!==C?(o=()=>{E.length>0&&!I&&z.W.premiumRequestQuotasEnabled&&w<=eu.aX&&!b&&"loaded"===j.state&&L&&!C&&S("quota_low_trigger")},s=[I,b,E.length,j.state,w,L,S,C],h[8]=I,h[9]=b,h[10]=E.length,h[11]=j.state,h[12]=w,h[13]=L,h[14]=S,h[15]=C,h[16]=o,h[17]=s):(o=h[16],s=h[17]),(0,x.useEffect)(o,s),h[18]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsx)("h1",{children:"Copilot Chat"}),h[18]=l):l=h[18],h[19]!==k?(u=(0,c.jsxs)("div",{className:"sr-only",children:[l,(0,c.jsx)("h2",{children:k})]}),h[19]=k,h[20]=u):u=h[20],h[21]!==N||h[22]!==R||h[23]!==A||h[24]!==f||h[25]!==y||h[26]!==b||h[27]!==g||h[28]!==T||h[29]!==C?.id){let e;h[31]!==N||h[32]!==R||h[33]!==A.length||h[34]!==f||h[35]!==y||h[36]!==b||h[37]!==g||h[38]!==T||h[39]!==C?.id?(e=(e,t)=>(0,c.jsx)(oo.i,{isLastGroup:t===A.length-1,children:e.map((n,a)=>{let r=-1===n.messageIndex?N.length:n.messageIndex,i=t===A.length-1&&a===e.length-1;return(0,c.jsx)(oW,{isLatestMessage:i,isSharedMessage:n.id===T,isFirstReply:n.id===R,message:n,messageIndex:r,inputRef:f,panelWidth:g,isStreaming:n.id===C?.id||i&&b,autoOpenPreviewPane:!y},a)})},t),h[31]=N,h[32]=R,h[33]=A.length,h[34]=f,h[35]=y,h[36]=b,h[37]=g,h[38]=T,h[39]=C?.id,h[40]=e):e=h[40],m=A.map(e),h[21]=N,h[22]=R,h[23]=A,h[24]=f,h[25]=y,h[26]=b,h[27]=g,h[28]=T,h[29]=C?.id,h[30]=m}else m=h[30];return h[41]!==u||h[42]!==m?(p=(0,c.jsxs)("div",{children:[u,m]}),h[41]=u,h[42]=m,h[43]=p):p=h[43],p},o1=()=>{let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(oY,{title:"Conversation failed to load",description:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(H.A,{href:"",onClick:o7,inline:!0,children:"Reload the page"})," ","to try again."]})}),t[0]=e):e=t[0],e},o2=()=>{let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(oY,{title:"Access denied",description:"You do not have permission to view this."}),t[0]=e):e=t[0],e},o3=e=>{let t,n,a=(0,d.c)(7),{isSharedThread:r}=e,{messagesLoading:i,ssoOrganizations:o}=(0,em.Pk)(),s=r?"Shared conversation not found":"Conversation not found";a[0]!==i.missingOrgIds||a[1]!==o?(t=i.missingOrgIds?.map(o8).map(e=>o?.find(t=>t.id===e)?.login).filter(o9),a[0]=i.missingOrgIds,a[1]=o,a[2]=t):t=a[2];let l=t,u=l&&l.length>0?"This URL may be incorrect, you're signed out of your organization or the conversation may have been deleted.":"This URL may be incorrect or the conversation may have been deleted.";return a[3]!==u||a[4]!==l||a[5]!==s?(n=(0,c.jsx)(oY,{title:s,description:u,ssoOrgs:l}),a[3]=u,a[4]=l,a[5]=s,a[6]=n):n=a[6],n},o4=e=>{let t,n,a,r,i,o=(0,d.c)(19),{inputRef:s,panelWidth:l,isMobile:u}=e,m=(0,em.Pk)(),{messagesLoading:p,threadsLoading:h,messages:f,showTopicPicker:g}=m,y=(0,ay.W)(m),{textAreaRef:x}=(0,oc.Y)(s),v=rB(),_=null,b=null;if((0,tH.B)(f).length&&"loaded"===p.state){let e;o[0]!==u||o[1]!==l||o[2]!==x?(e=(0,c.jsx)(o0,{inputRef:x,panelWidth:l,isMobile:u}),o[0]=u,o[1]=l,o[2]=x,o[3]=e):e=o[3],_=e}else if(("loading"===p.state||"pending"===p.state)&&m.selectedThreadID&&!g){let e;o[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(oK,{}),o[4]=e):e=o[4],_=e}else if("error"===p.state&&m.selectedThreadID&&(null===y||p.notFound))if(v&&m.fetchSharedThreads?.ok===!1&&403===m.fetchSharedThreads.status){let e;o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(oZ,{}),o[5]=e):e=o[5],b=e}else{let e;o[6]!==v?(e=(0,c.jsx)(o3,{isSharedThread:v}),o[6]=v,o[7]=e):e=o[7],b=e}else if("error"===p.state||"error"===h.state){let e;o[8]!==h.status?(e=403===h.status?(0,c.jsx)(o2,{}):(0,c.jsx)(o1,{}),o[8]=h.status,o[9]=e):e=o[9],b=e}return o[10]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(o5,{}),o[10]=t):t=o[10],o[11]!==b?(n=b&&(0,c.jsx)("div",{className:oX.emptyContent,children:b}),o[11]=b,o[12]=n):n=o[12],o[13]!==_?(a=_&&(0,c.jsxs)("div",{className:oX.messageContent,children:[_,(0,c.jsx)(ol.Cb,{})]}),o[13]=_,o[14]=a):a=o[14],o[15]===Symbol.for("react.memo_cache_sentinel")?(r=(0,c.jsx)(ol.zc,{}),o[15]=r):r=o[15],o[16]!==n||o[17]!==a?(i=(0,c.jsxs)(os.$,{className:oX.container,children:[t,n,a,r]}),o[16]=n,o[17]=a,o[18]=i):i=o[18],i},o5=()=>{let e,t,n,a=(0,d.c)(7),{isScrolledUp:r,scrollToBottom:i}=(0,os.b)(),o=!r&&oX.hidden;return a[0]!==o?(e=(0,eD.$)(oX.scrollToBottomButton,o),a[0]=o,a[1]=e):e=a[1],a[2]!==i?(t=()=>i("smooth"),a[2]=i,a[3]=t):t=a[3],a[4]!==e||a[5]!==t?(n=(0,c.jsx)(eW.K,{as:"a","aria-label":"Scroll to bottom",className:e,onClick:t,icon:_.ArrowDownIcon,tooltipDirection:"n",href:"#copilot-chat-textarea"}),a[4]=e,a[5]=t,a[6]=n):n=a[6],n};try{o0.displayName||(o0.displayName="Messages")}catch{}try{o1.displayName||(o1.displayName="FailedToLoadThreadError")}catch{}try{o2.displayName||(o2.displayName="AccessDeniedError")}catch{}try{o3.displayName||(o3.displayName="NotFoundError")}catch{}try{o4.displayName||(o4.displayName="ImmersiveChat")}catch{}try{o5.displayName||(o5.displayName="ScrollToBottomButton")}catch{}function o6(e){return"assistant"===e.role}function o7(e){e.preventDefault(),window.location.reload()}function o8(e){return String(e)}function o9(e){return!!e}var se=n(60183);let st=JSON.parse('{"Files":{"id":"files-group","name":"Files","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Mermaid architecture overview"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-green-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-green-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]}}');var sn=n(65556);function sa(e){let t,n,a,r,i,o=(0,d.c)(12),{className:s}=e,[l,u]=(0,x.useState)(a4.L.Static),[m,p]=(0,x.useState)(!0),{safeSetTimeout:h}=(0,sn.A)();return o[0]!==h?(t=()=>{let e=h(()=>{eR.J.getProPlusAnimationFlag()?(u(a4.L.Activate),p(!1)):(u(a4.L.Idle),p(!0))},1e3);return()=>clearTimeout(e)},n=[h],o[0]=h,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,x.useEffect)(t,n),o[3]!==l?(a=()=>{l===a4.L.Activate&&(u(a4.L.Idle),p(!0),eR.J.removeProPlusAnimationFlag())},o[3]=l,o[4]=a):a=o[4],o[5]!==l||o[6]!==m||o[7]!==a?(r=(0,c.jsx)(a4.N,{animationType:l,onAnimationEnd:a,loopAnimation:m,size:48}),o[5]=l,o[6]=m,o[7]=a,o[8]=r):r=o[8],o[9]!==s||o[10]!==r?(i=(0,c.jsx)("div",{className:s,children:r}),o[9]=s,o[10]=r,o[11]=i):i=o[11],i}try{sa.displayName||(sa.displayName="CopilotEmptyStateAnimation")}catch{}let sr={scrollContainer:"NewConversation-module__scrollContainer--Xfaaj",container:"NewConversation-module__container--Qt89h",banner:"NewConversation-module__banner--nBNmy",main:"NewConversation-module__main--GVJMw",content:"NewConversation-module__content--j88E1",alignTop:"NewConversation-module__alignTop--gdI7p",innerContainer:"NewConversation-module__innerContainer--gDENn",footer:"NewConversation-module__footer--uQNk1",suggestions:"NewConversation-module__suggestions--vWWmG",starters:"NewConversation-module__starters--leV1b",item:"NewConversation-module__item--PJdL6",suggestionButton:"NewConversation-module__suggestionButton--avNLF",spaceName:"NewConversation-module__spaceName--yEZaT"};var si=n(44446);let so={container:"StarterPill-module__container--BCDeZ",icon:"StarterPill-module__icon--ca2DE",title:"StarterPill-module__title--ODdkN",dropdown:"StarterPill-module__dropdown--wcx2F"},ss=x.forwardRef((e,t)=>{let n,a,r,i,o=(0,d.c)(13),{name:s,icon:l,color:u,onClick:m,dropdown:p}=e;return o[0]!==u||o[1]!==l?(n=si.I&&(0,c.jsx)("div",{className:so.icon,children:(0,c.jsx)(si.I,{icon:l,color:u})}),o[0]=u,o[1]=l,o[2]=n):n=o[2],o[3]!==p?(a=p&&(0,c.jsx)("div",{className:so.dropdown,children:(0,c.jsx)(_.TriangleDownIcon,{})}),o[3]=p,o[4]=a):a=o[4],o[5]!==s||o[6]!==a?(r=(0,c.jsxs)("div",{className:so.title,children:[s,a]}),o[5]=s,o[6]=a,o[7]=r):r=o[7],o[8]!==m||o[9]!==t||o[10]!==n||o[11]!==r?(i=(0,c.jsxs)("button",{ref:t,className:so.container,onClick:m,children:[n,r]}),o[8]=m,o[9]=t,o[10]=n,o[11]=r,o[12]=i):i=o[12],i});function sl(){let e,t,n=(0,d.c)(5),a=(0,h.b)(),r=(0,em.Pk)();n[0]!==a||n[1]!==r?(e=()=>{let e=(0,ay.W)(r);a.sendChatMessage({thread:e,content:"First, create a new draft issue. Then ask for additional information to fill out the issue",references:r.currentReferences,topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model}),(0,eS.BI)("dotcom_chat.activate",{target:"STARTER_CUSTOM_CREATE_ISSUE",mode:"immersive"})},n[0]=a,n[1]=r,n[2]=e):e=n[2];let i=e;return n[3]!==i?(t=(0,c.jsx)("li",{className:sr.item,children:(0,c.jsx)(ss,{name:"Create issue",icon:"issue-draft",color:"var(--fgColor-muted)",onClick:i})}),n[3]=i,n[4]=t):t=n[4],t}ss.displayName="StarterPill";try{sl.displayName||(sl.displayName="CreateIssue")}catch{}var sc=n(23985),sd=n(33036),su=n(88245);let sm={container:"EditorUpsellBanner-module__container--CVVb2",banner:"EditorUpsellBanner-module__banner--nLwUI",title:"EditorUpsellBanner-module__title--UkB0l",description:"EditorUpsellBanner-module__description--wNgDi",actions:"EditorUpsellBanner-module__actions--tJUAU",editorButton:"EditorUpsellBanner-module__editorButton--gkwOw",closeButton:"EditorUpsellBanner-module__closeButton--qXUPm"};function sp(){let e,t,n,a,r,i=(0,d.c)(10),o=(0,em.A3)("isEditorUpsellBannerDismissed"),s=(0,h.b)(),{isLicensedLimited:l}=(0,eA.xR)(),u=(0,x.useId)(),m=sh;return o||!l?null:(i[0]!==u?(e=(0,c.jsx)("h2",{className:sm.title,id:u,children:"Install Copilot in your favorite code editor"}),i[0]=u,i[1]=e):e=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)("p",{className:sm.description,children:"Copilot is available for a multitude of editors to fit your needs"}),n=z.W.freeToPaidSettingsUpgrade?(0,c.jsx)(sc.B,{menuLocation:"editor_upsell_banner",mode:"immersive"}):(0,c.jsxs)(iq.A,{className:sm.actions,children:[(0,c.jsx)(ew.z,{className:sm.editorButton,href:su.A.vscode.url,leadingVisual:(0,c.jsx)("img",{src:su.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{m("vscode","ide_menu_primary_button_click")},children:su.A.vscode.name}),(0,c.jsxs)(ez.W,{children:[(0,c.jsx)(ez.W.Anchor,{children:(0,c.jsx)(eW.K,{"aria-label":"More editors",icon:_.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{m("menu","ide_menu_open")}})}),(0,c.jsx)(ez.W.Overlay,{align:"end",children:(0,c.jsx)(eH.l,{children:(0,c.jsx)(sd.t,{menuLocation:"editor_upsell_banner",mode:"immersive"})})})]})]}),i[2]=t,i[3]=n):(t=i[2],n=i[3]),i[4]!==s?(a=(0,c.jsx)(eW.K,{variant:"invisible",className:sm.closeButton,icon:_.XIcon,"aria-label":"Dismiss banner",onClick:()=>{s.dismissEditorUpsellBanner(),(0,eS.BI)("dotcom_chat.activate",{target:"EDITOR_UPSELL_BANNER_DISMISS",mode:"immersive"})}}),i[4]=s,i[5]=a):a=i[5],i[6]!==e||i[7]!==a||i[8]!==u?(r=(0,c.jsx)("div",{className:sm.container,children:(0,c.jsxs)("section",{className:sm.banner,"aria-labelledby":u,children:[e,t,n,a]})}),i[6]=e,i[7]=a,i[8]=u,i[9]=r):r=i[9],r)}function sh(e,t){z.W.freeToPaidTelemetry?(0,sd.F)({eventName:e,menuLocation:"editor_upsell_banner",mode:"immersive",action:t}):(0,eS.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})}try{sp.displayName||(sp.displayName="EditorUpsellBanner")}catch{}function sf(){return eR.J.getProPlusSuccessBannerFlag()??!1}function sg(e){let t,n,a=(0,d.c)(5),{onDismiss:r,className:i}=e;return a[0]!==r?(t=(0,c.jsx)(eI.l,{variant:"success",title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",hideTitle:!0,onDismiss:()=>{r(),(0,eS.BI)("dotcom_chat.activate",{target:"PRO_PLUS_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),a[0]=r,a[1]=t):t=a[1],a[2]!==i||a[3]!==t?(n=(0,c.jsx)("div",{className:i,children:t}),a[2]=i,a[3]=t,a[4]=n):n=a[4],n}try{sg.displayName||(sg.displayName="ProPlusSuccessBanner")}catch{}function sy(){return(eR.J.getTrialSuccessBannerFlag()&&!eR.J.getProPlusSuccessBannerFlag())??!1}function sx(e){let t,n,a=(0,d.c)(5),{onDismiss:r,className:i}=e;return a[0]!==r?(t=(0,c.jsx)(eI.l,{variant:"success",title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",hideTitle:!0,onDismiss:()=>{r(),(0,eS.BI)("dotcom_chat.activate",{target:"TRIAL_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),a[0]=r,a[1]=t):t=a[1],a[2]!==i||a[3]!==t?(n=(0,c.jsx)("div",{className:i,children:t}),a[2]=i,a[3]=t,a[4]=n):n=a[4],n}try{sx.displayName||(sx.displayName="TrialSuccessBanner")}catch{}function sv(){let e,t,n,a,r=(0,d.c)(12),i=(0,eA.xR)().licenseType,o=function(){let e,t,n=(0,d.c)(3),[a,r]=(0,x.useState)(sy);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{eR.J.removeTrialSuccessBannerFlag(),r(!1)},n[0]=e):e=n[0];let i=e;return n[1]!==a?(t={visible:a,onDismiss:i},n[1]=a,n[2]=t):t=n[2],t}(),s=function(){let e,t,n=(0,d.c)(3),[a,r]=(0,x.useState)(sf);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{eR.J.removeProPlusSuccessBannerFlag(),eR.J.removeTrialSuccessBannerFlag(),r(!1)},n[0]=e):e=n[0];let i=e;return n[1]!==a?(t={visible:a,onDismiss:i},n[1]=a,n[2]=t):t=n[2],t}(),l=s.visible,u=!l&&o.visible&&i===tA.mF.LicensedFull,m=!l&&!u;return r[0]!==m?(e=m&&(0,c.jsx)(sp,{}),r[0]=m,r[1]=e):e=r[1],r[2]!==u||r[3]!==o?(t=u&&(0,c.jsx)(sx,{className:rG.banner,onDismiss:o.onDismiss}),r[2]=u,r[3]=o,r[4]=t):t=r[4],r[5]!==s.onDismiss||r[6]!==l?(n=l&&(0,c.jsx)(sg,{className:rG.banner,onDismiss:s.onDismiss}),r[5]=s.onDismiss,r[6]=l,r[7]=n):n=r[7],r[8]!==e||r[9]!==t||r[10]!==n?(a=(0,c.jsxs)(c.Fragment,{children:[e,t,n]}),r[8]=e,r[9]=t,r[10]=n,r[11]=a):a=r[11],a}try{sv.displayName||(sv.displayName="NewConversationBanners")}catch{}var s_=n(55206);function sb(e){let t,n,a,r,i,o,s,l,u,m=(0,d.c)(25),{currentTopic:p}=e,[h,f]=(0,x.useState)(!1),g=(0,x.useRef)(null),y=(0,X.Zp)();m[0]!==h?(t=()=>{f(!h)},m[0]=h,m[1]=t):t=m[1];let v=t;m[2]!==p?.name||m[3]!==y?(n=()=>{y("/copilot/spaces/new"),(0,eS.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_CREATE_SPACE",topic:p?.name,mode:"immersive"})},m[2]=p?.name,m[3]=y,m[4]=n):n=m[4];let _=n;m[5]!==p?.name||m[6]!==y?(a=e=>{y((0,eL.Cb)({id:e.id,owner:e.owner})),(0,eS.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_SPACES_MENU_ITEM",topic:p?.name,mode:"immersive",spaceId:`${e.owner}/${e.id}`})},m[5]=p?.name,m[6]=y,m[7]=a):a=m[7];let b=a,{data:j}=function(){let{threads:e}=(0,em.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,s_.O)(e)).filter(e=>null!==e),n=(0,eP.jS)(!0),{data:a}=n;if(void 0===a)return n;let r=new Set,i=[...t.map(e=>a.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!r.has(t)&&(r.add(t),!0)}),...[...a].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!r.has(t)})].slice(0,5);return{...n,data:i}}();m[8]!==j?(r=void 0===j?[]:j,m[8]=j,m[9]=r):r=m[9];let C=r;return m[10]!==v?(i=(0,c.jsx)(ez.W.Anchor,{children:(0,c.jsx)(ss,{ref:g,name:"Spaces",icon:"spaces",color:"gray",onClick:v,dropdown:!0})}),m[10]=v,m[11]=i):i=m[11],m[12]!==C.length?(o=C.length>0?{width:"260px"}:{},m[12]=C.length,m[13]=o):o=m[13],m[14]!==_||m[15]!==b||m[16]!==C?(s=(0,c.jsx)(eH.l,{children:C.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(eH.l.Group,{children:[(0,c.jsx)(eH.l.GroupHeading,{children:"Recent"}),C.map(e=>(0,c.jsx)(eH.l.Item,{onSelect:()=>b(e),children:(0,c.jsx)("span",{className:sr.spaceName,children:e.name})},`${e.owner}, ${e.id}`))]}),(0,c.jsx)(eH.l.Divider,{}),(0,c.jsx)(eH.l.Item,{onSelect:_,children:"Create a space"})]}):(0,c.jsx)(eH.l.Item,{onSelect:_,children:"Create your first space"})}),m[14]=_,m[15]=b,m[16]=C,m[17]=s):s=m[17],m[18]!==o||m[19]!==s?(l=(0,c.jsx)(ez.W.Overlay,{style:o,children:s}),m[18]=o,m[19]=s,m[20]=l):l=m[20],m[21]!==h||m[22]!==i||m[23]!==l?(u=(0,c.jsx)("li",{className:sr.item,children:(0,c.jsxs)(ez.W,{open:h,onOpenChange:f,children:[i,l]})}),m[21]=h,m[22]=i,m[23]=l,m[24]=u):u=m[24],u}try{sb.displayName||(sb.displayName="SpacesMenu")}catch{}let sj={suggestionButton:"SuggestionCard-module__suggestionButton--U6qWz",icon:"SuggestionCard-module__icon--XvDGU"},sC=e=>e in _;function sN(e){let t,n,a,r,i=(0,d.c)(11),{titleHtml:o,icon:s,color:l,onClick:u}=e;i[0]!==s?(t=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return sC(t)?_[t]:void 0}(s),i[0]=s,i[1]=t):t=i[1];let m=t;return i[2]!==m||i[3]!==l?(n=m&&(0,c.jsx)("div",{className:sj.icon,style:{color:l},children:(0,c.jsx)(m,{})}),i[2]=m,i[3]=l,i[4]=n):n=i[4],i[5]!==o?(a=(0,c.jsx)(rs.$6,{html:o}),i[5]=o,i[6]=a):a=i[6],i[7]!==u||i[8]!==n||i[9]!==a?(r=(0,c.jsxs)("button",{className:sj.suggestionButton,onClick:u,children:[n,a]}),i[7]=u,i[8]=n,i[9]=a,i[10]=r):r=i[10],r}try{sN.displayName||(sN.displayName="SuggestionCard")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}function sS(e){let t,n,a,r,i,o,s=(0,d.c)(19),{group:l,onEntrySelect:u}=e,[m,p]=(0,x.useState)(!1),h=(0,x.useRef)(null);s[0]!==m?(t=()=>{p(!m)},s[0]=m,s[1]=t):t=s[1];let f=t;if(s[2]!==l.color||s[3]!==l.icon||s[4]!==l.name||s[5]!==f?(n=(0,c.jsx)(ez.W.Anchor,{children:(0,c.jsx)(ss,{ref:h,name:l.name,icon:l.icon,color:l.color,onClick:f,dropdown:!0})}),s[2]=l.color,s[3]=l.icon,s[4]=l.name,s[5]=f,s[6]=n):n=s[6],s[7]===Symbol.for("react.memo_cache_sentinel")?(a={width:"260px"},s[7]=a):a=s[7],s[8]!==l.entries||s[9]!==u){let e;s[11]!==u?(e=e=>(0,c.jsx)(eH.l.Item,{onSelect:()=>u(e),children:(0,c.jsx)(rs.$6,{html:e.titleHtml})},e.id),s[11]=u,s[12]=e):e=s[12],r=l.entries.map(e),s[8]=l.entries,s[9]=u,s[10]=r}else r=s[10];return s[13]!==r?(i=(0,c.jsx)(ez.W.Overlay,{style:a,children:(0,c.jsx)(eH.l,{children:r})}),s[13]=r,s[14]=i):i=s[14],s[15]!==m||s[16]!==n||s[17]!==i?(o=(0,c.jsx)("li",{className:sr.item,children:(0,c.jsxs)(ez.W,{open:m,onOpenChange:p,children:[n,i]})}),s[15]=m,s[16]=n,s[17]=i,s[18]=o):o=s[18],o}function sw({textAreaRef:e,handleUserSubmit:t,nextMessageIndex:n}){let a=(0,h.b)(),r=(0,em.Pk)(),i=(0,N.X)(),o=(0,ay.W)(r),s=(0,x.useMemo)(()=>{var e,t;if(Array.isArray(e=i.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=(0,nm.G7)("copilot_showcase_icebreakers")?{data:i.icebreakers.filter(e=>["functional","instructional"].includes(e.type)).flatMap(e=>e.data)}:i.icebreakers.find(e=>"functional"===e.type);if(e&&e.data.length>0)return t=e.data,[...t].sort(()=>.5-Math.random()).slice(0,6)}return[]},[i.icebreakers]),l=e=>{let t=0===r.messages.length?o:(0,ay.W)(r),n=r.currentUserLogin||"",i=e.message.replaceAll("$$USERNAME$$",n);a.sendChatMessage({thread:t,content:i,references:r.currentReferences,topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model}),(0,eS.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_STARTER_MENU_ITEM",topic:r.currentTopic?.name,mode:"immersive",starterId:e.id})},d=z.W.newConversationStarters?Object.values(st):[];return(0,c.jsx)("div",{className:sr.scrollContainer,children:(0,c.jsxs)("div",{className:sr.container,children:[(0,c.jsx)("div",{className:sr.banner,children:(0,c.jsx)(sv,{})}),(0,c.jsx)("div",{className:sr.main,children:(0,c.jsx)("div",{className:sr.content,children:(0,c.jsxs)("div",{className:sr.alignTop,children:[(0,se.u)("copilot_pro_plus_animation")?(0,c.jsx)(sa,{}):(0,c.jsx)(eN.A,{hidden:!0}),(0,c.jsxs)("div",{className:sr.innerContainer,children:[(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),(0,c.jsx)(iy,{textAreaRef:e,handleUserSubmit:t,nextMessageIndex:n}),(0,c.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),(0,c.jsx)("ul",{className:z.W.newConversationStarters?sr.starters:sr.suggestions,children:z.W.newConversationStarters?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(sl,{}),(0,c.jsx)(sb,{currentTopic:r.currentTopic}),d.map(e=>(0,c.jsx)(sS,{group:e,onEntrySelect:l},e.id))]}):s.map(e=>(0,c.jsx)("li",{className:sr.suggestionButton,children:(0,c.jsx)(sN,{titleHtml:e.titleHtml,icon:e.icon,color:e.color,onClick:()=>{let t=0===r.messages.length?o:(0,ay.W)(r),n=r.currentUserLogin,i=e.message;a.sendChatMessage({thread:t,content:i.replaceAll("$$USERNAME$$",n),references:r.currentReferences,topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model}),(0,eS.BI)("dotcom_chat.activate",{target:"EMPTY_STATE_SUGGESTION_CARD",topic:r.currentTopic?.name,mode:"immersive",suggestionId:e.id})}})},e.id))})]})]})})}),(0,c.jsx)("div",{className:sr.footer,children:(0,c.jsx)(m.h,{})})]})})}try{sS.displayName||(sS.displayName="StarterGroupWithMenu")}catch{}try{sw.displayName||(sw.displayName="NewConversation")}catch{}let sI={container:"QuotaExceededEmptyState-module__container--IH35J",main:"QuotaExceededEmptyState-module__main--UOew3",hero:"QuotaExceededEmptyState-module__hero--GYoHc",copy:"QuotaExceededEmptyState-module__copy--FI8o_",heading:"QuotaExceededEmptyState-module__heading--RHZjC",description:"QuotaExceededEmptyState-module__description--m4Qvb",footer:"QuotaExceededEmptyState-module__footer--xLpJU"};function sk(){let e,t,n,a,r,i,o,s,l=(0,d.c)(11),{resetDate:u}=(0,eA.xR)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("img",{className:sI.hero,src:"/images/modules/copilot-immersive-v1/hero.png",alt:"Hero"}),l[0]=e):e=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)("h2",{className:sI.heading,children:"You\u2019ve reached your free plan limit"}),l[1]=t):t=l[1],l[2]!==u?(n=(0,c.jsxs)("p",{className:sI.description,children:["Your limits will reset on ",u,"."]}),l[2]=u,l[3]=n):n=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(ew.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/features/copilot#pricing",onClick:sT,children:"Upgrade to Pro"}),l[4]=a):a=l[4],l[5]!==n?(r=(0,c.jsxs)("div",{className:sI.main,children:[e,(0,c.jsxs)("div",{className:sI.copy,children:[t,n,a]})]}),l[5]=n,l[6]=r):r=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,c.jsx)("strong",{children:"Part of an organization?"}),l[7]=i):i=l[7],l[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsxs)("div",{className:sI.footer,children:[i,(0,c.jsxs)("span",{children:["Upgrade to"," ",(0,c.jsx)(H.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),l[8]=o):o=l[8],l[9]!==r?(s=(0,c.jsxs)("div",{className:sI.container,children:[r,o]}),l[9]=r,l[10]=s):s=l[10],s}function sT(){(0,eS.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})}try{sk.displayName||(sk.displayName="QuotaExceededEmptyState")}catch{}function sE(e){let t,n,a,r,i,o,s,l,u,m,p=(0,d.c)(28),{isMobile:f,textAreaRef:g}=e,y=(0,em.Pk)(),{messages:v,messagesLoading:_,threadsLoading:b}=y,j=(0,h.b)(),{model:C}=(0,em.bP)("model"),N=z.W.attachImagesImmersive&&z.W.wholeAreaDragDrop,{chatQuotaExceeded:S}=(0,eA.xR)(),w=(0,aL.G)();p[0]!==w||p[1]!==y.customCopilots?(t=(0,eL.JB)(y.customCopilots,w),p[0]=w,p[1]=y.customCopilots,p[2]=t):t=p[2];let I=!!t,{variant:k,customCopilot:T}=ih(w,y.selectedThreadID),E=(0,x.useRef)(y.currentTopic),A=rB(),R=!k||I;n=!y.selectedThreadID&&eR.J.getEntrypointMessage();e:{if(y.selectedThreadID||n||w||S||"error"===_.state||"error"===b.state){a=!1;break e}a=!0}let L=a,P=v.length,D=rV(E,P);p[3]!==y.currentTopic?(r=()=>{E.current=y.currentTopic},i=[y.currentTopic],p[3]=y.currentTopic,p[4]=r,p[5]=i):(r=p[4],i=p[5]),(0,x.useEffect)(r,i),p[6]!==S||p[7]!==D?(o=()=>{let e=eR.J.getEntrypointMessage();e&&!S&&(eR.J.setEntrypointMessage(null),setTimeout(()=>{D(e)},100))},s=[D,S],p[6]=S,p[7]=D,p[8]=o,p[9]=s):(o=p[8],s=p[9]),(0,x.useEffect)(o,s),p[10]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsx)(oe,{}),p[10]=l):l=p[10],p[11]!==S||p[12]!==T||p[13]!==D||p[14]!==f||p[15]!==A||p[16]!==P||p[17]!==L||p[18]!==R||p[19]!==k||p[20]!==y.selectedThreadID||p[21]!==g?(u=(0,c.jsxs)(c.Fragment,{children:[l,!y.selectedThreadID&&S?(0,c.jsx)(sk,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:ie.content,children:L?(0,c.jsx)(sw,{textAreaRef:g,handleUserSubmit:D,nextMessageIndex:P}):(0,c.jsx)(o4,{inputRef:g,isMobile:f,onSubmit:D})}),(!A||z.W.copilotDuplicateThread)&&!L&&(0,c.jsxs)("div",{className:ie.footer,children:[z.W.groupNotifications&&!R&&(0,c.jsx)(ig,{}),!z.W.groupNotifications&&k&&(0,c.jsx)("div",{className:ie.spaceBannerContainer,children:(0,c.jsx)(ip,{variant:k,customCopilot:T})}),R&&(0,c.jsx)(iy,{textAreaRef:g,handleUserSubmit:D,nextMessageIndex:P})]})]})]}),p[11]=S,p[12]=T,p[13]=D,p[14]=f,p[15]=A,p[16]=P,p[17]=L,p[18]=R,p[19]=k,p[20]=y.selectedThreadID,p[21]=g,p[22]=u):u=p[22];let O=u;return p[23]!==O||p[24]!==j||p[25]!==C||p[26]!==y?(m=N?(0,c.jsx)(ij,{model:C,state:y,manager:j,children:O}):O,p[23]=O,p[24]=j,p[25]=C,p[26]=y,p[27]=m):m=p[27],m}function sA(e){let t,n,a=(0,d.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(e9,{regionName:"This conversation"}),a[0]=t):t=a[0],a[1]!==e?(n=(0,c.jsx)(eF.t,{fallback:t,children:(0,c.jsx)(sE,{...e})}),a[1]=e,a[2]=n):n=a[2],n}try{sE.displayName||(sE.displayName="ConversationViewInner")}catch{}try{sA.displayName||(sA.displayName="ConversationView")}catch{}var sR=n(84217),sL=n(35642);let sP=(0,n(85351).A)("sessionStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),sD="THREAD_TIME_PATCH";function sO(){let e=sP.getItem(sD);return e?JSON.parse(e):null}function sM(){sP.removeItem(sD)}let sB={ConversationList__container:"ConversationList-module__ConversationList__container--rX8fM",ConversationList__empty:"ConversationList-module__ConversationList__empty--sTf7Y",ConversationList:"ConversationList-module__ConversationList--LAVA0",ConversationList__section:"ConversationList-module__ConversationList__section--ihwdi",ConversationList__title:"ConversationList-module__ConversationList__title--IHb4U",ConversationList__item:"ConversationList-module__ConversationList__item--dD6z4",ConversationList__link:"ConversationList-module__ConversationList__link--Byc2c",ConversationList__text:"ConversationList-module__ConversationList__text--YbHpv",ConversationList__context:"ConversationList-module__ConversationList__context--SK6Jb"};function sF({selectedItemID:e,loadingState:t,onConversationSelect:n}){let a=(0,h.b)(),{threads:r}=(0,em.Pk)(),i=(0,x.useMemo)(()=>((function(e){let t=sO();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():sM())}})(r),a.sortThreads(r).map(e=>({id:e.id,text:(0,eu.CB)(e),href:`${eu.Jz}/c/${e.id}`,date:new Date(e.updatedAt)}))),[r,a]),o=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let a=new Date(t);a.setDate(t.getDate()-7);let r=new Date(t);r.setDate(t.getDate()-30);let i=[],o=[],s=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?i.push(c):c.date.toDateString()===n.toDateString()?o.push(c):c.date>a?s.push(c):c.date>r&&l.push(c);return{Today:i,Yesterday:o,"Last 7 days":s,"Last 30 days":l}}(i),s=0===i.length,l=(0,x.useId)();return(0,c.jsx)("nav",{"aria-labelledby":`${l}-conversations`,id:`${l}-conversation-list`,tabIndex:-1,className:sB.ConversationList__container,children:s&&("loading"===t||"pending"===t)?(0,c.jsx)(sL.r,{lines:5}):s?(0,c.jsx)(sV,{}):(0,c.jsxs)("div",{className:sB.ConversationList__section,children:[(0,c.jsx)("h3",{id:`${l}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(o).map(([t,a])=>a.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{id:`${l}_${t}`,className:sB.ConversationList__title,children:t}),(0,c.jsx)("ul",{className:sB.ConversationList,children:a.map(t=>(0,c.jsx)(s$,{item:t,selectedItemId:e??void 0,onSelect:n,threads:r},t.id))})]},t))]})})}function s$(e){let t,n,a,r=(0,d.c)(17),{item:i,selectedItemId:o,onSelect:s,threads:l}=e,u=i.id===o,[m,p]=(0,x.useState)(null),[h,f,g]=(0,iE.B)(!1);r[0]!==o||r[1]!==l?(t=l.get(o),r[0]=o,r[1]=l,r[2]=t):t=r[2];let y=t,v=!!y?.customCopilotID,b=(0,x.useRef)(null);r[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,iT.flushSync)(()=>p(null)),b.current?.focus()},r[3]=n):n=r[3];let j=n;return r[4]!==m||r[5]!==v||r[6]!==i.href||r[7]!==i.id||r[8]!==i.text||r[9]!==h||r[10]!==s||r[11]!==u||r[12]!==o||r[13]!==f||r[14]!==g||r[15]!==l?(a=i.href&&(0,c.jsxs)("li",{className:sB.ConversationList__item,children:[(0,c.jsx)(X.N_,{className:sB.ConversationList__link,to:i.href,"aria-current":u?"page":void 0,onClick:()=>{s(),(0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:i.id,mode:"immersive"})},children:(0,c.jsx)("span",{className:sB.ConversationList__text,children:i.text})}),(0,c.jsx)("span",{className:sB.ConversationList__context,children:(0,c.jsxs)(ez.W,{anchorRef:b,children:[(0,c.jsx)(ez.W.Anchor,{children:(0,c.jsx)(eW.K,{loading:h,icon:_.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:sU})}),(0,c.jsx)(ez.W.Overlay,{children:(0,c.jsx)(eH.l,{children:(0,c.jsx)(i$,{onOpenDialog:p,isShared:!!l.get(i.id)?.sharedID,showShare:!v})})})]})}),(0,c.jsx)(iU,{visibleDialog:m,onClose:j,threadName:i.text,threadId:i.id,selectedThreadId:o,onStartLoading:f,onFinishLoading:g})]},i.id),r[4]=m,r[5]=v,r[6]=i.href,r[7]=i.id,r[8]=i.text,r[9]=h,r[10]=s,r[11]=u,r[12]=o,r[13]=f,r[14]=g,r[15]=l,r[16]=a):a=r[16],a}function sU(){return(0,eS.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function sV(){let e,t,n=(0,d.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(sR.A,{as:"h3",sx:{fontSize:1,mb:2},children:"No conversations yet"}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsxs)("div",{className:sB.ConversationList__empty,children:[e,(0,c.jsx)(iM.A,{sx:{color:"fg.muted"},children:"Ask Copilot anything on the right to start your first conversation."})]}),n[1]=t):t=n[1],t}try{sF.displayName||(sF.displayName="ConversationList")}catch{}try{s$.displayName||(s$.displayName="ConversationListEntry")}catch{}try{sV.displayName||(sV.displayName="EmptyState")}catch{}function sz(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,c.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{sz.displayName||(sz.displayName="ComposeIcon")}catch{}function sW(e){let t,n,a=(0,d.c)(4),{className:r,size:i}=e,o=void 0===i?16:i;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9853 4.76795c.2467 1.23107.1819 2.55631-.3218 3.71134 1.0897-1.00527 1.7464-2.46826 1.7464-3.86921 0-.41421.3357-.75.75-.75.4142 0 .75.33579.75.75 0 2.80515-2.0553 5.92172-5.26314 6.53282.12999.0339.26315.0635.39904.0885 1.3486.2485 2.7916.0174 3.7282-.5446.3552-.2131.8159-.0979 1.029.2573.2131.3552.0979.8159-.2573 1.029-1.3033.782-3.1303 1.0359-4.77168.7335-1.47895-.2726-2.95185-1.0297-3.73462-2.4328.03609.3407.0998.6912.19117 1.0445.39625 1.5319 1.23152 2.7976 2.12066 3.2689.36598.194.5054.6479.31141 1.0139-.19399.366-.64793.5054-1.01391.3114-1.41889-.7521-2.42362-2.4914-2.87037-4.2186-.37219-1.439-.41354-3.09054.18406-4.40236-.18676.13263-.36743.27694-.54001.43237-1.03593.93306-1.73142 2.22122-1.73142 3.69879 0 .4142-.33579.75-.75.75-.41422 0-.75-.3358-.75-.75 0-1.97509.934-3.64826 2.22755-4.81334.88055-.7931 1.9505-1.37217 3.05387-1.65822-.11043-.0376-.22261-.07252-.33631-.10464-1.50098-.42402-2.98649-.28172-3.84609.36302-.33136.24853-.80147.18139-1.05-.14998-.24854-.33136-.1814-.80146.14997-1.05 1.38041-1.03537 3.4149-1.0978 5.1539-.60654 1.67421.47295 3.33259 1.53108 4.06402 3.11319l.0038.00674c.035-.47081.0022-.96424-.0972-1.46029-.2603-1.29954-.95701-2.50156-1.90466-3.21238-.33135-.24854-.39848-.71865-.14994-1.050006.24855-.331356.71865-.398487 1.05001-.14994C10.8023 1.6197 11.6657 3.17263 11.9853 4.76795ZM7.99998 6.0001c-1.10457 0-2 .89543-2 2s.89543 2 2 2 2-.89543 2-2-.89543-2-2-2Z",fill:"currentColor"}),a[0]=t):t=a[0],a[1]!==r||a[2]!==o?(n=(0,c.jsx)("svg",{className:r,width:o,height:o,"aria-hidden":"true",fill:"none",viewBox:"0 0 16 16",children:t}),a[1]=r,a[2]=o,a[3]=n):n=a[3],n}try{sW.displayName||(sW.displayName="SpacesIcon")}catch{}let sH={list:"ServiceList-module__list--YDLyn",icon:"ServiceList-module__icon--iUANO"};function sq(e){let t,n,a,r,i,o,s=(0,d.c)(22),{toggleFloatingSidebar:l}=e,u=(0,em.Pk)(),{activePlugin:m,selectedThreadID:p}=u,f=(0,ed.qw)(),g=(0,h.b)(),y=rH(),x=(0,eL.mM)();s[0]!==y||s[1]!==l?(t=async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),l(),await y({clearTopic:!0,includeThreads:!1}),(0,eS.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},s[0]=y,s[1]=l,s[2]=t):t=s[2];let v=t;s[3]!==l?(n=e=>{e.metaKey||e.ctrlKey||l()},s[3]=l,s[4]=n):n=s[4];let b=n;s[5]!==g||s[6]!==l?(a=(e,t)=>{e.metaKey||e.ctrlKey||(l(),g.selectPlugin(t))},s[5]=g,s[6]=l,s[7]=a):a=s[7];let j=a,C=p||m||x?void 0:"page";s[8]!==v||s[9]!==C?(r=(0,c.jsx)(Z.Vx,{"aria-current":C,displayName:"Home",href:eu.Jz,icon:_.HomeIcon,id:"home",onLinkClick:v}),s[8]=v,s[9]=C,s[10]=r):r=s[10];let N=(0,eP.BV)()&&(0,c.jsx)(Z.Vx,{"aria-current":x?"page":void 0,displayName:"Spaces",href:eu.VR,iconOverride:(0,c.jsx)(sW,{className:sH.icon,size:16}),id:"spaces",onLinkClick:b,label:(0,c.jsx)(eo.A,{variant:"success",children:"Preview"})});if(s[11]!==u||s[12]!==j||s[13]!==f){let e;s[15]!==u||s[16]!==j?(e=e=>void 0!==e.NavigationComponent?(0,c.jsx)(e.NavigationComponent,{chatState:u,onLinkClick:j},e.id):null,s[15]=u,s[16]=j,s[17]=e):e=s[17],i=f.map(e),s[11]=u,s[12]=j,s[13]=f,s[14]=i}else i=s[14];return s[18]!==r||s[19]!==N||s[20]!==i?(o=(0,c.jsxs)("ul",{className:sH.list,children:[r,N,i]}),s[18]=r,s[19]=N,s[20]=i,s[21]=o):o=s[21],o}try{sq.displayName||(sq.displayName="ServiceList")}catch{}let sG={container:"Sidebar-module__container--s585U",header:"Sidebar-module__header--uOLk8",sidebar:"Sidebar-module__sidebar--sn0TN",conversations:"Sidebar-module__conversations--NEO0w",quicklinks:"Sidebar-module__quicklinks--wbmcD",blankslateContainer:"Sidebar-module__blankslateContainer--Gvuc8",pinned:"Sidebar-module__pinned--e3Nsi",visible:"Sidebar-module__visible--d8dRm"};function sK(e){let t,n,a,r,i,o,s,l,u,m,p,f,g,y,v,b,j,C,N,S=(0,d.c)(61),{isVisible:w,isPinned:I,isFloating:k,onNewThread:T,onToggle:E}=e,A=(0,em.Pk)(),{threads:R,selectedThreadID:L}=A,P=k?w:I,D=(0,h.b)(),O=(0,x.useRef)(!1),M=rH(),B=rB(),{closePreviewPane:F}=(0,eC.xx)(),$=(0,eP.BV)(),U=z.W.immersiveServiceNavigation||$;S[0]!==D||S[1]!==R.size?(t=()=>{0!==R.size||O.current||(O.current=!0,D.fetchThreads())},S[0]=D,S[1]=R.size,S[2]=t):t=S[2],S[3]!==D||S[4]!==A||S[5]!==R?(n=[R,D,A],S[3]=D,S[4]=A,S[5]=R,S[6]=n):n=S[6],(0,x.useEffect)(t,n),S[7]!==k||S[8]!==w||S[9]!==E?(a=()=>{k&&w&&E()},S[7]=k,S[8]=w,S[9]=E,S[10]=a):a=S[10];let V=a;S[11]!==F||S[12]!==V?(r=()=>{V(),F()},S[11]=F,S[12]=V,S[13]=r):r=S[13];let W=r,H=(0,x.useRef)(null);S[14]!==k||S[15]!==w||S[16]!==E?(i=()=>{if(w&&k){let e=e=>{H.current&&!H.current.contains(e.target)&&E()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},o=[w,k,E],S[14]=k,S[15]=w,S[16]=E,S[17]=i,S[18]=o):(i=S[17],o=S[18]),(0,x.useEffect)(i,o);let q=(0,x.useId)(),G=`${q}-copilot-navigation`,K=w&&sG.visible,Q=I&&sG.pinned;S[19]!==K||S[20]!==Q?(s=(0,eD.$)(sG.container,K,Q),S[19]=K,S[20]=Q,S[21]=s):s=S[21];let J=`${q}-copilot-navigation`;S[22]!==J?(l=(0,c.jsx)("h2",{id:J,className:"sr-only",children:"Copilot navigation"}),S[22]=J,S[23]=l):l=S[23];let Y=P?_.SidebarExpandIcon:_.SidebarCollapseIcon,Z=P?"Close conversations":"Open conversations";S[24]!==P||S[25]!==E?(u=()=>{E(),P?(0,eS.BI)("dotcom_chat.activate",{target:"SIDEBAR_EXPAND",mode:"immersive"}):(0,eS.BI)("dotcom_chat.activate",{target:"SIDEBAR_COLLAPSE",mode:"immersive"})},S[24]=P,S[25]=E,S[26]=u):u=S[26],S[27]!==Y||S[28]!==Z||S[29]!==u?(m=(0,c.jsx)(eW.K,{icon:Y,"aria-label":Z,onClick:u,variant:"default"}),S[27]=Y,S[28]=Z,S[29]=u,S[30]=m):m=S[30],S[31]!==M||S[32]!==T||S[33]!==V?(p=(0,c.jsx)(eW.K,{as:X.N_,to:eu.Jz,icon:sz,"aria-label":"New conversation",onClick:async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),V(),await M({clearTopic:!0,includeThreads:!1}),T(),(0,eS.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},variant:"default"}),S[31]=M,S[32]=T,S[33]=V,S[34]=p):p=S[34],S[35]!==l||S[36]!==m||S[37]!==p?(f=(0,c.jsxs)("div",{className:sG.header,children:[l,m,p]}),S[35]=l,S[36]=m,S[37]=p,S[38]=f):f=S[38],S[39]===Symbol.for("react.memo_cache_sentinel")?(g=(0,c.jsx)(sQ,{}),S[39]=g):g=S[39];let ee=`${q}-quick-links`,et=`${q}-quick-links`;S[40]!==et?(y=(0,c.jsx)("h3",{id:et,className:"sr-only",children:"Quick links"}),S[40]=et,S[41]=y):y=S[41],S[42]!==W||S[43]!==U?(v=U&&(0,c.jsx)(sq,{toggleFloatingSidebar:W}),S[42]=W,S[43]=U,S[44]=v):v=S[44],S[45]!==ee||S[46]!==y||S[47]!==v?(b=(0,c.jsxs)("nav",{"aria-labelledby":ee,className:sG.quicklinks,children:[y,v]}),S[45]=ee,S[46]=y,S[47]=v,S[48]=b):b=S[48];let en=B?null:L;return S[49]!==W||S[50]!==A.threadsLoading.state||S[51]!==en?(j=(0,c.jsx)(sF,{selectedItemID:en,loadingState:A.threadsLoading.state,onConversationSelect:W}),S[49]=W,S[50]=A.threadsLoading.state,S[51]=en,S[52]=j):j=S[52],S[53]!==b||S[54]!==j?(C=(0,c.jsx)("div",{className:sG.sidebar,children:(0,c.jsx)(eF.t,{fallback:g,children:(0,c.jsxs)("div",{className:sG.conversations,children:[b,j]})})}),S[53]=b,S[54]=j,S[55]=C):C=S[55],S[56]!==s||S[57]!==f||S[58]!==C||S[59]!==G?(N=(0,c.jsxs)("aside",{"aria-labelledby":G,ref:H,className:s,children:[f,C]}),S[56]=s,S[57]=f,S[58]=C,S[59]=G,S[60]=N):N=S[60],N}function sQ(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:sG.blankslateContainer,children:(0,c.jsx)(e9,{regionName:"The conversations menu"})}),t[0]=e):e=t[0],e}try{sK.displayName||(sK.displayName="Sidebar")}catch{}try{sQ.displayName||(sQ.displayName="SidebarContentsFallback")}catch{}function sJ(e){let t=sO();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():sM())}}function sY(e){return"org_public"===e?"Shared":"Private"}let sZ={container:"SpaceNotFoundComponent-module__container--hltG9",description:"SpaceNotFoundComponent-module__description--b8Rdv",banner:"SpaceNotFoundComponent-module__banner--ntKjI",icon:"SpaceNotFoundComponent-module__icon--hM9CP"},sX=e=>{let t,n,a,r,i,o=(0,d.c)(7),{protectedOrganizations:s}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(_.AlertIcon,{className:sZ.icon}),n=(0,c.jsx)("h3",{children:"Space not found"}),a=(0,c.jsx)("p",{className:sZ.description,children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."}),o[0]=t,o[1]=n,o[2]=a):(t=o[0],n=o[1],a=o[2]),o[3]!==s?(r=s&&(0,c.jsx)(aj.x,{protectedOrgs:s,redirectURI:s0}),o[3]=s,o[4]=r):r=o[4],o[5]!==r?(i=(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:sZ.container,children:[t,n,a,(0,c.jsx)("div",{className:sZ.banner,children:r})]})}),o[5]=r,o[6]=i):i=o[6],i};try{sX.displayName||(sX.displayName="SpaceNotFoundComponent")}catch{}function s0(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}let s1={dialogTitle:"AllAttachmentsDialog-module__dialogTitle--A4eQa"},s2={attachmentText:"AttachmentPreview-module__attachmentText--GPjjd",attachmentPreviewImage:"AttachmentPreview-module__attachmentPreviewImage--W6lEk"};function s3(e){let t=(0,d.c)(7),{attachment:n}=e;if(!n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("p",{className:s2.attachmentText,children:"No attachment selected."}),t[0]=e):e=t[0],e}switch(n.type){case"free_text":{let e;return t[1]!==n.text?(e=(0,c.jsx)("p",{className:s2.attachmentText,children:n.text}),t[1]=n.text,t[2]=e):e=t[2],e}case"media_content":{let e,a=`image: ${n.name}`;return t[3]!==n.url||t[4]!==a?(e=(0,c.jsx)("div",{className:s2.attachmentPreviewImage,children:(0,c.jsx)("img",{alt:a,src:n.url})}),t[3]=n.url,t[4]=a,t[5]=e):e=t[5],e}default:{let e;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("p",{children:"No preview available for this attachment."}),t[6]=e):e=t[6],e}}}try{s3.displayName||(s3.displayName="AttachmentPreview")}catch{}function s4(e){let t=(0,d.c)(12),{attachment:n,className:a}=e;switch(n.type){case"github_file":{let e;return t[0]!==a?(e=(0,c.jsx)(_.FileIcon,{className:a}),t[0]=a,t[1]=e):e=t[1],e}case"free_text":{let e;return t[2]!==a?(e=(0,c.jsx)(_.PasteIcon,{className:a}),t[2]=a,t[3]=e):e=t[3],e}case"uploaded_text_file":{let e;return t[4]!==a?(e=(0,c.jsx)(_.FileIcon,{className:a}),t[4]=a,t[5]=e):e=t[5],e}case"github_issue":{let e;return t[6]!==a?(e=(0,c.jsx)(_.IssueOpenedIcon,{className:a}),t[6]=a,t[7]=e):e=t[7],e}case"github_pull_request":{let e;return t[8]!==a?(e=(0,c.jsx)(_.GitPullRequestIcon,{className:a}),t[8]=a,t[9]=e):e=t[9],e}case"media_content":{let e;return t[10]!==a?(e=(0,c.jsx)(_.ImageIcon,{className:a}),t[10]=a,t[11]=e):e=t[11],e}default:return null}}try{s4.displayName||(s4.displayName="AttachmentIcon")}catch{}let s5={attachmentList:"AttachmentsList-module__attachmentList--bXIct",attachmentItem:"AttachmentsList-module__attachmentItem--nReRG",attachmentItemButton:"AttachmentsList-module__attachmentItemButton--EYA7M",attachmentItemLink:"AttachmentsList-module__attachmentItemLink--jglX0",attachmentText:"AttachmentsList-module__attachmentText--CuSQm",attachmentName:"AttachmentsList-module__attachmentName--tRjFT",attachmentContent:"AttachmentsList-module__attachmentContent--qKH5R",attachmentIcon:"AttachmentsList-module__attachmentIcon--diR8_",lineClamp:"AttachmentsList-module__lineClamp--Nrbdd"};function s6(e){let t,n,a=(0,d.c)(7),{attachments:r,onFileClick:i}=e;if(a[0]!==r||a[1]!==i){let e;a[3]!==i?(e=e=>(0,c.jsx)(s7,{attachment:e,onFileClick:i},e.id),a[3]=i,a[4]=e):e=a[4],t=r.map(e),a[0]=r,a[1]=i,a[2]=t}else t=a[2];return a[5]!==t?(n=(0,c.jsx)("ul",{className:s5.attachmentList,children:t}),a[5]=t,a[6]=n):n=a[6],n}function s7(e){let t=(0,d.c)(61),{attachment:n,onFileClick:a}=e;switch(n.type){case"github_file":{let e,a,r,i,o,s,l;t[0]!==n?(e=(0,eL.q5)(n),t[0]=n,t[1]=e):e=t[1];let{filePath:d,fileName:u,fileUrl:m}=e;return t[2]!==n?(a=(0,c.jsx)("div",{className:s5.attachmentIcon,children:(0,c.jsx)(s4,{attachment:n})}),t[2]=n,t[3]=a):a=t[3],t[4]!==u?(r=(0,c.jsx)("div",{className:s5.attachmentName,children:u}),t[4]=u,t[5]=r):r=t[5],t[6]!==d?(i=(0,c.jsx)("p",{className:s5.attachmentContent,children:d}),t[6]=d,t[7]=i):i=t[7],t[8]!==r||t[9]!==i?(o=(0,c.jsxs)("div",{className:s5.attachmentText,children:[r,i]}),t[8]=r,t[9]=i,t[10]=o):o=t[10],t[11]!==m||t[12]!==a||t[13]!==o?(s=(0,c.jsxs)("a",{className:s5.attachmentItemLink,href:m,rel:"noopener noreferrer",target:"_blank",children:[a,o]}),t[11]=m,t[12]=a,t[13]=o,t[14]=s):s=t[14],t[15]!==n.id||t[16]!==s?(l=(0,c.jsx)("li",{className:s5.attachmentItem,children:s},n.id),t[15]=n.id,t[16]=s,t[17]=l):l=t[17],l}case"free_text":case"uploaded_text_file":case"media_content":{let e,r,i,o,s,l,d,u,m,p=n.id;return t[18]!==n||t[19]!==a?(e=()=>a(n),t[18]=n,t[19]=a,t[20]=e):e=t[20],t[21]!==n?(r=(0,c.jsx)("div",{className:s5.attachmentIcon,children:(0,c.jsx)(s4,{attachment:n})}),t[21]=n,t[22]=r):r=t[22],t[23]===Symbol.for("react.memo_cache_sentinel")?(i=(0,eD.$)(s5.attachmentName,s5.lineClamp),t[23]=i):i=t[23],t[24]!==n.name?(o=(0,c.jsx)("div",{className:i,children:n.name}),t[24]=n.name,t[25]=o):o=t[25],t[26]!==n?(s="text"in n&&(0,c.jsx)("p",{className:(0,eD.$)(s5.attachmentContent,s5.lineClamp),children:n.text}),t[26]=n,t[27]=s):s=t[27],t[28]!==o||t[29]!==s?(l=(0,c.jsxs)("div",{className:s5.attachmentText,children:[o,s]}),t[28]=o,t[29]=s,t[30]=l):l=t[30],t[31]!==r||t[32]!==l?(d=(0,c.jsxs)("span",{className:s5.attachmentItemLink,children:[r,l]}),t[31]=r,t[32]=l,t[33]=d):d=t[33],t[34]!==e||t[35]!==d?(u=(0,c.jsx)("button",{type:"button",onClick:e,className:s5.attachmentItemButton,children:d}),t[34]=e,t[35]=d,t[36]=u):u=t[36],t[37]!==n.id||t[38]!==u?(m=(0,c.jsx)("li",{className:s5.attachmentItem,children:u},p),t[37]=n.id,t[38]=u,t[39]=m):m=t[39],m}case"github_issue":case"github_pull_request":{let e,a,r,i,o,s,l,d,u,m=n.id,p=n.url;t[40]!==n?(e=(0,c.jsx)("div",{className:s5.attachmentIcon,children:(0,c.jsx)(s4,{attachment:n,className:"fgColor-success"})}),t[40]=n,t[41]=e):e=t[41],t[42]===Symbol.for("react.memo_cache_sentinel")?(a=(0,eD.$)(s5.attachmentName,s5.lineClamp),t[42]=a):a=t[42];let h=`#${n.number}`;return t[43]!==h?(r=(0,c.jsx)("span",{className:"fgColor-muted text-light",children:h}),t[43]=h,t[44]=r):r=t[44],t[45]!==n.title||t[46]!==r?(i=(0,c.jsxs)("div",{className:a,children:[n.title,"\xa0",r]}),t[45]=n.title,t[46]=r,t[47]=i):i=t[47],t[48]===Symbol.for("react.memo_cache_sentinel")?(o=(0,eD.$)(s5.attachmentContent,s5.lineClamp),t[48]=o):o=t[48],t[49]!==n.nwo?(s=(0,c.jsx)("div",{className:o,children:n.nwo}),t[49]=n.nwo,t[50]=s):s=t[50],t[51]!==i||t[52]!==s?(l=(0,c.jsxs)("div",{className:s5.attachmentText,children:[i,s]}),t[51]=i,t[52]=s,t[53]=l):l=t[53],t[54]!==n.url||t[55]!==l||t[56]!==e?(d=(0,c.jsxs)("a",{className:s5.attachmentItemLink,href:p,rel:"noopener noreferrer",target:"_blank",children:[e,l]}),t[54]=n.url,t[55]=l,t[56]=e,t[57]=d):d=t[57],t[58]!==n.id||t[59]!==d?(u=(0,c.jsx)("li",{className:s5.attachmentItem,children:d},m),t[58]=n.id,t[59]=d,t[60]=u):u=t[60],u}default:return null}}try{s6.displayName||(s6.displayName="AttachmentsList")}catch{}try{s7.displayName||(s7.displayName="AttachmentItem")}catch{}function s8(e){let t,n,a,r,i,o=(0,d.c)(17),{copilotSpace:s,onClose:l,returnFocusRef:u,initialAttachment:m}=e,p=(0,X.Zp)(),[h,f]=(0,x.useState)(m??null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen"},o[0]=t):t=o[0],o[1]!==s||o[2]!==p||o[3]!==h?(n=!0===s.editable&&null===h?[{content:"Edit",leadingVisual:_.PencilIcon,onClick:()=>void p(`${(0,eL.GL)(s)}#attachments`)}]:void 0,o[1]=s,o[2]=p,o[3]=h,o[4]=n):n=o[4],o[5]!==l||o[6]!==h?(a=()=>(0,c.jsx)(tf.l.Header,{children:(0,c.jsxs)("div",{className:"d-flex flex-items-center",children:[h?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(eW.K,{icon:_.ArrowLeftIcon,variant:"invisible",onClick:()=>f(null),"aria-label":"Back",className:"mr-1"}),(0,c.jsx)(tf.l.Title,{className:s1.dialogTitle,children:h?.name??"Attachments"})]}):(0,c.jsx)(tf.l.Title,{className:(0,eD.$)(s1.dialogTitle,"pl-2"),children:"Attachments"}),(0,c.jsx)(tf.l.CloseButton,{onClose:l})]})}),o[5]=l,o[6]=h,o[7]=a):a=o[7],o[8]!==s.resources||o[9]!==h?(r=h?(0,c.jsx)(s3,{attachment:h}):(0,c.jsx)(s6,{attachments:s.resources,onFileClick:f}),o[8]=s.resources,o[9]=h,o[10]=r):r=o[10],o[11]!==l||o[12]!==u||o[13]!==n||o[14]!==a||o[15]!==r?(i=(0,c.jsx)(tf.l,{onClose:l,position:t,returnFocusRef:u,footerButtons:n,renderHeader:a,children:r}),o[11]=l,o[12]=u,o[13]=n,o[14]=a,o[15]=r,o[16]=i):i=o[16],i}try{s8.displayName||(s8.displayName="AllAttachmentsDialog")}catch{}let s9={instructionsText:"FullInstructionsDialog-module__instructionsText--K7H7X"},le=e=>{let t,n=(0,d.c)(2);return n[0]!==e?(t=(0,c.jsx)(_.CheckIcon,{...e,className:"fgColor-success"}),n[0]=e,n[1]=t):t=n[1],t};function lt(e){let t,n,a,r,i,o,s,l=(0,d.c)(20),{copilotSpace:u,onClose:m,returnFocusRef:p}=e,[h,f]=(0,x.useState)(!1);l[0]!==u.generalInstructions?(t=function(){(0,iO.D)(u.generalInstructions||""),f(!0),setTimeout(()=>f(!1),2e3)},l[0]=u.generalInstructions,l[1]=t):t=l[1];let g=t,y=(0,X.Zp)();l[2]===Symbol.for("react.memo_cache_sentinel")?(n={narrow:"fullscreen"},l[2]=n):n=l[2];let v=h?"Copied":"Copy",b=h?le:_.CopyIcon;return l[3]!==g||l[4]!==v||l[5]!==b?(a={content:v,leadingVisual:b,onClick:g},l[3]=g,l[4]=v,l[5]=b,l[6]=a):a=l[6],l[7]!==u||l[8]!==y?(r=!0===u.editable?[{content:"Edit",leadingVisual:_.PencilIcon,onClick:()=>y(`${(0,eL.GL)(u)}#instructions`)}]:[],l[7]=u,l[8]=y,l[9]=r):r=l[9],l[10]!==a||l[11]!==r?(i=[a,...r],l[10]=a,l[11]=r,l[12]=i):i=l[12],l[13]!==u.generalInstructions?(o=()=>(0,c.jsx)("div",{className:"p-3",children:(0,c.jsx)("p",{className:s9.instructionsText,children:u.generalInstructions})}),l[13]=u.generalInstructions,l[14]=o):o=l[14],l[15]!==m||l[16]!==p||l[17]!==i||l[18]!==o?(s=(0,c.jsx)(tf.l,{title:"Instructions",onClose:m,returnFocusRef:p,position:n,footerButtons:i,renderBody:o}),l[15]=m,l[16]=p,l[17]=i,l[18]=o,l[19]=s):s=l[19],s}try{le.displayName||(le.displayName="SuccessCheckIcon")}catch{}try{lt.displayName||(lt.displayName="FullInstructionsDialog")}catch{}var ln=n(29255);let la=e=>{let t,n,a,r,i,o,s=(0,d.c)(16),l=(0,h.b)(),{customCopilots:c}=(0,em.Pk)(),u=(0,b.jE)();s[0]!==e||s[1]!==u?(t=async()=>(e&&await u.invalidateQueries({queryKey:(0,ln.dp)(e)}),u.invalidateQueries({queryKey:ln.O6})),s[0]=e,s[1]=u,s[2]=t):t=s[2],s[3]!==c||s[4]!==e||s[5]!==l?(n=async t=>{let n=(0,eL.JB)(c,e);if(!n)return;let a=`${(0,eL.Cb)(e)}/stars`,r=t.starred?"POST":"DELETE";if((await (0,S.lS)(a,{method:r})).ok)return n.starred=t.starred,l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:n}),n},s[3]=c,s[4]=e,s[5]=l,s[6]=n):n=s[6],s[7]!==t||s[8]!==n?(a={onSuccess:t,mutationFn:n},s[7]=t,s[8]=n,s[9]=a):a=s[9];let m=(0,C.n)(a);return s[10]!==m?({mutateAsync:i,...r}=m,s[10]=m,s[11]=r,s[12]=i):(r=s[11],i=s[12]),s[13]!==r||s[14]!==i?(o={starCopilotSpace:i,...r},s[13]=r,s[14]=i,s[15]=o):o=s[15],o},lr={container:"SpaceDetailsPage-module__container--NBzl3",main:"SpaceDetailsPage-module__main--VvzPx",contain:"SpaceDetailsPage-module__contain--oqicC",mobileOnly:"SpaceDetailsPage-module__mobileOnly--kEz8Z",desktopOnly:"SpaceDetailsPage-module__desktopOnly--xwqTV",meta:"SpaceDetailsPage-module__meta--juYEp",header:"SpaceDetailsPage-module__header--eIaez",chatInput:"SpaceDetailsPage-module__chatInput--Auq6g",conversations:"SpaceDetailsPage-module__conversations--VZDbm",info:"SpaceDetailsPage-module__info--VWAb_",sideTitle:"SpaceDetailsPage-module__sideTitle--m6GP5",sideSection:"SpaceDetailsPage-module__sideSection--p8xws",sideSectionTitle:"SpaceDetailsPage-module__sideSectionTitle--ieSV8",sideSectionHeader:"SpaceDetailsPage-module__sideSectionHeader--lofn9",conversationsListTitle:"SpaceDetailsPage-module__conversationsListTitle--Qi4h1",noConversations:"SpaceDetailsPage-module__noConversations--L9F5I",conversationsPlaceholder:"SpaceDetailsPage-module__conversationsPlaceholder--YUty1",contextPlaceholder:"SpaceDetailsPage-module__contextPlaceholder--TJQfK",conversationsPlaceholderText:"SpaceDetailsPage-module__conversationsPlaceholderText--X4UwU",conversationsHeader:"SpaceDetailsPage-module__conversationsHeader--WPiMC",conversationsContainer:"SpaceDetailsPage-module__conversationsContainer--vapwm",conversationsList:"SpaceDetailsPage-module__conversationsList--q27bh",conversationItem:"SpaceDetailsPage-module__conversationItem--yTwgT",conversationItemMenuOpen:"SpaceDetailsPage-module__conversationItemMenuOpen--OkeFA",conversationItemLeftColumn:"SpaceDetailsPage-module__conversationItemLeftColumn--lf_vr",conversationName:"SpaceDetailsPage-module__conversationName--lRecN",conversationTimestamp:"SpaceDetailsPage-module__conversationTimestamp--bMWsn",instructionsText:"SpaceDetailsPage-module__instructionsText--Qa5J2",infoDescription:"SpaceDetailsPage-module__infoDescription--NU98Y",noDescription:"SpaceDetailsPage-module__noDescription--QMqlj",starButton:"SpaceDetailsPage-module__starButton--VxOa3",visibilityLabel:"SpaceDetailsPage-module__visibilityLabel--kJe6N",descriptionExpander:"SpaceDetailsPage-module__descriptionExpander--HWK9U",starFillIcon:"SpaceDetailsPage-module__starFillIcon--FEdbK",instructionsLink:"SpaceDetailsPage-module__instructionsLink--Xw19Y",attachmentsLink:"SpaceDetailsPage-module__attachmentsLink--Q28Yi",actionListOffset:"SpaceDetailsPage-module__actionListOffset--jaFU6",lineClamp:"SpaceDetailsPage-module__lineClamp--_by4z"};Object.keys({BeakerIcon:_.BeakerIcon,BookIcon:_.BookIcon,BroadcastIcon:_.BroadcastIcon,CloudIcon:_.CloudIcon,CodeIcon:_.CodeIcon,DatabaseIcon:_.DatabaseIcon,DependabotIcon:_.DependabotIcon,HubotIcon:_.HubotIcon,OrganizationIcon:_.OrganizationIcon,PlusIcon:_.PlusIcon,ProjectRoadmapIcon:_.ProjectRoadmapIcon,TelescopeIcon:_.TelescopeIcon,TerminalIcon:_.TerminalIcon});let li=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"],lo=e=>li.find(t=>t===e)??"blue",ls={container:"SpacesAvatar-module__container--zJJUl",auburn:"SpacesAvatar-module__auburn--CIKFA",blue:"SpacesAvatar-module__blue--csQQ0",brown:"SpacesAvatar-module__brown--n04yP",coral:"SpacesAvatar-module__coral--_ML4p",cyan:"SpacesAvatar-module__cyan--o0MwN",gray:"SpacesAvatar-module__gray--vvb1W",green:"SpacesAvatar-module__green--Ro4IV",indigo:"SpacesAvatar-module__indigo--_0T4q",lemon:"SpacesAvatar-module__lemon--gsHE8",lime:"SpacesAvatar-module__lime--vRdDX",olive:"SpacesAvatar-module__olive--G1neu",orange:"SpacesAvatar-module__orange--FmpCu",pine:"SpacesAvatar-module__pine--jFhFP",pink:"SpacesAvatar-module__pink--vHHwu",plum:"SpacesAvatar-module__plum--M6SF6",purple:"SpacesAvatar-module__purple--_4Sak",red:"SpacesAvatar-module__red--IUpfe",teal:"SpacesAvatar-module__teal--q0AMo",yellow:"SpacesAvatar-module__yellow--DdvtA"},ll={auburn:ls.auburn,blue:ls.blue,brown:ls.brown,coral:ls.coral,cyan:ls.cyan,gray:ls.gray,green:ls.green,indigo:ls.indigo,lemon:ls.lemon,lime:ls.lime,olive:ls.olive,orange:ls.orange,pine:ls.pine,pink:ls.pink,plum:ls.plum,purple:ls.purple,red:ls.red,teal:ls.teal,yellow:ls.yellow};function lc(e){let t,n,a,r,i=(0,d.c)(11),{color:o,size:s}=e,l=void 0===s?16:s,{spaceColor:u}={icon:sW,spaceColor:lo(o)},m=`Spaces avatar in ${u} color`,p=`var(--base-size-${2*l})`;i[0]!==p?(t={"--custom-size":p},i[0]=p,i[1]=t):t=i[1];let h=ll[u];return i[2]!==h?(n=(0,eD.$)(ls.container,h),i[2]=h,i[3]=n):n=i[3],i[4]!==l?(a=(0,c.jsx)(sW,{size:l}),i[4]=l,i[5]=a):a=i[5],i[6]!==m||i[7]!==t||i[8]!==n||i[9]!==a?(r=(0,c.jsx)("div",{role:"img","aria-label":m,style:t,className:n,children:a}),i[6]=m,i[7]=t,i[8]=n,i[9]=a,i[10]=r):r=i[10],r}try{lc.displayName||(lc.displayName="SpacesAvatar")}catch{}let ld={container:"Tip-module__container--Ut3fK",prefix:"Tip-module__prefix--PQJdZ"};function lu(e){let t,n,a=(0,d.c)(3),{children:r}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsxs)("div",{className:ld.prefix,children:[(0,c.jsx)(_.LightBulbIcon,{}),"Tip"]}),a[0]=t):t=a[0],a[1]!==r?(n=(0,c.jsxs)("div",{className:ld.container,children:[t,r]}),a[1]=r,a[2]=n):n=a[2],n}try{lu.displayName||(lu.displayName="Tip")}catch{}function lm({customCopilotId:e,onChatSubmit:t,selectedThreadID:n,textAreaRef:a}){let{threads:r,streamingMessage:i,ambientError:o}=(0,em.Pk)(),s=(0,h.b)(),l=rH(),[d,u]=(0,x.useState)(null),{isPending:m,data:f,error:g}=(0,eP.Ao)(e),[y,v]=(0,x.useState)(!1),[b,j]=(0,x.useState)(!1),C=(0,x.useMemo)(()=>{if(!f)return[];sJ(r);let t=new Map(Array.from(r.entries()).filter(([,t])=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id));return s.sortThreads(t).slice(0,10)},[r,e,s,f]);(0,x.useEffect)(()=>{f&&s.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:f}),s.clearCurrentReferences(["image"])},[f,s]);let N=(0,x.useRef)(!1);(0,x.useEffect)(()=>()=>{N.current||(s.clearCurrentReferences(),N.current=!1)},[s,e]);let S=(0,x.useCallback)(async e=>{t&&(N.current=!0,await t(e))},[t]);if(g instanceof eP.i9)return(0,c.jsx)(sX,{});if(g instanceof eP.OW)return(0,c.jsx)(sX,{protectedOrganizations:g.protectedOrganizations});if(m||!f)return(0,c.jsx)(oK,{});let w=(0,eL.Hh)(f),I=sY(f.visibility);return(0,c.jsx)("div",{className:lr.container,children:(0,c.jsxs)("div",{className:lr.main,children:[(0,c.jsxs)("div",{className:lr.contain,children:[w&&(0,c.jsx)(il,{}),(0,c.jsxs)("div",{className:lr.header,children:[(0,c.jsx)(lc,{size:16,color:f.iconColor}),(0,c.jsxs)("h3",{className:lr.sideTitle,children:[f.name,(0,c.jsx)(eo.A,{className:lr.visibilityLabel,size:"small",variant:"secondary",children:I})]})]}),(0,c.jsxs)("div",{className:lr.chatInput,children:[o&&(0,c.jsx)(rq.P,{ambientError:o}),(0,c.jsx)(p.V,{textAreaRef:a,onSubmit:S,customCopilotId:f,isStreaming:!!i,size:"large",disabled:w,showModelPicker:!0,onNewThreadSelected:l},n)]}),(0,c.jsx)("div",{className:lr.conversations,children:C.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:lr.conversationsContainer,children:(0,c.jsxs)("nav",{"aria-labelledby":"conversations-heading",children:[(0,c.jsx)("div",{className:lr.conversationsHeader,children:(0,c.jsx)("h2",{id:"conversations-heading",className:lr.conversationsListTitle,children:"Your last conversations"})}),(0,c.jsx)("ul",{role:"menu",className:lr.conversationsList,children:C.map(e=>(0,c.jsx)(lp,{conversation:e,activeMenuConversationId:d,setActiveMenuConversationId:u},e.id))})]})}),f.ownerIsOrg&&(0,c.jsx)(lu,{children:"Your conversations stay private when you share a space."})]}):(0,c.jsx)("div",{className:lr.noConversations,children:(0,c.jsx)(lg,{})})})]}),(0,c.jsxs)("aside",{className:lr.meta,children:[(0,c.jsx)(ly,{copilotSpace:f}),(0,c.jsx)(lx,{copilotSpace:f,setInstructionsDialogOpen:v,setAttachmentsDialogOpen:j}),f.generalInstructions||f.starredUsers.length>0||f.resources.length>0?(0,c.jsxs)(c.Fragment,{children:[f.generalInstructions&&(0,c.jsx)(lv,{copilotSpace:f,isDialogOpen:y,setDialogOpen:v}),f.starredUsers.length>0&&(0,c.jsx)(lb,{copilotSpace:f}),f.resources.length>0&&(0,c.jsx)(l_,{copilotSpace:f,isDialogOpen:b,setDialogOpen:j})]}):(0,c.jsx)("section",{className:(0,eD.$)(lr.noConversations,lr.desktopOnly),children:(0,c.jsxs)("div",{className:lr.contextPlaceholder,children:[(0,c.jsx)(_.PaperclipIcon,{size:24}),(0,c.jsx)("div",{className:lr.conversationsPlaceholderText,children:"This space doesn\u2019t have any instructions or attachments yet"})]})})]})]})})}function lp(e){let t,n,a,r,i,o,s,l,u,m,p,f,g,y,x,v,b=(0,d.c)(38),{conversation:j,activeMenuConversationId:C,setActiveMenuConversationId:N}=e,S=(0,rW.Z)(),w=(0,h.b)();b[0]!==j?(t=(0,eu.CB)(j),b[0]=j,b[1]=t):t=b[1];let I=t,k=`${eu.Jz}/c/${j.id}`;b[2]!==j||b[3]!==w?(n=function(){w.deleteThread(j)},b[2]=j,b[3]=w,b[4]=n):n=b[4];let T=n;b[5]!==S||b[6]!==k?(a=()=>{S(k)},r=e=>{"Enter"===e.key&&S(k)},b[5]=S,b[6]=k,b[7]=a,b[8]=r):(a=b[7],r=b[8]);let E=null!==C&&lr.conversationItemMenuOpen;b[9]!==E?(i=(0,eD.$)(lr.conversationItem,E),b[9]=E,b[10]=i):i=b[10],b[11]!==I?(o=(0,c.jsx)("div",{className:lr.conversationName,children:I}),b[11]=I,b[12]=o):o=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(s=(0,c.jsx)(_.ClockIcon,{}),b[13]=s):s=b[13],b[14]!==j.updatedAt?(l=new Date(j.updatedAt),b[14]=j.updatedAt,b[15]=l):l=b[15],b[16]!==l?(u=(0,c.jsxs)("div",{className:lr.conversationTimestamp,children:[s," ",(0,c.jsx)(M.A,{format:"relative",prefix:"",date:l})]}),b[16]=l,b[17]=u):u=b[17],b[18]!==u||b[19]!==o?(m=(0,c.jsxs)("div",{className:lr.conversationItemLeftColumn,children:[o,u]}),b[18]=u,b[19]=o,b[20]=m):m=b[20];let A=C===j.id;return b[21]!==j.id||b[22]!==N?(p=e=>{N(e?j.id:null)},b[21]=j.id,b[22]=N,b[23]=p):p=b[23],b[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,c.jsx)(ez.W.Anchor,{children:(0,c.jsx)(eW.K,{variant:"invisible","aria-label":"Conversation options",icon:_.KebabHorizontalIcon,onClick:lf})}),b[24]=f):f=b[24],b[25]===Symbol.for("react.memo_cache_sentinel")?(g=(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.TrashIcon,{})}),b[25]=g):g=b[25],b[26]!==T?(y=(0,c.jsx)(ez.W.Overlay,{onClick:lh,align:"end",children:(0,c.jsx)(eH.l,{children:(0,c.jsxs)(eH.l.Item,{variant:"danger",onSelect:T,children:[g,"Delete"]})})}),b[26]=T,b[27]=y):y=b[27],b[28]!==A||b[29]!==p||b[30]!==y?(x=(0,c.jsxs)(ez.W,{open:A,onOpenChange:p,children:[f,y]}),b[28]=A,b[29]=p,b[30]=y,b[31]=x):x=b[31],b[32]!==m||b[33]!==x||b[34]!==a||b[35]!==r||b[36]!==i?(v=(0,c.jsxs)("li",{role:"menuitem",onClick:a,onKeyDown:r,className:i,children:[m,x]}),b[32]=m,b[33]=x,b[34]=a,b[35]=r,b[36]=i,b[37]=v):v=b[37],v}function lh(e){return e.stopPropagation()}function lf(e){e.stopPropagation()}function lg(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("section",{className:lr.noConversations,children:(0,c.jsxs)("div",{className:lr.conversationsPlaceholder,children:[(0,c.jsx)(_.CommentDiscussionIcon,{size:24}),(0,c.jsx)("div",{className:lr.conversationsPlaceholderText,children:"Start your first conversation using the input above"})]})}),t[0]=e):e=t[0],e}function ly(e){let t,n,a,r,i,o,s,l,u=(0,d.c)(22),{copilotSpace:m}=e,[p,h]=(0,x.useState)(!1),f=(m.description?.length??0)>140&&!p,{starCopilotSpace:g}=la(m);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)("div",{className:(0,eD.$)(lr.sideSectionHeader,lr.desktopOnly),children:(0,c.jsx)("h4",{className:lr.sideSectionTitle,children:"About"})}),u[0]=t):t=u[0],u[1]!==m.description||u[2]!==f?(n=m.description?(f?m.description.slice(0,140):m.description).replaceAll(`

`,`
`):(0,c.jsx)("span",{className:(0,eD.$)(lr.noDescription,lr.desktopOnly),children:"No description"}),u[1]=m.description,u[2]=f,u[3]=n):n=u[3],u[4]!==m.description||u[5]!==f?(a=m.description&&f&&(0,c.jsx)("button",{type:"button","aria-label":"Expand description",className:lr.descriptionExpander,onClick:()=>h(!0),children:(0,c.jsx)(_.EllipsisIcon,{size:16})}),u[4]=m.description,u[5]=f,u[6]=a):a=u[6],u[7]!==n||u[8]!==a?(r=(0,c.jsxs)("p",{className:lr.infoDescription,children:[n,a]}),u[7]=n,u[8]=a,u[9]=r):r=u[9],u[10]!==m.starred||u[11]!==g?(i=()=>void g({starred:!m.starred}),u[10]=m.starred,u[11]=g,u[12]=i):i=u[12],u[13]!==m.starred?(o=m.starred?(0,c.jsx)(_.StarFillIcon,{className:lr.starFillIcon}):(0,c.jsx)(_.StarIcon,{}),u[13]=m.starred,u[14]=o):o=u[14];let y=m.starred?"Starred":"Star";return u[15]!==i||u[16]!==o||u[17]!==y?(s=(0,c.jsx)(aD.Q,{className:lr.starButton,block:!0,onClick:i,leadingVisual:o,variant:"default",children:y}),u[15]=i,u[16]=o,u[17]=y,u[18]=s):s=u[18],u[19]!==r||u[20]!==s?(l=(0,c.jsxs)("section",{className:lr.info,children:[t,r,s]}),u[19]=r,u[20]=s,u[21]=l):l=u[21],l}function lx(e){let t,n,a,r,i,o,s=(0,d.c)(19),{copilotSpace:l,setInstructionsDialogOpen:u,setAttachmentsDialogOpen:m}=e,p=`/${l.owner}`;return s[0]!==l.ownerAvatar||s[1]!==l.ownerIsOrg?(t=(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(np.r,{size:16,square:l.ownerIsOrg,src:l.ownerAvatar})}),s[0]=l.ownerAvatar,s[1]=l.ownerIsOrg,s[2]=t):t=s[2],s[3]!==l.owner?(n=(0,c.jsxs)("span",{className:"fgColor-muted",children:["Owned by ",(0,c.jsx)("strong",{className:"text-semibold",children:l.owner})]}),s[3]=l.owner,s[4]=n):n=s[4],s[5]!==p||s[6]!==t||s[7]!==n?(a=(0,c.jsxs)(eH.l.LinkItem,{href:p,children:[t,n]}),s[5]=p,s[6]=t,s[7]=n,s[8]=a):a=s[8],s[9]!==l.generalInstructions||s[10]!==u?(r=l.generalInstructions&&(0,c.jsxs)(eH.l.Item,{onSelect:()=>u(!0),className:lr.mobileOnly,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.NoteIcon,{})}),(0,c.jsx)("span",{className:"fgColor-muted",children:"View instructions"})]}),s[9]=l.generalInstructions,s[10]=u,s[11]=r):r=s[11],s[12]!==l.resources.length||s[13]!==m?(i=l.resources.length>0&&(0,c.jsxs)(eH.l.Item,{onSelect:()=>m(!0),className:lr.mobileOnly,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.PaperclipIcon,{})}),(0,c.jsxs)("span",{className:"fgColor-muted",children:[l.resources.length," attachment",l.resources.length>1?"s":""]})]}),s[12]=l.resources.length,s[13]=m,s[14]=i):i=s[14],s[15]!==a||s[16]!==r||s[17]!==i?(o=(0,c.jsxs)(eH.l,{variant:"full",className:lr.actionListOffset,children:[a,r,i]}),s[15]=a,s[16]=r,s[17]=i,s[18]=o):o=s[18],o}function lv(e){let t,n,a,r,i,o,s,l=(0,d.c)(19),{copilotSpace:u,isDialogOpen:m,setDialogOpen:p}=e,h=(0,x.useRef)(null),f=u.generalInstructions||"";return l[0]!==f?(t=f.replaceAll(`

`,`
`),l[0]=f,l[1]=t):t=l[1],l[2]!==t?(n=(0,c.jsx)("p",{className:lr.instructionsText,children:t}),l[2]=t,l[3]=n):n=l[3],l[4]!==p?(a=()=>p(!0),l[4]=p,l[5]=a):a=l[5],l[6]!==m||l[7]!==a?(r=(0,c.jsx)(H.A,{className:lr.instructionsLink,as:"button",ref:h,onClick:a,"aria-haspopup":"dialog","aria-expanded":m,children:"View full instructions"}),l[6]=m,l[7]=a,l[8]=r):r=l[8],l[9]!==n||l[10]!==r?(i=(0,c.jsxs)(lC,{title:"Instructions",children:[n,r]}),l[9]=n,l[10]=r,l[11]=i):i=l[11],l[12]!==u||l[13]!==m||l[14]!==p?(o=m&&(0,c.jsx)(lt,{copilotSpace:u,onClose:()=>p(!1),returnFocusRef:h}),l[12]=u,l[13]=m,l[14]=p,l[15]=o):o=l[15],l[16]!==i||l[17]!==o?(s=(0,c.jsxs)(c.Fragment,{children:[i,o]}),l[16]=i,l[17]=o,l[18]=s):s=l[18],s}function l_(e){let t,n,a,r,i,o,s,l,u,m,p,h,f,g=(0,d.c)(35),{copilotSpace:y,isDialogOpen:v,setDialogOpen:_}=e,[b,j]=(0,x.useState)(null),C=(0,x.useRef)(null);if(g[0]!==y.resources||g[1]!==_){let e,l=y.resources.slice(0,5);n=lC,o="Attachments",s=y.resources.length,t=eH.l,a="full",r=lr.actionListOffset,g[9]!==_?(e=e=>{if("free_text"===e.type||"uploaded_text_file"===e.type||"media_content"===e.type)return(0,c.jsxs)(eH.l.Item,{onSelect:()=>{j(e),_(!0)},children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(s4,{attachment:e})}),(0,c.jsx)("span",{className:lr.lineClamp,children:e.name})]},e.id);let t=(0,eL.$s)(e)?"fgColor-success":"",{fileName:n,fileUrl:a}="github_file"===e.type?(0,eL.q5)(e):{fileName:e.title,fileUrl:e.url};return(0,c.jsxs)(eH.l.LinkItem,{href:a,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(s4,{attachment:e,className:t})}),(0,c.jsx)("span",{className:lr.lineClamp,children:n})]},e.id)},g[9]=_,g[10]=e):e=g[10],i=l.map(e),g[0]=y.resources,g[1]=_,g[2]=t,g[3]=n,g[4]=a,g[5]=r,g[6]=i,g[7]=o,g[8]=s}else t=g[2],n=g[3],a=g[4],r=g[5],i=g[6],o=g[7],s=g[8];return g[11]!==t||g[12]!==a||g[13]!==r||g[14]!==i?(l=(0,c.jsx)(t,{variant:a,className:r,children:i}),g[11]=t,g[12]=a,g[13]=r,g[14]=i,g[15]=l):l=g[15],g[16]!==_?(u=()=>_(!0),g[16]=_,g[17]=u):u=g[17],g[18]!==v||g[19]!==u?(m=(0,c.jsx)(H.A,{className:lr.attachmentsLink,as:"button",ref:C,onClick:u,"aria-haspopup":"dialog","aria-expanded":v,children:"View all attachments"}),g[18]=v,g[19]=u,g[20]=m):m=g[20],g[21]!==n||g[22]!==o||g[23]!==s||g[24]!==l||g[25]!==m?(p=(0,c.jsxs)(n,{title:o,count:s,children:[l,m]}),g[21]=n,g[22]=o,g[23]=s,g[24]=l,g[25]=m,g[26]=p):p=g[26],g[27]!==y||g[28]!==b||g[29]!==v||g[30]!==_?(h=v&&(0,c.jsx)(s8,{copilotSpace:y,initialAttachment:b,onClose:()=>{j(null),_(!1)},returnFocusRef:C}),g[27]=y,g[28]=b,g[29]=v,g[30]=_,g[31]=h):h=g[31],g[32]!==h||g[33]!==p?(f=(0,c.jsxs)(c.Fragment,{children:[p,h]}),g[32]=h,g[33]=p,g[34]=f):f=g[34],f}function lb(e){let t,n,a,r=(0,d.c)(7),{copilotSpace:i}=e,o=i.starredUsersCount;return r[0]!==i.starredUsers?(t=i.starredUsers.map(lj),r[0]=i.starredUsers,r[1]=t):t=r[1],r[2]!==t?(n=(0,c.jsx)("div",{children:t}),r[2]=t,r[3]=n):n=r[3],r[4]!==i.starredUsersCount||r[5]!==n?(a=(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(lC,{title:"Starred by",count:o,children:n})}),r[4]=i.starredUsersCount,r[5]=n,r[6]=a):a=r[6],a}function lj(e){return(0,c.jsx)(np.r,{className:"mr-2",size:32,src:e.avatarUrl,alt:e.login},e.login)}function lC(e){let t,n,a,r,i=(0,d.c)(9),{title:o,count:s,children:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eD.$)(lr.sideSection,lr.desktopOnly),i[0]=t):t=i[0],i[1]!==s?(n=!!s&&(0,c.jsx)(t7.A,{children:s}),i[1]=s,i[2]=n):n=i[2],i[3]!==n||i[4]!==o?(a=(0,c.jsx)("div",{className:lr.sideSectionHeader,children:(0,c.jsxs)("h4",{className:lr.sideSectionTitle,children:[o," ",n]})}),i[3]=n,i[4]=o,i[5]=a):a=i[5],i[6]!==l||i[7]!==a?(r=(0,c.jsxs)("div",{className:t,children:[a,l]}),i[6]=l,i[7]=a,i[8]=r):r=i[8],r}try{lm.displayName||(lm.displayName="SpaceDetailsPage")}catch{}try{lp.displayName||(lp.displayName="ConversationItem")}catch{}try{lg.displayName||(lg.displayName="NoConversationsPlaceholder")}catch{}try{ly.displayName||(ly.displayName="InfoSection")}catch{}try{lx.displayName||(lx.displayName="MetadataSection")}catch{}try{lv.displayName||(lv.displayName="InstructionsSection")}catch{}try{l_.displayName||(l_.displayName="AttachmentsSection")}catch{}try{lb.displayName||(lb.displayName="StarredSection")}catch{}try{lC.displayName||(lC.displayName="SideSection")}catch{}var lN=n(6869),lS=n(30631);function lw(e){switch(e.type){case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}let lI=e=>{let t,n,a,r,i,o,s=(0,d.c)(15),l=(0,h.b)(),c=(0,b.jE)();s[0]!==e||s[1]!==c?(t=async()=>(e&&await c.invalidateQueries({queryKey:(0,ln.dp)(e)}),c.invalidateQueries({queryKey:ln.O6})),s[0]=e,s[1]=c,s[2]=t):t=s[2],s[3]!==e||s[4]!==l?(n=async t=>{let n=e?(0,eL.fn)(e):"/custom_copilots",a=e?"PUT":"POST",r={custom_copilot:{owner_id:t.ownerId,owner_type:t.ownerType,name:t.name,icon_type:t.iconType,icon_color:t.iconColor,description:t.description,general_instructions:t.generalInstructions,resources_attributes:t.resources?.map(lk),visibility:t.visibility}},i=await (0,S.lS)(n,{method:a,body:r}),o=await i.json();if(!i.ok)throw o.errorMessages;return l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:o}),o},s[3]=e,s[4]=l,s[5]=n):n=s[5],s[6]!==t||s[7]!==n?(a={onSuccess:t,mutationFn:n},s[6]=t,s[7]=n,s[8]=a):a=s[8];let u=(0,C.n)(a);return s[9]!==u?({mutateAsync:i,...r}=u,s[9]=u,s[10]=r,s[11]=i):(r=s[10],i=s[11]),s[12]!==r||s[13]!==i?(o={upsertCopilotSpace:i,...r},s[12]=r,s[13]=i,s[14]=o):o=s[14],o};function lk(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:lw(e)}}let lT={spaceVisibilityDialog:"SpaceVisibilityDialog-module__spaceVisibilityDialog--tz_qs",copyLinkSection:"SpaceVisibilityDialog-module__copyLinkSection--f0xw8",copyLinkButtonContainer:"SpaceVisibilityDialog-module__copyLinkButtonContainer--jlB56",copyLinkButton:"SpaceVisibilityDialog-module__copyLinkButton--StwOK",copiedLinkButton:"SpaceVisibilityDialog-module__copiedLinkButton--nn5vt",dialogFooterText:"SpaceVisibilityDialog-module__dialogFooterText--Nnpv_",errorBanner:"SpaceVisibilityDialog-module__errorBanner--QhyJE"};function lE(e){let t,n,a,r,i,o,s,l,u,m,p,h,f,g,y,v,b,j,C,N=(0,d.c)(43),{closeDialog:S,customCopilotId:w}=e;N[0]===Symbol.for("react.memo_cache_sentinel")?(t={},N[0]=t):t=N[0];let[I,k]=(0,x.useState)(t),[T,E]=(0,x.useState)(!1),A=(0,x.useRef)(null);N[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>()=>{A.current&&(clearTimeout(A.current),A.current=null)},a=[],N[1]=n,N[2]=a):(n=N[1],a=N[2]),(0,x.useEffect)(n,a),r=`${ee.fV.origin}${(0,eL.Cb)(e.customCopilotId)}`,N[3]!==r?(i=()=>{(0,iO.D)(r),E(!0),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{E(!1),A.current=null},2e3)},N[3]=r,N[4]=i):i=N[4];let R=i,{data:L,isLoading:P}=(0,eP.jS)(!0);N[5]!==w||N[6]!==L?(o=L?.find(e=>(0,eL.UG)(e,w)),N[5]=w,N[6]=L,N[7]=o):o=N[7];let D=o;N[8]!==I.base||N[9]!==I.visibility?(s=I.base||I.visibility?(0,c.jsx)(eI.l,{hideTitle:!0,title:"Unable to update space visibility",description:I.visibility||I.base,"aria-label":"Critical",variant:"critical",className:lT.errorBanner}):null,N[8]=I.base,N[9]=I.visibility,N[10]=s):s=N[10],N[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"Link"}),N[11]=l):l=N[11],N[12]!==r?(u=(0,c.jsx)(iL.A,{block:!0,value:r,readOnly:!0,className:"color-fg-muted"}),N[12]=r,N[13]=u):u=N[13],N[14]===Symbol.for("react.memo_cache_sentinel")?(m={position:"relative"},N[14]=m):m=N[14];let O=T?"hidden":"visible";N[15]!==O?(p={visibility:O},N[15]=O,N[16]=p):p=N[16];let M=T?-1:1,B=T?"true":"false",F=P||!D||D?.visibility==="private";return N[17]!==R||N[18]!==p||N[19]!==M||N[20]!==B||N[21]!==F?(h=(0,c.jsx)(aD.Q,{className:lT.copyLinkButton,leadingVisual:_.LinkIcon,variant:"default",onClick:R,style:p,tabIndex:M,"aria-hidden":B,disabled:F,children:"Copy link"}),N[17]=R,N[18]=p,N[19]=M,N[20]=B,N[21]=F,N[22]=h):h=N[22],N[23]!==T?(f=T&&(0,c.jsx)(aD.Q,{variant:"default",className:lT.copiedLinkButton,tabIndex:-1,"aria-hidden":"false",children:"Link copied"}),N[23]=T,N[24]=f):f=N[24],N[25]!==h||N[26]!==f?(g=(0,c.jsxs)("div",{style:m,className:lT.copyLinkButtonContainer,children:[h,f]}),N[25]=h,N[26]=f,N[27]=g):g=N[27],N[28]!==g||N[29]!==u?(y=(0,c.jsxs)(ti.B,{direction:"vertical",gap:"condensed",align:"start",children:[l,(0,c.jsxs)("div",{className:lT.copyLinkSection,children:[u,g]})]}),N[28]=g,N[29]=u,N[30]=y):y=N[30],N[31]===Symbol.for("react.memo_cache_sentinel")?(v=(0,c.jsx)("span",{className:"text-small text-bold color-fg-muted mt-2",children:"Base role"}),N[31]=v):v=N[31],N[32]!==D||N[33]!==P||N[34]!==e?(b=(0,c.jsxs)(ti.B,{direction:"vertical",gap:"condensed",align:"start",children:[v,(0,c.jsx)(lR,{onError:k,copilotSpace:D,isSpaceLoading:P,...e})]}),N[32]=D,N[33]=P,N[34]=e,N[35]=b):b=N[35],N[36]!==y||N[37]!==b?(j=(0,c.jsxs)(ti.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[y,b]}),N[36]=y,N[37]=b,N[38]=j):j=N[38],N[39]!==S||N[40]!==j||N[41]!==s?(C=(0,c.jsxs)(tf.l,{title:"Share this space",renderFooter:lA,onClose:S,className:lT.spaceVisibilityDialog,width:"large",children:[s,j]}),N[39]=S,N[40]=j,N[41]=s,N[42]=C):C=N[42],C}function lA(){return(0,c.jsx)(lD,{})}function lR(e){let t,n,a,r,i,o,s,l,u,m,p,h,f=(0,d.c)(36),{copilotSpace:g,isSpaceLoading:y,onError:v}=e,{data:_,isLoading:b,error:j}=(0,eP.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==y||f[2]!==b||f[3]!==v||f[4]!==_?(t=()=>{y||b||g&&_||v({visibility:"Could not load your space's visibility settings"})},n=[y,b,g,_,v],f[0]=g,f[1]=y,f[2]=b,f[3]=v,f[4]=_,f[5]=t,f[6]=n):(t=f[5],n=f[6]),(0,x.useEffect)(t,n),y){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let C=g.owner,N=_?.memberCount;return f[9]!==g.ownerAvatar?(a=(0,c.jsx)(np.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=a):a=f[10],f[11]!==g.ownerDisplayName?(r=(0,c.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=r):r=f[12],f[13]!==g.ownerDisplayName||f[14]!==r?(i=(0,c.jsx)(lS.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:r}),f[13]=g.ownerDisplayName,f[14]=r,f[15]=i):i=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=o):o=f[16],f[17]!==i?(s=(0,c.jsxs)("span",{className:"ml-1",children:[i,o]}),f[17]=i,f[18]=s):s=f[18],f[19]!==j||f[20]!==b||f[21]!==N||f[22]!==C?(l=C&&(0,c.jsxs)(c.Fragment,{children:[!b&&null!==N&&(0,c.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[N," ",1===N?"person":"people"]}),(b||j||null===N)&&(0,c.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=j,f[20]=b,f[21]=N,f[22]=C,f[23]=l):l=f[23],f[24]!==s||f[25]!==l?(u=(0,c.jsxs)("div",{className:"d-flex flex-column",children:[s,l]}),f[24]=s,f[25]=l,f[26]=u):u=f[26],f[27]!==a||f[28]!==u?(m=(0,c.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[a,u]}),f[27]=a,f[28]=u,f[29]=m):m=f[29],f[30]!==g||f[31]!==v?(p=(0,c.jsx)(lP,{onError:v,copilotSpace:g}),f[30]=g,f[31]=v,f[32]=p):p=f[32],f[33]!==m||f[34]!==p?(h=(0,c.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[m,p]}),f[33]=m,f[34]=p,f[35]=h):h=f[35],h}let lL=[{text:"No access",value:"private"},{text:"Read",value:"org_public"}];function lP({copilotSpace:e,onError:t}){let[n,a]=(0,x.useState)(!1),r=(0,x.useRef)(null),i=lL.find(t=>t.value===e.visibility),{upsertCopilotSpace:o,isPending:s}=lI(e);async function l(e){if(!s)try{await o({visibility:e})}catch{t({base:"An error occurred while updating your space's visibility."})}finally{a(!1)}}return e.editable?(0,c.jsxs)(ez.W,{onOpenChange:a,anchorRef:r,open:n,children:[(0,c.jsx)(ez.W.Button,{loading:s,variant:"invisible",className:"text-small",ref:r,onClick:()=>a(!0),children:(0,c.jsx)(lS.A,{title:i?.text||"",inline:!0,className:"mr-1",children:i?.text})}),(0,c.jsx)(ez.W.Overlay,{side:"outside-bottom",align:"end",children:(0,c.jsx)(eH.l,{selectionVariant:"single",children:lL.map(e=>(0,c.jsx)(eH.l.Item,{selected:e.value===i?.value,onSelect:()=>l(e.value),children:(0,c.jsx)("span",{className:"text-small",children:e.text})},e.value))})})]}):(0,c.jsx)("div",{children:(0,c.jsx)(lS.A,{title:i?.text||"",className:"text-small text-light",children:i?.text})})}function lD(){let e,t,n=(0,d.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={backgroundColor:"var(--bgColor-muted)",borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)"},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(tf.l.Footer,{style:e,className:"color-fg-muted flex-justify-center text-small p-2",children:(0,c.jsx)("span",{className:lT.dialogFooterText,children:"This space may include private content. Viewers need content access."})}),n[1]=t):t=n[1],t}try{lE.displayName||(lE.displayName="SpaceVisibilityDialog")}catch{}try{lR.displayName||(lR.displayName="VisibilitySettings")}catch{}try{lP.displayName||(lP.displayName="VisibilitySelect")}catch{}try{lD.displayName||(lD.displayName="CopilotSpaceVisibilityDialogFooter")}catch{}function lO(e){let t,n,a,r,i,o,s,l,u,m,p,h,f,g,y=(0,d.c)(32),{onDelete:v,copilot:b}=e,[j,C]=(0,x.useState)(null),[N,S]=(0,x.useState)(!1),w=(0,x.useRef)(null),I=(0,X.Zp)(),k=b.ownerIsOrg;y[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,iT.flushSync)(()=>C(null)),w.current?.focus()},y[0]=t):t=y[0];let T=t;y[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),T()},y[1]=n):n=y[1];let E=n;y[2]===Symbol.for("react.memo_cache_sentinel")?(a=async e=>{T(),S(!0),await e(),S(!1)},y[2]=a):a=y[2];let A=a;y[3]!==v?(r=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),A(v)},y[3]=v,y[4]=r):r=y[4];let R=r;y[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),C("share")},y[5]=i):i=y[5];let L=i;return y[6]!==N?(o=(0,c.jsx)(ez.W.Anchor,{children:(0,c.jsx)(eW.K,{loading:N,icon:_.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:lM})}),y[6]=N,y[7]=o):o=y[7],y[8]!==b||y[9]!==I?(s=b.editable&&(0,c.jsxs)(eH.l.Item,{onSelect:()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),I((0,eL.GL)(b))},children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.PencilIcon,{})}),"Edit"]}),y[8]=b,y[9]=I,y[10]=s):s=y[10],y[11]!==k?(l=k&&(0,c.jsxs)(eH.l.Item,{onSelect:L,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.ShareIcon,{})}),"Share"]}),y[11]=k,y[12]=l):l=y[12],y[13]!==b.editable?(u=b.editable&&(0,c.jsxs)(eH.l.Item,{variant:"danger",onSelect:()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),C("delete")},children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.TrashIcon,{})}),"Delete"]}),y[13]=b.editable,y[14]=u):u=y[14],y[15]!==s||y[16]!==l||y[17]!==u?(m=(0,c.jsx)(ez.W.Overlay,{side:"outside-bottom",align:"end",children:(0,c.jsxs)(eH.l,{children:[s,l,u]})}),y[15]=s,y[16]=l,y[17]=u,y[18]=m):m=y[18],y[19]!==m||y[20]!==o?(p=(0,c.jsxs)(ez.W,{anchorRef:w,children:[o,m]}),y[19]=m,y[20]=o,y[21]=p):p=y[21],y[22]!==R||y[23]!==j?(h="delete"===j?(0,c.jsx)(lB,{onCancel:T,onConfirm:R}):null,y[22]=R,y[23]=j,y[24]=h):h=y[24],y[25]!==b||y[26]!==j?(f="share"===j?(0,c.jsx)(lE,{closeDialog:E,customCopilotId:b}):null,y[25]=b,y[26]=j,y[27]=f):f=y[27],y[28]!==p||y[29]!==h||y[30]!==f?(g=(0,c.jsxs)(c.Fragment,{children:[p,h,f]}),y[28]=p,y[29]=h,y[30]=f,y[31]=g):g=y[31],g}function lM(){return(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})}let lB=e=>{let t,n=(0,d.c)(3),{onConfirm:a,onCancel:r}=e;return n[0]!==r||n[1]!==a?(t=(0,c.jsx)(iA.K,{title:"Delete space",onClose:e=>{"confirm"===e?((0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"}),a()):((0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),r())},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."}),n[0]=r,n[1]=a,n[2]=t):t=n[2],t};try{lO.displayName||(lO.displayName="CopilotSpacesMenu")}catch{}try{lB.displayName||(lB.displayName="DeleteDialog")}catch{}let lF={starButton:"SpacesHeader-module__starButton--MYloD"};var l$=n(19647);let lU={instructionsContainer:"InstructionsDialog-module__instructionsContainer--Pif1O",grow:"InstructionsDialog-module__grow--NEqmK",footerContainer:"InstructionsDialog-module__footerContainer--meuYH"};function lV({copilotSpace:e,onClose:t,onSaved:n,returnFocusRef:a,maxDescriptionLength:r}){let{upsertCopilotSpace:i,isPending:o}=lI(e),[s,l]=(0,x.useState)(e.description??""),[d,u]=(0,x.useState)(null);async function m(){try{let e=await i({description:s});n?.(e),t()}catch(e){e instanceof Error?u(e.message):u("Failed to save description")}}function p(){l(e.description??""),t()}return(0,c.jsx)(tf.l,{title:"Description",onClose:p,returnFocusRef:a,position:{narrow:"fullscreen"},renderBody:()=>(0,c.jsxs)("div",{className:"p-3",children:[d&&(0,c.jsx)(eI.l,{variant:"critical",title:d,className:"mb-2"}),(0,c.jsxs)(iR.A,{children:[(0,c.jsx)(iR.A.Label,{visuallyHidden:!0,children:"Description"}),(0,c.jsx)(l$.Ay,{block:!0,value:s,onChange:e=>l(e.target.value),placeholder:"Describe what this space is for",resize:"vertical",rows:5}),(0,c.jsx)(lz,{text:s,promptCharLimit:r})]})]}),renderFooter:()=>(0,c.jsxs)("div",{className:lU.footerContainer,children:[(0,c.jsx)(aD.Q,{variant:"default",onClick:p,children:"Cancel"}),(0,c.jsx)(aD.Q,{loading:o,loadingAnnouncement:"Saving description",variant:"primary",onClick:()=>{m()},children:"Save"})]})})}function lz(e){let t,n,a,r,i=(0,d.c)(10),{text:o,promptCharLimit:s}=e,l=o.length>s;i[0]!==o.length?(t=o.length.toLocaleString(),i[0]=o.length,i[1]=t):t=i[1],i[2]!==s?(n=s.toLocaleString(),i[2]=s,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(a=(0,c.jsxs)(c.Fragment,{children:[t," / ",n," characters"]}),i[4]=t,i[5]=n,i[6]=a):a=i[6];let u=a;return i[7]!==u||i[8]!==l?(r=l?(0,c.jsx)(iR.A.Validation,{variant:"error",children:u}):(0,c.jsx)(iR.A.Caption,{children:u}),i[7]=u,i[8]=l,i[9]=r):r=i[9],r}try{lV.displayName||(lV.displayName="DescriptionDialog")}catch{}try{lz.displayName||(lz.displayName="CharacterCount")}catch{}function lW(e){let t,n,a,r,i,o,s,l,u,m,p,f,g,y,v,b,j,C,S,w,I,k,T,E,A,R,L=(0,d.c)(71),{onCreateSpace:P}=e,D=(0,em.Pk)(),O=(0,h.b)(),M=(0,X.zy)(),B=(0,aL.G)(),{updateGlobalNavigationBreadcrumbs:F}=i7(),$=(0,rW.Z)(),[U,V]=(0,x.useState)(!1),[W,H]=(0,x.useState)(!1),[q,G]=(0,x.useState)(!1),[K,Q]=(0,x.useState)(null),J=(0,x.useRef)(null),Y=z.W.newThreadNavigate?M.pathname:ee.fV.pathname,Z=B&&Y!==eu.VR,et=z.W.spacesV3UI,{mutateAsync:en}=(0,eP.$7)(),{copilotSpacesConfig:ea}=(0,N.X)(),{maxDescriptionLength:er}=ea;e:{let e;if(!B){t=null;break e}L[0]!==B||L[1]!==D.customCopilots?(e=(0,eL.JB)(D.customCopilots,B),L[0]=B,L[1]=D.customCopilots,L[2]=e):e=L[2],t=e}let ei=t,eo=ei?.ownerIsOrg,{starCopilotSpace:es}=la(B);L[3]!==F?(n=()=>{F()},a=[F],L[3]=F,L[4]=n,L[5]=a):(n=L[4],a=L[5]),(0,x.useEffect)(n,a),L[6]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),H(!1)},L[6]=r):r=L[6];let el=r;L[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),V(!1)},L[7]=i):i=L[7];let ec=i;L[8]!==ei||L[9]!==$?(o=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),$((0,eL.GL)(ei))},L[8]=ei,L[9]=$,L[10]=o):o=L[10];let ed=o;L[11]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),H(!0)},L[11]=s):s=L[11];let ep=s;L[12]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),V(!0)},L[12]=l):l=L[12];let eh=l;L[13]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{(0,eS.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DESCRIPTION",mode:"immersive"}),G(!0)},L[13]=u):u=L[13];let ef=u;L[14]!==en||L[15]!==$||L[16]!==B?(m=async()=>{if(B)try{await en(B),$(eu.VR)}catch(e){Q(e instanceof Error?e:Error(String(e))),ec()}},L[14]=en,L[15]=$,L[16]=B,L[17]=m):m=L[17];let eg=m;L[18]!==ei||L[19]!==es?(p=()=>{ei&&es&&((0,eS.BI)("dotcom_chat.activate",{target:ei.starred?"SPACE_UNSTAR":"SPACE_STAR",mode:"immersive"}),es({starred:!ei.starred}))},L[18]=ei,L[19]=es,L[20]=p):p=L[20];let ey=p,ex=ei?.editable;L[21]!==ex?(f=ex&&(0,c.jsxs)(eH.l.Item,{variant:"danger",onSelect:eh,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.TrashIcon,{})}),"Delete"]}),L[21]=ex,L[22]=f):f=L[22];let ev=f;L[23]!==ex?(g=ex&&et&&(0,c.jsxs)(eH.l.Item,{onSelect:ef,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.NoteIcon,{})}),"Edit description"]}),L[23]=ex,L[24]=g):g=L[24];let e_=g;L[25]!==ev||L[26]!==e_||L[27]!==Z||L[28]!==D?(y=Z&&!D.selectedThreadID&&(ev||e_)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(eH.l.Group,{children:[(0,c.jsx)(eH.l.GroupHeading,{children:"Space"}),e_,ev]}),(0,c.jsx)(eH.l.Divider,{})]}):null,L[25]=ev,L[26]=e_,L[27]=Z,L[28]=D,L[29]=y):y=L[29];let eb=y;L[30]!==P?(v=et?null:(0,c.jsx)(aD.Q,{variant:"primary",onClick:P,children:"New space"}),L[30]=P,L[31]=v):v=L[31];let ej=v;L[32]!==ex||L[33]!==ed?(b=ex&&!et&&(0,c.jsx)(aD.Q,{leadingVisual:_.PencilIcon,onClick:ed,children:"Edit"}),L[32]=ex,L[33]=ed,L[34]=b):b=L[34];let eC=b;L[35]!==eo?(j=eo&&(0,c.jsx)(aD.Q,{onClick:ep,leadingVisual:_.ShareIcon,children:"Share"}),L[35]=eo,L[36]=j):j=L[36];let eN=j;L[37]!==ei||L[38]!==ey||L[39]!==B?(C=ei&&B&&et&&(0,c.jsx)(eW.K,{ref:J,onClick:ey,icon:ei.starred?_.StarFillIcon:_.StarIcon,className:ei.starred?lF.starButton:void 0,"aria-label":ei.starred?"Unstar space":"Star space"}),L[37]=ei,L[38]=ey,L[39]=B,L[40]=C):C=L[40];let ew=C,eI=!B&&ej;L[41]!==eC||L[42]!==ew||L[43]!==eN||L[44]!==eI?(S=(0,c.jsxs)(c.Fragment,{children:[eI,eC,eN,ew]}),L[41]=eC,L[42]=ew,L[43]=eN,L[44]=eI,L[45]=S):S=L[45];let ek=S;L[46]!==O?(w=e=>{O.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})},L[46]=O,L[47]=w):w=L[47];let eT=w;return L[48]!==ek||L[49]!==eb?(I=(0,c.jsx)(oe,{showPreviewPaneButton:!1,conversationSpecificItems:eb,customButtons:ek}),L[48]=ek,L[49]=eb,L[50]=I):I=L[50],L[51]!==K?(k=K&&(0,c.jsxs)(lN.A,{variant:"danger",children:[(0,c.jsx)(_.AlertIcon,{}),"There was a problem deleting your space."]}),L[51]=K,L[52]=k):k=L[52],L[53]!==eg||L[54]!==B||L[55]!==U?(T=U&&B?(0,c.jsx)(lB,{onCancel:ec,onConfirm:eg}):null,L[53]=eg,L[54]=B,L[55]=U,L[56]=T):T=L[56],L[57]!==B||L[58]!==W?(E=W&&B?(0,c.jsx)(lE,{closeDialog:el,customCopilotId:B}):null,L[57]=B,L[58]=W,L[59]=E):E=L[59],L[60]!==ei||L[61]!==eT||L[62]!==er||L[63]!==q?(A=q&&ei?(0,c.jsx)(lV,{copilotSpace:ei,onClose:()=>G(!1),returnFocusRef:J,maxDescriptionLength:er,onSaved:eT}):null,L[60]=ei,L[61]=eT,L[62]=er,L[63]=q,L[64]=A):A=L[64],L[65]!==I||L[66]!==k||L[67]!==T||L[68]!==E||L[69]!==A?(R=(0,c.jsxs)(c.Fragment,{children:[I,k,T,E,A]}),L[65]=I,L[66]=k,L[67]=T,L[68]=E,L[69]=A,L[70]=R):R=L[70],R}try{lW.displayName||(lW.displayName="SpacesHeader")}catch{}function lH(e){let t,n,a,r=(0,d.c)(7),{customCopilotId:i,selectedThreadID:o,textAreaRef:s}=e,l=(0,em.Pk)(),{messages:u}=l,m=rV((0,x.useRef)(l.currentTopic),u.length);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(lW,{}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(e9,{regionName:"This space"}),r[1]=n):n=r[1],r[2]!==i||r[3]!==m||r[4]!==o||r[5]!==s?(a=(0,c.jsxs)(c.Fragment,{children:[t,(0,c.jsx)(eF.t,{fallback:n,children:(0,c.jsx)(lm,{customCopilotId:i,onChatSubmit:m,selectedThreadID:o,textAreaRef:s})})]}),r[2]=i,r[3]=m,r[4]=o,r[5]=s,r[6]=a):a=r[6],a}try{lH.displayName||(lH.displayName="SpacesConversation")}catch{}var lq=n(8601),lG=n(62834),lK=n(98637),lQ=n(21113),lJ=n(99987),lY=n(11251),lZ=n(55864),lX=n(65607),l0=n(75177),l1=n(53110);function l2(e,t,n){let a=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),i=t.indexOf("/"),o=i>0?t.slice(0,i):t,s=`${e}/${o}`;if(n&&n.some(e=>e.path===s))continue;let l={items:[],data:{contentType:s===r?"file":"directory",name:o,path:s,isClientOnly:!0}};a.push(l)}return a}let l3={checkbox:"FileTreePicker-module__checkbox--sS_UT",itemContainer:"FileTreePicker-module__itemContainer--EmnHR",Box:"FileTreePicker-module__Box--y6v5U",Box_1:"FileTreePicker-module__Box_1--jOkmh",Octicon:"FileTreePicker-module__Octicon--uVmod",Box_2:"FileTreePicker-module__Box_2--CBUAV"};function l4(e,t){let n=new Set(e);switch(t.type){case"SELECT_FILE":n.add(t.path);break;case"DESELECT_FILE":n.delete(t.path);break;case"SELECT_DIRECTORY":for(let e of t.paths)n.add(e);break;case"DESELECT_DIRECTORY":for(let e of t.paths)n.delete(e)}return n}function l5({isActive:e,file:t,onItemSelected:n,getItemUrl:a,selectedItemRef:r,navigate:i,onRenderRow:o,getFileTrailingVisual:s,getFileIcon:l,navigateOnClick:d,isSelected:u}){let{sendRepoClickEvent:m}=(0,lK.T)(),p=x.useRef(null),h=(0,lY.Z)({focusRowRef:p,mouseRowRef:p}),f="submodule"===t.data.contentType,g=s?.(t.data);(0,x.useEffect)(()=>{e&&p.current&&requestAnimationFrame(()=>{p.current?.scrollIntoView({block:"center"})})},[e]);let y=x.useCallback(e=>{f?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(a(t.data),"_blank"),e.preventDefault()):(n?.(t.data,t),m("FILES_TREE.ITEM",{item_path:t.data.path}),d&&i(a(t.data)),e.stopPropagation())},[t,a,f,i,d,n,m]);return o?.(),(0,c.jsxs)(lZ.G.Item,{ref:p,onSelect:y,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,c.jsx)(lZ.G.LeadingVisual,{children:l?l(t.data):f?(0,c.jsx)(_.FileSubmoduleIcon,{}):(0,c.jsx)(_.FileIcon,{})}),(0,c.jsxs)("div",{className:l3.itemContainer,children:[(0,c.jsx)(lX.A,{className:l3.checkbox,checked:u||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,c.jsx)("span",{ref:r,style:{color:f?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,c.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),h&&(0,c.jsx)(lJ.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:p,"aria-label":t.data.name,open:!0,direction:"ne"}),!!g?.screenReaderText&&(0,c.jsx)("span",{className:"sr-only",children:g.screenReaderText}),!!g?.trailingVisual&&(0,c.jsx)(lZ.G.TrailingVisual,{children:g.trailingVisual})]})}let l6=x.memo(l5),l7=x.memo(lX.A);function l8({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:a,leadingPath:r,onItemSelected:i,getItemUrl:o,getFetchUrl:s,selectedItemRef:l,navigate:d,onRenderRow:u,getFileTrailingVisual:m,getFileIcon:p,navigateOnClick:h,selectedChildren:f,expandedPath:g}){let[y,v]=(0,x.useState)(a),{sendRepoClickEvent:_}=(0,lK.T)(),b=x.useRef(null),j=x.useRef(null),C=(0,lY.Z)({focusRowRef:j,mouseRowRef:b}),N=x.useMemo(()=>f?.filter(e=>e.startsWith(`${t.data.path}/`)),[f,t.data.path]),w=x.useMemo(()=>(function(e,t){if(!t||0===t.length)return"none";if(t.includes(e.data.path))return"all";let n=e.data.totalCount||0,a=t.filter(t=>t.startsWith(`${e.data.path}/`)).length;return 0===a?"none":a===n?"all":"partial"})(t,f),[t,f]),[I,k,T,E,A,R,L]=function(e,t,n){let[a,r]=x.useState(e.items),[i,o]=x.useState(e.data.totalCount||0),[s,l]=x.useState(!1),[c,d]=x.useState(!1),{safeSetTimeout:u}=(0,sn.A)();x.useEffect(()=>{r(e.items)},[e.items]),x.useEffect(()=>{void 0!==e.data.totalCount&&o(e.data.totalCount)},[e.data.totalCount]);let m=x.useCallback(()=>{d(!1)},[]),p=x.useCallback((e,t)=>{let n=e||[...a];r(n.slice(0,100)),u(()=>{r(n),void 0!==t&&o(t)},1)},[a,u]);return[x.useCallback(async a=>{let i=new Map;if(e.data.isClientOnly){if(a){let n=l2(e.data.path,a);for(let e of n)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),n.length>100?p(n,n.length):(r(n),o(n.length))}}else{let s=n(e.data);d(!1),l(!0);let c=Date.now(),u=await (0,S.lS)(`${s}?noancestors=1`);try{if(u.ok){let n=await u.json(),s=n.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,n,a){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let r=n.name.slice(0,n.name.lastIndexOf("/")),i=r.indexOf("/")>-1,o={path:n.path.slice(0,n.path.lastIndexOf("/")),contentType:n.contentType,name:r,hasSimplifiedPath:i},s={items:[t],data:o};return(a.set(o.path,s),i)?e(s,{...o},a):s}(t,e,i):t});if(a){let t=e.data.path,r=l2(t,a,n.payload.tree.items);for(let e of(s.push(...r),r))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=s,e.data.totalCount=n.payload.tree.totalCount,s.length>100?p(s,n.payload.tree.totalCount):(r(s),o(n.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}l(!1)},[n,e,t,p]),p,a,s,c,m,i]}(t,()=>{},s),P=r?`${r}/`:"",D=L-T.length;(0,x.useEffect)(()=>{n&&b.current&&requestAnimationFrame(()=>{b.current?.scrollIntoView({block:"center"})})},[n]);let O=x.useCallback(e=>{!e||y||E||A||!(t.items.length>100)||k(),e!==y&&v(e)},[y,E,A,t.items.length,k]),M=x.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&h?(window.open(o(t.data),"_blank"),e.preventDefault()):(i?.(t.data,t),_("FILES_TREE.ITEM",{item_path:t.data.path}),h&&d(o(t.data)),e.stopPropagation())},[t,o,d,h,i,_]);x.useEffect(()=>{a&&!y&&O?.(!0)},[a]),x.useEffect(()=>{0===t.items.length&&y?O?.(!1):!y&&t.autoExpand&&O?.(!0)},[t.items.length]);let B=x.useCallback(e=>{l&&n&&l(e),b.current=e},[l,n]);if(1===t.items.length){let a=t.items[0];if(a&&"directory"===a.data.contentType)return(0,c.jsx)(ct,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:P+t.data.name,inheritsActive:n,onItemSelected:i,selectedItemRef:l,getItemUrl:o,directoryNavigateOnClick:h,navigateOnClick:h,getFileTrailingVisual:m,getFileIcon:p,selectedChildren:N,expandedPath:g})}return u?.(),(0,c.jsxs)(lZ.G.Item,{ref:j,expanded:y,onExpandedChange:O,current:n,onSelect:M,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,c.jsx)(lZ.G.LeadingVisual,{children:(0,c.jsx)(lZ.G.DirectoryIcon,{})}),(0,c.jsxs)("div",{className:l3.itemContainer,children:[(0,c.jsx)(l7,{className:l3.checkbox,checked:"all"===w,indeterminate:"partial"===w,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===w?"true":void 0}),(0,c.jsxs)("span",{ref:B,children:[P&&(0,c.jsx)("span",{children:P}),(0,c.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),C&&(0,c.jsx)(lJ.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:j,"aria-label":`${P}${t.data.name}`,open:!0,direction:"ne"}),(0,c.jsx)(lZ.G.SubTree,{state:E?"loading":A?"error":"done",children:A?(0,c.jsx)(lZ.G.ErrorDialog,{onRetry:I,onDismiss:R,children:"There was an error loading the folder contents."}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ct,{clientOnlyFilePaths:e,directoryItems:T,onItemSelected:i,selectedItemRef:l,getItemUrl:o,directoryNavigateOnClick:h,navigateOnClick:h,getFileTrailingVisual:m,getFileIcon:p,selectedChildren:N,expandedPath:g}),D>0&&(0,c.jsx)(ca,{message:`${D} entries not shown`})]})})]})}let l9=x.memo(l8,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function ce({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:a,onItemSelected:r,selectedItemRef:i,onRenderRow:o,getItemUrl:s,getFileTrailingVisual:l,getFileIcon:d,directoryNavigateOnClick:u,navigateOnClick:m,selectedChildren:p,expandedPath:h}){let f=(0,lQ.Z)(),g=(0,rW.Z)(),y=x.useRef(g),v=x.useRef(r);x.useEffect(()=>{v.current=r,y.current=g},[r,g]);let _=x.useCallback((e,t)=>{v.current?.(e,t)},[]),b=x.useMemo(()=>t.map(t=>{let r=h===t.data.path,y=p?.includes(t.data.path),x=r||h.startsWith(`${t.data.path}/`),v=p?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`));return"directory"===t.data.contentType?(0,c.jsx)(l9,{clientOnlyFilePaths:e,isActive:a||r,isAncestorOfActive:x,onItemSelected:_,leadingPath:n,directory:t,getItemUrl:s,getFetchUrl:f.getItemUrl,selectedItemRef:x?i:void 0,navigate:g,onRenderRow:o,navigateOnClick:u,getFileTrailingVisual:l,getFileIcon:d,itemCount:t.items.length,isSelected:y,selectedChildren:v,expandedPath:h},t.data.name):(0,c.jsx)(l6,{onItemSelected:_,file:t,isActive:r,getItemUrl:s,selectedItemRef:r?i:void 0,navigate:g,navigateOnClick:m,onRenderRow:o,getFileTrailingVisual:l,getFileIcon:d,isSelected:y},t.data.name)}),[t,h,p,e,a,_,n,s,f.getItemUrl,i,g,o,u,l,d,m]);return(0,c.jsx)(c.Fragment,{children:b})}let ct=x.memo(ce);function cn(e){let{clientOnlyFilePaths:t,rootItems:n,fetchError:a,loading:r,onRenderRow:i,getItemUrl:o,getFileTrailingVisual:s,getFileIcon:l,expandedPath:d,onSelectionChange:u}=e,[m,p]=(0,x.useReducer)(l4,new Set),h=e.selectedItems||m,f=(0,x.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let n of e.items)for(let e of f(n))t.add(e);return Array.from(t)},[]),g=(0,x.useCallback)((e,t)=>{let n=t?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};u?u(l4(h,n)):p(n)},[u,h]),y=(0,x.useCallback)((e,t)=>{let n=f(e),a=t?{type:"DESELECT_DIRECTORY",paths:n}:{type:"SELECT_DIRECTORY",paths:n};u?u(l4(h,a)):p(a)},[f,u,h]),v=(0,x.useCallback)((e,t)=>{if("directory"===e.contentType){let e=f(t).every(e=>h.has(e));y(t,e)}else g(e.path,h.has(e.path))},[f,y,g,h]),_=(0,x.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,c.jsx)(l0.A,{onMouseDown:_,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:l3.Box,children:r?(0,c.jsxs)("div",{className:l3.Box_1,children:[(0,c.jsx)(q.A,{"aria-label":"Loading file tree"}),(0,c.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,c.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,c.jsxs)(lZ.G,{"aria-label":"Files",children:[a&&(0,c.jsx)(ca,{message:"Some files could not be loaded."}),(0,c.jsx)(ct,{clientOnlyFilePaths:t,directoryItems:n,onItemSelected:v,selectedChildren:h?Array.from(h):[],selectedItemRef:e.selectedItemRef,onRenderRow:i,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:o,getFileTrailingVisual:s,getFileIcon:l,expandedPath:d})]})})})}function ca({message:e}){return(0,c.jsxs)(lZ.G.Item,{id:"error-tree-row",children:[(0,c.jsx)(lZ.G.LeadingVisual,{children:(0,c.jsx)(l1.A,{icon:_.AlertFillIcon,className:l3.Octicon})}),(0,c.jsx)("div",{className:l3.Box_2,children:e||"Couldn't load."})]})}try{l5.displayName||(l5.displayName="WrappedFileTreeRow")}catch{}try{l6.displayName||(l6.displayName="FileTreeRow")}catch{}try{l7.displayName||(l7.displayName="MemoizedCheckbox")}catch{}try{l8.displayName||(l8.displayName="WrappedDirectoryTreeRow")}catch{}try{l9.displayName||(l9.displayName="DirectoryTreeRow")}catch{}try{ce.displayName||(ce.displayName="WrappedDirectoryContents")}catch{}try{ct.displayName||(ct.displayName="DirectoryContents")}catch{}try{cn.displayName||(cn.displayName="FileTreePicker")}catch{}try{ca.displayName||(ca.displayName="ErrorTreeRow")}catch{}var cr=n(76016),ci=n(88795),co=n(85579),cs=n(141),cl=n(69098),cc=n(89276),cd=n(27406),cu=n(81367),cm=n(96235),cp=n(28391),ch=n(3971),cf=n(91385),cg=n(70170),cy=n(54763);let cx={TextInput:"FilesSearchBox-module__TextInput--G0iN6",Box:"FilesSearchBox-module__Box--NOLNq"},cv=x.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:n,ariaHasPopup:a,className:r,onBlur:i,onFocus:o,onKeyDown:s,onPreload:l,onSearch:d,query:u,searchPlaceholder:m,loading:p,sx:h},f)=>{let{sendRepoClickEvent:g}=(0,lK.T)(),[y,v]=x.useState(u),b=x.useRef((0,cg.s)(e=>d(e),250));x.useEffect(()=>{v(u)},[u]);let j=u?(0,c.jsx)(iL.A.Action,{onClick:()=>{g("FILE_TREE.CANCEL_SEARCH"),d("")},icon:_.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,c.jsx)(iL.A,{autoFocus:c_(),className:(0,eD.$)(r,cx.TextInput),ref:f,value:y,onKeyDown:s,onChange:e=>{v(e.target.value),l(),b.current(e.target.value)},sx:h,"aria-label":m||"Go to file","aria-activedescendant":e,role:a?"combobox":void 0,"aria-controls":t,"aria-expanded":n,"aria-haspopup":a?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:m||"Go to file",loading:""!==u&&p,leadingVisual:_.SearchIcon,trailingAction:j,trailingVisual:j?void 0:()=>(0,c.jsx)(cy.E,{children:(0,c.jsx)("div",{className:cx.Box,children:(0,c.jsx)("kbd",{children:"t"})})}),onFocus:e=>{l(),e.target.select(),o?.(e)},onBlur:i,onClick:()=>g("FILE_TREE.SEARCH_BOX")})});function c_(){return"1"===new URLSearchParams(ee.fV.search).get("search")}cv.displayName="FilesSearchBox";let cb={Box:"FileResultsList-module__Box--W1Jqy",ActionList:"FileResultsList-module__ActionList--jyBtr",FilesSearchBox:"FileResultsList-module__FilesSearchBox--mUJl5",HighlightMatch:"FileResultsList-module__HighlightMatch--RNVsR",Octicon:"FileResultsList-module__Octicon--jn8tc"},cj={excludeDirectories:!1,excludeSeeAllResults:!1};function cC({actionListSx:e,additionalResults:t,className:n,commitOid:a,config:r=cj,findFileWorkerPath:i,getItemUrl:o,onRenderRow:s,onItemSelected:l,searchBoxRef:d,sx:u}){let{excludeDirectories:m,excludeSeeAllResults:p}=r,{query:h,setQuery:f}=(0,co.JS)(),g=(0,ci.t)(),y=x.useRef(null),v=d??y,[_,b]=x.useState(h.length>0),[j,C]=x.useState(!!h),{list:N,directories:S,loading:w,error:I}=(0,lG.o)(a,_,!!m),{path:k}=(0,cs.eu)(),{getUrl:T}=(0,lQ.Z)(),{queryText:E,queryLine:A}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(h),{matches:R,clearMatches:L}=function(e,t,n,a){let[r,i]=x.useState(),o=x.useRef(""),s=x.useRef(),{sendStats:l}=(0,lK.T)(),c=x.useRef(!1),d=x.useCallback(()=>{let e=new cc.z(n,cd.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),o.current=e.query,e.startTime&&l("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},s.current=e},[l,n]);return x.useEffect(()=>{if(a)return d(),function(){s.current?.terminate()}},[d,a]),x.useEffect(()=>{if(e.length&&t){c.current&&(s.current?.terminate(),d());let n=o.current&&t.startsWith(o.current);c.current=!0,s.current?.postMessage({baseList:n&&r||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:r,clearMatches:()=>i(void 0)}}((0,x.useMemo)(()=>[...N,...t??[]].sort(),[t,N]),E,i,_),{sendRepoClickEvent:P}=(0,lK.T)(),D=(0,rW.Z)(),[O,M]=x.useState(0),[B,F]=x.useState(()=>c_()),$=x.useRef(null),U=x.useRef(null),V="file-results-list",{sendRepoKeyDownEvent:z}=(0,lK.T)(),{screenSize:W}=(0,ef.lm)(),H=r.enableOverlay??W>=ef.Gy.large,q=x.useCallback(e=>{P("FILE_TREE.SEARCH_RESULT_CLICK"),l?.(e),C(!1)},[P,l]),G=(e,t,n)=>o?o(e,t,n):T({path:e,action:t?"tree":"blob",hash:n}),{containerRef:K}=(0,eV.G)({bindKeys:eU.z0.ArrowVertical|eU.z0.HomeAndEnd,focusInStrategy:"previous"},[w,I]);x.useEffect(()=>{h||C(!1)},[h]),x.useEffect(()=>{document.activeElement!==v.current&&H&&C(!1)},[k,v,H]);let Q=R?.slice(0,20)||[],J=R&&R.length>Q.length,Y=!r.disableNavigation,Z=U.current?.getBoundingClientRect().width,X=(0,c.jsx)(l0.A,{sx:{maxHeight:H?"180px":"100% !important",width:H?Z:"100%"},className:cb.Box,children:I?(0,c.jsx)(lN.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,c.jsxs)(eH.l,{ref:K,sx:{p:H?2:3,pr:3*!!H,pt:H?3:"2px !important",...e},role:"listbox",className:cb.ActionList,children:[!w&&Q.map((e,t)=>{let n=S.includes(e),a=G(e,n,A?`L${A}`:"");return(0,c.jsx)(cI,{active:!1,index:t,focused:B&&O===t,match:e,onRender:s,query:E,onClick:q,isDirectory:n,to:a,useOverlay:H,listRef:K,noAnchor:r.disableNavigation},e)}),0===Q.length&&(0,c.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l0.A,{className:n,ref:U,sx:u,children:(0,c.jsx)(cv,{ariaActiveDescendant:(!H&&h||H&&j)&&B&&O>-1?J&&O===Q.length?"see-all-results-link":`file-result-${O}`:void 0,ariaExpanded:H?j:void 0,ariaHasPopup:H,ariaControls:H?V:void 0,ref:v,loading:w,query:h,onKeyDown:e=>{let{key:t,shiftKey:n,metaKey:a,altKey:r,ctrlKey:i}=e;if(!n&&!a&&!r){if("Escape"===t)h?(z("FILE_TREE.CANCEL_SEARCH"),f(""),L()):document.activeElement&&document.activeElement.blur();else if(!h)return;else if("Enter"===t){if(!p&&J&&O===Q.length)Y&&D((0,cm.Y8Y)({owner:g.ownerLogin,repo:g.name,searchTerm:`path:${E}`})),l?.();else if(Q[O]){let e=Q[O];Y&&D(G(Q[O],!1,A?`L${A}`:"")),C(!1),l?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!p&&J&&O>=Q.length-1){if(M(Q.length),$.current&&K.current){let e=(0,cu.U)(K.current);(0,eU.Rt)($.current,e,{behavior:"instant"})}}else M(Math.min(O+1,Q.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){M(Math.max(O-1,0)),e.preventDefault();return}}},onPreload:()=>b(!0),onSearch:e=>{f(e),e?C(!0):(L(),C(!1)),M(0)},onBlur:e=>{K.current?.contains(e.relatedTarget)||(C(!1),F(!1))},onFocus:()=>{h&&C(!0),F(!0)},searchPlaceholder:r.searchPlaceholder,className:cb.FilesSearchBox})}),H&&Q.length>0&&(0,c.jsx)(ch.T,{anchorRef:U,open:H&&j,renderAnchor:null,onClose:()=>{C(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:V,role:"dialog"},children:X}),!H&&h&&X]})}let cN=({active:e,focused:t,index:n,match:a,query:r,to:i,isDirectory:o,onClick:s,onRender:l,useOverlay:d,listRef:u,noAnchor:m})=>{let p=(0,cf.Xq)(r,a);l?.();let h=x.useRef(null);x.useEffect(()=>{if(t&&h.current&&u?.current){let e=(0,cu.U)(u.current);(0,eU.Rt)(h.current,e,{behavior:"instant"})}},[t,u]);let f={};t&&(f={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let g={id:`file-result-${n}`,active:e,onSelect:(0,x.useCallback)(()=>{s?.(a)},[a,s]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...f},role:"option","data-focus-visible-added":t||void 0,tabIndex:d?-1:0},y=(0,c.jsx)("div",{className:"d-flex",children:(0,c.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,c.jsx)(ck,{text:a,positionsList:p,LeadingIcon:o?cS:cw,className:cb.HighlightMatch})})});return m?(0,x.createElement)(eH.l.Item,{...g,key:a},y):(0,x.createElement)(eH.l.Item,{...g,ref:h,as:cp.N,to:i,key:a},y)},cS=()=>(0,c.jsx)(l1.A,{"aria-label":"Directory",icon:_.FileDirectoryFillIcon,size:"small",className:cb.Octicon}),cw=()=>(0,c.jsx)(l1.A,{"aria-label":"File",icon:_.FileIcon,className:"fgColor-muted mr-2",size:"small"}),cI=x.memo(cN);function ck({className:e,text:t,positionsList:n,sx:a,LeadingIcon:r}){let i=[],o=0;for(let e of n){if(Number(e)!==e||e<o||e>t.length)continue;let n=t.slice(o,e);n&&i.push(cT(n)),o=e+1,i.push((0,c.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return i.push(cT(t.slice(o))),(0,c.jsx)(l0.A,{className:e,sx:a,children:(0,c.jsxs)(c.Fragment,{children:[r&&(0,c.jsx)(r,{}),i]})})}function cT(e){return e.replaceAll("/","/\u200B")}try{cC.displayName||(cC.displayName="FileResultsList")}catch{}try{cN.displayName||(cN.displayName="FileResultRow")}catch{}try{cS.displayName||(cS.displayName="DirectoryIcon")}catch{}try{cw.displayName||(cw.displayName="FileResultIcon")}catch{}try{cI.displayName||(cI.displayName="MemoizedFileResultRow")}catch{}try{ck.displayName||(ck.displayName="HighlightMatch")}catch{}let cE={dialogHeader:"MultiFilePicker-module__dialogHeader--z4rKg",Box:"MultiFilePicker-module__Box--bwEHF",Dialog:"MultiFilePicker-module__Dialog--tzxbE",Dialog_1:"MultiFilePicker-module__Dialog_1--G_zNx"};function cA({currentRepo:e,setLocalFormData:t,fetchError:n,onFileCountChange:a,processingTime:r,expandedPath:i}){let[o,s]=(0,x.useState)(()=>new Set),[l,d]=(0,x.useState)(()=>new Set),{list:u,directories:m,loading:p}=(0,lG.o)(e.commitOID,!0),[h,f]=(0,x.useState)([]);(0,x.useEffect)(()=>{f(function e(t,n){let a=t[n];return a?a.items.map(n=>({data:n,items:"directory"===n.contentType?e(t,n.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:n}=e,a={},r=new Set(n);for(let e of(a[""]={items:[],totalCount:0},[...n].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};a[t]||(a[t]={items:[],totalCount:0}),a[t].items.push(n),a[e]||(a[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!r.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};a[t]||(a[t]={items:[],totalCount:0}),a[t].items.push(n)}for(let e in a){let t=a[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=a[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in a){let t=a[e];t&&(t.totalCount=i(e))}return a}({paths:u,directories:m}),"")),d(new Set(m))},[u,m,f,e.commitOID]),(0,x.useEffect)(()=>{let n=Array.from(o).filter(e=>!l.has(e));a?.(n.length),t(n.map(t=>({id:`${e.id}-${t}`,repositoryId:e.id,nwo:`${e.ownerLogin}/${e.name}`,filePath:t,type:"github_file"})))},[o,l,e,t,a]);let g=(0,x.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:cE.Box,children:(0,c.jsx)(cn,{rootItems:h,expandedPath:i,selectedItemRef:()=>{},setRootItems:f,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:o,onSelectionChange:s,processingTime:r,loading:p||!1,fetchError:!!n,getItemUrl:g,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})})}function cR({onClose:e}){return(0,c.jsx)(eW.K,{icon:_.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function cL({formData:e,onCancel:t,onSave:n,findFileWorkerPath:a,attachmentButtonRef:r,openRepoPanel:i,owner:o,resourceCounts:s}){let[l,d]=(0,x.useState)({}),[u,m]=(0,x.useState)(null),[p,h]=(0,x.useState)(null),[f,g]=(0,x.useState)(i),[y,v]=(0,x.useState)(e),[b]=(0,x.useState)(0),[j,C]=(0,x.useState)(!1),[N,w]=(0,x.useState)(null),[I,k]=(0,x.useState)(""),[T,E]=(0,x.useState)(0),A=(0,x.useRef)(!1),R=z.W.spacesForkSelection,L=async e=>{let t;if(A.current=!0,l[e])return void h(t=l[e]);try{let n=await (0,S.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!n.ok)return void m(`Failed to fetch repository details: ${n.status}`);t=await n.json(),d(n=>({...n,[e]:t})),h(t),g(!1)}catch(e){m(e instanceof Error?e.message:"An unknown error occurred")}A.current=!1},P=()=>{h(null),v([]),g(!0)},D=!1,O=void 0!==s;D=O?s.currentResourceCount+T>s.maxResourceCount:T>50;let M=async()=>{if(C(!0),D)return void C(!1);try{await n(y)}catch(t){let e="An unknown error occurred";if(t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base)if(t.base.startsWith("unsupported_file_type")&&"files"in t){let n=t.files;if(1===n.length)e=`This file can't be submitted: ${n[0]}. Only supported file types are allowed.`;else{let[t,a]=[n.slice(0,3),n.slice(3)];e="One or more files can't be submitted: "+t.map(e=>(function(e,t=30){let n=e.length<=t?e:`...${e.slice(e.length-t,e.length)}`;return`<b>${n}</b>`})(e)).join(", "),a.length>0?e+=`, and ${a.length} more.`:e+=".",e+=" Only supported file types are allowed."}}else e=t.base;e.startsWith("The size of the space exceeds the current limit")&&(e="The size of the space exceeds the current limit"),w(e)}finally{C(!1)}};async function B(){let e="";o&&(e=`owner:${o}`);let t=await (0,S.lS)(`/_filter/repositories?q=${encodeURIComponent(e)}`);return t.ok?(await t.json()).repositories.map(e=>({name:e.nameWithOwner,enabled:!0,id:e.id})):[]}(0,x.useEffect)(()=>{w(null)},[y]);let F=D&&(O?`${s.currentResourceCount+T} / ${s.maxResourceCount} possible sources selected, add fewer files.`:"Up to 50 files can be added at a time.");return i?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(cr.X1,{selectionVariant:"instant",open:!p&&f,onOpenChange:e=>{A.current||(g(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(v([]),await L(e))},cancelReturnFocusRef:r,submitReturnFocusRef:r,error:u??void 0,ownerDisplayLogin:o,includeForks:R}),p&&(0,c.jsx)(tf.l,{onClose:t,title:`Add files from ${p.ownerLogin}/${p.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e})=>(0,c.jsxs)(tf.l.Header,{children:[(0,c.jsxs)("div",{className:cE.dialogHeader,children:[(0,c.jsx)(eW.K,{icon:_.ArrowLeftIcon,"aria-label":"Back",onClick:P,variant:"invisible"})," ",(0,c.jsx)(tf.l.Title,{children:"Select folders and files"}),(0,c.jsx)(cR,{onClose:()=>e("close-button")})]}),(0,c.jsx)(tf.l.Subtitle,{className:"mt-0",children:(0,c.jsx)(ci.d,{repository:p,children:(0,c.jsx)(co.Ck,{children:(0,c.jsx)(cs.qV,{refInfo:{name:p.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:p.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,c.jsx)(cl.$,{allShortcutsEnabled:!1,children:(0,c.jsx)(cC,{commitOid:p.commitOID,findFileWorkerPath:a,onItemSelected:e=>{e&&k(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,c.jsxs)(tf.l.Footer,{children:[(0,c.jsx)("div",{className:"d-flex flex-items-center",children:F&&(0,c.jsx)(iR.A.Validation,{variant:"error",children:F})}),(0,c.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,c.jsx)(aD.Q,{onClick:t,children:"Cancel"}),(0,c.jsx)(aD.Q,{...(0,tr.G)("save-resource-button"),variant:"primary",onClick:M,count:j?void 0:T||void 0,loading:j,children:"Add"})]})]}),renderBody:()=>(0,c.jsxs)("div",{className:"d-flex flex-column",children:[u&&(0,c.jsx)("span",{children:u}),N&&(0,c.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,c.jsx)(lN.A,{full:!0,variant:"danger",children:(0,c.jsx)(rs.JR,{as:"span",html:N})})}),(0,c.jsx)(ci.d,{repository:p,children:(0,c.jsx)(co.Ck,{children:(0,c.jsx)(cs.qV,{refInfo:{name:p.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:p.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,c.jsx)("div",{className:"p-2",children:(0,c.jsx)(cA,{expandedPath:I,currentRepo:p,localFormData:y,setLocalFormData:v,onFileCountChange:E,fetchError:u,processingTime:b})})})})})]}),className:cE.Dialog})]}):(0,c.jsx)(tf.l,{onClose:t,title:p?`Add files from ${p.ownerLogin}/${p.name}`:"Add files",renderHeader:({onClose:e})=>(0,c.jsxs)(tf.l.Header,{children:[(0,c.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center px-2",children:[(0,c.jsx)(tf.l.Title,{children:p?`Add files from ${p.ownerLogin}/${p.name}`:"Add files"}),(0,c.jsx)(cR,{onClose:()=>e("close-button")})]}),(0,c.jsx)(tf.l.Subtitle,{children:p&&(0,c.jsx)(ci.d,{repository:p,children:(0,c.jsx)(co.Ck,{children:(0,c.jsx)(cs.qV,{refInfo:{name:p.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:p.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,c.jsx)(cl.$,{allShortcutsEnabled:!1,children:(0,c.jsx)(cC,{commitOid:p.commitOID,findFileWorkerPath:a,onItemSelected:e=>{e&&k(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,c.jsxs)(tf.l.Footer,{children:[(0,c.jsx)("div",{className:"d-flex flex-items-center",children:D?(0,c.jsxs)(iR.A.Validation,{variant:"error",children:["A maximum of ",50," files can be added."]}):N?(0,c.jsx)(iR.A.Validation,{variant:"error",children:N}):null}),(0,c.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,c.jsx)(aD.Q,{onClick:t,children:"Cancel"}),(0,c.jsx)(aD.Q,{...(0,tr.G)("save-resource-button"),variant:"primary",onClick:M,count:j?void 0:T||void 0,loading:j,children:"Add"})]})]}),className:cE.Dialog_1,children:(0,c.jsxs)("div",{className:"d-flex flex-column",children:[u&&(0,c.jsx)("span",{children:u}),!p&&(0,c.jsx)(W.P,{repositoryLoader:B,selectionVariant:"single",selectAllOption:!1,currentSelection:void 0,onSelect:e=>{e&&(v([]),L(e.id))},buttonText:y[0]?.nwo||"Select repository"}),p&&(0,c.jsx)(ci.d,{repository:p,children:(0,c.jsx)(co.Ck,{children:(0,c.jsx)(cs.qV,{refInfo:{name:p.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:p.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,c.jsx)(cA,{expandedPath:I,currentRepo:p,localFormData:y,setLocalFormData:v,onFileCountChange:E,fetchError:u,processingTime:b})})})})]})})}try{cA.displayName||(cA.displayName="FilePickerForm")}catch{}try{cR.displayName||(cR.displayName="CloseButton")}catch{}try{cL.displayName||(cL.displayName="MultiFilePicker")}catch{}var cP=n(7324);function cD(e){if(e<0)throw Error("File size cannot be negative");if(!Number.isInteger(e))throw Error("File size must be a whole number of bytes");let t=["B","KB","MB","GB","TB","PB"],n=e,a=0;for(;n>=1024&&a<t.length-1;)n/=1024,a++;let r=Math.round(100*n)/100;return`${r}${t[a]}`}async function cO(e,t){if(!z.W.dotcomChatFileUpload||0===t.length)return{errorMessage:null,resources:[]};let n=ix.s.getMimeTypes(e),a=[],r=ix.s.getAttachmentSizeLimit();for(let e of t)try{if(e.size>r)return{errorMessage:`Only images below ${cD(r)} are supported`,resources:[]};if(!n.includes(e.type))return{errorMessage:`File type ${e?.type} is not supported`,resources:[]};let{id:t,attachment:i}=ix.s.makeImageReference(e,""),o=await i.prefetch(),s={id:t,type:"media_content",mediaType:e.type,name:e.name||"Image",url:o.href||"",copilotChatAttachmentId:o.id||0,height:i.height||0,width:i.width||0,markedForDestroy:!1};a.push(s)}catch(t){if("string"==typeof t)return{errorMessage:`An error occurred uploading the attachment ${e?.name}`,resources:[]};if(t instanceof Error&&"FileSizeError"===t.name)return{errorMessage:`Only images below ${cD(r)} are supported`,resources:[]};return{errorMessage:"An unexpected error occurred while uploading the attachment",resources:[]}}return{errorMessage:null,resources:a}}let cM=(0,x.forwardRef)(({onResourcesAdded:e,onError:t,validateCopilotSpaceResource:n,onUploadingChange:a},r)=>{let{textFileExtensions:i,imageFileExtensions:o}=function(){let{availableModels:e}=(0,em.Pk)(),t=z.W.customCopilotsFileUploads,n=z.W.spacesImagesEnabled&&z.W.dotcomChatFileUpload;return{textFileExtensions:t?i_.E.getTextFileExtensions():"",imageFileExtensions:n?ix.s.getFileExtensions(e).join(","):""}}(),s=[i,o].filter(Boolean).join(","),{availableModels:l}=(0,em.Pk)(),d=async a=>{let[r=[],s=[]]=function(e,t){let n=e.map(e=>e.split(",").map(e=>e.trim()));return Array.from(t).reduce((e,t)=>{let a=`.${t.name.split(".").pop()?.toLowerCase()??""}`;for(let[r,i]of n.entries())if(i.includes(a)){e[r].push(t);break}return e},Array.from({length:e.length},()=>[]))}([i,o],a),[{resources:c,errorMessages:d},{resources:u,errorMessage:m}]=await Promise.all([cB(r),cO(l,s)]),p=[...d];m&&p.push(m);let h=[...c,...u];if(h.length>0)try{let t=await n({resources:h}),a=h.map(e=>({...e,sizePercentage:t[e.id]}));e(a)}catch{p.push("Failed to validate uploaded resources. Please try again.")}p.length>0&&t?.(p)},u=async e=>{if(e.target.files&&e.target.files.length>0){a?.(!0);try{await d(e.target.files)}finally{e.target.value="",a?.(!1)}}},m=(0,x.useRef)(null);return(0,x.useImperativeHandle)(r,()=>({addResources:()=>m.current?.click()})),(0,c.jsx)("input",{"data-testid":"file-upload-input",ref:m,type:"file",accept:s,multiple:!0,style:{display:"none"},onChange:u})});async function cB(e){let t=e.map(async e=>{try{if(e.size>i_.E.getAttachmentSizeLimit()){let t=cD(i_.E.getAttachmentSizeLimit());return{error:`File "${e.name}" is too large. Maximum size is ${t}.`}}if(!await i_.E.isAttachable(e))return{error:`File "${e.name}" is not a supported text file.`};e.type.startsWith("text/")||(e=new File([e],e.name,{type:"text/plain"}));let t=crypto.randomUUID(),n=new cP.N(t,e),a=(await n.prefetch()).id;return{resource:{id:t,type:"uploaded_text_file",name:e.name,copilotChatAttachmentId:a,markedForDestroy:!1}}}catch{return{error:`Failed to process file "${e.name}".`}}}),n=await Promise.allSettled(t),a=[],r=[];for(let e of n)"fulfilled"===e.status?e.value.resource?a.push(e.value.resource):r.push(e.value.error):r.push("An unexpected error occurred while processing a file.");return{resources:a,errorMessages:r}}cM.displayName="FileUploadInput";var cF=n(44263);function c$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let UrlDetails=class UrlDetails{constructor(e,t="",n="",a="",r=0,i="unknown"){c$(this,"url",void 0),c$(this,"owner",void 0),c$(this,"repo",void 0),c$(this,"number",void 0),c$(this,"type",void 0),c$(this,"id",void 0),c$(this,"errorMessage",void 0),this.id=e,this.url=t,this.owner=n,this.repo=a,this.number=r,this.type=i}};let cU=()=>{let e,t,n,a,r=(0,d.c)(7);r[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:cz},r[0]=e):e=r[0];let i=(0,C.n)(e);return r[1]!==i?({mutateAsync:n,...t}=i,r[1]=i,r[2]=t,r[3]=n):(t=r[2],n=r[3]),r[4]!==t||r[5]!==n?(a={validateUrlResources:n,...t},r[4]=t,r[5]=n,r[6]=a):a=r[6],a};function cV(e){return{id:e.id,resource_type:e.type,metadata:function(e){switch(e.type){case"github_issue":case"github_pull_request":return{owner:e.owner,repo:e.repo,number:e.number};default:throw Error("Unsupported resource")}}(e)}}async function cz(e){let{input:t,spaceOwner:n}=e,a={resources_attributes:t.map(cV),space_owner:n},r=await (0,S.lS)("/copilot/spaces/validate_url_resources",{method:"POST",body:a}),i=await r.json();if(!r.ok)throw i;return i}function cW(e){let t,n,a,r,i,o,s,l,u,m,p,h,f,g,y,v,b,j=(0,d.c)(61),{onClose:C,onSave:N,resourcesToSave:S,owner:w,resourceCounts:I}=e,[k,T]=(0,x.useState)(!1),[E,A]=(0,x.useState)(cK),[R,L]=(0,x.useState)(!1),[P,D]=(0,x.useState)(!1),{validateUrlResources:O}=cU();if(j[0]!==k||j[1]!==C||j[2]!==N||j[3]!==w||j[4]!==S||j[5]!==E||j[6]!==O){t=t=>{t?.preventDefault(),t?.stopPropagation(),k||(T(!0),e().finally(()=>{T(!1)}))};let e=async()=>{L(!1),D(!1);let e=(()=>{let e=new Set(S?.filter(cG).map(cq)??[]),t=new Set;return E.filter(n=>{let a=`${n.owner}/${n.repo}/${n.number}/${n.type}`;return!(t.has(a)||e.has(a))&&""!==n.url.trim()&&(t.add(a),!0)})})(),t=e.filter(e=>"unknown"===e.type||w&&e.owner!==w);if(t.length>0){A(E.map(e=>w&&e.owner&&e.owner!==w?{...e,errorMessage:`This doesn't belong to the ${w} organization.`}:t.some(t=>t.id===e.id)?{...e,errorMessage:"Invalid URL"}:e)),L(!0);return}if(0===e.length)return void C();try{let t=await O({input:e,spaceOwner:w});N(t),C()}catch(e){if(Array.isArray(e)){for(let t of e){let e=E.find(e=>e.id===t.id);e&&(e.errorMessage="Resource not found")}L(!0)}}};j[0]=k,j[1]=C,j[2]=N,j[3]=w,j[4]=S,j[5]=E,j[6]=O,j[7]=t}else t=j[7];let M=!!I&&I.currentResourceCount+E.length+1>I.maxResourceCount;j[8]!==E||j[9]!==M?(n=()=>{if(M)return void D(!0);A([...E,new UrlDetails(crypto.randomUUID())])},j[8]=E,j[9]=M,j[10]=n):n=j[10];let B=n,F=P&&I?`You can select a maximum of ${I.maxResourceCount} sources.`:null;j[11]!==P||j[12]!==I?(a=e=>{P&&I&&(I.currentResourceCount+e.length>I.maxResourceCount||D(!1))},j[11]=P,j[12]=I,j[13]=a):a=j[13];let $=a;j[14]!==$||j[15]!==E?(r=e=>{let t=[...E];t.splice(e,1),A(t),$(t)},j[14]=$,j[15]=E,j[16]=r):r=j[16];let U=r;if(j[17]!==$||j[18]!==E){i=(t,n)=>{let a=[...E],r=e(n,a[t]||new UrlDetails(crypto.randomUUID()));a[t]=r,A(a),$(a)};let e=cH;j[17]=$,j[18]=E,j[19]=i}else i=j[19];if(j[20]===Symbol.for("react.memo_cache_sentinel")?(o={narrow:"fullscreen"},j[20]=o):o=j[20],j[21]!==t||j[22]!==k||j[23]!==C||j[24]!==F?(s=()=>(0,c.jsxs)(tf.l.Footer,{children:[(0,c.jsx)("div",{className:"d-flex flex-items-center",children:F&&(0,c.jsx)(iR.A.Validation,{variant:"error",children:F})}),(0,c.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,c.jsx)(aD.Q,{onClick:C,children:"Cancel"}),(0,c.jsx)(aD.Q,{variant:"primary",onClick:t,loadingAnnouncement:"Saving resource",loading:k,children:"Add"})]})]}),j[21]=t,j[22]=k,j[23]=C,j[24]=F,j[25]=s):s=j[25],j[26]!==R?(l=R&&(0,c.jsx)(eI.l,{title:"Failed to save URL(s)",variant:"critical",className:"mb-2"}),j[26]=R,j[27]=l):l=j[27],j[28]!==w?(u=w&&(0,c.jsx)(rs.JR,{html:`from the <b>${w}</b> organization`}),j[28]=w,j[29]=u):u=j[29],j[30]!==u?(m=(0,c.jsxs)("p",{children:["Paste the URLs of the GitHub content"," ",u," you want to add. You can include issues and pull requests."]}),j[30]=u,j[31]=m):m=j[31],j[32]!==t?(p={"github:submit-form":()=>t()},j[32]=t,j[33]=p):p=j[33],j[34]!==R||j[35]!==i||j[36]!==U||j[37]!==E){let e;j[39]!==R||j[40]!==i||j[41]!==U||j[42]!==E.length?(e=(e,t)=>(0,c.jsxs)("div",{style:{width:"100%"},children:[(0,c.jsx)(cQ,{index:t,removeUrlTextInputRow:U,inputCount:E.length,updateUrls:i,setIsUpdating:T,urlValue:e.url}),R&&void 0!==e.errorMessage&&(0,c.jsx)(iR.A.Validation,{className:"mt-1",variant:"error",children:e.errorMessage})]},e.id),j[39]=R,j[40]=i,j[41]=U,j[42]=E.length,j[43]=e):e=j[43],h=E.map(e),j[34]=R,j[35]=i,j[36]=U,j[37]=E,j[38]=h}else h=j[38];return j[44]!==h?(f=(0,c.jsx)(ti.B,{direction:"vertical",align:"center",children:h}),j[44]=h,j[45]=f):f=j[45],j[46]!==t||j[47]!==f?(g=(0,c.jsx)("form",{onSubmit:t,children:f}),j[46]=t,j[47]=f,j[48]=g):g=j[48],j[49]!==g||j[50]!==p?(y=(0,c.jsx)(tp.tL,{commands:p,children:g}),j[49]=g,j[50]=p,j[51]=y):y=j[51],j[52]!==B?(v=(0,c.jsx)(aD.Q,{leadingVisual:_.PlusIcon,className:"mt-3",onClick:B,children:"Add another"}),j[52]=B,j[53]=v):v=j[53],j[54]!==C||j[55]!==y||j[56]!==v||j[57]!==s||j[58]!==l||j[59]!==m?(b=(0,c.jsxs)(tf.l,{position:o,width:"large",title:"Add via GitHub URL",onClose:C,renderFooter:s,children:[l,m,y,v]}),j[54]=C,j[55]=y,j[56]=v,j[57]=s,j[58]=l,j[59]=m,j[60]=b):b=j[60],b}function cH(e,t){let n=e.match(/\/([^/]+)\/([^/]+)\/issues\/(\d+)/),a=e.match(/\/([^/]+)\/([^/]+)\/pull\/(\d+)/);return t.url=e,n?(t.owner=n[1]??"",t.repo=n[2]??"",t.number=parseInt(n[3]??"0",10),t.type="github_issue"):a&&(t.owner=a[1]??"",t.repo=a[2]??"",t.number=parseInt(a[3]??"0",10),t.type="github_pull_request"),t}function cq(e){return`${e.nwo}/${e.number}/${e.type}`}function cG(e){return"github_issue"===e.type||"github_pull_request"===e.type}function cK(){return[new UrlDetails(crypto.randomUUID())]}function cQ(e){let t,n,a,r,i,o,s,l=(0,d.c)(18),{index:u,removeUrlTextInputRow:m,inputCount:p,updateUrls:h,setIsUpdating:f,urlValue:g}=e,[y,v]=(0,x.useState)(g),[b,j]=(0,x.useState)(!1);l[0]!==g?(t=()=>{v(g)},n=[g],l[0]=g,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,x.useEffect)(t,n);let C=e=>{let t=e.target.value;v(t),b||(j(!0),f(!0)),N(t)};l[3]!==u||l[4]!==f||l[5]!==h?(a=e=>{h(u,e),j(!1),f(!1)},l[3]=u,l[4]=f,l[5]=h,l[6]=a):a=l[6];let N=(0,cF.d)(a,400);return l[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,c.jsx)(iR.A.Label,{visuallyHidden:!0,children:"URL"}),l[7]=r):r=l[7],l[8]!==C||l[9]!==y?(i=(0,c.jsx)(iL.A,{placeholder:"https://github.com/mona/playground/issues/123",value:y,onChange:C,className:"width-full"}),l[8]=C,l[9]=y,l[10]=i):i=l[10],l[11]!==u||l[12]!==p||l[13]!==m?(o=p>1&&(0,c.jsx)(eW.K,{icon:_.TrashIcon,variant:"invisible","aria-label":"Remove url",className:"ml-2",onClick:()=>m(u)}),l[11]=u,l[12]=p,l[13]=m,l[14]=o):o=l[14],l[15]!==i||l[16]!==o?(s=(0,c.jsxs)(iR.A,{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[r,i,o]}),l[15]=i,l[16]=o,l[17]=s):s=l[17],s}try{cW.displayName||(cW.displayName="GitHubUrlDialog")}catch{}try{(r=AddUrlTextInputRow).displayName||(r.displayName="AddUrlTextInputRow")}catch{}try{cQ.displayName||(cQ.displayName="UrlTextInputRow")}catch{}let cJ=()=>{let e,t,n,a,r=(0,d.c)(7);r[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:cZ},r[0]=e):e=r[0];let i=(0,C.n)(e);return r[1]!==i?({mutateAsync:t,...n}=i,r[1]=i,r[2]=t,r[3]=n):(t=r[2],n=r[3]),r[4]!==t||r[5]!==n?(a={getCopilotSpaceResourceSizes:t,...n},r[4]=t,r[5]=n,r[6]=a):a=r[6],a};function cY(e){return{id:e.id,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,metadata:lw(e)}}async function cZ(e){let t={resources:e.resources?.map(cY)},n=await (0,S.lS)("/copilot/spaces/resource_sizes",{method:"POST",body:t}),a=await n.json();if(!n.ok)throw a.errorMessages;return a}let cX={dialogBody:"TextFileDialog-module__dialogBody--vEXW_",grow:"TextFileDialog-module__grow--WN1h9",form:"TextFileDialog-module__form--i5zZL",footerContainer:"TextFileDialog-module__footerContainer--Mz0uf"};function c0({sizePercentage:e,onClose:t,onSave:n,resource:a}){let{copilotSpacesConfig:{maxContentSize:r}}=(0,N.X)(),[i,o]=(0,x.useState)(a?.name||""),[s,l]=(0,x.useState)(a?.text||""),[d,u]=(0,x.useState)(!1),[m,p]=(0,x.useState)(""),[h,f]=(0,x.useState)(!1),g=a?.text??"",[y,v]=(0,x.useState)({}),{getCopilotSpaceResourceSizes:_}=cJ(),b=async e=>{e?.preventDefault();let r=!i.trim(),o=!s.trim();if(r||o)return void v(e=>({...e,"resources.name":r?"Name is required":"","resources.text":o?"Content is required":""}));u(!0),p("");try{let e={id:a?.id||Date.now().toString(),databaseId:a?.databaseId,type:"free_text",name:i,text:s,markedForDestroy:!1},r=await _({resources:[e]});n({...e,sizePercentage:r[e.id]}),t()}catch{p("An unexpected error occurred while validating the text file")}finally{u(!1)}};return(0,c.jsx)(tf.l,{position:{narrow:"fullscreen"},title:"Add text content",onClose:t,width:"xlarge",height:"large",renderBody:()=>(0,c.jsxs)("div",{className:cX.dialogBody,children:[m&&(0,c.jsx)(eI.l,{variant:"critical",className:"mb-2",title:m}),(0,c.jsx)(tp.tL,{className:cX.grow,commands:{"github:submit-form":()=>void b()},children:(0,c.jsxs)("form",{onSubmit:b,className:cX.form,children:[(0,c.jsxs)(iR.A,{required:!0,children:[(0,c.jsx)(iR.A.Label,{children:"Name"}),(0,c.jsx)(iL.A,{block:!0,placeholder:"Give the file a title",value:i,onChange:e=>{o(e.target.value),v(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:y["resources.name"]?"error":void 0,...(0,tr.G)("text-file-name-input")}),y["resources.name"]&&(0,c.jsx)(iR.A.Validation,{variant:"error",children:y["resources.name"]})]}),(0,c.jsxs)(iR.A,{required:!0,className:cX.grow,children:[(0,c.jsx)(iR.A.Label,{children:"Content"}),(0,c.jsx)(l$.Ay,{block:!0,name:"content",value:s,placeholder:"Enter content here",resize:"none",className:cX.grow,onChange:e=>{l(e.target.value),v(e=>({...e,"resources.text":""}))},...(0,tr.G)("text-file-content-input")}),y["resources.text"]?(0,c.jsx)(iR.A.Validation,{variant:"error",children:y["resources.text"]}):void 0!==e&&(0,c.jsx)(c1,{text:s,percentage:e,resourceContent:g,setOverSpaceLimit:f,maxContentSize:r})]})]})})]}),renderFooter:()=>(0,c.jsxs)("div",{className:cX.footerContainer,children:[(0,c.jsx)(aD.Q,{onClick:t,children:"Cancel"}),(0,c.jsx)(aD.Q,{variant:"primary",onClickCapture:h?void 0:b,loadingAnnouncement:"Validating resource",inactive:h,loading:d,...(0,tr.G)("save-text-file-button"),children:"Add"})]})})}function c1(e){let t,n,a,r=(0,d.c)(8),{text:i,percentage:o,resourceContent:s,setOverSpaceLimit:l,maxContentSize:u}=e,m=o/100*u+(i.length>s.length?Math.abs(i.length-s.length):-Math.abs(i.length-s.length)),p=Math.floor(m/u*100),h=m>u;if(r[0]!==l||r[1]!==h?(t=()=>{l(h)},n=[h,l],r[0]=l,r[1]=h,r[2]=t,r[3]=n):(t=r[2],n=r[3]),(0,x.useEffect)(t,n),h){let e,t=`Total percent used: ${p}%`;return r[4]!==t?(e=(0,c.jsx)(iR.A.Validation,{variant:"error",children:t}),r[4]=t,r[5]=e):e=r[5],e}let f=`Total percent used: ${p}%`;return r[6]!==f?(a=(0,c.jsx)(iR.A.Caption,{children:f}),r[6]=f,r[7]=a):a=r[7],a}try{c0.displayName||(c0.displayName="TextFileDialog")}catch{}try{c1.displayName||(c1.displayName="CharacterCount")}catch{}let c2=e=>{let t,n,a,r,i,o,s,l,u,m,p,h,f,g,y,v,b=(0,d.c)(42),{children:j,findFileWorkerPath:C,onResourcesAdded:N,onError:S,owner:w,sizePercentage:I,resourcesToSave:k,resourceCounts:T,onUploadingChange:E}=e,[A,R]=(0,x.useState)(!1),[L,P]=(0,x.useState)(!1),[D,O]=(0,x.useState)(!1),M=(0,x.useRef)(null),{getCopilotSpaceResourceSizes:B}=cJ();b[0]!==N||b[1]!==B?(t=async e=>{if(0===e.length)return void P(!1);let t=await B({resources:e});N(e.map(e=>{let n=t[e.id];return{...e,fileExists:!0,markedForDestroy:!1,sizePercentage:n}})),P(!1)},b[0]=N,b[1]=B,b[2]=t):t=b[2];let F=t,$=(0,x.useRef)(null),U=z.W.spacesIssuesPrsEnabled,V=z.W.customCopilotsFileUploads,W=z.W.spacesImagesEnabled&&z.W.dotcomChatFileUpload;return b[3]!==S||b[4]!==N||b[5]!==E||b[6]!==B?(n=(V||W)&&(0,c.jsx)(cM,{ref:M,onResourcesAdded:N,onError:S,validateCopilotSpaceResource:B,onUploadingChange:E}),b[3]=S,b[4]=N,b[5]=E,b[6]=B,b[7]=n):n=b[7],b[8]!==j?(a=(0,c.jsx)(ez.W.Anchor,{children:j}),b[8]=j,b[9]=a):a=b[9],b[10]===Symbol.for("react.memo_cache_sentinel")?(r=(0,c.jsx)(eH.l.GroupHeading,{children:"Repository"}),b[10]=r):r=b[10],b[11]===Symbol.for("react.memo_cache_sentinel")?(i=()=>P(!0),b[11]=i):i=b[11],b[12]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsxs)(eH.l.Group,{children:[r,(0,c.jsxs)(eH.l.Item,{onSelect:i,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.FileCodeIcon,{...(0,tr.G)("add-github-files-menu-item-icon")})}),"Attach files and folders"]}),U&&(0,c.jsxs)(eH.l.Item,{onSelect:()=>O(!0),children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.LinkIcon,{})}),"Link pull requests and issues"]})]}),s=(0,c.jsx)(eH.l.Divider,{}),b[12]=o,b[13]=s):(o=b[12],s=b[13]),b[14]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsx)(eH.l.GroupHeading,{children:"Local"}),u=(V||W)&&(0,c.jsxs)(eH.l.Item,{onSelect:()=>M.current?.addResources(),children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.UploadIcon,{})}),"Upload a file"]}),b[14]=l,b[15]=u):(l=b[14],u=b[15]),b[16]===Symbol.for("react.memo_cache_sentinel")?(m=()=>R(!0),b[16]=m):m=b[16],b[17]===Symbol.for("react.memo_cache_sentinel")?(p=(0,c.jsx)(ez.W.Overlay,{align:"end",width:U?"small":void 0,children:(0,c.jsxs)(eH.l,{children:[o,s,(0,c.jsxs)(eH.l.Group,{children:[l,u,(0,c.jsxs)(eH.l.Item,{onSelect:m,children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.PasteIcon,{...(0,tr.G)("add-text-file-menu-item-icon")})}),"Add text content"]})]})]})}),b[17]=p):p=b[17],b[18]!==a?(h=(0,c.jsxs)(ez.W,{anchorRef:$,children:[a,p]}),b[18]=a,b[19]=h):h=b[19],b[20]!==N||b[21]!==A||b[22]!==I?(f=A&&(0,c.jsx)(c0,{sizePercentage:I,onClose:()=>R(!1),onSave:e=>N([e])}),b[20]=N,b[21]=A,b[22]=I,b[23]=f):f=b[23],b[24]!==C||b[25]!==w||b[26]!==T||b[27]!==F||b[28]!==L?(g=L&&(0,c.jsx)(cL,{formData:[],onCancel:()=>P(!1),onSave:F,findFileWorkerPath:C,attachmentButtonRef:$,owner:w,openRepoPanel:!0,resourceCounts:T}),b[24]=C,b[25]=w,b[26]=T,b[27]=F,b[28]=L,b[29]=g):g=b[29],b[30]!==N||b[31]!==w||b[32]!==T||b[33]!==k||b[34]!==D?(y=D&&(0,c.jsx)(cW,{onClose:()=>O(!1),onSave:e=>N(e),resourcesToSave:k,resourceCounts:T,owner:w}),b[30]=N,b[31]=w,b[32]=T,b[33]=k,b[34]=D,b[35]=y):y=b[35],b[36]!==h||b[37]!==f||b[38]!==g||b[39]!==y||b[40]!==n?(v=(0,c.jsxs)(c.Fragment,{children:[n,h,f,g,y]}),b[36]=h,b[37]=f,b[38]=g,b[39]=y,b[40]=n,b[41]=v):v=b[41],v};try{c2.displayName||(c2.displayName="AddAttachmentMenu")}catch{}var c3=n(45286);let c4={capitalize:"ColorPicker-module__capitalize--Frq3z"},c5=li.map(e=>({leadingVisual:()=>(0,c.jsx)("span",{className:ll[e],style:{display:"inline-block",width:12,height:12,backgroundColor:"var(--avatar-foregroundColor)",borderRadius:"50%"}}),key:e,text:e,color:e}));function c6(e){let t,n,a,r,i,o,s,l,u,m,p=(0,d.c)(21),{value:h,onChange:f}=e,[g,y]=(0,x.useState)(!1),[v,b]=(0,x.useState)("");p[0]!==v||p[1]!==h?(n=c5.filter(e=>e.text===h||e.text?.toLowerCase().startsWith(v.toLowerCase())),p[0]=v,p[1]=h,p[2]=n):n=p[2],t=n,p[3]!==h?(r=c5.find(e=>e.text===h),p[3]=h,p[4]=r):r=p[4],a=r;let j=(0,x.useId)();return p[5]!==j?(i=(0,c.jsx)(iR.A.Label,{visuallyHidden:!0,htmlFor:j,children:"Color"}),p[5]=j,p[6]=i):i=p[6],p[7]!==j?(o=e=>{let{children:t,...n}=e;return(0,c.jsxs)(aD.Q,{...n,id:j,size:"small",trailingAction:_.TriangleDownIcon,"aria-haspopup":"dialog",className:c4.capitalize,children:[(0,c.jsx)("span",{className:"fgColor-muted mr-1",children:"Color:"}),t]})},p[7]=j,p[8]=o):o=p[8],p[9]===Symbol.for("react.memo_cache_sentinel")?(s={width:"small",maxHeight:"medium"},p[9]=s):s=p[9],p[10]!==f?(l=e=>{e&&f(e.text)},p[10]=f,p[11]=l):l=p[11],p[12]!==t||p[13]!==g||p[14]!==a||p[15]!==o||p[16]!==l?(u=(0,c.jsx)(c3.X,{renderAnchor:o,className:c4.capitalize,overlayProps:s,title:"Select a color",placeholder:"Select a color",open:g,onOpenChange:y,items:t,selected:a,placeholderText:"Filter colors",onSelectedChange:l,onFilterChange:b}),p[12]=t,p[13]=g,p[14]=a,p[15]=o,p[16]=l,p[17]=u):u=p[17],p[18]!==i||p[19]!==u?(m=(0,c.jsxs)(iR.A,{children:[i,u]}),p[18]=i,p[19]=u,p[20]=m):m=p[20],m}try{c6.displayName||(c6.displayName="ColorPicker")}catch{}var c7=n(6020);let c8={warningIcon:"ReferencesTable-module__warningIcon--aAwMb",referenceTitle:"ReferencesTable-module__referenceTitle--RAQOR",referenceSubtitle:"ReferencesTable-module__referenceSubtitle--tHoXM",referenceTitleLink:"ReferencesTable-module__referenceTitleLink--p7dJl"};function c9(e){let t,n,a,r,i,o,s=(0,d.c)(11),{resources:l,onDeleteResource:u,onUpdateResource:m,sizePercentage:p}=e;if(s[0]!==l)n=Object.values(l.reduce((e,t)=>{let n=dr(t);return{...e,[n]:t}},{})),s[0]=l,s[1]=n;else n=s[1];t=n,s[2]===Symbol.for("react.memo_cache_sentinel")?(a={id:"id",header:"Name",rowHeader:!0,renderCell:dn},r={id:"size",header:"Size",align:"end",maxWidth:"auto",width:"growCollapse",renderCell:dt},s[2]=a,s[3]=r):(a=s[2],r=s[3]),s[4]!==u||s[5]!==m||s[6]!==p?(i=[a,r,{id:"actions",header:de,maxWidth:"auto",align:"end",renderCell:e=>{let t="github_file"===e.type&&!e.fileExists;return(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)(eW.K,{className:c8.warningIcon,icon:_.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,c.jsx)(da,{row:e,onEdit:m,onDelete:u,sizePercentage:p})]})}}],s[4]=u,s[5]=m,s[6]=p,s[7]=i):i=s[7];let h=i;return s[8]!==h||s[9]!==t?(o=(0,c.jsx)(i1.X.Container,{children:(0,c.jsx)(i2.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:t,columns:h})}),s[8]=h,s[9]=t,s[10]=o):o=s[10],o}function de(){return(0,c.jsx)(c7.s,{children:"Actions"})}function dt(e){return(0,c.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`})}function dn(e){switch(e.type){case"github_file":{let{filePath:t,fileName:n,fileUrl:a}=(0,eL.q5)(e);return(0,c.jsxs)(ti.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)(s4,{attachment:e,className:"fgColor-muted"}),(0,c.jsxs)(ti.B,{gap:"none",children:[(0,c.jsx)("div",{children:e.fileExists?(0,c.jsx)(lS.A,{title:n,className:c8.referenceTitle,children:(0,c.jsx)(H.A,{rel:"noopener",target:"_blank",href:a,className:c8.referenceTitleLink,children:n})}):(0,c.jsx)(lS.A,{title:n,className:c8.referenceTitle,children:n})}),(0,c.jsx)("div",{children:(0,c.jsx)(lS.A,{title:t,className:(0,eD.$)(c8.referenceSubtitle,"fgColor-muted"),children:t})})]})]})}case"free_text":case"uploaded_text_file":return(0,c.jsxs)(ti.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)(s4,{attachment:e,className:"fgColor-muted"}),(0,c.jsx)("div",{children:(0,c.jsx)(lS.A,{title:e.name,maxWidth:300,className:c8.referenceTitle,children:e.name})})]});case"github_pull_request":case"github_issue":return(0,c.jsxs)(ti.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)("span",{children:(0,c.jsx)(s4,{attachment:e,className:"fgColor-success"})}),(0,c.jsxs)(ti.B,{gap:"none",children:[(0,c.jsx)("div",{children:(0,c.jsx)(lS.A,{title:e.title||"",className:c8.referenceTitle,children:(0,c.jsxs)(H.A,{rel:"noopener",target:"_blank",href:e.url,className:c8.referenceTitleLink,children:[e.title," ",(0,c.jsx)("span",{className:"fgColor-muted text-light",children:`#${e.number}`})]})})}),(0,c.jsx)("div",{children:(0,c.jsx)(lS.A,{title:e.nwo||"",className:(0,eD.$)(c8.referenceSubtitle,"fgColor-muted"),children:e.nwo})})]})]});case"media_content":return(0,c.jsxs)(ti.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)("span",{className:"fgColor-muted",children:(0,c.jsx)(s4,{attachment:e,className:"fgColor-muted"})}),(0,c.jsx)("div",{children:(0,c.jsx)(lS.A,{title:e.name,maxWidth:300,className:(0,eD.$)(c8.referenceTitle),children:e.name})})]});default:return null}}let da=e=>{let t,n,a,r,i,o,s,l,u,m=(0,d.c)(23),{row:p,onDelete:h,onEdit:f,sizePercentage:g}=e,[y,v]=(0,x.useState)(null),b="";switch(p.type){case"github_pull_request":case"github_issue":b=p.title;break;case"github_file":b=p.filePath;break;case"free_text":case"uploaded_text_file":b=p.name}let j=`Attachment actions: ${b}`;return m[0]!==j?(t=(0,c.jsx)(ez.W.Anchor,{children:(0,c.jsx)(eW.K,{"aria-label":j,title:"Attachment actions",icon:_.KebabHorizontalIcon,variant:"invisible"})}),m[0]=j,m[1]=t):t=m[1],m[2]!==p?(n="free_text"===p.type&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(eH.l.Item,{onSelect:()=>v(p),children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.PencilIcon,{})}),"Edit"]})}),m[2]=p,m[3]=n):n=m[3],m[4]!==h||m[5]!==p?(a=()=>h(p),m[4]=h,m[5]=p,m[6]=a):a=m[6],m[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.TrashIcon,{})}),m[7]=r):r=m[7],m[8]!==a?(i=(0,c.jsxs)(eH.l.Item,{variant:"danger",onSelect:a,children:[r,"Delete"]}),m[8]=a,m[9]=i):i=m[9],m[10]!==n||m[11]!==i?(o=(0,c.jsx)(ez.W.Overlay,{align:"end",children:(0,c.jsxs)(eH.l,{children:[n,i]})}),m[10]=n,m[11]=i,m[12]=o):o=m[12],m[13]!==t||m[14]!==o?(s=(0,c.jsxs)(ez.W,{children:[t,o]}),m[13]=t,m[14]=o,m[15]=s):s=m[15],m[16]!==y||m[17]!==f||m[18]!==g?(l=y&&(0,c.jsx)(c0,{sizePercentage:g,resource:y,onSave:f,onClose:()=>v(null)}),m[16]=y,m[17]=f,m[18]=g,m[19]=l):l=m[19],m[20]!==s||m[21]!==l?(u=(0,c.jsxs)(c.Fragment,{children:[s,l]}),m[20]=s,m[21]=l,m[22]=u):u=m[22],u},dr=e=>{switch(e.type){case"github_file":return`${e.repositoryId}@${e.filePath}`;case"github_issue":case"github_pull_request":return e.url;default:return e.id}};try{c9.displayName||(c9.displayName="ReferencesTable")}catch{}try{da.displayName||(da.displayName="RowActions")}catch{}let di={page:"SpacesForm-module__page--xJLgE",header:"SpacesForm-module__header--sFJmP",headerTitleContainer:"SpacesForm-module__headerTitleContainer--QmU9Z",headerTitleDivider:"SpacesForm-module__headerTitleDivider--I6mxX",headerTitle:"SpacesForm-module__headerTitle--DT30e",referencesSizeProgressBar:"SpacesForm-module__referencesSizeProgressBar--nkA5V",referencesSizeText:"SpacesForm-module__referencesSizeText--lCv_W",contextHeader:"SpacesForm-module__contextHeader--fy6kM",attachmentsHeading:"SpacesForm-module__attachmentsHeading--jKNBX",form:"SpacesForm-module__form--WHZ7T",optionalLabel:"SpacesForm-module__optionalLabel--N9XDo",iconPreviewContainer:"SpacesForm-module__iconPreviewContainer--_iifR",iconPreviewTitle:"SpacesForm-module__iconPreviewTitle--X8BEQ",iconPreviewDescription:"SpacesForm-module__iconPreviewDescription--Oo7eF",iconAvatarContainer:"SpacesForm-module__iconAvatarContainer--lyzCt",textAreaWrapper:"SpacesForm-module__textAreaWrapper--zDXUW"};function ds({onSelect:e}){let[t,n]=(0,x.useState)([]),[a,r]=(0,x.useState)(!1),[i,o]=(0,x.useState)(void 0),s=(0,x.useCallback)(t=>{o(t),e(t)},[e]),l=(0,x.useCallback)(()=>{n([]),r(!0)},[]);return(0,x.useEffect)(()=>{(async()=>{try{let e=await (0,S.lS)("/github-copilot/chat/custom_copilots_owners"),t=await e.json(),a=t?.owners;if(!e.ok||!a)return void l();n(a),a[0]&&s(a[0])}catch{l()}})()},[l,s]),(0,c.jsxs)(iR.A,{children:[(0,c.jsx)(iR.A.Label,{children:"Owner"}),(0,c.jsxs)(ez.W,{children:[(()=>{let e=i?.name||"Choose an owner",t=i?(0,c.jsx)(np.r,{src:i.avatarUrl},i.avatarUrl):void 0;return(0,c.jsx)(ez.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-label":e,leadingVisual:t,children:e})})(),(0,c.jsx)(ez.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",sx:{overflow:"auto"},children:(0,c.jsx)(eH.l,{children:(0,c.jsx)(eH.l.Group,{sx:{maxHeight:350,overflow:"auto"},children:(0,c.jsxs)(eH.l,{selectionVariant:"single",children:[t&&t.map(e=>{let{name:t,avatarUrl:n,displayName:a}=e;return(0,c.jsxs)(eH.l.Item,{selected:t===i?.name,onSelect:()=>s(e),children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(np.r,{src:n})}),t,(0,c.jsx)(eH.l.Description,{children:a})]},t)}),!t.length&&!a&&(0,c.jsx)(eH.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),a&&(0,c.jsx)(eH.l.Item,{disabled:!0,sx:{color:"danger.fg"},children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),(0,c.jsx)(iR.A.Caption,{children:"Where we will store your space. Once created the space is not transferable."})]})}try{ds.displayName||(ds.displayName="SpacesOwnerDropdown")}catch{}let dl="auburn";function dc({copilotSpace:e,onCancel:t}){let n,a,[r,i]=(0,x.useState)(!1),o=(0,iA.S)(),s=async()=>{$?await o({title:"Unsaved changes",content:"You have unsaved changes. Are you sure you want to leave?",cancelButtonContent:"Keep editing",confirmButtonContent:"Discard changes",confirmButtonType:"danger"})&&t():t()};(0,ou.N)(()=>{let e=document.querySelector("header.AppHeader");e&&(e.style.display="none");let t=document.querySelector(".with-global-sidebar .application-main");return t&&(t.style.marginLeft="0"),()=>{e&&(e.style.display=""),t&&(t.style.marginLeft="")}},[]);let l=(0,rW.Z)(),{upsertCopilotSpace:u,isPending:m}=lI(e),[p,h]=(0,x.useState)(e?.iconColor??dl),{copilotSpacesConfig:{maxGeneralInstructionsLength:f,maxDescriptionLength:g}}=(0,N.X)(),[y,v]=(0,x.useState)(e?.name??""),[b,j]=(0,x.useState)(e?.description??""),[C,S]=(0,x.useState)(e?.generalInstructions??""),[w,I]=(0,x.useState)(e?.resources??[]),[k,T]=(0,x.useState)(null),E=k?.type==="Organization"||e?.ownerIsOrg?k?.name||e?.owner:void 0,[A,R]=(0,x.useState)({}),L=w.filter(e=>!e.markedForDestroy),P=(0,x.useRef)(null),D=!!e,O=(0,x.useMemo)(()=>L.reduce((e,t)=>e+(t.sizePercentage||0),0),[L]),M=(0,x.useId)(),B=O>100,F=(0,x.useMemo)(()=>({name:e?.name.trim()||"",description:(e?.description||"").trim(),generalInstructions:(e?.generalInstructions||"").trim(),owner:e?.owner||"",iconColor:e?.iconColor||dl,resources:e?.resources||[]}),[e]),$=(0,x.useMemo)(()=>y.trim()!==F.name||b.trim()!==F.description||C.trim()!==F.generalInstructions||p!==F.iconColor||w.some(e=>{if(e.markedForDestroy||!e.databaseId)return!0;if("free_text"===e.type){let t=F.resources.find(t=>t.databaseId===e.databaseId);return!t||e.text.trim()!==t.text.trim()||e.name.trim()!==t.name.trim()}}),[F,y,b,C,p,w]),U=(0,d.c)(3);U[0]!==$?(n=()=>{let e=e=>{$&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},a=[$],U[0]=$,U[1]=n,U[2]=a):(n=U[1],a=U[2]),(0,x.useEffect)(n,a);let V=async()=>{if(!m)try{let e=await u({name:y,description:b,generalInstructions:C,ownerId:k?.id,ownerType:k?.type,resources:w,iconColor:p,iconType:"SpacesIcon"});R({});let t=(0,eL.Cb)(e);return l(t)}catch(e){R(e??{})}};function z(e){R(t=>{let n={...t};for(let e of Object.keys(n))e.startsWith("resources.upload.")&&delete n[e];for(let[t,a]of e.entries())n[`resources.upload.${t+1}`]=a;return n})}let W=Object.entries(A).filter(([e])=>e.startsWith("resources.upload.")).map(([,e])=>e);function H(e){let t={...A};for(let n of e)t[n]&&delete t[n];R(t)}let q=(0,x.useCallback)(e=>T(e),[]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:di.header,children:[(0,c.jsxs)("div",{className:di.headerTitleContainer,children:[(0,c.jsx)(eW.K,{icon:_.XIcon,"aria-label":"Close",variant:"invisible",onClick:s,disabled:r}),(0,c.jsx)("div",{className:di.headerTitleDivider,"aria-hidden":"true"}),(0,c.jsx)("h1",{className:di.headerTitle,id:"page-title",children:D?"Edit space":"New space"})]}),(0,c.jsxs)(ti.B,{align:"center",direction:"horizontal",gap:"condensed",children:[$&&e&&(0,c.jsxs)("div",{className:"fgColor-attention text-small mr-2",children:[(0,c.jsx)(_.DotFillIcon,{size:14}),(0,c.jsx)("span",{children:" Unsaved changes"})]}),(0,c.jsx)(aD.Q,{onClick:s,disabled:r,children:"Cancel"}),(0,c.jsx)(aD.Q,{type:"submit",variant:"primary",form:M,loading:m,disabled:r,children:"Save"})]})]}),(0,c.jsx)("div",{className:di.page,children:(0,c.jsxs)("form",{id:M,className:di.form,onSubmit:e=>{e?.preventDefault(),V()},children:[A.base&&(0,c.jsx)(eI.l,{title:"Failed to save this space",description:A.base,variant:"critical",className:"mb-2"}),(0,c.jsxs)(iR.A,{children:[(0,c.jsx)(iR.A.Label,{children:"Name"}),(0,c.jsx)(iL.A,{autoFocus:!0,block:!0,name:"name",value:y,onChange:e=>{v(e.target.value),H(["name","slug"])}}),A.name?(0,c.jsx)(iR.A.Validation,{variant:"error",children:(0,c.jsxs)("span",{children:["Name ",A.name]})}):A.slug?(0,c.jsx)(iR.A.Validation,{variant:"error",children:(0,c.jsx)("span",{children:eL.j0})}):null,(0,c.jsx)(iR.A.Caption,{children:"Memorable name that helps you find your space."})]}),(0,c.jsxs)("div",{className:di.iconPreviewContainer,children:[(0,c.jsx)("div",{className:di.iconAvatarContainer,children:(0,c.jsx)(lc,{size:24,color:p})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:di.iconPreviewTitle,children:"Icon"}),(0,c.jsx)("div",{className:di.iconPreviewDescription,children:"Pick a color to make your space more recognizable."}),(0,c.jsx)(c6,{value:p,onChange:h})]})]}),!D&&(0,c.jsx)(ds,{onSelect:q}),(0,c.jsxs)(iR.A,{children:[(0,c.jsxs)(iR.A.Label,{required:!1,requiredIndicator:!0,children:["Description ",(0,c.jsx)("span",{className:di.optionalLabel,children:"(optional)"})]}),(0,c.jsx)(l$.Ay,{block:!0,name:"description",value:b,rows:3,resize:"vertical",className:di.textAreaWrapper,onChange:e=>{j(e.target.value),H(["description"])}}),A.description?(0,c.jsx)(iR.A.Validation,{variant:"error",children:(0,c.jsxs)("span",{children:["Description ",A.description]})}):(0,c.jsx)(dd,{text:b,promptCharLimit:g}),(0,c.jsx)(iR.A.Caption,{children:"Displays beneath the title on your spaces overview page without impacting responses."})]}),(0,c.jsxs)(iR.A,{id:"instructions",children:[(0,c.jsxs)(iR.A.Label,{required:!1,requiredIndicator:!0,children:["Instructions ",(0,c.jsx)("span",{className:di.optionalLabel,children:"(optional)"})]}),(0,c.jsx)(l$.Ay,{block:!0,name:"instructions",value:C,resize:"vertical",className:di.textAreaWrapper,onChange:e=>{S(e.target.value),H(["general_instructions"])}}),A.general_instructions?(0,c.jsx)(iR.A.Validation,{variant:"error",children:(0,c.jsxs)("span",{children:["Instructions ",A.general_instructions]})}):(0,c.jsx)(dd,{text:C,promptCharLimit:f}),(0,c.jsx)(iR.A.Caption,{children:"Changes how Copilot responds on specific questions or tasks."})]}),(0,c.jsxs)("div",{id:"attachments",children:[(0,c.jsxs)("div",{className:di.contextHeader,children:[(0,c.jsxs)("div",{className:di.attachmentsHeading,children:["Attachments ",(0,c.jsx)("span",{className:di.optionalLabel,children:"(optional)"})]}),(0,c.jsxs)(ti.B,{direction:"horizontal",align:"center",gap:"none",children:[O>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(lq.z,{inline:!0,barSize:"small",progress:O,className:di.referencesSizeProgressBar,"aria-hidden":"true"}),(0,c.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-O))}% remaining attachment capacity`}),(0,c.jsxs)("span",{className:di.referencesSizeText,children:[O<1?"<1":Math.round(O),"%"]})]}),(0,c.jsx)(c2,{sizePercentage:O,findFileWorkerPath:"",owner:E,onResourcesAdded:e=>{I(t=>{let n=new Map(t.map(e=>[e.id,e]));for(let t of e)n.set(t.id,t);return Array.from(n.values())})},resourcesToSave:w,onError:z,onUploadingChange:e=>{e&&z([]),i(e)},children:(0,c.jsx)(aD.Q,{size:"small",leadingVisual:_.PlusIcon,ref:P,"aria-label":"Add attachment",title:"Add attachment",disabled:r,children:"Add"})})]})]}),B&&(0,c.jsx)(il,{}),A["resources.repository"]&&(0,c.jsx)(ic,{}),W.length>0&&(0,c.jsx)(id,{errorMessages:W,onDismiss:()=>z([])}),0===L.length?(0,c.jsx)("div",{children:(0,c.jsxs)(e7.E,{border:!0,spacious:!0,children:[(0,c.jsx)(e7.E.Visual,{children:(0,c.jsx)(_.PaperclipIcon,{size:24})}),(0,c.jsx)(e7.E.Description,{children:"Add text, code files, or GitHub data to set a permanent context"})]})}):(0,c.jsx)(c9,{sizePercentage:O,resources:L,onDeleteResource:function(e){e.databaseId?I(t=>t.map(t=>e.databaseId===t.databaseId?{...t,markedForDestroy:!0}:t)):I(t=>t.filter(t=>t.id!==e.id))},onUpdateResource:function(e){I(w.map(t=>t.id===e.id?e:t))}})]})]})})]})}function dd(e){let t,n,a,r,i=(0,d.c)(10),{text:o,promptCharLimit:s}=e,l=o.length>s;i[0]!==o.length?(t=o.length.toLocaleString(),i[0]=o.length,i[1]=t):t=i[1],i[2]!==s?(n=s.toLocaleString(),i[2]=s,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(a=(0,c.jsxs)(c.Fragment,{children:[t," / ",n," characters"]}),i[4]=t,i[5]=n,i[6]=a):a=i[6];let u=a;return i[7]!==u||i[8]!==l?(r=(0,c.jsx)(c.Fragment,{children:l?(0,c.jsx)(iR.A.Validation,{variant:"error",children:u}):(0,c.jsx)(iR.A.Caption,{children:u})}),i[7]=u,i[8]=l,i[9]=r):r=i[9],r}try{dc.displayName||(dc.displayName="SpacesForm")}catch{}try{dd.displayName||(dd.displayName="CharacterCount")}catch{}function du(){let e,t,n,a,r=(0,d.c)(14),i=(0,rW.Z)(),o=(0,eL.iI)(),{isPending:s,data:l,error:u}=(0,eP.Ao)(o);r[0]!==l||r[1]!==i?(e=function(){i((0,eL.Cb)(l))},r[0]=l,r[1]=i,r[2]=e):e=r[2];let m=e;if(r[3]!==l||r[4]!==i?(t=()=>{l&&!l.editable&&i((0,eL.Cb)(l))},n=[l,i],r[3]=l,r[4]=i,r[5]=t,r[6]=n):(t=r[5],n=r[6]),(0,x.useEffect)(t,n),u instanceof eP.i9){let e;return r[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(sX,{}),r[7]=e):e=r[7],e}if(u instanceof eP.OW){let e;return r[8]!==u.protectedOrganizations?(e=(0,c.jsx)(sX,{protectedOrganizations:u.protectedOrganizations}),r[8]=u.protectedOrganizations,r[9]=e):e=r[9],e}if(s){let e;return r[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(oK,{}),r[10]=e):e=r[10],e}return r[11]!==l||r[12]!==m?(a=l?.editable?(0,c.jsx)(dc,{copilotSpace:l,onCancel:m}):(0,c.jsx)(c.Fragment,{}),r[11]=l,r[12]=m,r[13]=a):a=r[13],a}try{du.displayName||(du.displayName="SpacesEditPage")}catch{}var dm=n(5420),dp=n(35066);let dh={metadata:"SpacesCard-module__metadata--sQAQe",metadataItem:"SpacesCard-module__metadataItem--wvRpg"};function df(e){let t,n,a,r,i,o,s,l,u,m,p,h,f=(0,d.c)(35),{copilotSpace:g,onDelete:y,onClick:x}=e,v=g.ownerIsOrg?_.OrganizationIcon:_.PersonIcon,b="org_public"===g.visibility?_.PeopleIcon:_.LockIcon;f[0]!==g.visibility?(t=sY(g.visibility),f[0]=g.visibility,f[1]=t):t=f[1];let j=t,C=g.owner?`${g.owner}/${g.id}`:g.id;f[2]!==g?(n=(0,eL.Cb)(g),f[2]=g,f[3]=n):n=f[3];let N=g.iconColor;return f[4]!==N?(a=(0,c.jsx)(dp.Z.Icon,{icon:sW,color:N}),f[4]=N,f[5]=a):a=f[5],f[6]!==g.name?(r=(0,c.jsx)(dp.Z.Heading,{children:g.name}),f[6]=g.name,f[7]=r):r=f[7],f[8]!==g.description?(i=(0,c.jsx)(dp.Z.Description,{children:g.description}),f[8]=g.description,f[9]=i):i=f[9],f[10]!==g||f[11]!==y?(o=(0,c.jsx)(dp.Z.Menu,{children:(0,c.jsx)(lO,{copilot:g,onDelete:y})}),f[10]=g,f[11]=y,f[12]=o):o=f[12],f[13]!==v?(s=(0,c.jsx)(v,{}),f[13]=v,f[14]=s):s=f[14],f[15]!==g.owner||f[16]!==s?(l=(0,c.jsxs)("div",{className:dh.metadataItem,children:[s,g.owner]}),f[15]=g.owner,f[16]=s,f[17]=l):l=f[17],f[18]!==b?(u=(0,c.jsx)(b,{}),f[18]=b,f[19]=u):u=f[19],f[20]!==u||f[21]!==j?(m=(0,c.jsxs)("div",{className:dh.metadataItem,children:[u,j]}),f[20]=u,f[21]=j,f[22]=m):m=f[22],f[23]!==l||f[24]!==m?(p=(0,c.jsx)(dp.Z.Metadata,{children:(0,c.jsxs)("div",{className:dh.metadata,children:[l,m]})}),f[23]=l,f[24]=m,f[25]=p):p=f[25],f[26]!==x||f[27]!==p||f[28]!==C||f[29]!==n||f[30]!==a||f[31]!==r||f[32]!==i||f[33]!==o?(h=(0,c.jsxs)(dp.Z,{href:n,onClick:x,children:[a,r,i,o,p]},C),f[26]=x,f[27]=p,f[28]=C,f[29]=n,f[30]=a,f[31]=r,f[32]=i,f[33]=o,f[34]=h):h=f[34],h}try{(i=function(e){let t,n,a,r,i=(0,d.c)(5),{onClick:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(dp.Z.Icon,{icon:_.PlusIcon}),n=(0,c.jsx)(dp.Z.Heading,{children:"Create a new space"}),a=(0,c.jsx)(dp.Z.Description,{children:"Add attachments, repositories, and more."}),i[0]=t,i[1]=n,i[2]=a):(t=i[0],n=i[1],a=i[2]),i[3]!==o?(r=(0,c.jsxs)(dp.Z,{onClick:o,children:[t,n,a]}),i[3]=o,i[4]=r):r=i[4],r}).displayName||(i.displayName="NewSpacesCard")}catch{}try{df.displayName||(df.displayName="SpacesCard")}catch{}let dg={banner:"SpacesListPage-module__banner--OV17m",underlineNav:"SpacesListPage-module__underlineNav--vpeNw",listContainer:"SpacesListPage-module__listContainer--il2mD"},dy=["personal","org","starred"];function dx(e){let t,n,a,r,i,o,s,l,u,m,p,h,f,y,v,b,j,C,N,S,w,I,k,T,E,A=(0,d.c)(89),{copilotSpaces:R}=e,L=(0,em.Pk)(),P=(0,X.Zp)(),{ssoOrganizations:D}=L,[O]=(0,rW.o)();if(A[0]!==O){let e=O.get("tab");t=dy.includes(e)?e:"personal",A[0]=O,A[1]=t}else t=A[1];A[2]!==D?(n=D.map(dN),A[2]=D,A[3]=n):n=A[3];let M=n,[B,F]=(0,x.useState)(null),$=void 0===R;A[4]!==R?(a=R?.filter(dC).length??0,A[4]=R,A[5]=a):a=A[5];let U=a;A[6]!==R?(r=R?.filter(dj).length??0,A[6]=R,A[7]=r):r=A[7];let V=r;A[8]!==R?(i=R?.filter(db).length??0,A[8]=R,A[9]=i):i=A[9];let z=i;A[10]!==P?(o=()=>{P(eu.QT)},A[10]=P,A[11]=o):o=A[11];let W=o,{mutateAsync:H}=(0,eP.$7)();A[12]!==H?(s=e=>async()=>{try{await H(e),F(null)}catch(e){F(e instanceof Error?e:Error(String(e)))}},A[12]=H,A[13]=s):s=A[13];let q=s;if(A[14]!==t||A[15]!==M||A[16]!==R||A[17]!==B||A[18]!==q||A[19]!==W||A[20]!==$||A[21]!==V||A[22]!==U||A[23]!==D.length||A[24]!==z){let e,n,a,r,i,o,s,d,x=R?.filter(e=>"personal"===t?!e.ownerIsOrg:"org"===t?e.ownerIsOrg:"starred"!==t||e.starred),w=R?.length===0&&!$,I=R&&R.length>0&&x?.length===0&&!$;A[38]!==t?(e=()=>"personal"===t?"personal":"org"===t?"organization":"starred"===t?"starred":"",A[38]=t,A[39]=e):e=A[39];let k=e;p=eF.t,A[40]===Symbol.for("react.memo_cache_sentinel")?(v=(0,c.jsx)(e9,{regionName:"Spaces"}),A[40]=v):v=A[40],A[41]!==W?(b=(0,c.jsx)(lW,{onCreateSpace:W}),A[41]=W,A[42]=b):b=A[42],A[43]!==B?(j=B&&(0,c.jsxs)(lN.A,{variant:"danger",children:[(0,c.jsx)(_.AlertIcon,{}),"There was a problem deleting your space."]}),A[43]=B,A[44]=j):j=A[44],m=g.A.Container,A[45]!==M||A[46]!==D.length?(n=D.length>0&&(0,c.jsx)("div",{className:dg.banner,children:(0,c.jsx)(aj.x,{protectedOrgs:M,redirectURI:dv,useFullWidthStyle:!0})}),A[45]=M,A[46]=D.length,A[47]=n):n=A[47],A[48]!==n?(f=(0,c.jsx)(g.A.Banner,{children:n}),A[48]=n,A[49]=f):f=A[49],A[50]===Symbol.for("react.memo_cache_sentinel")?(y=(0,c.jsxs)(g.A.Header,{children:[(0,c.jsx)(g.A.Icon,{icon:(0,c.jsx)(sW,{size:32})}),(0,c.jsx)(g.A.Title,{children:"Set context once. Chat again and again"}),(0,c.jsx)(g.A.Description,{children:"Create and share a custom Copilot experience using a collection of GitHub repositories, files, and other content."})]}),A[50]=y):y=A[50],S=dg.listContainer,A[51]===Symbol.for("react.memo_cache_sentinel")?(a={search:"?tab=personal"},A[51]=a):a=A[51];let T="personal"===t?"page":void 0;A[52]!==U||A[53]!==T?(r=(0,c.jsx)(dm.O.Item,{as:cp.N,to:a,"aria-current":T,icon:_.SmileyIcon,counter:U,children:"Yours"}),A[52]=U,A[53]=T,A[54]=r):r=A[54],A[55]===Symbol.for("react.memo_cache_sentinel")?(i={search:"?tab=org"},A[55]=i):i=A[55];let E="org"===t?"page":void 0;A[56]!==V||A[57]!==E?(o=(0,c.jsx)(dm.O.Item,{as:cp.N,to:i,"aria-current":E,icon:_.OrganizationIcon,counter:V,children:"Organizations"}),A[56]=V,A[57]=E,A[58]=o):o=A[58],A[59]===Symbol.for("react.memo_cache_sentinel")?(s={search:"?tab=starred"},A[59]=s):s=A[59];let L="starred"===t?"page":void 0;A[60]!==z||A[61]!==L?(d=(0,c.jsx)(dm.O.Item,{as:cp.N,to:s,"aria-current":L,icon:_.StarIcon,counter:z,children:"Starred"}),A[60]=z,A[61]=L,A[62]=d):d=A[62],A[63]!==r||A[64]!==o||A[65]!==d?(h=(0,c.jsx)("div",{className:dg.underlineNav,children:(0,c.jsxs)(dm.O,{"aria-label":"Spaces",children:[r,o,d]})}),A[63]=r,A[64]=o,A[65]=d,A[66]=h):h=A[66],u=g.A.Section,l=g.A.Section.Grid,C=$,N=w?(0,c.jsxs)(g.A.Section.Grid.Empty,{children:[(0,c.jsx)("p",{children:"Spaces you create will appear here."}),(0,c.jsx)(aD.Q,{onClick:W,children:"New space"})]}):I?(0,c.jsxs)(g.A.Section.Grid.Empty,{children:["starred"===k()?(0,c.jsx)(_.StarIcon,{size:24}):(0,c.jsx)(_.SearchIcon,{size:24}),(0,c.jsxs)("p",{children:["No ",k()," spaces found."]})]}):x?.map?.(e=>(0,c.jsx)(df,{copilotSpace:e,onDelete:q(e),onClick:d_},e.owner?`${e.owner}/${e.id}`:e.id)),A[14]=t,A[15]=M,A[16]=R,A[17]=B,A[18]=q,A[19]=W,A[20]=$,A[21]=V,A[22]=U,A[23]=D.length,A[24]=z,A[25]=l,A[26]=u,A[27]=m,A[28]=p,A[29]=h,A[30]=f,A[31]=y,A[32]=v,A[33]=b,A[34]=j,A[35]=C,A[36]=N,A[37]=S}else l=A[25],u=A[26],m=A[27],p=A[28],h=A[29],f=A[30],y=A[31],v=A[32],b=A[33],j=A[34],C=A[35],N=A[36],S=A[37];return A[67]!==l||A[68]!==C||A[69]!==N?(w=(0,c.jsx)(l,{loading:C,children:N}),A[67]=l,A[68]=C,A[69]=N,A[70]=w):w=A[70],A[71]!==u||A[72]!==w?(I=(0,c.jsx)(u,{children:w}),A[71]=u,A[72]=w,A[73]=I):I=A[73],A[74]!==h||A[75]!==I||A[76]!==S?(k=(0,c.jsxs)("div",{className:S,children:[h,I]}),A[74]=h,A[75]=I,A[76]=S,A[77]=k):k=A[77],A[78]!==m||A[79]!==f||A[80]!==y||A[81]!==k?(T=(0,c.jsxs)(m,{children:[f,y,k]}),A[78]=m,A[79]=f,A[80]=y,A[81]=k,A[82]=T):T=A[82],A[83]!==p||A[84]!==v||A[85]!==b||A[86]!==j||A[87]!==T?(E=(0,c.jsxs)(p,{fallback:v,children:[b,j,T]}),A[83]=p,A[84]=v,A[85]=b,A[86]=j,A[87]=T,A[88]=E):E=A[88],E}function dv(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}function d_(){(0,eS.BI)("dotcom_chat.activate",{target:"SIDEBAR_CUSTOM_COPILOT_SELECTED",mode:"immersive"})}function db(e){return e.starred}function dj(e){return e.ownerIsOrg}function dC(e){return!e.ownerIsOrg}function dN(e){return e.login}try{dx.displayName||(dx.displayName="SpacesListPage")}catch{}function dS(){let e,t,n=(0,d.c)(4),a=(0,rW.Z)();n[0]!==a?(e=function(){a(eu.VR)},n[0]=a,n[1]=e):e=n[1];let r=e;return n[2]!==r?(t=(0,c.jsx)(dc,{onCancel:r}),n[2]=r,n[3]=t):t=n[3],t}try{dS.displayName||(dS.displayName="SpacesNewPage")}catch{}var dw=n(52450);let dI={scrollContainer:"ContentView-module__scrollContainer--wpj1Y",contentContainer:"ContentView-module__contentContainer--bYW7x",content:"ContentView-module__content--gJIEz",medium:"ContentView-module__medium--S91Um",small:"ContentView-module__small--MfxBK",banner:"ContentView-module__banner--Fz5_d",serviceHeader:"ContentView-module__serviceHeader--KN8ix",serviceTitle:"ContentView-module__serviceTitle--hjweZ",serviceDescription:"ContentView-module__serviceDescription--__XLT",serviceActions:"ContentView-module__serviceActions--q6aEC",section:"ContentView-module__section--Fa2ri",sectionTitle:"ContentView-module__sectionTitle--KVZXe",sectionGrid:"ContentView-module__sectionGrid--cOEZL",sectionGridEmpty:"ContentView-module__sectionGridEmpty--wCrfV",skeletonCard:"ContentView-module__skeletonCard--edod5"};function dk(e){let t,n,a,r,i,o=(0,d.c)(12),{children:s,width:l}=e;if(o[0]!==s){for(let e of(t=[],n=[],x.Children.toArray(s)))x.isValidElement(e)&&e.type===dT?t.push(e):n.push(e);o[0]=s,o[1]=t,o[2]=n}else t=o[1],n=o[2];let u="small"===l,m="medium"===l;return o[3]!==u||o[4]!==m?(a=(0,eD.$)(dI.content,{[dI.small]:u,[dI.medium]:m}),o[3]=u,o[4]=m,o[5]=a):a=o[5],o[6]!==n||o[7]!==a?(r=(0,c.jsx)("div",{className:a,children:n}),o[6]=n,o[7]=a,o[8]=r):r=o[8],o[9]!==t||o[10]!==r?(i=(0,c.jsx)("div",{className:dI.scrollContainer,children:(0,c.jsxs)("div",{className:dI.contentContainer,children:[t,r]})}),o[9]=t,o[10]=r,o[11]=i):i=o[11],i}function dT(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dI.banner,children:a}),n[0]=a,n[1]=t):t=n[1],t}function dE(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dI.serviceHeader,children:a}),n[0]=a,n[1]=t):t=n[1],t}function dA(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("section",{className:dI.section,children:a}),n[0]=a,n[1]=t):t=n[1],t}function dR(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("h2",{className:dI.serviceTitle,children:a}),n[0]=a,n[1]=t):t=n[1],t}function dL(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("p",{className:dI.serviceDescription,children:a}),n[0]=a,n[1]=t):t=n[1],t}function dP(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dI.serviceActions,children:a}),n[0]=a,n[1]=t):t=n[1],t}function dD(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("h3",{className:dI.sectionTitle,children:a}),n[0]=a,n[1]=t):t=n[1],t}function dO(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dI.sectionGridEmpty,children:a}),n[0]=a,n[1]=t):t=n[1],t}function dM(e){let t,n,a,r=(0,d.c)(8),{children:i,loading:o}=e;if(void 0!==o&&o){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:dI.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(d$)}),r[0]=e):e=r[0],e}if(r[1]!==i){let e=x.Children.toArray(i);t=e.find(dF),n=e.filter(dB),r[1]=i,r[2]=t,r[3]=n}else t=r[2],n=r[3];let s=n;if(0===s.length&&t){let e;return r[4]!==t?(e=(0,c.jsx)(c.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==s?(a=(0,c.jsx)("div",{className:dI.sectionGrid,children:s}),r[6]=s,r[7]=a):a=r[7],a}function dB(e){return!(x.isValidElement(e)&&e.type===dO)}function dF(e){return x.isValidElement(e)&&e.type===dO}function d$(e,t){return(0,c.jsx)(dw.f,{className:dI.skeletonCard},t)}dM.Empty=dO,dA.Title=dD,dA.Grid=dM;let dU={Title:dR,Description:dL,Actions:dP,Container:dk,Banner:dT,Header:dE,Section:dA};dU.displayName="ContentView",dk.displayName="ContentView.Container",dT.displayName="ContentView.Banner",dE.displayName="ContentView.Header",dA.displayName="ContentView.Section",dR.displayName="ContentView.Title",dL.displayName="ContentView.Description",dP.displayName="ContentView.Actions",dD.displayName="ContentView.Section.Title",dM.displayName="ContentView.Section.Grid",dO.displayName="ContentView.Section.Grid.Empty";let dV={container:"InlineEdit-module__container--LSCGU",displayButton:"InlineEdit-module__displayButton--aJore",text:"InlineEdit-module__text--daHG8",editIcon:"InlineEdit-module__editIcon--p137S",input:"InlineEdit-module__input--iA2Yi",confirmButton:"InlineEdit-module__confirmButton--FBHwk"};function dz(e){let t,n,a,r,i,o,s,l,u,m,p,h,f,g=(0,d.c)(43),{defaultValue:y,onConfirm:v,confirmButtonLabel:b,className:j,size:C}=e,N=void 0===b?"Save":b,[S,w]=(0,x.useState)(!1),[I,k]=(0,x.useState)(y),T=(0,x.useRef)(null);g[0]!==y?(t=()=>{k(y)},n=[y],g[0]=y,g[1]=t,g[2]=n):(t=g[1],n=g[2]),(0,x.useEffect)(t,n),g[3]!==S?(a=()=>{if(S&&T.current){T.current.focus();let e=T.current.value.length;T.current.setSelectionRange(e,e)}},r=[S],g[3]=S,g[4]=a,g[5]=r):(a=g[4],r=g[5]),(0,x.useEffect)(a,r),g[6]!==y?(i=()=>{k(y),w(!0)},g[6]=y,g[7]=i):i=g[7];let E=i;g[8]!==y||g[9]!==v||g[10]!==I?(o=()=>{let e=I.trim();e&&e!==y&&v(e),w(!1)},g[8]=y,g[9]=v,g[10]=I,g[11]=o):o=g[11];let A=o;g[12]!==y?(s=()=>{w(!1),k(y)},g[12]=y,g[13]=s):s=g[13];let R=s;g[14]!==R||g[15]!==A?(l=e=>{"Enter"===e.key?(e.preventDefault(),A()):"Escape"===e.key&&(e.preventDefault(),R())},g[14]=R,g[15]=A,g[16]=l):l=g[16];let L=l,P=`${void 0===C?14:C}px`;g[17]!==P?(u={fontSize:P,lineHeight:1.5},g[17]=P,g[18]=u):u=g[18];let D=u;if(S){let e,t,n,a,r;return g[19]!==j?(e=(0,eD.$)(dV.container,j),g[19]=j,g[20]=e):e=g[20],g[21]===Symbol.for("react.memo_cache_sentinel")?(t=e=>k(e.target.value),g[21]=t):t=g[21],g[22]!==L||g[23]!==D||g[24]!==I?(n=(0,c.jsx)("input",{ref:T,type:"text",value:I,onChange:t,onKeyDown:L,className:dV.input,style:D}),g[22]=L,g[23]=D,g[24]=I,g[25]=n):n=g[25],g[26]!==N||g[27]!==A?(a=(0,c.jsx)(eW.K,{size:"medium",icon:_.CheckIcon,"aria-label":N,onClick:A,className:dV.confirmButton}),g[26]=N,g[27]=A,g[28]=a):a=g[28],g[29]!==e||g[30]!==n||g[31]!==a?(r=(0,c.jsxs)("div",{className:e,children:[n,a]}),g[29]=e,g[30]=n,g[31]=a,g[32]=r):r=g[32],r}return g[33]!==j?(m=(0,eD.$)(dV.container,dV.displayButton,j),g[33]=j,g[34]=m):m=g[34],g[35]!==y?(p=(0,c.jsx)("span",{className:dV.text,children:y}),g[35]=y,g[36]=p):p=g[36],g[37]===Symbol.for("react.memo_cache_sentinel")?(h=(0,c.jsx)(_.PencilIcon,{className:dV.editIcon,size:16}),g[37]=h):h=g[37],g[38]!==E||g[39]!==D||g[40]!==m||g[41]!==p?(f=(0,c.jsxs)("button",{className:m,onClick:E,style:D,children:[p,h]}),g[38]=E,g[39]=D,g[40]=m,g[41]=p,g[42]=f):f=g[42],f}try{dz.displayName||(dz.displayName="InlineEdit")}catch{}function dW({copilotSpace:e,onClose:t,onSaved:n,returnFocusRef:a}){let{upsertCopilotSpace:r,isPending:i}=lI(e),[o,s]=(0,x.useState)(e.generalInstructions??""),[l,d]=(0,x.useState)(null);async function u(){try{let e=await r({generalInstructions:o});n?.(e),t()}catch(e){e instanceof Error?d(e.message):d("Failed to save instructions")}}function m(){s(e.generalInstructions??""),t()}return(0,c.jsx)(tf.l,{width:"xlarge",height:"large",title:"Instructions",onClose:m,returnFocusRef:a,position:{narrow:"fullscreen"},renderBody:()=>(0,c.jsxs)("div",{className:lU.instructionsContainer,children:[l&&(0,c.jsx)(eI.l,{variant:"critical",title:l,className:"mb-2"}),(0,c.jsxs)(iR.A,{className:lU.grow,children:[(0,c.jsx)(iR.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,c.jsx)(l$.Ay,{block:!0,value:o,onChange:e=>s(e.target.value),placeholder:"Set up instructions for Copilot in this space",resize:"none",className:lU.grow}),(0,c.jsx)(dH,{text:o,promptCharLimit:4e3})]})]}),renderFooter:()=>(0,c.jsxs)("div",{className:lU.footerContainer,children:[(0,c.jsx)(aD.Q,{variant:"default",onClick:m,children:"Cancel"}),(0,c.jsx)(aD.Q,{loading:i,loadingAnnouncement:"Saving instructions",variant:"primary",onClick:()=>{u()},children:"Save"})]})})}function dH(e){let t,n,a,r,i=(0,d.c)(10),{text:o,promptCharLimit:s}=e,l=o.length>s;i[0]!==o.length?(t=o.length.toLocaleString(),i[0]=o.length,i[1]=t):t=i[1],i[2]!==s?(n=s.toLocaleString(),i[2]=s,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(a=(0,c.jsxs)(c.Fragment,{children:[t," / ",n," characters"]}),i[4]=t,i[5]=n,i[6]=a):a=i[6];let u=a;return i[7]!==u||i[8]!==l?(r=l?(0,c.jsx)(iR.A.Validation,{variant:"error",children:u}):(0,c.jsx)(iR.A.Caption,{children:u}),i[7]=u,i[8]=l,i[9]=r):r=i[9],r}try{dW.displayName||(dW.displayName="InstructionsDialog")}catch{}try{dH.displayName||(dH.displayName="CharacterCount")}catch{}let dq={header:"SpacesConversation-module__header--yYw2C",main:"SpacesConversation-module__main--rHPYg",spaceTitle:"SpacesConversation-module__spaceTitle--rnry2",spaceDescription:"SpacesConversation-module__spaceDescription--yTlFM",chatInput:"SpacesConversation-module__chatInput--juHnz",instructions:"SpacesConversation-module__instructions--YEbs0",instructionsHeader:"SpacesConversation-module__instructionsHeader--JURtJ",instructionsIcon:"SpacesConversation-module__instructionsIcon--M9GHq",instructionsTitle:"SpacesConversation-module__instructionsTitle--C3f26",instructionsContent:"SpacesConversation-module__instructionsContent--pQ5qq",instructionsEmptyState:"SpacesConversation-module__instructionsEmptyState--BMxEo",content:"SpacesConversation-module__content--PbVzu",tabContainer:"SpacesConversation-module__tabContainer--dIRV0",underlineNav:"SpacesConversation-module__underlineNav--mhAGr",attachButton:"SpacesConversation-module__attachButton--mbw_3",tabEmptyContainer:"SpacesConversation-module__tabEmptyContainer--CfL1a",tabEmptyTitle:"SpacesConversation-module__tabEmptyTitle--cG4jw",tabEmptyText:"SpacesConversation-module__tabEmptyText--ITZUD",tabContent:"SpacesConversation-module__tabContent--xIi_S",conversationsList:"SpacesConversation-module__conversationsList--Ht70O",conversationItem:"SpacesConversation-module__conversationItem--NUP87",conversationItemMenuOpen:"SpacesConversation-module__conversationItemMenuOpen--lR7DS",conversationItemLeftColumn:"SpacesConversation-module__conversationItemLeftColumn--hsYf2",conversationName:"SpacesConversation-module__conversationName--i4vaf",conversationTimestamp:"SpacesConversation-module__conversationTimestamp--bNAHX"};function dG({customCopilotId:e,selectedThreadID:t,textAreaRef:n}){let{currentTopic:a,messages:r,streamingMessage:i,ambientError:o,threads:s}=(0,em.Pk)(),l=(0,h.b)(),[d,u]=(0,X.ok)(),m=rH(),f=d.get("tab")||"attachments",[g,y]=(0,x.useState)(!1),[v,b]=(0,x.useState)(null),j=(0,x.useRef)(null),[C,S]=(0,x.useState)(null),[w,I]=(0,x.useState)([]),[k,T]=(0,x.useState)(null),[E,A]=(0,x.useState)(null),R=rV((0,x.useRef)(a),r.length),{isPending:L,data:P,error:D}=(0,eP.Ao)(e),{upsertCopilotSpace:O,error:M}=lI(C||void 0),{copilotSpacesConfig:{maxResourceCount:B}}=(0,N.X)(),F=M||D||E,$=(0,x.useRef)(!1),U=w.filter(e=>!e.markedForDestroy).length,V=(0,x.useMemo)(()=>{if(!C)return[];sJ(s);let t=new Map(Array.from(s.entries()).filter(([,t])=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id));return l.sortThreads(t).slice(0,10)},[s,e,l,C]),z=(0,x.useMemo)(()=>C?C.resources.reduce((e,t)=>e+(t.sizePercentage||0),0):0,[C]);(0,x.useEffect)(()=>{P&&(S(P),I(P.resources||[]),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:P})),l.clearCurrentReferences(["image"])},[P,l]),(0,x.useEffect)(()=>()=>{$.current||(l.clearCurrentReferences(),$.current=!1)},[l,e]);let W=(0,x.useCallback)(async e=>{$.current=!0,await R(e)},[R]),H=(0,x.useCallback)(e=>{u({tab:e},{replace:!0})},[u]),q=(0,x.useCallback)(e=>{l.deleteThread(e)},[l]);async function G(e){let t=[];if(I(n=>t=e.databaseId?n.map(t=>e.databaseId===t.databaseId?{...t,markedForDestroy:!0}:t):n.filter(t=>t.id!==e.id)),C)try{await O({...C,resources:t}),A(null)}catch{I(C.resources)}}async function K(e){let t=[];if(I(n=>t=n.map(t=>t.id===e.id?e:t)),C)try{await O({...C,resources:t}),A(null)}catch{I(C.resources)}}let Q=(0,x.useCallback)(async e=>{let t=[];I(n=>{let a=new Map(n.map(e=>[e.id,e]));for(let t of e)a.set(t.id,t);return t=Array.from(a.values())});try{await O({...C,resources:t}),A(null)}catch{C&&I(C.resources)}},[C,O]),J=(0,x.useCallback)(()=>{A(`You can select a maximum of ${B} sources`)},[B]),Y=(0,x.useCallback)(async e=>{if(C){T(e);try{let t=await O({name:e});S(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),T(null),A(null)}catch{S(C),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:C}),T(null)}}},[C,O,l]);if(D instanceof eP.i9)return(0,c.jsx)(sX,{});if(L||!C)return(0,c.jsx)(oK,{});let Z=C.ownerIsOrg?C.owner:void 0,ee=k??C.name;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(lW,{}),(0,c.jsx)(eF.t,{fallback:(0,c.jsx)(e9,{regionName:"This space"}),children:(0,c.jsxs)(dU.Container,{width:"small",children:[(0,c.jsxs)("div",{className:dq.header,children:[(0,c.jsx)("div",{className:dq.main,children:(0,c.jsx)("h1",{className:dq.spaceTitle,children:(0,c.jsx)(dz,{defaultValue:ee,onConfirm:Y,size:24})})}),C.description&&(0,c.jsx)("p",{className:dq.spaceDescription,children:C.description})]}),(0,c.jsxs)("div",{className:dq.chatInput,children:[o&&(0,c.jsx)(rq.P,{ambientError:o}),(0,c.jsx)(p.V,{textAreaRef:n,onSubmit:W,customCopilotId:C,isStreaming:!!i,size:"large",showModelPicker:!0,onNewThreadSelected:m},t)]}),(0,c.jsxs)("button",{ref:j,className:dq.instructions,onClick:()=>y(!0),"aria-haspopup":"dialog","aria-expanded":g,children:[(0,c.jsxs)("div",{className:dq.instructionsHeader,children:[(0,c.jsx)(_.SlidersIcon,{size:16,className:dq.instructionsIcon}),(0,c.jsx)("h2",{className:dq.instructionsTitle,children:"Instructions"})]}),C.generalInstructions?(0,c.jsx)("p",{className:dq.instructionsContent,children:C.generalInstructions}):(0,c.jsx)("p",{className:dq.instructionsEmptyState,children:"Set up instructions for Copilot in this space"})]}),F&&(0,c.jsx)(eI.l,{title:E?"Maximum source count reached":"Failed to save space",variant:"critical",className:"mb-2",description:"string"==typeof F?F:"object"==typeof F&&null!==F&&"base"in F?String(F.base):F instanceof Error?F.message:"An error occurred"}),(0,c.jsxs)("div",{className:dq.content,children:[(0,c.jsxs)("div",{className:dq.tabContainer,children:[(0,c.jsx)("div",{className:dq.underlineNav,children:(0,c.jsxs)(dm.O,{"aria-label":"Space content",children:[(0,c.jsx)(dm.O.Item,{"aria-current":"attachments"===f?"page":void 0,onClick:()=>H("attachments"),counter:C.resources.length,children:"Sources"}),(0,c.jsx)(dm.O.Item,{"aria-current":"conversations"===f?"page":void 0,onClick:()=>H("conversations"),counter:V.length,children:"Conversations"})]})}),(0,c.jsx)("div",{className:dq.attachButton,children:U>=B?(0,c.jsx)(aD.Q,{leadingVisual:_.PlusIcon,onClick:J,children:"Add sources"}):(0,c.jsx)(c2,{sizePercentage:z,findFileWorkerPath:"",owner:Z,onResourcesAdded:Q,resourcesToSave:w,resourceCounts:{currentResourceCount:U,maxResourceCount:B},children:(0,c.jsx)(aD.Q,{leadingVisual:_.PlusIcon,children:"Add sources"})})})]}),(0,c.jsx)("div",{className:dq.tabContent,children:"attachments"===f?C&&C.resources.length>0?(0,c.jsx)(c9,{resources:C.resources,sizePercentage:z,onDeleteResource:G,onUpdateResource:K}):(0,c.jsxs)("div",{className:dq.tabEmptyContainer,children:[(0,c.jsx)("h2",{className:dq.tabEmptyTitle,children:"Welcome"}),(0,c.jsx)("p",{className:dq.tabEmptyText,children:"Add sources to your space once and access them in every chat. Start adding your first source."})]}):"conversations"===f?V.length>0?(0,c.jsx)("ul",{role:"menu",className:dq.conversationsList,children:V.map(e=>(0,c.jsx)(dK,{conversation:e,activeMenuConversationId:v,setActiveMenuConversationId:b,onDelete:q},e.id))}):(0,c.jsxs)("div",{className:dq.tabEmptyContainer,children:[(0,c.jsx)("h2",{className:dq.tabEmptyTitle,children:"No conversations yet"}),(0,c.jsx)("p",{className:dq.tabEmptyText,children:"Start a new conversation in this space by typing in the input box at the top."})]}):void 0}),g&&(0,c.jsx)(dW,{copilotSpace:C,onClose:()=>y(!1),returnFocusRef:j,onSaved:e=>{S(e),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}})]})]})})]})}function dK(e){let t,n,a,r,i,o,s,l,u,m,p,h,f,g,y,x,v=(0,d.c)(38),{conversation:b,activeMenuConversationId:j,setActiveMenuConversationId:C,onDelete:N}=e,S=(0,rW.Z)();v[0]!==b?(t=(0,eu.CB)(b),v[0]=b,v[1]=t):t=v[1];let w=t,I=`${eu.Jz}/c/${b.id}`;v[2]!==S||v[3]!==I?(n=()=>S(I),a=e=>{"Enter"===e.key&&S(I)},v[2]=S,v[3]=I,v[4]=n,v[5]=a):(n=v[4],a=v[5]);let k=null!==j&&dq.conversationItemMenuOpen;v[6]!==k?(r=(0,eD.$)(dq.conversationItem,k),v[6]=k,v[7]=r):r=v[7],v[8]!==w?(i=(0,c.jsx)("div",{className:dq.conversationName,children:w}),v[8]=w,v[9]=i):i=v[9],v[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)(_.ClockIcon,{}),v[10]=o):o=v[10],v[11]!==b.updatedAt?(s=new Date(b.updatedAt),v[11]=b.updatedAt,v[12]=s):s=v[12],v[13]!==s?(l=(0,c.jsxs)("div",{className:dq.conversationTimestamp,children:[o," ",(0,c.jsx)(M.A,{format:"relative",prefix:"",date:s})]}),v[13]=s,v[14]=l):l=v[14],v[15]!==i||v[16]!==l?(u=(0,c.jsxs)("div",{className:dq.conversationItemLeftColumn,children:[i,l]}),v[15]=i,v[16]=l,v[17]=u):u=v[17];let T=j===b.id;return v[18]!==b.id||v[19]!==C?(m=e=>{C(e?b.id:null)},v[18]=b.id,v[19]=C,v[20]=m):m=v[20],v[21]===Symbol.for("react.memo_cache_sentinel")?(p=(0,c.jsx)(ez.W.Anchor,{children:(0,c.jsx)(eW.K,{variant:"invisible","aria-label":"Conversation options",icon:_.KebabHorizontalIcon,onClick:dJ})}),v[21]=p):p=v[21],v[22]!==b||v[23]!==N?(h=()=>N(b),v[22]=b,v[23]=N,v[24]=h):h=v[24],v[25]===Symbol.for("react.memo_cache_sentinel")?(f=(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(_.TrashIcon,{})}),v[25]=f):f=v[25],v[26]!==h?(g=(0,c.jsx)(ez.W.Overlay,{onClick:dQ,align:"end",children:(0,c.jsx)(eH.l,{children:(0,c.jsxs)(eH.l.Item,{variant:"danger",onSelect:h,children:[f,"Delete"]})})}),v[26]=h,v[27]=g):g=v[27],v[28]!==T||v[29]!==m||v[30]!==g?(y=(0,c.jsxs)(ez.W,{open:T,onOpenChange:m,children:[p,g]}),v[28]=T,v[29]=m,v[30]=g,v[31]=y):y=v[31],v[32]!==u||v[33]!==y||v[34]!==n||v[35]!==a||v[36]!==r?(x=(0,c.jsxs)("li",{role:"menuitem",onClick:n,onKeyDown:a,className:r,children:[u,y]}),v[32]=u,v[33]=y,v[34]=n,v[35]=a,v[36]=r,v[37]=x):x=v[37],x}function dQ(e){return e.stopPropagation()}function dJ(e){e.stopPropagation()}try{dG.displayName||(dG.displayName="SpacesConversation")}catch{}try{dK.displayName||(dK.displayName="ConversationItem")}catch{}let dY={container:"ListBlock-module__container--t6lZT",header:"ListBlock-module__header--cktLR",list:"ListBlock-module__list--M_DPK",emptyState:"ListBlock-module__emptyState--yCd0j",item:"ListBlock-module__item--fVO0U",itemButton:"ListBlock-module__itemButton--_Ffey",actions:"ListBlock-module__actions--ilUGC",leadingVisual:"ListBlock-module__leadingVisual--nEhNl",title:"ListBlock-module__title--yySaW",description:"ListBlock-module__description--JrsXq",metadata:"ListBlock-module__metadata--Il2ZC",skeletonItem:"ListBlock-module__skeletonItem--OiY1w"};function dZ(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dY.container,children:a}),n[0]=a,n[1]=t):t=n[1],t}function dX(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dY.header,children:a}),n[0]=a,n[1]=t):t=n[1],t}function d0(e){let t,n,a,r,i=(0,d.c)(11);if(i[0]!==e?({children:t,loading:a,...n}=e,i[0]=e,i[1]=t,i[2]=n,i[3]=a):(t=i[1],n=i[2],a=i[3]),void 0!==a&&a){let e,t;return i[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(d1),i[4]=e):e=i[4],i[5]!==n||i[6]!==e?(t=(0,c.jsx)("ul",{className:dY.list,"data-testid":"list-block-skeleton",...n,children:e}),i[5]=n,i[6]=e,i[7]=t):t=i[7],t}return i[8]!==t||i[9]!==n?(r=(0,c.jsx)("ul",{className:dY.list,...n,children:t}),i[8]=t,i[9]=n,i[10]=r):r=i[10],r}function d1(e,t){return(0,c.jsx)(d4,{},t)}function d2(e){let t,n,a,r,i,o,s=(0,d.c)(33),l=null,u=null,m=null,p=null,h=null;if(s[0]!==e.children){for(let t of x.Children.toArray(e.children))x.isValidElement(t)&&(t.type===d5?l=t:t.type===d6?u=t:t.type===d7?m=t:t.type===d8?p=t:t.type===d3&&(h=t));s[0]=e.children,s[1]=l,s[2]=u,s[3]=m,s[4]=p,s[5]=h}else l=s[1],u=s[2],m=s[3],p=s[4],h=s[5];s[6]!==m||s[7]!==p||s[8]!==u?(t=(0,c.jsxs)("div",{children:[u,m,p]}),s[6]=m,s[7]=p,s[8]=u,s[9]=t):t=s[9],s[10]!==l||s[11]!==t?(n=(0,c.jsxs)(c.Fragment,{children:[l,t]}),s[10]=l,s[11]=t,s[12]=n):n=s[12];let f=n;if("href"in e){let t,n,a,r;return s[13]!==e?({href:t,...n}=e,s[13]=e,s[14]=t,s[15]=n):(t=s[14],n=s[15]),s[16]!==f||s[17]!==t||s[18]!==n?(a=(0,c.jsx)(X.N_,{...n,to:t,className:dY.itemButton,children:f}),s[16]=f,s[17]=t,s[18]=n,s[19]=a):a=s[19],s[20]!==h||s[21]!==a?(r=(0,c.jsxs)("li",{className:dY.item,children:[a,h]}),s[20]=h,s[21]=a,s[22]=r):r=s[22],r}return s[23]!==e?({onClick:a,...r}=e,s[23]=e,s[24]=a,s[25]=r):(a=s[24],r=s[25]),s[26]!==f||s[27]!==a||s[28]!==r?(i=(0,c.jsx)("button",{...r,className:dY.itemButton,onClick:a,type:"button",children:f}),s[26]=f,s[27]=a,s[28]=r,s[29]=i):i=s[29],s[30]!==h||s[31]!==i?(o=(0,c.jsxs)("li",{className:dY.item,children:[i,h]}),s[30]=h,s[31]=i,s[32]=o):o=s[32],o}function d3(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dY.actions,children:a}),n[0]=a,n[1]=t):t=n[1],t}function d4(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("li",{className:dY.item,children:(0,c.jsx)("div",{className:dY.skeletonItem,children:(0,c.jsx)(sL.r,{lines:2})})}),t[0]=e):e=t[0],e}function d5(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dY.leadingVisual,children:a}),n[0]=a,n[1]=t):t=n[1],t}function d6(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dY.title,children:a}),n[0]=a,n[1]=t):t=n[1],t}function d7(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dY.description,children:a}),n[0]=a,n[1]=t):t=n[1],t}function d8(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("div",{className:dY.metadata,children:a}),n[0]=a,n[1]=t):t=n[1],t}function d9(e){let t,n=(0,d.c)(2),{children:a}=e;return n[0]!==a?(t=(0,c.jsx)("li",{className:dY.emptyState,children:a}),n[0]=a,n[1]=t):t=n[1],t}d2.LeadingVisual=d5,d2.Title=d6,d2.Description=d7,d2.SecondaryDescription=d8,d2.Metadata=d8,d2.Actions=d3,d2.Skeleton=d4,dZ.Header=dX,dZ.List=d0,dZ.Item=d2,dZ.EmptyState=d9,dZ.displayName="ListBlock",dX.displayName="ListBlock.Header",d0.displayName="ListBlock.List",d2.displayName="ListBlock.Item",d5.displayName="ListBlock.Item.LeadingVisual",d6.displayName="ListBlock.Item.Title",d7.displayName="ListBlock.Item.Description",d8.displayName="ListBlock.Item.Metadata",d3.displayName="ListBlock.Item.Actions",d4.displayName="ListBlock.Item.Skeleton",d9.displayName="ListBlock.EmptyState";try{dZ.displayName||(dZ.displayName="ListBlock")}catch{}let ue=()=>{let e,t,n,a,r=(0,d.c)(8),i=(0,b.jE)();r[0]!==i?(e={onSuccess:async()=>i.invalidateQueries({queryKey:ln.O6}),mutationFn:ut},r[0]=i,r[1]=e):e=r[1];let o=(0,C.n)(e);return r[2]!==o?({mutateAsync:t,...n}=o,r[2]=o,r[3]=t,r[4]=n):(t=r[3],n=r[4]),r[5]!==t||r[6]!==n?(a={createDefaultCopilotSpace:t,...n},r[5]=t,r[6]=n,r[7]=a):a=r[7],a};async function ut(e){let t={copilot_space:{}};t.copilot_space={owner_id:e.owner.id,owner_type:e.owner.type};let n=await (0,S.lS)("/copilot/spaces/default",{method:"POST",body:t}),a=await n.json();if(!n.ok)throw a.errorMessages;return a}function un(e){let t,n,a,r,i,o,s,l=(0,d.c)(26),{primary:u}=e,m=void 0!==u&&u,p=(0,rW.Z)(),{createDefaultCopilotSpace:h,isPending:f}=ue(),{data:g,isLoading:y,isError:x}=(0,j.I)({queryKey:["copilot-owners"],queryFn:async()=>{let e=await (0,S.lS)("/github-copilot/chat/custom_copilots_owners"),t=await e.json(),n=t?.owners;if(!e.ok||!n)throw Error("Failed to fetch owners");return n}});l[0]!==g?(t=void 0===g?[]:g,l[0]=g,l[1]=t):t=l[1];let v=t;l[2]!==h||l[3]!==f||l[4]!==p?(n=async e=>{if(!f&&e)try{let t=await h({owner:e}),n=(0,eL.Cb)(t);return p(n)}catch{throw Error("Failed to create space")}},l[2]=h,l[3]=f,l[4]=p,l[5]=n):n=l[5];let b=n;l[6]!==b?(a=(e,t)=>{t&&((0,eS.BI)("copilot-spaces.click",{target:"CREATE_SPACE",isDefault:e,owner:t.displayName}),b(t))},l[6]=b,l[7]=a):a=l[7];let C=a;if(x){let e,t=m?"primary":"default";return l[8]!==t?(e=(0,c.jsx)(aD.Q,{variant:t,disabled:!0,children:"Create space"}),l[8]=t,l[9]=e):e=l[9],e}let N=m?"primary":"default",w=f||y;return l[10]!==C||l[11]!==v[0]?(r=()=>C(!0,v[0]),l[10]=C,l[11]=v[0],l[12]=r):r=l[12],l[13]!==N||l[14]!==w||l[15]!==r?(i=(0,c.jsx)(aD.Q,{variant:N,loading:w,onClick:r,children:"Create space"}),l[13]=N,l[14]=w,l[15]=r,l[16]=i):i=l[16],l[17]!==C||l[18]!==y||l[19]!==f||l[20]!==v||l[21]!==m?(o=!f&&!y&&(0,c.jsxs)(ez.W,{children:[(0,c.jsx)(ez.W.Button,{"aria-label":"Select an owner",icon:_.TriangleDownIcon,variant:m?"primary":"default"}),(0,c.jsx)(ez.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",sx:{overflow:"auto"},children:(0,c.jsx)(eH.l,{children:(0,c.jsxs)(eH.l.Group,{sx:{maxHeight:350,overflow:"auto"},children:[(0,c.jsx)(eH.l.GroupHeading,{children:"Select owner"}),(0,c.jsx)(eH.l,{selectionVariant:"single",children:v.map(e=>{let{name:t,avatarUrl:n,displayName:a}=e;return(0,c.jsxs)(eH.l.Item,{onSelect:()=>C(!1,e),children:[(0,c.jsx)(eH.l.LeadingVisual,{children:(0,c.jsx)(np.r,{src:n})}),t,(0,c.jsx)(eH.l.Description,{children:a})]},t)})})]})})})]}),l[17]=C,l[18]=y,l[19]=f,l[20]=v,l[21]=m,l[22]=o):o=l[22],l[23]!==o||l[24]!==i?(s=(0,c.jsxs)(iq.A,{children:[i,o]}),l[23]=o,l[24]=i,l[25]=s):s=l[25],s}try{un.displayName||(un.displayName="CreateSpaceButton")}catch{}let ua={banner:"SpacesView-module__banner--fwXon",button:"SpacesView-module__button--TkcJp",counter:"SpacesView-module__counter--vNRTG",description:"SpacesView-module__description--jvOb1",filterButtons:"SpacesView-module__filterButtons--wdtfW",metadata:"SpacesView-module__metadata--juj8j",metadataItem:"SpacesView-module__metadataItem--zJqzM"};function ur(e){let t,n,a,r,i,o,s,l,u,m,p,h=(0,d.c)(31),{copilotSpace:f,onDelete:g,onClick:y}=e,x=f.ownerIsOrg?_.OrganizationIcon:_.PersonIcon,v="org_public"===f.visibility?_.PeopleIcon:_.LockIcon;h[0]!==f.visibility?(t=sY(f.visibility),h[0]=f.visibility,h[1]=t):t=h[1];let b=t;return h[2]!==f?(n=(0,eL.Cb)(f),h[2]=f,h[3]=n):n=h[3],h[4]!==f.name?(a=(0,c.jsx)(dZ.Item.Title,{children:f.name}),h[4]=f.name,h[5]=a):a=h[5],h[6]!==f.description?(r=(0,c.jsx)(dZ.Item.Description,{children:(0,c.jsx)("div",{className:ua.description,children:f.description})}),h[6]=f.description,h[7]=r):r=h[7],h[8]!==x?(i=(0,c.jsx)(x,{size:16}),h[8]=x,h[9]=i):i=h[9],h[10]!==f.owner||h[11]!==i?(o=(0,c.jsxs)("span",{className:ua.metadataItem,children:[i,f.owner]}),h[10]=f.owner,h[11]=i,h[12]=o):o=h[12],h[13]!==v?(s=(0,c.jsx)(v,{size:16}),h[13]=v,h[14]=s):s=h[14],h[15]!==s||h[16]!==b?(l=(0,c.jsxs)("span",{className:ua.metadataItem,children:[s,b]}),h[15]=s,h[16]=b,h[17]=l):l=h[17],h[18]!==o||h[19]!==l?(u=(0,c.jsx)(dZ.Item.Metadata,{children:(0,c.jsxs)("div",{className:ua.metadata,children:[o,l]})}),h[18]=o,h[19]=l,h[20]=u):u=h[20],h[21]!==f||h[22]!==g?(m=(0,c.jsx)(dZ.Item.Actions,{children:(0,c.jsx)(lO,{copilot:f,onDelete:g})}),h[21]=f,h[22]=g,h[23]=m):m=h[23],h[24]!==y||h[25]!==m||h[26]!==n||h[27]!==a||h[28]!==r||h[29]!==u?(p=(0,c.jsxs)(dZ.Item,{href:n,onClick:y,children:[a,r,u,m]}),h[24]=y,h[25]=m,h[26]=n,h[27]=a,h[28]=r,h[29]=u,h[30]=p):p=h[30],p}function ui(e){let t,n,a,r,i,o,s,l,u,m,p,h=(0,d.c)(52),{spaces:f,starredSpaces:g,isLoading:y,onDelete:v,onSpaceClick:_}=e,[b,j]=(0,x.useState)("personal"),C=g&&g.length>0;if(h[0]!==C?(t=()=>{C&&j("starred")},n=[C],h[0]=C,h[1]=t,h[2]=n):(t=h[1],n=h[2]),(0,x.useEffect)(t,n),h[3]!==b||h[4]!==C||h[5]!==y||h[6]!==v||h[7]!==_||h[8]!==f){let e,t,n,d,m,p,g,x,N,S,w=f?.filter(e=>"starred"===b?e.starred:"personal"===b?!e.ownerIsOrg:"org"!==b||e.ownerIsOrg),I=f?.length===0&&!y,k=f&&f.length>0&&w?.length===0&&!y;h[16]!==f?(e=f?.filter(ul).length??0,h[16]=f,h[17]=e):e=h[17];let T=e;h[18]!==f?(t=f?.filter(us).length??0,h[18]=f,h[19]=t):t=h[19];let E=t;h[20]!==f?(n=f?.filter(uo).length??0,h[20]=f,h[21]=n):n=h[21];let A=n;r=dZ,h[22]!==b||h[23]!==C||h[24]!==A?(d=C&&(0,c.jsxs)("button",{onClick:()=>j("starred"),role:"tab","aria-selected":"starred"===b,"aria-controls":"spaces-list",id:"starred-tab",className:ua.button,children:["Starred ",(0,c.jsx)("span",{className:ua.counter,children:A})]}),h[22]=b,h[23]=C,h[24]=A,h[25]=d):d=h[25],h[26]===Symbol.for("react.memo_cache_sentinel")?(m=()=>j("personal"),h[26]=m):m=h[26];let R="personal"===b;h[27]!==T?(p=(0,c.jsx)("span",{className:ua.counter,children:T}),h[27]=T,h[28]=p):p=h[28],h[29]!==R||h[30]!==p?(g=(0,c.jsxs)("button",{onClick:m,role:"tab","aria-selected":R,"aria-controls":"spaces-list",id:"personal-tab",className:ua.button,children:["Yours ",p]}),h[29]=R,h[30]=p,h[31]=g):g=h[31],h[32]===Symbol.for("react.memo_cache_sentinel")?(x=()=>j("org"),h[32]=x):x=h[32];let L="org"===b;h[33]!==E?(N=(0,c.jsx)("span",{className:ua.counter,children:E}),h[33]=E,h[34]=N):N=h[34],h[35]!==L||h[36]!==N?(S=(0,c.jsxs)("button",{onClick:x,role:"tab","aria-selected":L,"aria-controls":"spaces-list",id:"org-tab",className:ua.button,children:["Organizations ",N]}),h[35]=L,h[36]=N,h[37]=S):S=h[37],h[38]!==d||h[39]!==g||h[40]!==S?(u=(0,c.jsx)(dZ.Header,{children:(0,c.jsxs)("div",{role:"tablist","aria-label":"Filter spaces",className:ua.filterButtons,children:[d,g,S]})}),h[38]=d,h[39]=g,h[40]=S,h[41]=u):u=h[41],a=dZ.List,i=y,o="spaces-list",s=`${b}-tab`,l=I?(0,c.jsxs)(dZ.EmptyState,{children:[(0,c.jsx)("p",{children:"Set up once. Chat again and again."}),(0,c.jsx)(un,{})]}):k?(0,c.jsxs)(dZ.EmptyState,{children:[(0,c.jsx)("p",{children:"Organize discussions with your team."}),(0,c.jsx)(un,{})]}):w?.map(e=>(0,c.jsx)(ur,{copilotSpace:e,onDelete:()=>v(e),onClick:_},e.owner?`${e.owner}/${e.id}`:e.id)),h[3]=b,h[4]=C,h[5]=y,h[6]=v,h[7]=_,h[8]=f,h[9]=a,h[10]=r,h[11]=i,h[12]=o,h[13]=s,h[14]=l,h[15]=u}else a=h[9],r=h[10],i=h[11],o=h[12],s=h[13],l=h[14],u=h[15];return h[42]!==a||h[43]!==i||h[44]!==o||h[45]!==s||h[46]!==l?(m=(0,c.jsx)(a,{loading:i,id:o,"aria-labelledby":s,children:l}),h[42]=a,h[43]=i,h[44]=o,h[45]=s,h[46]=l,h[47]=m):m=h[47],h[48]!==r||h[49]!==u||h[50]!==m?(p=(0,c.jsxs)(r,{children:[u,m]}),h[48]=r,h[49]=u,h[50]=m,h[51]=p):p=h[51],p}function uo(e){return e.starred}function us(e){return e.ownerIsOrg}function ul(e){return!e.ownerIsOrg}function uc(e){let t,n,a,r,i,o,s,l,u,m,p,h,f,g,y=(0,d.c)(32),{copilotSpaces:v}=e,b=(0,em.Pk)(),j=(0,X.Zp)(),{ssoOrganizations:C}=b;y[0]!==C?(t=C.map(up),y[0]=C,y[1]=t):t=y[1];let N=t,[S,w]=(0,x.useState)(null),I=void 0===v;y[2]!==v?(n=v?.filter(um),y[2]=v,y[3]=n):n=y[3];let k=n;y[4]!==j?(a=()=>{j(eu.QT)},y[4]=j,y[5]=a):a=y[5];let T=a,{mutateAsync:E}=(0,eP.$7)();y[6]!==E?(r=async e=>{try{await E(e),w(null)}catch(e){w(e instanceof Error?e:Error(String(e)))}},y[6]=E,y[7]=r):r=y[7];let A=r;return y[8]===Symbol.for("react.memo_cache_sentinel")?(i=(0,c.jsx)(e9,{regionName:"Spaces"}),y[8]=i):i=y[8],y[9]!==T?(o=(0,c.jsx)(lW,{onCreateSpace:T}),y[9]=T,y[10]=o):o=y[10],y[11]!==S?(s=S&&(0,c.jsxs)(lN.A,{variant:"danger",children:[(0,c.jsx)(_.AlertIcon,{}),"There was a problem deleting your space."]}),y[11]=S,y[12]=s):s=y[12],y[13]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsx)(dU.Title,{children:"Spaces"}),u=(0,c.jsx)(dU.Description,{children:"A persistent space that remembers your code, files, and preferences across conversations."}),y[13]=l,y[14]=u):(l=y[13],u=y[14]),y[15]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsxs)(dU.Header,{children:[l,u,(0,c.jsx)(dU.Actions,{children:(0,c.jsx)(un,{primary:!0})})]}),y[15]=m):m=y[15],y[16]!==N||y[17]!==C.length?(p=C.length>0&&(0,c.jsx)("div",{className:ua.banner,children:(0,c.jsx)(aj.x,{protectedOrgs:N,redirectURI:ud})}),y[16]=N,y[17]=C.length,y[18]=p):p=y[18],y[19]!==v||y[20]!==A||y[21]!==T||y[22]!==I||y[23]!==k?(h=(0,c.jsx)(dU.Section,{children:(0,c.jsx)(ui,{spaces:v,starredSpaces:k,isLoading:I,onDelete:A,onSpaceClick:uu,onCreateSpace:T})}),y[19]=v,y[20]=A,y[21]=T,y[22]=I,y[23]=k,y[24]=h):h=y[24],y[25]!==p||y[26]!==h?(f=(0,c.jsxs)(dU.Container,{width:"medium",children:[m,p,h]}),y[25]=p,y[26]=h,y[27]=f):f=y[27],y[28]!==f||y[29]!==o||y[30]!==s?(g=(0,c.jsxs)(eF.t,{fallback:i,children:[o,s,f]}),y[28]=f,y[29]=o,y[30]=s,y[31]=g):g=y[31],g}function ud(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}function uu(){(0,eS.BI)("dotcom_chat.activate",{target:"SPACES_VIEW_SPACE_SELECTED",mode:"immersive"})}function um(e){return e.starred}function up(e){return e.login}try{ur.displayName||(ur.displayName="SpacesListItem")}catch{}try{ui.displayName||(ui.displayName="SpacesList")}catch{}try{uc.displayName||(uc.displayName="SpacesView")}catch{}function uh(){let e,t,n,a,r,i,o,s,l,u,m,p,h,f,g,y=(0,d.c)(43),v=(0,em.Pk)(),{customCopilots:_}=v,{reloadQuota:b}=(0,eA.xR)(),j=(0,x.useRef)(null),C=(0,eC.tZ)(),N=(0,ed.nu)((0,em.A3)("activePlugin")),S=(0,X.zy)(),w=(0,eP.BV)(),I=(0,eL.y_)(),k=w&&I;y[0]!==w||y[1]!==S?(e=w&&(0,eL.zY)(S),y[0]=w,y[1]=S,y[2]=e):e=y[2];let T=e;y[3]!==w||y[4]!==S?(t=w&&(0,eL.E1)(S),y[3]=w,y[4]=S,y[5]=t):t=y[5];let E=t,A=(0,eL.iI)(),R=z.W.spacesV3UI;(0,eP.e9)(w),y[6]!==b?(n=()=>{window.setTimeout(()=>{j.current?.focus()},1),b("new_thread_focus")},y[6]=b,y[7]=n):n=y[7];let L=n,P=(0,x.useRef)(null);y[8]===Symbol.for("react.memo_cache_sentinel")?(a=()=>!!P.current&&P.current.clientWidth<=1024,y[8]=a):a=y[8];let[D,O]=(0,x.useState)(a);y[9]===Symbol.for("react.memo_cache_sentinel")?(r=()=>P.current?P.current.clientWidth>1024&&(eR.J.getImmersiveSidebarCollapsedState()??!0):eR.J.getImmersiveSidebarCollapsedState()??!0,y[9]=r):r=y[9];let[M,B]=(0,x.useState)(r),[F,$]=(0,x.useState)(!1);y[10]!==D||y[11]!==M||y[12]!==F?(i=()=>{if(D)$(!F);else{let e=!M;B(e),eR.J.setImmersiveSidebarCollapsedState(e)}},y[10]=D,y[11]=M,y[12]=F,y[13]=i):i=y[13];let U=i;y[14]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{if(!P.current)return;let e=()=>{let e=P.current?.clientWidth;void 0!==e&&(e<=1024?O(!0):(O(!1),$(!1)))},t=new ResizeObserver(()=>{e()});return t.observe(P.current),e(),()=>{t.disconnect()}},y[14]=o):o=y[14],y[15]!==F?(s=[F],y[15]=F,y[16]=s):s=y[16],(0,x.useEffect)(o,s);let V=!D&&M,W=!!D&&F,H=(0,x.useRef)(null);y[17]===Symbol.for("react.memo_cache_sentinel")?(l=()=>!!H.current&&H.current.clientWidth<=1280,y[17]=l):l=y[17];let[q,G]=(0,x.useState)(l);y[18]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{if(!H.current)return;let e=()=>{let e=H.current?.clientWidth;void 0!==e&&e>0&&G(e<=1280)},t=new ResizeObserver(e);return t.observe(H.current),e(),()=>t.disconnect()},u=[],y[18]=u,y[19]=m):(u=y[18],m=y[19]),(0,x.useEffect)(m,u),function(){let e=(0,em.Pk)(),{referenceId:t,messageIndex:n}=function(){let e,t,n,a=(0,d.c)(6),r=(0,X.zy)();if(a[0]!==r.search){let n=new URLSearchParams(r.search);e=n.get("reference_id"),t=n.get("message_index"),a[0]=r.search,a[1]=e,a[2]=t}else e=a[1],t=a[2];let i=t,o=null;if(null!==i){let e=parseInt(i,10);isNaN(e)||(o=e)}return a[3]!==o||a[4]!==e?(n={referenceId:e,messageIndex:o},a[3]=o,a[4]=e,a[5]=n):n=a[5],n}(),[,a]=(0,X.ok)(),r=(0,x.useMemo)(()=>e.messages??[],[e.messages]),i=(0,x.useMemo)(()=>null!==n&&n>=0&&n<r.length?r[n]:null,[r,n]),o=(0,x.useMemo)(()=>i?.references??e.currentReferences??[],[i?.references,e.currentReferences]),s=(0,x.useMemo)(()=>t&&o.length?o.find(e=>(0,eu.Vb)(e)===t)??null:null,[t,o]),l=eM({messageIndex:n??r.length,messageId:i?.id,messageTimestamp:i?.createdAt});(0,x.useEffect)(()=>{s&&(l(s),a(e=>{let t=new URLSearchParams(e);return t.delete("reference_id"),t.delete("message_index"),t}))},[s,l,a])}();let K=!N&&q&&ie.fullscreenPreviewPane,Q=N?.fullscreenPreviewArea&&ie.fullscreenPluginPane;return y[20]!==K||y[21]!==Q?(p=(0,eD.$)(ie.container,K,Q),y[20]=K,y[21]=Q,y[22]=p):p=y[22],y[23]===Symbol.for("react.memo_cache_sentinel")?(h=(0,c.jsx)("span",{"data-favicon-override":"/favicons/favicon-copilot.svg"}),y[23]=h):h=y[23],y[24]!==N||y[25]!==A||y[26]!==_||y[27]!==V||y[28]!==W||y[29]!==L||y[30]!==U||y[31]!==T||y[32]!==E||y[33]!==q||y[34]!==D||y[35]!==k||y[36]!==S||y[37]!==C||y[38]!==v.selectedThreadID?(f=N?.PageComponent&&N?.matchPage?.(S)?(0,c.jsx)("div",{className:ie.main,children:(0,c.jsx)(uf,{plugin:N})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:ie.left,ref:P,hidden:q&&C,children:[T||E?null:(0,c.jsx)(sK,{isVisible:W,isPinned:V,isFloating:D,onNewThread:L,onToggle:U}),(0,c.jsx)("div",{className:ie.main,children:k?R?(0,c.jsx)(uc,{copilotSpaces:_}):(0,c.jsx)(dx,{copilotSpaces:_}):R&&A&&(T||E)?(0,c.jsx)(dG,{customCopilotId:A,selectedThreadID:v.selectedThreadID,textAreaRef:j}):T?(0,c.jsx)(dS,{}):E?(0,c.jsx)(du,{}):N?.ViewComponent&&N?.matchView?.(S)?(0,c.jsx)(ug,{plugin:N}):A?R?(0,c.jsx)(dG,{customCopilotId:A,selectedThreadID:v.selectedThreadID,textAreaRef:j}):(0,c.jsx)(lH,{customCopilotId:A,selectedThreadID:v.selectedThreadID,textAreaRef:j}):(0,c.jsx)(sA,{isMobile:q,textAreaRef:j},v.selectedThreadID)})]}),(0,c.jsx)("div",{className:(0,eD.$)(ie.previewPane,C&&ie.active),children:(0,c.jsx)("div",{className:(0,eD.$)(ie.viewer),children:(0,c.jsx)(rM,{returnFocusRef:j})})})]}),y[24]=N,y[25]=A,y[26]=_,y[27]=V,y[28]=W,y[29]=L,y[30]=U,y[31]=T,y[32]=E,y[33]=q,y[34]=D,y[35]=k,y[36]=S,y[37]=C,y[38]=v.selectedThreadID,y[39]=f):f=y[39],y[40]!==p||y[41]!==f?(g=(0,c.jsxs)("div",{className:p,"data-testid":"chat-layout","data-hpc":!0,ref:H,children:[h,f]}),y[40]=p,y[41]=f,y[42]=g):g=y[42],g}function uf(e){let t,n=(0,d.c)(4),{plugin:a}=e,r=(0,em.Pk)(),{PageComponent:i}=a;return n[0]!==i||n[1]!==a||n[2]!==r?(t=i?(0,c.jsx)(i,{chatState:r,plugin:a}):null,n[0]=i,n[1]=a,n[2]=r,n[3]=t):t=n[3],t}function ug(e){let t,n=(0,d.c)(6),{plugin:a}=e,r=(0,em.Pk)(),{closePreviewPane:i,openPreviewPane:o}=(0,eC.xx)(),{ViewComponent:s}=a;return n[0]!==s||n[1]!==i||n[2]!==o||n[3]!==a||n[4]!==r?(t=s?(0,c.jsx)(s,{chatState:r,closePreviewPane:i,openPreviewPane:o,plugin:a}):null,n[0]=s,n[1]=i,n[2]=o,n[3]=a,n[4]=r,n[5]=t):t=n[5],t}try{uh.displayName||(uh.displayName="Layout")}catch{}try{uf.displayName||(uf.displayName="PluginPageContent")}catch{}try{ug.displayName||(ug.displayName="PluginViewContent")}catch{}function uy(e){let t=(0,X.zy)(),n=ee.fV.pathname;return(!n||z.W.newThreadNavigate)&&(n=t.pathname),(0,x.useMemo)(()=>{let t=e.find(e=>e.routes?.some(e=>e.test(n)));return t?t.id:null},[n,e])}var ux=n(98013);let uv=(0,eh.E7)();function u_(){let e,t=(0,d.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(ej.RelayEnvironmentProvider,{environment:uv,children:(0,c.jsx)(ub,{})}),t[0]=e):e=t[0],e}function ub(){let e=(0,d.c)(2),t=(0,N.X)();if(t?.copilotChatSettingEnabled){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(uj,{children:(0,c.jsx)(uN,{})}),e[0]=t):t=e[0],t}{let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(eT,{}),e[1]=t):t=e[1],t}}function uj(e){let t,n,a,r,i,o,s=(0,d.c)(39),{children:l}=e,u=(0,N.X)(),m=rU(),p=u.requestedTopic;if((0,eu.P)(p)){let e,n;s[0]!==p?(e=(0,eu.UU)(p),s[0]=p,s[1]=e):e=s[1],s[2]!==e?(n={refs:[e],topic:void 0},s[2]=e,s[3]=n):n=s[3],t=n}else if(u.reference){let e,n;s[4]!==u.reference?(e=[u.reference],s[4]=u.reference,s[5]=e):e=s[5],s[6]!==p||s[7]!==e?(n={refs:e,topic:p},s[6]=p,s[7]=e,s[8]=n):n=s[8],t=n}else{let e,n;s[9]===Symbol.for("react.memo_cache_sentinel")?(e=[],s[9]=e):e=s[9],s[10]!==p?(n={refs:e,topic:p},s[10]=p,s[11]=n):n=s[11],t=n}let{refs:h,topic:f}=t;if(s[12]!==u.agentsEnabled||s[13]!==u.apiURL||s[14]!==u.graphqlApiUrl||s[15]!==u.previewUrl||s[16]!==u.realIp||s[17]!==u.ssoOrganizations){if(a=[],z.W.pipesPlugin){let e;s[19]!==u.apiURL||s[20]!==u.graphqlApiUrl||s[21]!==u.previewUrl||s[22]!==u.realIp||s[23]!==u.ssoOrganizations?(e=new ep.N(u.apiURL,u.graphqlApiUrl,u.ssoOrganizations.map(uC),u.previewUrl,u.realIp),s[19]=u.apiURL,s[20]=u.graphqlApiUrl,s[21]=u.previewUrl,s[22]=u.realIp,s[23]=u.ssoOrganizations,s[24]=e):e=s[24],a.push(e)}if(z.W.workbenchPlugin){let e;s[25]===Symbol.for("react.memo_cache_sentinel")?(e=new SparkPlugin,s[25]=e):e=s[25],a.push(e)}if(u.agentsEnabled){let e;s[26]===Symbol.for("react.memo_cache_sentinel")?(e=new AgentsPlugin,s[26]=e):e=s[26],a.push(e)}s[12]=u.agentsEnabled,s[13]=u.apiURL,s[14]=u.graphqlApiUrl,s[15]=u.previewUrl,s[16]=u.realIp,s[17]=u.ssoOrganizations,s[18]=a}else a=s[18];let g=uy(n=a);return s[27]!==l?(r=(0,c.jsx)(eC.BH,{children:l}),s[27]=l,s[28]=r):r=s[28],s[29]!==u||s[30]!==g||s[31]!==h||s[32]!==r||s[33]!==m||s[34]!==f?(i=(0,c.jsx)(em.Mj,{workerPath:u.searchWorkerFilePath,threadId:m,pluginId:g,refs:h,mode:"immersive",topic:f,ssoOrganizations:u.ssoOrganizations,copilotUpsellBannerDismissed:u.copilotUpsellBannerDismissed,copilotChatPayload:u,children:r}),s[29]=u,s[30]=g,s[31]=h,s[32]=r,s[33]=m,s[34]=f,s[35]=i):i=s[35],s[36]!==n||s[37]!==i?(o=(0,c.jsx)(ef.LB,{children:(0,c.jsx)(ed.Hb,{plugins:n,children:i})}),s[36]=n,s[37]=i,s[38]=o):o=s[38],o}function uC(e){return e.id}function uN(){let e,t,n,a=(0,d.c)(1);!function(){let e,t,n=(0,d.c)(7),a=rU(),r=(0,x.useRef)(!0),i=(0,x.useRef)(null),o=(0,h.b)(),{threads:s,selectedThreadID:l}=(0,em.Pk)(),c=rB(),{selectedThreadID:u,sharedThreadChannel:m}=(0,em.Pk)(),p=(0,h.b)();(0,ux.x)(m,()=>{p.fetchSharedThreadMessages(u)}),n[0]!==c||n[1]!==o||n[2]!==l||n[3]!==a||n[4]!==s?(e=()=>{if(r.current){r.current=!1,i.current=a,c?o.fetchSharedThreadMessages(l):o.fetchMessages(l);return}if(i.current!==a){if(i.current=a,a===l)return;let e=a&&s?.get(a);o.selectThread(e||null,{includeThreads:!1,clearTopic:!0})}},t=[o,a,s,l,c],n[0]=c,n[1]=o,n[2]=l,n[3]=a,n[4]=s,n[5]=e,n[6]=t):(e=n[5],t=n[6]),(0,x.useEffect)(e,t)}(),function(){let e,t,n=(0,d.c)(8),{selectedThreadID:a}=(0,em.Pk)(),r=(0,ed.nu)((0,em.A3)("activePlugin")),i=(0,ow.M)((0,X.Zp)());n[0]!==i||n[1]!==r?.skipSyncRouteToThread||n[2]!==a?(e=()=>{if(!a||r?.skipSyncRouteToThread)return;let e=`${eu.Jz}/c/${a}`,t=`${eu.Jz}/share/${a}`,n=window.location.pathname;n.startsWith(e)||n.startsWith(t)||i.current(e)},n[0]=i,n[1]=r?.skipSyncRouteToThread,n[2]=a,n[3]=e):e=n[3];let o=r?.skipSyncRouteToThread;n[4]!==i||n[5]!==a||n[6]!==o?(t=[i,o,a],n[4]=i,n[5]=a,n[6]=o,n[7]=t):t=n[7],(0,x.useEffect)(e,t)}();let r=(0,d.c)(3),i=(0,h.b)();return r[0]!==i?(t=()=>{let e=()=>{window.location.href.includes("/r/")?(i.showTopicPicker(!1),i.selectThread(null)):window.location.href.includes("/c/")||(i.showTopicPicker(!0),i.selectThread(null))};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},n=[i],r[0]=i,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,x.useEffect)(t,n),!function(){let e,t,n=(0,d.c)(6),a=uy((0,ed.qw)()),r=rU(),{activePlugin:i}=(0,em.bP)("activePlugin"),o=(0,h.b)();n[0]!==i||n[1]!==o||n[2]!==a||n[3]!==r?(e=()=>{r||(i??null)!==a&&o.selectPlugin(a)},t=[i,o,a,r],n[0]=i,n[1]=o,n[2]=a,n[3]=r,n[4]=e,n[5]=t):(e=n[4],t=n[5]),(0,x.useEffect)(e,t)}(),a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(uh,{}),a[0]=e):e=a[0],e}try{u_.displayName||(u_.displayName="CopilotImmersive")}catch{}try{ub.displayName||(ub.displayName="CopilotImmersiveNoRelay")}catch{}try{uj.displayName||(uj.displayName="CopilotImmersiveProviders")}catch{}try{uN.displayName||(uN.displayName="Immersive")}catch{}(0,l.o)("copilot-immersive-v1",()=>({App:u,routes:[(0,s.a)({path:"/copilot",Component:u_,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/c/:threadID",Component:u_,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/d/:docsetName",Component:u_}),(0,s.a)({path:"/copilot/r/:owner/:repository",Component:u_}),(0,s.a)({path:"/copilot/share/:threadID",Component:u_}),(0,s.a)({path:"/copilot/loop/share",Component:u_,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/loops",Component:u_,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/l/:loopID",Component:u_,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/workbench",Component:u_,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/spark",Component:u_,transitionType:o.E.TRANSITION_WITHOUT_FETCH}),(0,s.a)({path:"/copilot/spaces",Component:u_}),(0,s.a)({path:"/copilot/spaces/:spaceID",Component:u_}),(0,s.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:u_}),(0,s.a)({path:"/copilot/spaces/:owner/:spaceNumber/edit",Component:u_}),(0,s.a)({path:"/copilot/spaces/:spaceID/edit",Component:u_}),(0,s.a)({path:"/copilot/spaces/new",Component:u_}),(0,s.a)({path:"/copilot/agents",Component:u_})]}))},84464:(e,t,n)=>{n.d(t,{B:()=>i});var a=n(21728),r=n(96540);function i(e){let t,n,i,o=(0,a.c)(4),[s,l]=(0,r.useState)(e);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>l(!0),o[0]=t):t=o[0];let c=t;o[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>l(!1),o[1]=n):n=o[1];let d=n;return o[2]!==s?(i=[s,c,d],o[2]=s,o[3]=i):i=o[3],i}},67621:(e,t,n)=>{n.d(t,{K:()=>o});var a=n(21728),r=n(17515),i=n(96540);let o=e=>{let t,n,o,s=(0,a.c)(4),l=(0,i.useRef)(e);return s[0]!==e?(t=()=>{l.current=e},n=[e],s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,r.N)(t,n),s[3]===Symbol.for("react.memo_cache_sentinel")?(o=(...e)=>l.current?.(...e),s[3]=o):o=s[3],o}},28120:(e,t,n)=>{n.d(t,{N:()=>PipesPlugin});var a,r,i,o,s=n(74848),l=n(21728),c=n(96540),d=n(34164),u=n(58748),m=n(87330),p=n(38621),h=n(34901),f=n(38007),g=n(27314),y=n(78075);let x={canvasContainer:"Canvas-module__canvasContainer--DcP1I",canvasGraph:"Canvas-module__canvasGraph--oUp5H",diagram:"Canvas-module__diagram--HYI6K",gridPattern:"Canvas-module__gridPattern--CD_S7",nodesOverlay:"Canvas-module__nodesOverlay--oHrnE",nodeWrapper:"Canvas-module__nodeWrapper--jkBOV"};function v(e){return"text"===e.type}function _(...e){}function b(...e){}let j=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,C=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function N(e){return[{role:"system",content:C},{role:"user",content:e.content}]}let S={range:{name:"Range",description:"A numeric value within a specified range",icon:p.NumberIcon},text:{name:"Text",description:"Free form text input",icon:p.TypographyIcon},boolean:{name:"Boolean",description:"True or false value",icon:p.CheckIcon},select:{name:"Select",description:"Choose from a list of predefined options",icon:p.ListUnorderedIcon},date:{name:"Date",description:"Date or macro",icon:p.CalendarIcon},file:{name:"File",description:"Upload and reference a file",icon:p.FileIcon}};function w(e,t){return(S[e.inputType.type]??S.text)[t]}function I(e){return e.content}function k(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function T(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||A(t)===e)}function E(e){return e.startsWith("@")&&!k(e)?null:k(e)?function(e){if(!k(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,a,r,i]=n;if(!a||!r||!i)return{date:null,error:`Invalid macro format: ${e}`};let o=parseInt(r,10),s="+"===a,l=new Date(t);switch(i){case"d":l.setDate(l.getDate()+(s?o:-o));break;case"w":l.setDate(l.getDate()+(s?7*o:-(7*o)));break;case"m":l.setMonth(l.getMonth()+(s?o:-o));break;case"y":l.setFullYear(l.getFullYear()+(s?o:-o));break;default:return{date:null,error:`Invalid unit: ${i}`}}return{date:l}}(e).date:T(e)?new Date(e):null}function A(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let PromptNodeHandler=class PromptNodeHandler{async execute(e,t){let n=await N(e),a="";for await(let r of t.chatClient.getChatCompletion(n,e.model,t.signal))a+=r,t.onPartialResult?.(a);return a}constructor(){R(this,"type","prompt"),R(this,"metadata",{contentFields:["content"],icon:()=>p.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n=await t.graphQLClient.getGraphQLResponse(e.content,t.signal);return n?.data??null}constructor(){R(this,"type","github-graphql"),R(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>p.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",featureFlag:"copilot_pipes_github_graphql_nodes",outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){return I(e)}constructor(){R(this,"type","code"),R(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>p.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",featureFlag:"copilot_pipes_react_nodes",outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return I(e)}constructor(){R(this,"type","visualize"),R(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>p.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",featureFlag:"copilot_pipes_react_nodes"})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){if("date"===e.inputType.type&&k(e.content)){let t=E(e.content);if(t)return A(t)}return I(e)}constructor(){R(this,"type","text"),R(this,"metadata",{type:"text",contentFields:["content"],icon:e=>e&&v(e)?w(e,"icon"):p.TypographyIcon,description:e=>e&&v(e)?w(e,"description"):"Input for nodes",label:e=>e&&v(e)?w(e,"name"):"Input",color:"blue"})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return I(e)}constructor(){R(this,"type","loop"),R(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>p.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",featureFlag:"copilot_pipes_pipeline_nodes",outputLabel:"Pipeline output",isExecutable:!0})}};let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){this.handlers.set(e.type,e)}async executeNode(e,t){let n=this.handlers.get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}getMetadata(e){let t=this.handlers.get(e);return t?.metadata}getAllMetadata(){return Array.from(this.handlers.values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from(this.handlers.keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"handlers",new Map),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let L=new NodeHandlerRegistry,P=e=>{let t={nodes:new Map,edges:[],layers:[]};if(!e.nodes)return t;for(let n of e.nodes){if(!n?.id)continue;let e=O(n.id);t.nodes.set(e,n)}for(let n of e.nodes)for(let e of D(n)){let a=O(e);n?.id&&a&&t.edges.push({from:a,to:n.id})}let n=function(e){let t={},n=new Set,a=(r,i=0)=>{try{if(n.has(r))throw Error(`Potential cycle detected at node ${r}`);if(n.add(r),i>100)return _(`Maximum recursion depth reached for node ${r}`),0;if(void 0!==t[r])return t[r];let o=e.nodes.get(r);if(!o)return t[r]=0,0;let s=D(o);if(s&&0!==s.size){let e=[...s].map(e=>{let t=O(e);return a(t,i+1)});t[r]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===r).map(e=>e.to);0===n.length?t[r]=-1:t[r]=1}return t[r]}finally{n.delete(r)}};for(let[n]of e.nodes)if(!t[n])try{a(n)}catch(e){t[n]=0}let r=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=r);let i=[];for(let[n,a]of Object.entries(t)){let t=e.nodes.get(n);t&&(i[a]||(i[a]=[]),i[a].push(t))}return i.filter(Boolean)}(t);return t.layers=n,t};function D(e){let t=j();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function O(e){return e.match(/^[^|.]+/)?.[0]??e}let M=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:L.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.inputType=function(e){if(v(e))return S[e.inputType.type]?e.inputType:{type:"text"}}(e)||{type:"text"}),"string"!=typeof n.content&&(n.content=""),"loop"===n.type){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>v(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},B=(e,t)=>({...e,nodes:(e.nodes||[]).map(e=>M(e,t)).filter(e=>null!==e)});function F(e){let t=P(e);return e.nodes.filter(e=>{var n,a;return n=e,!(a=t).edges.some(e=>e.from===n.id)&&a.edges.some(e=>e.to===n.id)})}var $=n(11303);function U(e,t){return{...e,uiState:function(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};default:return e}}(e.uiState,t)}}var V=n(58779),z=n(17515);let W={uiState:{focusedNodeId:null,hoveredNodeId:null}},H=(0,c.createContext)(new $.Lj(W)),q=(0,c.createContext)(()=>{});function G({children:e}){let[t,n]=(0,c.useReducer)(U,W),a=(0,V.AI)(t);(0,z.N)(()=>{a.value=t},[t,a]);let r=(0,c.useCallback)(e=>{n(e)},[n]);return(0,s.jsx)(H.Provider,{value:a,children:(0,s.jsx)(q.Provider,{value:r,children:e})})}function K(e){let t=(0,c.useContext)(H);if(!t)throw Error("usePipesStateLens can only be used inside a PipesProvider");let n=(0,V.Sk)(t,e);return(0,V.HN)(n)}function Q(){return(0,c.useContext)(q)}try{H.displayName||(H.displayName="PipesStateContext")}catch{}try{q.displayName||(q.displayName="PipesDispatchContext")}catch{}try{G.displayName||(G.displayName="PipesStateProvider")}catch{}let J={edgeBackground:"CompactStyleEdge-module__edgeBackground--jKsRj",edge:"CompactStyleEdge-module__edge--fynPR",edgeDefault:"CompactStyleEdge-module__edgeDefault--UXQph",edgeCompleted:"CompactStyleEdge-module__edgeCompleted--M5O4j",edgeError:"CompactStyleEdge-module__edgeError--vDcBp",edgeCompletedAddOn:"CompactStyleEdge-module__edgeCompletedAddOn--mtyH1",edgeAddon:"CompactStyleEdge-module__edgeAddon--XQPi4",edgeIdleAddon:"CompactStyleEdge-module__edgeIdleAddon--cnjTs",edgeProcAddon:"CompactStyleEdge-module__edgeProcAddon--Ll2xI"};var Y=n(97286),Z=n(85647);let X=(0,c.createContext)(null),ee=X.Provider;function et(){let e=(0,c.useContext)(X);if(!e)throw Error("usePipesService must be used inside a PipesServiceProvider");return e}try{X.displayName||(X.displayName="PipesServiceContext")}catch{}let en=[{id:"dummy-1",dummy:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:"2025-01-01T00:00:00Z",nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",inputType:{type:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",inputType:{type:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",description:"Document this function so it's easy to understand",updatedAt:"2025-01-01T00:00:00Z",nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",inputType:{type:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",inputType:{type:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",inputType:{type:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",description:"Generate a course teaching me how this code works",updatedAt:"2025-01-01T00:00:00Z",nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",inputType:{type:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",description:"Generate and validate potential names for your app",updatedAt:"2025-01-01T00:00:00Z",nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",inputType:{type:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",description:"Generate a wiki article on a topic or question",updatedAt:"2025-01-01T00:00:00Z",nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",inputType:{type:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",inputType:{type:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",description:"Compare the performance of two prompts",updatedAt:"2025-01-01T00:00:00Z",nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",inputType:{type:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]}],ea="loop";function er(e,t){let n,a,r,i,o=(0,l.c)(14),s=void 0===e?"draft":e,{loopID:c}=(0,Z.g)(),d=et();o[0]!==c||o[1]!==s?(n=[ea,c,s],o[0]=c,o[1]=s,o[2]=n):n=o[2],o[3]!==c||o[4]!==d||o[5]!==s?(a=async()=>{if(!c)return null;let e=en.find(e=>e.id===c)??null;return e||await d.getLoop(c,s)},o[3]=c,o[4]=d,o[5]=s,o[6]=a):a=o[6];let u=!!c;return o[7]!==t?(r=t&&{select:t},o[7]=t,o[8]=r):r=o[8],o[9]!==n||o[10]!==a||o[11]!==u||o[12]!==r?(i={queryKey:n,queryFn:a,enabled:u,...r,staleTime:3e5},o[9]=n,o[10]=a,o[11]=u,o[12]=r,o[13]=i):i=o[13],(0,Y.I)(i)}function ei(e){let t=(0,l.c)(2),{data:n}=er("draft",e);if(void 0===n){let n;return t[0]!==e?(n=e(void 0),t[0]=e,t[1]=n):n=t[1],n}return n}let eo={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue"};function es(e){let t=function(e){let t=[];for(let n of("string"!=typeof e.title&&t.push({error:"Pipeline is missing a title",errorType:eo.MissingProperty,involvedNodes:[]}),Array.isArray(e.nodes)&&0!==e.nodes.length||t.push({error:"Pipeline has no nodes",errorType:eo.MissingProperty,involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",errorType:eo.MissingProperty,involvedNodes:[e.id]}),"text"===e.type&&(t=t.concat(function(e){let t=[],n=e.inputType;if("object"!=typeof n||!n)return t.push({error:"inputType is required for text nodes",errorType:eo.MissingProperty,involvedNodes:[e.id]}),t;switch(n.type){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',errorType:eo.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof n.min&&t.push({error:"A range input must have a min",errorType:eo.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof n.max&&t.push({error:"A range input must have a max",errorType:eo.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(n.options)&&0!==n.options.length?n.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",errorType:eo.InvalidSelectValue,involvedNodes:[e.id]}):t.push({error:"A select input must have options",errorType:eo.InvalidSelectValue,involvedNodes:[e.id]});break;case"file":["pdf","video","image","audio","document","code","other"].includes(n.fileType)||t.push({error:`Invalid file type ${n.fileType}`,errorType:eo.InvalidFileType,involvedNodes:[e.id]});break;case"text":e.content||t.push({error:"Input needs a value",errorType:eo.EmptyInputValue,involvedNodes:[e.id]})}return t}(e))),t}(n));return t}(e),n=P(e);for(let a of n.edges){let n=e.nodes.find(e=>e.id===a.from),r=e.nodes.find(e=>e.id===a.to);n&&r||t.push({error:`Node ${a.to} references a nonexistent node {{${a.from}}}`,errorType:eo.NonexistentNode,involvedNodes:[a.to]})}let a=function(e){let t=new Set,n=new Set,a=[],r=i=>{if(n.has(i)){let e=a.indexOf(i);return a.slice(e)}if(t.has(i))return null;for(let o of(t.add(i),n.add(i),a.push(i),e.edges))if(o.from===i){let e=r(o.to);if(e)return e}return n.delete(i),a.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=r(n.id);if(e)return e}return null}(n);if(a&&a.length>0){let e=[...a,a[0]];t.push({error:`Pipeline contains a cycle: ${e.join(" \u2192 ")}`,errorType:eo.CycleDetected,involvedNodes:a})}let r=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],a=new Set,r=(t,n)=>{for(let i of(a.add(t),n.add(t),e.edges))i.from!==t||a.has(i.to)||r(i.to,n),i.to!==t||a.has(i.from)||r(i.from,n)};for(let e of t)if(!a.has(e.id)){let t=new Set;r(e.id,t),n.push(t)}if(n.length<=1)return[];let i=n.reduce((e,t)=>t.size>e.size?t:e,new Set),o=[];for(let e of t)i.has(e.id)||o.push(e.id);return o}(n);return r.length>0&&t.push({error:`Pipeline contains unreachable nodes: ${r.join(", ")}`,errorType:eo.DisconnectedNode,involvedNodes:r}),t}function el(){let e,t=(0,l.c)(3),{data:n}=er();e:{let a;if(!n){let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],t[0]=n):n=t[0],e=n;break e}t[1]!==n?(a=es(n),t[1]=n,t[2]=a):a=t[2],e=a}return e}function ec(e){return e.error}function ed(e){let t,n=(0,l.c)(5),a=el();if(n[0]!==e||n[1]!==a){let r;n[3]!==e?(r=t=>!e||t.involvedNodes.includes(e),n[3]=e,n[4]=r):r=n[4],t=a.some(r),n[0]=e,n[1]=a,n[2]=t}else t=n[2];return t}function eu(){let e=ei(e=>e?.nodes?.map(e=>e.id)?.join("|"));return e?.split("|")??[]}function em(e){return!!e?.startedAt&&!e?.completedAt}function ep(e){return!!e&&Object.values(e.nodes).some(em)}let eh=(e,t)=>{let n,a=(0,l.c)(4),r=eu();return a[0]!==e||a[1]!==t||a[2]!==r?(n=ef(e,t,r),a[0]=e,a[1]=t,a[2]=r,a[3]=n):n=a[3],n};function ef(e,t,n){return["execution",e,t,n.join("|")]}function eg(e){let t,n,a,r,i=(0,l.c)(14),o=ei(ey),s=et(),c=eu();i[0]!==o||i[1]!==c?(t=ef(o,"draft",c),i[0]=o,i[1]=c,i[2]=t):t=i[2],i[3]!==o||i[4]!==c||i[5]!==s?(n=async()=>{if(!o)return null;let e=await s.getExecution(o);if(!e)return null;let t=Object.keys(e.nodes).sort(),n=[...c].sort(),a=t.every(e=>n.includes(e)),r=s.isExecutionRunning(e.id)===ep(e);return a&&r?e:null},i[3]=o,i[4]=c,i[5]=s,i[6]=n):n=i[6];let d=!!o;return i[7]!==e?(a=e&&{select:e},i[7]=e,i[8]=a):a=i[8],i[9]!==t||i[10]!==n||i[11]!==d||i[12]!==a?(r={queryKey:t,queryFn:n,enabled:d,...a,staleTime:3e5},i[9]=t,i[10]=n,i[11]=d,i[12]=a,i[13]=r):r=i[13],(0,Y.I)(r)}function ey(e){return e?.id}let ex=(e,t)=>t?.nodes.find(t=>t.id===e);function ev(e){return ei(t=>ex(e,t))}function e_(e){let{data:t}=eg(t=>t?.nodes[e]?.value??null);return t??null}function eb(e){let{data:t}=eg(t=>em(t?.nodes[e]));return t??!1}function ej(){let{data:e}=eg(ep);return e??!1}var eC=n(30391);let eN=e=>{let t,n,a,r,i,o,u,m,p,h,f,g,y,x,v,_,b,j=(0,l.c)(47),{path:C,source:N,target:S}=e,w=(0,c.useId)(),I=(0,eC.DP)(),k=function(e,t){let n=el(),{data:a}=eg(a=>{if(!e||!t||!a)return"IDLE";let r=a.nodes[e],i=em(a.nodes[t]),o=!!r?.value,s=em(r),l=!!r?.error,c=n.some(t=>t.involvedNodes.includes(e));return l||c?"ERROR":i?"PROCESSING":o&&!s?"COMPLETED":"IDLE"});return a?.toUpperCase()??"IDLE"}(N,S),T=`mask-${w}`,E=`path-${w}`,A=`idle-grad-${w}`,R=`proc-grad-${w}`,L=I.colorScheme?.includes("dark")||I.colorScheme?.includes("night")?"#CCC":"#333";t=`${1+2*Math.random()}s`,j[0]!==A||j[1]!==R||j[2]!==T||j[3]!==C||j[4]!==E||j[5]!==k?(n=()=>"IDLE"===k||"PROCESSING"===k?(0,s.jsx)("g",{mask:`url(#${T})`,className:(0,d.$)(J.edgeAddon,"IDLE"===k&&J.edgeIdleAddon,"PROCESSING"===k&&J.edgeProcAddon),children:(0,s.jsx)("circle",{r:"IDLE"===k?25:30,fill:`url(#${"IDLE"===k?A:R})`,children:(0,s.jsx)("animateMotion",{rotate:"auto",dur:"IDLE"===k?"6s":"2s",begin:"IDLE"===k?t:"0s",repeatCount:"indefinite",children:(0,s.jsx)("mpath",{href:`#${E}`})})})}):"COMPLETED"===k?(0,s.jsx)("path",{d:C,strokeWidth:2,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",className:J.edgeCompletedAddOn}):void 0,j[0]=A,j[1]=R,j[2]=T,j[3]=C,j[4]=E,j[5]=k,j[6]=n):n=j[6];let P=n;j[7]!==L?(a=(0,s.jsx)("stop",{stopColor:L,stopOpacity:"0",offset:"0%"}),r=(0,s.jsx)("stop",{stopColor:L,stopOpacity:"0.6",offset:"100%"}),j[7]=L,j[8]=a,j[9]=r):(a=j[8],r=j[9]),j[10]!==A||j[11]!==a||j[12]!==r?(i=(0,s.jsxs)("linearGradient",{id:A,x1:"0%",x2:"100%",y1:"0%",y2:"0%",children:[a,r]}),j[10]=A,j[11]=a,j[12]=r,j[13]=i):i=j[13],j[14]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)("stop",{stopColor:"#007bff",stopOpacity:"0",offset:"0%"}),u=(0,s.jsx)("stop",{stopColor:"#007bff",stopOpacity:"1",offset:"100%"}),j[14]=o,j[15]=u):(o=j[14],u=j[15]),j[16]!==R?(m=(0,s.jsxs)("linearGradient",{id:R,x1:"0%",x2:"100%",y1:"0%",y2:"0%",children:[o,u]}),j[16]=R,j[17]=m):m=j[17];let D="PROCESSING"===k?2.5:1.5;j[18]!==C||j[19]!==D?(p=(0,s.jsx)("path",{d:C,stroke:"white",strokeWidth:D,fill:"none",strokeLinecap:"round"}),j[18]=C,j[19]=D,j[20]=p):p=j[20],j[21]!==T||j[22]!==p?(h=(0,s.jsx)("mask",{id:T,children:p}),j[21]=T,j[22]=p,j[23]=h):h=j[23],j[24]!==h||j[25]!==i||j[26]!==m?(f=(0,s.jsxs)("defs",{children:[i,m,h]}),j[24]=h,j[25]=i,j[26]=m,j[27]=f):f=j[27];let O=`${E}-bg`;j[28]===Symbol.for("react.memo_cache_sentinel")?(g=(0,d.$)(J.edgeBackground),j[28]=g):g=j[28],j[29]!==C||j[30]!==O?(y=(0,s.jsx)("path",{d:C,id:O,className:g,strokeWidth:4,fill:"none","aria-hidden":"true"}),j[29]=C,j[30]=O,j[31]=y):y=j[31];let M=("IDLE"===k||"PROCESSING"===k)&&J.edgeDefault,B="ERROR"===k&&J.edgeError,F="COMPLETED"===k&&J.edgeCompleted;return j[32]!==M||j[33]!==B||j[34]!==F?(x=(0,d.$)(J.edge,M,B,F),j[32]=M,j[33]=B,j[34]=F,j[35]=x):x=j[35],j[36]!==C||j[37]!==E||j[38]!==x?(v=(0,s.jsx)("path",{d:C,id:E,className:x,strokeWidth:2,fill:"none"}),j[36]=C,j[37]=E,j[38]=x,j[39]=v):v=j[39],j[40]!==P?(_=P(),j[40]=P,j[41]=_):_=j[41],j[42]!==f||j[43]!==y||j[44]!==v||j[45]!==_?(b=(0,s.jsxs)("g",{children:[f,y,v,_]}),j[42]=f,j[43]=y,j[44]=v,j[45]=_,j[46]=b):b=j[46],b};try{eN.displayName||(eN.displayName="CompactStyleEdge")}catch{}var eS=n(73451),ew=n(9591),eI=n(55847),ek=n(15385),eT=n(10569),eE=n(2724),eA=n(60183);function eR(e,t){return e?{...e,nodes:[...e.nodes||[],t],updatedAt:new Date().toISOString()}:e}function eL(e,t,n){if(!e)return e;let a=e.nodes.findIndex(e=>e.id===t);if(-1===a)return eR(e,{id:t,type:"text",title:"",description:"",content:"",...n});{let t=e.nodes[a];return{...e,nodes:[...e.nodes.slice(0,a),{...t,...n},...e.nodes.slice(a+1)],updatedAt:new Date().toISOString()}}}var eP=n(97665),eD=n(94747),eO=n(44263);let eM="all-loops";function eB(){let e,t,n,a,r,i=(0,l.c)(13),o=(0,eP.jE)(),s=et();i[0]!==s?(e=async e=>{let{loopID:t,updateFn:n}=e;return await s.updateLoop(t,n)},i[0]=s,i[1]=e):e=i[1],i[2]!==o?(t=(e,t)=>{let{loopID:n}=t;e.success&&(o.invalidateQueries({queryKey:[ea,n,"draft"]}),o.invalidateQueries({queryKey:[eM,"draft"]}))},i[2]=o,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n={mutationFn:e,onSuccess:t},i[4]=e,i[5]=t,i[6]=n):n=i[6];let c=(0,eD.n)(n),d=(0,eO.d)(c.mutate,500);i[7]!==d||i[8]!==o?(a=async(e,t)=>{let{loopID:n,updateFn:a}=e;await o.cancelQueries({queryKey:[ea,n,"draft"]});let r=a(o.getQueryData([ea,n,"draft"])??null);return o.setQueryData([ea,n,"draft"],r),d({loopID:n,updateFn:a}),t?.onSuccess?.(),r},i[7]=d,i[8]=o,i[9]=a):a=i[9];let u=a;return i[10]!==u||i[11]!==c?(r={...c,mutate:u},i[10]=u,i[11]=c,i[12]=r):r=i[12],r}function eF(){let{data:e}=er(),{mutate:t,isPending:n}=eB(),a=Q(),r=(e,n)=>{e&&t({loopID:e.id,updateFn:()=>e},{onSuccess:n})};return{addNode:t=>{if(e)r(eR(e,t),()=>a({type:"FOCUS_NODE",nodeId:t.id}))},removeNode:t=>{if(e)r(e?{...e,nodes:e.nodes.filter(e=>e.id!==t),updatedAt:new Date().toISOString()}:e,()=>a({type:"FOCUS_NODE",nodeId:null}))},updateNode:(t,n)=>{e&&r(eL(e,t,n))},updateNodeContent:(t,n)=>{e&&r(e?eL(e,t,{content:n}):e)},updateLoop:e=>{r(e)},isPending:n}}let e$={dialog:"AddNodeButton-module__dialog--VIkba",dialogBody:"AddNodeButton-module__dialogBody--cBxuf",input:"AddNodeButton-module__input--mMt1v"};function eU(e){let t,n,a,r,i,o,d,u,m,p,h,f=(0,l.c)(25),{onClose:g,onConfirm:y,inputType:x}=e,[v,_]=(0,c.useState)(""),[b,j]=(0,c.useState)("");return f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(eS.A.Label,{children:"Node Title"}),f[0]=t):t=f[0],f[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>_(e.target.value),f[1]=n):n=f[1],f[2]!==v?(a=(0,s.jsxs)(eS.A,{children:[t,(0,s.jsx)(ew.A,{className:e$.input,value:v,onChange:n,placeholder:"New node"})]}),f[2]=v,f[3]=a):a=f[3],f[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)(eS.A.Label,{children:"Node Description"}),f[4]=r):r=f[4],f[5]===Symbol.for("react.memo_cache_sentinel")?(i=e=>j(e.target.value),f[5]=i):i=f[5],f[6]!==b?(o=(0,s.jsxs)(eS.A,{children:[r,(0,s.jsx)(ew.A,{className:e$.input,value:b,onChange:i,placeholder:"New node description"})]}),f[6]=b,f[7]=o):o=f[7],f[8]!==a||f[9]!==o?(d=(0,s.jsxs)(eE.l.Body,{className:e$.dialogBody,children:[a,o]}),f[8]=a,f[9]=o,f[10]=d):d=f[10],f[11]!==g?(u=(0,s.jsx)(eI.Q,{onClick:g,children:"Cancel"}),f[11]=g,f[12]=u):u=f[12],f[13]!==b||f[14]!==x||f[15]!==y||f[16]!==v?(m=(0,s.jsx)(eI.Q,{onClick:()=>y(v,b,x),variant:"primary",children:"Confirm"}),f[13]=b,f[14]=x,f[15]=y,f[16]=v,f[17]=m):m=f[17],f[18]!==u||f[19]!==m?(p=(0,s.jsxs)(eE.l.Footer,{children:[u,m]}),f[18]=u,f[19]=m,f[20]=p):p=f[20],f[21]!==g||f[22]!==p||f[23]!==d?(h=(0,s.jsxs)(eE.l,{title:"Add Node",onClose:g,className:e$.dialog,children:[d,p]}),f[21]=g,f[22]=p,f[23]=d,f[24]=h):h=f[24],h}function eV(e){let t,n,a,r,i=(0,l.c)(12),{inputType:o,onSelect:c}=e,d=S[o],u=d.icon;return i[0]!==o||i[1]!==c?(t=()=>c(o),i[0]=o,i[1]=c,i[2]=t):t=i[2],i[3]!==u?(n=(0,s.jsx)(ek.l.LeadingVisual,{children:(0,s.jsx)(u,{})}),i[3]=u,i[4]=n):n=i[4],i[5]!==d.description?(a=(0,s.jsx)(ek.l.Description,{variant:"block",children:d.description}),i[5]=d.description,i[6]=a):a=i[6],i[7]!==d.name||i[8]!==t||i[9]!==n||i[10]!==a?(r=(0,s.jsxs)(ek.l.Item,{onSelect:t,children:[n,d.name,a]}),i[7]=d.name,i[8]=t,i[9]=n,i[10]=a,i[11]=r):r=i[11],r}function ez(e){let t,n,a,r,i,o,c,d=(0,l.c)(36),{nodeType:u,onSelect:m,onTextInputTypeSelect:p}=e;d[0]!==u?(t=u.icon(),d[0]=u,d[1]=t):t=d[1];let h=t;if("text"===u.type){let e,t,n,a,r,i,o,l;return d[2]!==h?(e=(0,s.jsx)(ek.l.LeadingVisual,{children:(0,s.jsx)(h,{})}),d[2]=h,d[3]=e):e=d[3],d[4]!==u?(t=u.label(),d[4]=u,d[5]=t):t=d[5],d[6]!==u?(n=u.description(),d[6]=u,d[7]=n):n=d[7],d[8]!==n?(a=(0,s.jsx)(ek.l.Description,{variant:"block",children:n}),d[8]=n,d[9]=a):a=d[9],d[10]!==e||d[11]!==t||d[12]!==a?(r=(0,s.jsx)(eT.W.Anchor,{children:(0,s.jsxs)(ek.l.Item,{children:[e,t,a]})}),d[10]=e,d[11]=t,d[12]=a,d[13]=r):r=d[13],d[14]===Symbol.for("react.memo_cache_sentinel")?(i=Object.keys(S),d[14]=i):i=d[14],d[15]!==p?(o=(0,s.jsx)(eT.W.Overlay,{children:(0,s.jsx)(ek.l,{children:i.map(e=>(0,s.jsx)(eV,{inputType:e,onSelect:p},e))})}),d[15]=p,d[16]=o):o=d[16],d[17]!==r||d[18]!==o?(l=(0,s.jsxs)(eT.W,{children:[r,o]}),d[17]=r,d[18]=o,d[19]=l):l=d[19],l}return d[20]!==u.type||d[21]!==m?(n=()=>m(u.type),d[20]=u.type,d[21]=m,d[22]=n):n=d[22],d[23]!==h?(a=(0,s.jsx)(ek.l.LeadingVisual,{children:(0,s.jsx)(h,{})}),d[23]=h,d[24]=a):a=d[24],d[25]!==u?(r=u.label(),d[25]=u,d[26]=r):r=d[26],d[27]!==u?(i=u.description(),d[27]=u,d[28]=i):i=d[28],d[29]!==i?(o=(0,s.jsx)(ek.l.Description,{variant:"block",children:i}),d[29]=i,d[30]=o):o=d[30],d[31]!==n||d[32]!==a||d[33]!==r||d[34]!==o?(c=(0,s.jsxs)(ek.l.Item,{onSelect:n,children:[a,r,o]}),d[31]=n,d[32]=a,d[33]=r,d[34]=o,d[35]=c):c=d[35],c}function eW(){let e,t,n,a,r,i,o,d,u,h,f,g,y,x=(0,l.c)(39),v=(0,eA.h)(),{data:_}=er(),b=eu(),{addNode:j}=eF(),[C,N]=(0,c.useState)(),[S,w]=(0,c.useState)();if(x[0]!==j||x[1]!==v||x[2]!==_||x[3]!==b){d=Symbol.for("react.early_return_sentinel");e:{let l,c,u,h,f=L.getAllMetadata();x[12]!==v?(l=(e,t)=>((!t.featureFlag||v[t.featureFlag])&&e.push(t),e),x[12]=v,x[13]=l):l=x[13];let g=f.reduce(l,[]);x[14]!==j||x[15]!==_||x[16]!==b?(c=(e,t,n,a)=>{_&&j(function(e,t,n,a,r){let i={content:"",id:t,title:n,description:a};switch(e){case"loop":return{...i,type:e,loopId:""};case"text":{let t;switch(r||"text"){case"range":t={type:"range",min:0,max:100};break;case"boolean":t={type:"boolean"};break;case"select":t={type:"select",options:[]};break;case"date":t={type:"date"};break;case"file":t={type:"file",fileType:"other"};break;default:t={type:"text"}}return{...i,type:e,inputType:t}}default:return{...i,type:e}}}(e,(b.reduce((e,t)=>{let n=parseInt(t,10);return isNaN(n)?e:Math.max(e,n)},0)+1).toString(),t,n,a))},x[14]=j,x[15]=_,x[16]=b,x[17]=c):c=x[17],a=c,x[18]===Symbol.for("react.memo_cache_sentinel")?(u=e=>{N("text"),w(e)},x[18]=u):u=x[18];let y=u;if(!v.copilot_loops_post_staff_ship_features){d=null;break e}n=eT.W,x[19]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(eT.W.Anchor,{children:(0,s.jsx)(m.K,{"aria-label":"Add node",icon:p.PlusIcon})}),x[19]=o):o=x[19],t=eT.W.Overlay,i="small",e=ek.l,x[20]===Symbol.for("react.memo_cache_sentinel")?(h=e=>(0,s.jsx)(ez,{nodeType:e,onSelect:()=>N(e.type),onTextInputTypeSelect:y},e.type),x[20]=h):h=x[20],r=g.map(h)}x[0]=j,x[1]=v,x[2]=_,x[3]=b,x[4]=e,x[5]=t,x[6]=n,x[7]=a,x[8]=r,x[9]=i,x[10]=o,x[11]=d}else e=x[4],t=x[5],n=x[6],a=x[7],r=x[8],i=x[9],o=x[10],d=x[11];return d!==Symbol.for("react.early_return_sentinel")?d:(x[21]!==e||x[22]!==r?(u=(0,s.jsx)(e,{children:r}),x[21]=e,x[22]=r,x[23]=u):u=x[23],x[24]!==t||x[25]!==i||x[26]!==u?(h=(0,s.jsx)(t,{width:i,children:u}),x[24]=t,x[25]=i,x[26]=u,x[27]=h):h=x[27],x[28]!==n||x[29]!==o||x[30]!==h?(f=(0,s.jsxs)(n,{children:[o,h]}),x[28]=n,x[29]=o,x[30]=h,x[31]=f):f=x[31],x[32]!==a||x[33]!==S||x[34]!==C?(g=C&&(0,s.jsx)(eU,{onClose:()=>{N(void 0),w(void 0)},onConfirm:(e,t,n)=>{a(C,e,t,n||S),N(void 0),w(void 0)},inputType:S}),x[32]=a,x[33]=S,x[34]=C,x[35]=g):g=x[35],x[36]!==f||x[37]!==g?(y=(0,s.jsxs)(s.Fragment,{children:[f,g]}),x[36]=f,x[37]=g,x[38]=y):y=x[38],y)}try{eU.displayName||(eU.displayName="AddNodeDialog")}catch{}try{eV.displayName||(eV.displayName="InputTypeListItem")}catch{}try{ez.displayName||(ez.displayName="AddNodeListItem")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}try{eW.displayName||(eW.displayName="AddNodeButton")}catch{}function eH(e){let t,n,a,r=(0,l.c)(18),{value:i,isLoading:o,onClick:c,onStop:d,variant:u,disabled:h,iconOnly:f}=e,g=void 0===u?"invisible":u;r[0]!==o||r[1]!==i?(t=()=>o?"Loading...":i?"Run node":"Run loop",r[0]=o,r[1]=i,r[2]=t):t=r[2];let y=t;r[3]!==o||r[4]!==c||r[5]!==d?(n=e=>{o?d?.(e):c(e)},r[3]=o,r[4]=c,r[5]=d,r[6]=n):n=r[6];let x=n;if(!f){let e,t=o?"danger":g,n=o?"Stop":"Run";return r[7]!==h||r[8]!==x||r[9]!==t||r[10]!==n?(e=(0,s.jsx)(eI.Q,{disabled:h,variant:t,onClick:x,children:n}),r[7]=h,r[8]=x,r[9]=t,r[10]=n,r[11]=e):e=r[11],e}let v=y(),_=o?p.SquareFillIcon:p.SyncIcon,b=o?"danger":g;return r[12]!==h||r[13]!==x||r[14]!==v||r[15]!==_||r[16]!==b?(a=(0,s.jsx)(m.K,{disabled:h,"aria-label":v,icon:_,onClick:x,variant:b}),r[12]=h,r[13]=x,r[14]=v,r[15]=_,r[16]=b,r[17]=a):a=r[17],a}try{eH.displayName||(eH.displayName="ExecuteButton")}catch{}function eq(){let e,t,n,a=(0,l.c)(6),{data:r}=er(),i=r?.id,o=(0,Z.Zp)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(eT.W.Anchor,{children:(0,s.jsx)(m.K,{"aria-label":"Development",icon:p.ToolsIcon})}),a[0]=e):e=a[0],a[1]!==i||a[2]!==o?(t=Object.values(en).map(e=>(0,s.jsx)(ek.l.Item,{value:e.id,selected:i===e.id,onSelect:()=>o(`/copilot/l/${e.id}`),children:e.title},e.id)),a[1]=i,a[2]=o,a[3]=t):t=a[3],a[4]!==t?(n=(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(eT.W,{children:[e,(0,s.jsx)(eT.W.Overlay,{width:"small",children:(0,s.jsx)(ek.l,{selectionVariant:"single",role:"menu",children:t})})]})}),a[4]=t,a[5]=n):n=a[5],n}try{eq.displayName||(eq.displayName="DevelopmentButton")}catch{}let eG={value:null,startedAt:void 0,completedAt:void 0};function eK(e){let t,n,a,r=(0,l.c)(14),i=(0,eP.jE)(),o=et(),{loopID:s}=(0,Z.g)(),c=eh(s,"draft");return r[0]!==s||r[1]!==i||r[2]!==c||r[3]!==o||r[4]!==e?(t=async t=>{if(!s)throw Error("No loop ID");let n=i.getQueryData(c);if(!n)throw Error("No current execution");let a=e(n,t);return await o.updateExecution(s,n.id,a)},r[0]=s,r[1]=i,r[2]=c,r[3]=o,r[4]=e,r[5]=t):t=r[5],r[6]!==s||r[7]!==i||r[8]!==c||r[9]!==e?(n=async t=>{if(!s)return;await i.cancelQueries({queryKey:c});let n=i.getQueryData(c);if(n){let a=e(n,t);i.setQueryData(c,a)}},r[6]=s,r[7]=i,r[8]=c,r[9]=e,r[10]=n):n=r[10],r[11]!==t||r[12]!==n?(a={mutationFn:t,onMutate:n},r[11]=t,r[12]=n,r[13]=a):a=r[13],(0,eD.n)(a)}function eQ(e,t){let{nodeId:n,value:a}=t;return{...e,nodes:{...e.nodes,[n]:{...e.nodes[n]??eG,value:a,completedAt:new Date().toISOString()}}}}function eJ(e,t){let{nodeId:n,error:a}=t;return{...e,nodes:{...e.nodes,[n]:{...e.nodes[n]??eG,error:a,value:null,completedAt:new Date().toISOString()}}}}function eY(e,t){let{nodeId:n}=t;return{...e,nodes:{...e.nodes,[n]:{...e.nodes[n]??eG,startedAt:new Date().toISOString(),completedAt:void 0}}}}function eZ(e){return{...e,nodes:Object.fromEntries(Object.entries(e.nodes).map(eX))}}function eX(e){let[t,n]=e;return[t,em(n)?{...n,completedAt:new Date().toISOString()}:n]}function e0(){let e=et(),t=ed(),n=(0,eP.jE)(),{createProgressHandler:a}=function(){let e,t,n=(0,l.c)(8),{mutate:a}=eK(eQ),{mutate:r}=eK(eJ),{mutate:i}=eK(eY),{loopID:o}=(0,Z.g)(),s=(0,eP.jE)(),c=eh(o,"draft");n[0]!==s||n[1]!==c||n[2]!==i||n[3]!==r||n[4]!==a?(e=()=>e=>{switch(e.type){case"UPDATE_NODE_VALUE":a({nodeId:e.nodeID,value:e.value});break;case"UPDATE_NODE_VALUE_PARTIAL":{let t=s.getQueryData(c);if(t){let n={...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID]??eG,value:e.value}}};s.setQueryData(c,n)}break}case"UPDATE_NODE_ERROR":r({nodeId:e.nodeID,error:e.error});break;case"SET_RUNNING":i({nodeId:e.nodeID})}},n[0]=s,n[1]=c,n[2]=i,n[3]=r,n[4]=a,n[5]=e):e=n[5];let d=e;return n[6]!==d?(t={createProgressHandler:d},n[6]=d,n[7]=t):t=n[7],t}(),{mutateAsync:r}=function(){let e,t,n,a,r,i=(0,l.c)(16),o=(0,eP.jE)(),s=et(),{loopID:c}=(0,Z.g)(),d=eh(c,"draft");return i[0]!==c||i[1]!==s?(e=async e=>{let{execution:t}=e;if(!c)throw Error("No loop ID");return await s.createExecution(c,t)},i[0]=c,i[1]=s,i[2]=e):e=i[2],i[3]!==c||i[4]!==o||i[5]!==d?(t=async e=>{let{execution:t}=e;if(!c||!t)return;await o.cancelQueries({queryKey:d});let n=o.getQueryData(d);return o.setQueryData(d,t),{previousExecution:n}},i[3]=c,i[4]=o,i[5]=d,i[6]=t):t=i[6],i[7]!==o||i[8]!==d?(n=(e,t,n)=>{n?.previousExecution&&o.setQueryData(d,n.previousExecution)},a=e=>{o.setQueryData(d,e)},i[7]=o,i[8]=d,i[9]=n,i[10]=a):(n=i[9],a=i[10]),i[11]!==e||i[12]!==t||i[13]!==n||i[14]!==a?(r={mutationFn:e,onMutate:t,onError:n,onSuccess:a},i[11]=e,i[12]=t,i[13]=n,i[14]=a,i[15]=r):r=i[15],(0,eD.n)(r)}(),{mutateAsync:i}=eK(eZ),{data:o}=eg();return{runPipeline:async(i,s)=>{if(!t)try{let t;if(s&&o){let e=P(i),n=function e(t,n){let a=new Set(t.edges.filter(e=>e.from===n).map(e=>e.to));for(let n of a)for(let r of e(t,n))a.add(r);return a.add(n),[...a]}(e,s),a=function(e,t){let n=Object.fromEntries(Object.entries(e.nodes).filter(([e])=>!t.includes(e)));return{...e,nodes:n}}(o,n);t=await r({execution:a})}else t=await r({});let l=a();await e.runPipeline(i,t.id,l,()=>{let e=i.nodes.map(e=>e.id);return Promise.resolve(n.getQueryData(ef(i.id,"draft",e))??null)})}catch(e){throw b("Error running pipeline:",e),e}},stopPipeline:()=>{o&&e.stopPipeline(o.id,()=>{i()})}}}let e1={container:"CanvasHeader-module__container--WYGYo"},e2=()=>{let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("svg",{"aria-label":"Alert",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M9.11713 1.41595C9.98012 1.41595 10.6797 2.11555 10.6797 2.97853V8.18712C10.6797 9.05011 9.98012 9.74969 9.11713 9.74969C8.25414 9.74969 7.55455 9.05011 7.55455 8.18712V2.97853C7.55455 2.11555 8.25414 1.41595 9.11713 1.41595ZM11.2006 13.9165C11.2006 15.0672 10.2678 16 9.11713 16C7.96648 16 7.03369 15.0672 7.03369 13.9165C7.03369 12.7659 7.96648 11.8332 9.11713 11.8332C10.2678 11.8332 11.2006 12.7659 11.2006 13.9165Z",fill:"currentColor"})}),t[0]=e):e=t[0],e},e3=()=>{let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("svg",{"aria-label":"Focus center",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,s.jsx)("circle",{cx:"8",cy:"8",r:"5.25"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.5 8H15M1 8h3.5M8 11.5V15M8 1v3.5"})]})}),t[0]=e):e=t[0],e};try{(r=()=>{let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("svg",{"aria-label":"Loops Icon",width:"35",height:"15",viewBox:"0 0 35 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.1875 3.21429C5.8802 3.21429 3.9375 5.17331 3.9375 7.5C3.9375 9.82669 5.8802 11.7857 8.1875 11.7857C9.30351 11.7857 10.5717 11.2628 12.0658 10.227C13.1481 9.47666 14.2434 8.5341 15.3833 7.5C14.2434 6.4659 13.1481 5.52334 12.0658 4.77302C10.5717 3.73721 9.30351 3.21429 8.1875 3.21429ZM17.75 5.32376C16.4971 4.17999 15.1917 3.03949 13.8717 2.1243C12.1783 0.950293 10.259 0 8.1875 0C4.1198 0 0.75 3.39812 0.75 7.5C0.75 11.6019 4.1198 15 8.1875 15C10.259 15 12.1783 14.0496 13.8717 12.8758C15.1917 11.9606 16.4971 10.82 17.75 9.67624C19.0029 10.82 20.3083 11.9606 21.6283 12.8758C23.3218 14.0496 25.2411 15 27.3125 15C31.3802 15 34.75 11.6019 34.75 7.5C34.75 3.39812 31.3802 0 27.3125 0C25.2411 0 23.3218 0.950293 21.6283 2.1243C20.3083 3.03949 19.0029 4.17999 17.75 5.32376ZM20.1167 7.5C21.2566 8.5341 22.3519 9.47666 23.4342 10.227C24.9282 11.2628 26.1964 11.7857 27.3125 11.7857C29.6198 11.7857 31.5625 9.82669 31.5625 7.5C31.5625 5.17331 29.6198 3.21429 27.3125 3.21429C26.1964 3.21429 24.9282 3.73721 23.4342 4.77302C22.3519 5.52334 21.2566 6.4659 20.1167 7.5Z",fill:"#9198A1"})}),t[0]=e):e=t[0],e}).displayName||(r.displayName="LoopIcon")}catch{}try{e2.displayName||(e2.displayName="AlertIcon")}catch{}try{e3.displayName||(e3.displayName="FocusCenterIcon")}catch{}function e4(e){let t,n=(0,l.c)(2),{onClick:a}=e;return n[0]!==a?(t=(0,s.jsx)(m.K,{"aria-label":"Set center alignment",icon:e3,onClick:e=>a(e)}),n[0]=a,n[1]=t):t=n[1],t}try{e4.displayName||(e4.displayName="CenterAlignButton")}catch{}function e5(){let{data:e}=er();if(!e)throw Error("useCurrentLoop must be used within a context where a loop exists.");return e}function e6(e){let t,n,a,r,i,o,c,d,u=(0,l.c)(18),{centerNodeCanvas:m}=e,p=e5(),{runPipeline:h,stopPipeline:g}=e0(),y=ej();u[0]!==p||u[1]!==h?(t=()=>{(0,f.BI)("dotcom_chat.activate",{target:"CANVAS_HEADER_LOOP_RUN",mode:"loops"}),h(p)},u[0]=p,u[1]=h,u[2]=t):t=u[2];let x=t;u[3]!==g?(n=()=>{(0,f.BI)("dotcom_chat.activate",{target:"CANVAS_HEADER_LOOP_STOP",mode:"loops"}),g()},u[3]=g,u[4]=n):n=u[4];let v=n;u[5]!==m?(a=()=>{(0,f.BI)("dotcom_chat.activate",{target:"CANVAS_HEADER_CANVAS_CENTER",mode:"loops"}),m({duration:500})},u[5]=m,u[6]=a):a=u[6];let _=a;return u[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)(eW,{}),i=!1,u[7]=r,u[8]=i):(r=u[7],i=u[8]),u[9]!==_?(o=(0,s.jsx)(e4,{onClick:_}),u[9]=_,u[10]=o):o=u[10],u[11]!==x||u[12]!==v||u[13]!==y?(c=(0,s.jsx)(eH,{isLoading:y,onClick:x,onStop:v,variant:"primary"}),u[11]=x,u[12]=v,u[13]=y,u[14]=c):c=u[14],u[15]!==o||u[16]!==c?(d=(0,s.jsxs)("div",{className:e1.container,children:[r,i,o,c]}),u[15]=o,u[16]=c,u[17]=d):d=u[17],d}try{e6.displayName||(e6.displayName="CanvasHeader")}catch{}let e7={compactNode:"CompactNode-module__compactNode--F_pSG",dark:"CompactNode-module__dark--tCgC0",active:"CompactNode-module__active--XEnzK",validationErrorWrapper:"CompactNode-module__validationErrorWrapper--EsSMr",title:"CompactNode-module__title--qrnqG",indicatorDot:"CompactNode-module__indicatorDot--EhKst",topDot:"CompactNode-module__topDot--y0RZw",completed:"CompactNode-module__completed--UhZag",bottomDot:"CompactNode-module__bottomDot--MLm5c",error:"CompactNode-module__error--HEiZ7",indicatorShadowWrapper:"CompactNode-module__indicatorShadowWrapper--UlVUX",indicatorShadow:"CompactNode-module__indicatorShadow--d58PY"},e8={iconContainer:"NodeType-module__iconContainer--cGYME",labelContainer:"NodeType-module__labelContainer--wSFPu",icon:"NodeType-module__icon--wiEIK"};function e9(e){let t,n,a,r,i=(0,l.c)(11),{node:o,size:c,type:d}=e,u=void 0===c?"medium":c;if(i[0]!==o||i[1]!==d){let e=L.getMetadata(d);t=e?.icon(o),i[0]=o,i[1]=d,i[2]=t}else t=i[2];let m=t,p="small"===u?10:"large"===u?24:16;return m?(i[3]!==p?(n={height:p,width:p},i[3]=p,i[4]=n):n=i[4],i[5]!==m||i[6]!==p?(a=(0,s.jsx)(m,{size:p,className:e8.icon}),i[5]=m,i[6]=p,i[7]=a):a=i[7],i[8]!==n||i[9]!==a?(r=(0,s.jsx)("div",{className:e8.iconContainer,style:n,children:a}),i[8]=n,i[9]=a,i[10]=r):r=i[10],r):null}function te(e){let t,n,a,r=(0,l.c)(6),{node:i,type:o}=e;if(r[0]!==i||r[1]!==o){let e=L.getMetadata(o);t=e?.label(i),r[0]=i,r[1]=o,r[2]=t}else t=r[2];let c=t;return r[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.$)(e8.labelContainer,e8.icon),r[3]=n):n=r[3],r[4]!==c?(a=(0,s.jsx)("div",{className:n,children:c}),r[4]=c,r[5]=a):a=r[5],a}try{e9.displayName||(e9.displayName="NodeType")}catch{}try{(i=Icon).displayName||(i.displayName="Icon")}catch{}try{te.displayName||(te.displayName="NodeLabel")}catch{}var tt=n(63867);let tn=e=>{let t,n,a=(0,l.c)(5),{status:r}=e,i="COMPLETED"===r&&e7.completed,o="ERROR"===r&&e7.error;return a[0]!==i||a[1]!==o?(t=(0,d.$)(e7.indicatorDot,e7.topDot,i,o),a[0]=i,a[1]=o,a[2]=t):t=a[2],a[3]!==t?(n=(0,s.jsx)("div",{className:t}),a[3]=t,a[4]=n):n=a[4],n},ta=e=>{let t,n,a,r=(0,l.c)(6),{status:i}=e,o="COMPLETED"===i&&e7.completed,c="ERROR"===i&&e7.error;return r[0]!==o||r[1]!==c?(t=(0,d.$)(e7.indicatorDot,e7.bottomDot,o,c),r[0]=o,r[1]=c,r[2]=t):t=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)("div",{className:e7.indicatorShadowWrapper,children:(0,s.jsx)("div",{className:e7.indicatorShadow})}),r[3]=n):n=r[3],r[4]!==t?(a=(0,s.jsx)("div",{className:t,children:n}),r[4]=t,r[5]=a):a=r[5],a};function tr(e){let t,n,a,r,i,o,c,u,m,p=(0,l.c)(30),{nodeId:h,pipelineId:f,className:g,hasPredecessors:y,hasSuccessors:x,title:v,type:_}=e,b=ev(h),j=eb(h),C=(0,eC.DP)();p[0]!==h?(t=e=>ex(h,e)?.title,p[0]=h,p[1]=t):t=p[1];let N=ei(t);v=v||N;let S=ei(e=>ex(h,e)?.type??"text");_=_||S,p[2]!==h?(n=e=>e.uiState.focusedNodeId===h,p[2]=h,p[3]=n):n=p[3];let w=K(n),I=function(e){let t=el(),{data:n}=eg(n=>{if(!e||!n)return"IDLE";let a=n.nodes[e],r=em(a),i=!!a?.value,o=!!a?.error,s=t.some(t=>t.involvedNodes.includes(e));return o||s?"ERROR":r?"PROCESSING":i?"COMPLETED":"IDLE"});return n?.toUpperCase()??"IDLE"}(h),k=`node-card-${f}-${h}`,T=w?e7.active:null,E=C.colorScheme?.includes("dark")||C.colorScheme?.includes("night")?e7.dark:"";return p[4]!==g||p[5]!==T||p[6]!==E?(a=(0,d.$)(e7.compactNode,g,T,E),p[4]=g,p[5]=T,p[6]=E,p[7]=a):a=p[7],p[8]!==y||p[9]!==I?(r=y&&(0,s.jsx)(tn,{status:I}),p[8]=y,p[9]=I,p[10]=r):r=p[10],p[11]!==x||p[12]!==I?(i=x&&(0,s.jsx)(ta,{status:I}),p[11]=x,p[12]=I,p[13]=i):i=p[13],p[14]!==j||p[15]!==b||p[16]!==_?(o=j?(0,s.jsx)(tt.A,{size:"small"}):(0,s.jsx)(e9,{type:_,size:"medium",node:b}),p[14]=j,p[15]=b,p[16]=_,p[17]=o):o=p[17],p[18]!==v?(c=(0,s.jsx)("p",{className:e7.title,children:v}),p[18]=v,p[19]=c):c=p[19],p[20]!==h?(u=(0,s.jsx)(ti,{nodeId:h}),p[20]=h,p[21]=u):u=p[21],p[22]!==c||p[23]!==u||p[24]!==k||p[25]!==a||p[26]!==r||p[27]!==i||p[28]!==o?(m=(0,s.jsxs)("div",{id:k,className:a,children:[r,i,o,c,u]}),p[22]=c,p[23]=u,p[24]=k,p[25]=a,p[26]=r,p[27]=i,p[28]=o,p[29]=m):m=p[29],m}function ti(e){let t,n=(0,l.c)(1),{nodeId:a}=e;return ed(a)?(n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("div",{className:e7.validationErrorWrapper,children:(0,s.jsx)(e2,{})}),n[0]=t):t=n[0],t):null}try{tn.displayName||(tn.displayName="InputIndicator")}catch{}try{ta.displayName||(ta.displayName="OutputIndicator")}catch{}try{tr.displayName||(tr.displayName="CompactNode")}catch{}try{ti.displayName||(ti.displayName="ValidationErrorsIndicator")}catch{}let to="#1f6feb";function ts(){let e=eu(),t=e5(),n=P(t),[a,r]=(0,c.useState)(null),[i,o]=(0,c.useState)(!1),l=(0,c.useRef)(!0),d=Q(),u=K(e=>e.uiState.focusedNodeId),m=e=>{let t=e===u;d({type:"FOCUS_NODE",nodeId:t?null:e}),(0,f.BI)("dotcom_chat.activate",{target:t?"CANVAS_NODE_DESELECT":"CANVAS_NODE_SELECT",mode:"loops"})},{layout:p,pipelineDimensions:h,edges:v}=function(){let e=e5(),t=(0,y.xp)().id(e=>e.id).parentIds(e=>e.parentIds),n=new Set(e.nodes.map(e=>e.id)),a=e.nodes.map(e=>({id:e.id,parentIds:Array.from(new Set([...D(e)].map(O))).map(e=>n.has(e)?e:"")})),r={},i=[];try{let e=t(a),{width:n,height:o}=(0,y.Hz)().nodeSize([250,120]).layering((0,y.AH)()).decross((0,y.X9)().order((0,y.Ys)().base((0,y.n0)()))).gap([10,10])(e);for(let t of e.nodes())t.data.id&&(r[t.data.id]={x:t.x,y:t.y});let s=e=>{if(e.length<2)return"";let[t,n]=e[0]||[0,0],[a,r]=e[e.length-1]||[0,0],i=a-t,o=Math.abs(i);if(o<10)return`M ${t},${n} L ${a},${r}`;let s=(n+r)/2,l=i>0?1:-1;return`
        M ${t},${n}
        L ${t},${s-12}
        A 12,12 0 0 ${l>0?0:1} ${t+12*l},${s}
        L ${t+l*(12+(o-24))},${s}
        A 12,12 0 0 ${+(l>0)} ${a},${s+12}
        L ${a},${r}
      `.trim().replace(/\s+/g," ")};for(let{points:t,source:n,target:a}of e.links()){let e=s(t);i.push({path:e,points:t.map(([e,t])=>({x:e,y:t})),source:n.data.id||"",target:a.data.id||""})}return{layout:r,edges:i,pipelineDimensions:{width:n,height:o}}}catch{return function(e){let t={},n={width:tl.width,height:e.length*tl.height};for(let n=0;n<e.length;++n)t[e[n]]={x:tl.width/2,y:n*tl.height};return{layout:t,edges:[],pipelineDimensions:n}}(e.nodes.map(e=>e.id))}}(),_=(0,c.useRef)(null),b=()=>{u&&(0,f.BI)("dotcom_chat.activate",{target:"CANVAS_DESELECT",mode:"loops"}),d({type:"FOCUS_NODE",nodeId:null})},j=(0,c.useCallback)(({duration:e=500})=>{if(!a||!_.current)return;let t=a.getBoundingClientRect(),n=t.width,r=t.height,i=Math.max(...Object.values(p).map(e=>e.x))+100,o=Math.max(...Object.values(p).map(e=>e.y))+25,s=g.GSI.translate(n/2-i/2,r/2-o/2).scale(1);(0,g.Ltv)(a).transition().duration(e).ease(g.xA2).call(_.current.transform,s)},[a]),C=(0,c.useCallback)(e=>{if(e){r(e);let t=(0,g.Ltv)(e),n=e=>{(0,g.Ltv)("#dot-pattern").attr("x",e.transform.x).attr("y",e.transform.y).attr("width",25*e.transform.k).attr("height",25*e.transform.k).select("rect").attr("x",25*e.transform.k/2-1).attr("y",25*e.transform.k/2-1).attr("opacity",Math.min(e.transform.k,1))},a=null,i=!1,o=(0,g.s_O)().scaleExtent([1,1]).interpolate(g.GWP).on("start",e=>{a=e.transform,i=!1}).on("zoom",e=>{if(!a)return;let t=e.transform.x-a.x,r=e.transform.y-a.y,o=Math.sqrt(t*t+r*r);(i||!(o<5))&&(i=!0,(0,g.Ltv)("#edges-group").attr("transform",e.transform),(0,g.Ltv)("#nodes-overlay").style("transform-origin","0 0").style("transform",`translate(${e.transform.x}px, ${e.transform.y}px) scale(${e.transform.k})`),n(e))});_.current=o,t.call(o),j({duration:0})}},[j]);return(0,c.useEffect)(()=>{if(i||!u||!a||!_.current)return;let e=p[u];if(!e)return;o(!0);let t=a.getBoundingClientRect(),n=t.width,r=t.height,s=n/2-e.x,c=r/2-e.y,d=g.GSI.translate(s,c).scale(1);!0===l.current?((0,g.Ltv)(a).call(_.current.transform,d),l.current=!1):(0,g.Ltv)(a).transition().duration(500).ease(g.xA2).call(_.current.transform,d),o(!1)},[u,i,a]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e6,{centerNodeCanvas:j}),(0,s.jsx)("div",{className:x.canvasContainer,ref:C,children:(0,s.jsxs)("div",{className:x.canvasGraph,onClick:b,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),b())},children:[(0,s.jsxs)("svg",{"aria-label":"Diagram",className:x.diagram,children:[(0,s.jsxs)("defs",{children:[(0,s.jsx)("pattern",{id:"dot-pattern",patternUnits:"userSpaceOnUse",x:"0",y:"0",width:25,height:25,children:(0,s.jsx)("rect",{x:11.5,y:11.5,rx:"50%",ry:"50%",width:2,height:2,className:x.gridPattern})}),(0,s.jsxs)("linearGradient",{id:"lineGradient",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.4"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0.4"})]}),(0,s.jsxs)("linearGradient",{id:"dotGradient",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.8"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0.8"})]}),(0,s.jsxs)("linearGradient",{id:"activeEdgeGradient",gradientUnits:"userSpaceOnUse",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,s.jsx)("stop",{stopColor:to,stopOpacity:"0.5"}),(0,s.jsx)("stop",{stopColor:to}),(0,s.jsx)("stop",{offset:"32.5%",stopColor:to}),(0,s.jsx)("stop",{offset:"100%",stopColor:to,stopOpacity:"0.5"})]})]}),(0,s.jsx)("rect",{fill:"url(#dot-pattern)",width:"100%",height:"100%"}),0!==h.width&&(0,s.jsx)("g",{id:"edges-group",children:v.map(e=>(0,s.jsx)(eN,{path:e.path,source:e.source,target:e.target},`${e.source}-${e.target}`))})]}),(0,s.jsx)("div",{id:"nodes-overlay",className:x.nodesOverlay,children:e.map(e=>(0,s.jsx)("div",{role:"button",tabIndex:0,className:x.nodeWrapper,style:{left:(p[e]?.x??0)-100,top:(p[e]?.y??0)-25},onClick:t=>{t.stopPropagation(),m(e)},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.stopPropagation(),m(e))},children:(0,s.jsx)(tr,{pipelineId:t.id,nodeId:e,hasPredecessors:n.edges.some(t=>t.to===e),hasSuccessors:n.edges.some(t=>t.from===e)})},e))})]})})]})}let tl={width:200,height:100};try{ts.displayName||(ts.displayName="Canvas")}catch{}try{(o=D3layout).displayName||(o.displayName="D3layout")}catch{}var tc=n(34614),td=n(93116);let tu={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--Oh15B",alertIcon:"ErrorFallback-module__alertIcon--yOYKH"};function tm(e){let t,n,a,r,i=(0,l.c)(5),{regionName:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(td.E.Visual,{children:(0,s.jsx)(p.AlertIcon,{className:tu.alertIcon,size:"medium"})}),n=(0,s.jsx)(td.E.Heading,{children:"Something went wrong"}),i[0]=t,i[1]=n):(t=i[0],n=i[1]),i[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(tc.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),i[2]=a):a=i[2],i[3]!==o?(r=(0,s.jsx)("div",{className:tu.errorFallbackContainer,children:(0,s.jsxs)(td.E,{children:[t,n,(0,s.jsxs)(td.E.Description,{children:[o," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",a,"."]})]})}),i[3]=o,i[4]=r):r=i[4],r}try{tm.displayName||(tm.displayName="ErrorFallback")}catch{}let ComponentErrorBoundary=class ComponentErrorBoundary extends c.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){"function"==typeof this.props.onError&&this.props.onError(e)}render(){return this.state.error?void 0!==this.props.fallback?this.props.fallback:(0,s.jsx)(tm,{regionName:this.getRegionName(this.props.name)}):this.props.children}constructor(e){super(e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"getRegionName",e=>{switch(e){case"canvas":return"The canvas";case"side-panel":return"The side panel";default:return"This component"}}),this.state={error:null}}};var tp=n(53526);function th(){let e,t,n,a=(0,l.c)(7),r=(0,eP.jE)(),i=et();return a[0]!==i?(e=async e=>await i.deleteLoop(e),a[0]=i,a[1]=e):e=a[1],a[2]!==r?(t=(e,t)=>{e.success&&(r.removeQueries({queryKey:[ea,t]}),r.invalidateQueries({queryKey:[eM]}))},a[2]=r,a[3]=t):t=a[3],a[4]!==e||a[5]!==t?(n={mutationFn:e,onSuccess:t},a[4]=e,a[5]=t,a[6]=n):n=a[6],(0,eD.n)(n)}function tf(e){let t,n,a,r,i,o,d,u,h,g,y,x,v,_,b=(0,l.c)(36),{onDelete:j,onCopyLoop:C,onDuplicate:N,onShare:S,loopId:w,variant:I}=e,k=void 0===I?"invisible":I,[T,E]=(0,c.useState)(null),A=(0,c.useRef)(null),{mutate:R,isPending:L}=th();b[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{E("delete")},b[0]=t):t=b[0];let P=t;b[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{E(null)},b[1]=n):n=b[1];let D=n;b[2]!==R||b[3]!==w||b[4]!==j?(a=async()=>{w&&(E(null),R(w,{onSuccess:j}),j?.())},b[2]=R,b[3]=w,b[4]=j,b[5]=a):a=b[5];let O=a;b[6]!==w||b[7]!==N?(r=()=>{w&&N&&((0,f.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),N(w))},b[6]=w,b[7]=N,b[8]=r):r=b[8];let M=r;b[9]!==S?(i=()=>{S?.()},b[9]=S,b[10]=i):i=b[10];let B=i;return w?(b[11]!==L||b[12]!==k?(o=(0,s.jsx)(eT.W.Anchor,{children:(0,s.jsx)(m.K,{loading:L,icon:p.KebabHorizontalIcon,"aria-label":"Manage loop",variant:k})}),b[11]=L,b[12]=k,b[13]=o):o=b[13],b[14]!==M||b[15]!==N?(d=N&&(0,s.jsxs)(ek.l.Item,{onSelect:M,children:[(0,s.jsx)(ek.l.LeadingVisual,{children:(0,s.jsx)(p.DuplicateIcon,{})}),"Duplicate"]}),b[14]=M,b[15]=N,b[16]=d):d=b[16],b[17]!==B||b[18]!==S?(u=S&&(0,s.jsxs)(ek.l.Item,{onSelect:B,children:[(0,s.jsx)(ek.l.LeadingVisual,{children:(0,s.jsx)(p.LinkIcon,{})}),"Copy link"]}),b[17]=B,b[18]=S,b[19]=u):u=b[19],b[20]===Symbol.for("react.memo_cache_sentinel")?(h=(0,s.jsxs)(ek.l.Item,{variant:"danger",onSelect:P,children:[(0,s.jsx)(ek.l.LeadingVisual,{children:(0,s.jsx)(p.TrashIcon,{})}),"Delete"]}),b[20]=h):h=b[20],b[21]!==C?(g=C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ek.l.Divider,{}),(0,s.jsxs)(ek.l.Item,{onSelect:C,children:[(0,s.jsx)(ek.l.LeadingVisual,{children:(0,s.jsx)(p.CopyIcon,{})}),"Copy JSON"]})]}),b[21]=C,b[22]=g):g=b[22],b[23]!==g||b[24]!==d||b[25]!==u?(y=(0,s.jsx)(eT.W.Overlay,{align:"end",children:(0,s.jsxs)(ek.l,{children:[d,u,h,g]})}),b[23]=g,b[24]=d,b[25]=u,b[26]=y):y=b[26],b[27]!==y||b[28]!==o?(x=(0,s.jsxs)(eT.W,{anchorRef:A,children:[o,y]}),b[27]=y,b[28]=o,b[29]=x):x=b[29],b[30]!==O||b[31]!==T?(v="delete"===T&&(0,s.jsx)(tp.K,{title:"Delete loop",onClose:e=>{"confirm"===e?O():D()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),b[30]=O,b[31]=T,b[32]=v):v=b[32],b[33]!==x||b[34]!==v?(_=(0,s.jsxs)(s.Fragment,{children:[x,v]}),b[33]=x,b[34]=v,b[35]=_):_=b[35],_):null}try{tf.displayName||(tf.displayName="LoopsActionMenu")}catch{}var tg=n(46996);function ty(){let{data:e}=er("latest"),{data:t}=er("draft"),n=!!e,a=!!t;return{hasChanges:a&&n&&!function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n={title:e.title,description:e.description,nodes:e.nodes,color:e.color},a={title:t.title,description:t.description,nodes:t.nodes,color:t.color};return(0,tg.A)(n,a)}(t,e),hasPipeline:n||a,isNew:!n&&a}}var tx=n(26807),tv=n(22069);let t_="loops",tb="loops",tj="loop",tC=`${tv.Jz}/loops`,tN=/\/copilot\/loops/,tS=/\/copilot\/l\/([a-zA-Z0-9-]+)/,tw=/\/copilot\/loop\/share/,tI={container:"HeaderActions-module__container--SfIXp"};function tk(){let e,t,n,a,r,i=(0,l.c)(14),o=(0,eP.jE)(),s=et(),c=Q();return i[0]!==s?(e=async e=>await s.revertLoop(e),i[0]=s,i[1]=e):e=i[1],i[2]!==o?(t=async e=>{await o.cancelQueries({queryKey:[ea,e]});let t=o.getQueryData([ea,e,"draft"]),n=o.getQueryData([ea,e,"latest"]);return n&&o.setQueryData([ea,e,"draft"],n),{previousDraftLoop:t,previousLatestLoop:n}},i[2]=o,i[3]=t):t=i[3],i[4]!==c||i[5]!==o?(n=e=>{if(!e.success||!e.loop)return;let t=e.loop.id;o.invalidateQueries({queryKey:[ea,t]}),o.invalidateQueries({queryKey:[eM]}),c({type:"FOCUS_NODE",nodeId:null})},i[4]=c,i[5]=o,i[6]=n):n=i[6],i[7]!==o?(a=(e,t,n)=>{n?.previousDraftLoop&&o.setQueryData([ea,t,"draft"],n.previousDraftLoop),n?.previousLatestLoop&&o.setQueryData([ea,t,"latest"],n.previousLatestLoop)},i[7]=o,i[8]=a):a=i[8],i[9]!==e||i[10]!==t||i[11]!==n||i[12]!==a?(r={mutationFn:e,onMutate:t,onSuccess:n,onError:a},i[9]=e,i[10]=t,i[11]=n,i[12]=a,i[13]=r):r=i[13],(0,eD.n)(r)}function tT(e){let t,n,a,r=(0,l.c)(10),{isOpen:i,onClose:o}=e,{data:c}=er(),{mutateAsync:d}=th(),u=(0,tx.Z)();r[0]!==d||r[1]!==c||r[2]!==u||r[3]!==o?(t=async()=>{o(),c&&await d(c.id),u(tC),(0,f.BI)("dotcom_chat.activate",{target:"LOOP_CANCEL",mode:"loops"})},r[0]=d,r[1]=c,r[2]=u,r[3]=o,r[4]=t):t=r[4];let m=t;r[5]!==m||r[6]!==o?(n=e=>{"confirm"===e?m():o()},r[5]=m,r[6]=o,r[7]=n):n=r[7];let p=n;return i?(r[8]!==p?(a=(0,s.jsx)(tp.K,{title:"Cancel loop creation",onClose:p,confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to cancel creating this loop? Any changes will be lost."}),r[8]=p,r[9]=a):a=r[9],a):null}try{tT.displayName||(tT.displayName="CancelLoopCreationDialog")}catch{}function tE(){let e,t,n,a,r,i,o,d,u,m,p=(0,l.c)(39),{data:h}=er(),{hasChanges:g,hasPipeline:y,isNew:x}=ty(),{mutate:v,isPending:_}=function(){let e,t,n,a,r,i=(0,l.c)(11),o=(0,eP.jE)(),s=et();return i[0]!==s?(e=async e=>await s.saveLoop(e),i[0]=s,i[1]=e):e=i[1],i[2]!==o?(t=async e=>{await o.cancelQueries({queryKey:[ea,e]});let t=o.getQueryData([ea,e,"draft"]),n=o.getQueryData([ea,e,"latest"]);return t&&(o.setQueryData([ea,e,"latest"],t),o.setQueryData([ea,e,"draft"],t)),{previousDraftLoop:t,previousLatestLoop:n}},n=e=>{if(!e.success||!e.loop)return;let t=e.loop.id;o.invalidateQueries({queryKey:[ea,t]}),o.invalidateQueries({queryKey:[eM]})},a=(e,t,n)=>{n?.previousDraftLoop&&o.setQueryData([ea,t,"draft"],n.previousDraftLoop),n?.previousLatestLoop&&o.setQueryData([ea,t,"latest"],n.previousLatestLoop)},i[2]=o,i[3]=t,i[4]=n,i[5]=a):(t=i[3],n=i[4],a=i[5]),i[6]!==e||i[7]!==t||i[8]!==n||i[9]!==a?(r={mutationFn:e,onMutate:t,onSuccess:n,onError:a},i[6]=e,i[7]=t,i[8]=n,i[9]=a,i[10]=r):r=i[10],(0,eD.n)(r)}(),{mutate:b,isPending:j}=tk(),{isPending:C}=th(),N=(0,tx.Z)(),[S,w]=(0,c.useState)(null);p[0]!==g||p[1]!==j||p[2]!==N?(e=()=>{if(!j){if(!g)return void N(tC);w("reset")}},p[0]=g,p[1]=j,p[2]=N,p[3]=e):e=p[3];let I=e;p[4]!==C?(t=()=>{C||w("cancel")},p[4]=C,p[5]=t):t=p[5];let k=t;p[6]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{w(null)},p[6]=n):n=p[6];let T=n;p[7]!==h||p[8]!==N||p[9]!==b?(a=()=>{h&&(b(h?.id),w(null),N(tC),(0,f.BI)("dotcom_chat.activate",{target:"LOOP_RESET_CHANGES",mode:"loops"}))},p[7]=h,p[8]=N,p[9]=b,p[10]=a):a=p[10];let E=a;p[11]!==g||p[12]!==_||p[13]!==h||p[14]!==v?(r=()=>{!_&&g&&h&&(v(h?.id),(0,f.BI)("dotcom_chat.activate",{target:"LOOP_SAVE",mode:"loops"}))},p[11]=g,p[12]=_,p[13]=h,p[14]=v,p[15]=r):r=p[15];let A=r;p[16]!==_||p[17]!==h||p[18]!==v?(i=()=>{!_&&h&&(v(h?.id),(0,f.BI)("dotcom_chat.activate",{target:"LOOP_CREATE",mode:"loops"}))},p[16]=_,p[17]=h,p[18]=v,p[19]=i):i=p[19];let R=i;if(!y)return null;p[20]!==R||p[21]!==k||p[22]!==I||p[23]!==A||p[24]!==g||p[25]!==C||p[26]!==x||p[27]!==j||p[28]!==_?(o=(0,s.jsx)("div",{className:tI.container,children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eI.Q,{onClick:k,loading:C,children:"Cancel"}),(0,s.jsx)(eI.Q,{variant:"primary",onClick:R,loading:_,children:"Create"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eI.Q,{onClick:I,loading:j&&g,children:"Cancel"}),(0,s.jsx)(eI.Q,{variant:"primary",onClick:A,loading:_&&g,children:"Save"})]})}),p[20]=R,p[21]=k,p[22]=I,p[23]=A,p[24]=g,p[25]=C,p[26]=x,p[27]=j,p[28]=_,p[29]=o):o=p[29],p[30]!==E||p[31]!==S?(d="reset"===S&&(0,s.jsx)(tp.K,{title:"Cancel changes",onClose:e=>{"confirm"===e?E():T()},confirmButtonContent:"Discard",confirmButtonType:"danger",children:"Are you sure you want to discard all your changes since your last save? This action cannot be undone."}),p[30]=E,p[31]=S,p[32]=d):d=p[32];let L="cancel"===S;return p[33]!==L?(u=(0,s.jsx)(tT,{isOpen:L,onClose:T}),p[33]=L,p[34]=u):u=p[34],p[35]!==o||p[36]!==d||p[37]!==u?(m=(0,s.jsxs)(s.Fragment,{children:[o,d,u]}),p[35]=o,p[36]=d,p[37]=u,p[38]=m):m=p[38],m}try{tE.displayName||(tE.displayName="HeaderActions")}catch{}let tA={container:"Header-module__container--VnJT1",left:"Header-module__left--StOkC",right:"Header-module__right--MfDeH",title:"Header-module__title--v_2KB"};var tR=n(32992);let tL={button:"UnsavedChangesButton-module__button--qWPC0",active:"UnsavedChangesButton-module__active--kjcih",warningDot:"UnsavedChangesButton-module__warningDot--bniPi",undoIcon:"UnsavedChangesButton-module__undoIcon--jcEaT"},tP=()=>{let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:tL.warningDot}),t[0]=e):e=t[0],e};function tD(){let e,t,n,a,r,i,o,u,m,h,g,y=(0,l.c)(25),{data:x}=er(),{mutate:v,isPending:_}=tk(),[b,j]=(0,c.useState)(!1),[C,N]=(0,c.useState)(!1),S=b||C;y[0]!==x||y[1]!==v?(e=()=>{x&&(v(x?.id),N(!1),(0,f.BI)("dotcom_chat.activate",{target:"LOOP_RESET_CHANGES",mode:"loops"}))},y[0]=x,y[1]=v,y[2]=e):e=y[2];let w=e;y[3]!==_||y[4]!==x?(t=()=>{!_&&x&&N(!0)},y[3]=_,y[4]=x,y[5]=t):t=y[5];let I=t,k=S&&tL.active;y[6]!==k?(n=(0,d.$)(tL.button,k),y[6]=k,y[7]=n):n=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(a=()=>j(!0),r=()=>j(!1),i=()=>j(!0),o=()=>j(!1),y[8]=a,y[9]=r,y[10]=i,y[11]=o):(a=y[8],r=y[9],i=y[10],o=y[11]),y[12]!==S?(u=S?(0,s.jsx)(p.UndoIcon,{className:tL.undoIcon}):(0,s.jsx)(tP,{}),y[12]=S,y[13]=u):u=y[13];let T=S?"Revert changes":"Unsaved changes";return y[14]!==I||y[15]!==n||y[16]!==u||y[17]!==T?(m=(0,s.jsx)(eI.Q,{className:n,variant:"invisible",onMouseEnter:a,onMouseLeave:r,onFocus:i,onBlur:o,onClick:I,leadingVisual:u,children:T}),y[14]=I,y[15]=n,y[16]=u,y[17]=T,y[18]=m):m=y[18],y[19]!==w||y[20]!==C?(h=C&&(0,s.jsx)(tp.K,{title:"Revert changes",onClose:e=>{"confirm"===e?w():N(!1)},confirmButtonContent:"Revert",confirmButtonType:"danger",children:"Are you sure you want to revert all changes since your last save? This action cannot be undone."}),y[19]=w,y[20]=C,y[21]=h):h=y[21],y[22]!==m||y[23]!==h?(g=(0,s.jsxs)(s.Fragment,{children:[m,h]}),y[22]=m,y[23]=h,y[24]=g):g=y[24],g}try{tP.displayName||(tP.displayName="WarningDot")}catch{}try{tD.displayName||(tD.displayName="UnsavedChangesButton")}catch{}function tO(){let e,t,n,a,r,i,o,d,u,h,g,y,x,v,_=(0,l.c)(34),{data:b}=er("draft"),{data:j}=er("latest"),C=j?.title,N=(0,Z.Zp)(),S=function(){let e,t=(0,l.c)(4),n=et(),a=(0,Z.Zp)(),{data:r}=er();return t[0]!==r||t[1]!==a||t[2]!==n?(e=async()=>{if(!r)return;let e=crypto.randomUUID(),t={...r,id:e,title:r.title,updatedAt:new Date().toISOString()};await n.createLoop(t),a(`${tv.Jz}/l/${e}`)},t[0]=r,t[1]=a,t[2]=n,t[3]=e):e=t[3],e}(),{hasChanges:w,isNew:I}=ty(),[k,T]=(0,c.useState)(!1);_[0]!==I?(e=e=>{if(I){e.preventDefault(),T(!0);return}(0,f.BI)("dotcom_chat.activate",{target:"HEADER_WORKBENCH_CLOSE",mode:"loops"})},_[0]=I,_[1]=e):e=_[1];let E=e;_[2]!==N?(t=()=>{N(tC)},_[2]=N,_[3]=t):t=_[3];let A=t;_[4]!==b?(n=()=>{if(!b)return;let e=JSON.stringify({title:b.title,description:b.description,nodes:b.nodes},null,2);navigator.clipboard.writeText(e),(0,f.BI)("dotcom_chat.activate",{target:"HEADER_JSON_COPY",mode:"loops"})},_[4]=b,_[5]=n):n=_[5];let R=n;_[6]!==b?(a=()=>{if(!b)return;let e=function(e){let t=JSON.stringify({title:e.title,description:e.description,nodes:e.nodes}),n=(0,tR.compressToEncodedURIComponent)(t),a=window.location.origin;return`${a}/copilot/loop/share?data=${n}`}(b);navigator.clipboard.writeText(e),(0,f.BI)("dotcom_chat.activate",{target:"LOOP_SHARE",mode:"loops"})},_[6]=b,_[7]=a):a=_[7];let L=a;_[8]!==E?(r=(0,s.jsx)(m.K,{"aria-label":"Close workbench",as:Z.N_,icon:p.XIcon,onClick:E,to:tC,variant:"invisible"}),_[8]=E,_[9]=r):r=_[9],_[10]!==C?(i=(0,s.jsx)("div",{className:tA.title,children:C}),_[10]=C,_[11]=i):i=_[11],_[12]!==r||_[13]!==i?(o=(0,s.jsxs)("div",{className:tA.left,children:[r,i]}),_[12]=r,_[13]=i,_[14]=o):o=_[14],_[15]!==w?(d=w&&(0,s.jsx)(tD,{}),_[15]=w,_[16]=d):d=_[16];let P=j?.id;return _[17]!==R||_[18]!==S||_[19]!==A||_[20]!==L||_[21]!==P?(u=(0,s.jsx)(tf,{onDelete:A,onCopyLoop:R,onDuplicate:S,loopId:P,variant:"invisible",onShare:L}),_[17]=R,_[18]=S,_[19]=A,_[20]=L,_[21]=P,_[22]=u):u=_[22],_[23]===Symbol.for("react.memo_cache_sentinel")?(h=(0,s.jsx)(tE,{}),_[23]=h):h=_[23],_[24]!==d||_[25]!==u?(g=(0,s.jsxs)("div",{className:tA.right,children:[d,u,h]}),_[24]=d,_[25]=u,_[26]=g):g=_[26],_[27]===Symbol.for("react.memo_cache_sentinel")?(y=()=>T(!1),_[27]=y):y=_[27],_[28]!==k?(x=(0,s.jsx)(tT,{isOpen:k,onClose:y}),_[28]=k,_[29]=x):x=_[29],_[30]!==g||_[31]!==x||_[32]!==o?(v=(0,s.jsxs)("div",{className:tA.container,children:[o,g,x]}),_[30]=g,_[31]=x,_[32]=o,_[33]=v):v=_[33],v}try{tO.displayName||(tO.displayName="Header")}catch{}let tM={container:"Layout-module__container--dG4dp",header:"Layout-module__header--C4lDt",main:"Layout-module__main--nK86t",panelToggleButton:"Layout-module__panelToggleButton--SAcdA",panel:"Layout-module__panel--AXPkf",scrollContainer:"Layout-module__scrollContainer--Pqw64",backdrop:"Layout-module__backdrop--LL3Sk",visible:"Layout-module__visible--n1Y2Z",canvas:"Layout-module__canvas--o3ayZ",placeholder:"Layout-module__placeholder--auzUi",placeholderNode:"Layout-module__placeholderNode--psu4z",placeholderText:"Layout-module__placeholderText--qaws6"};var tB=n(25289),tF=n(43956);let t$={animatedListContainer:"AnimatedList-module__animatedListContainer--zT8Eg",animatedListItem:"AnimatedList-module__animatedListItem--O1ti0"};function tU(e){let t,n,a,r,i,o=(0,l.c)(10),{children:c,indexFromEnd:d}=e,u=1-.15*d,m=1-.2*d,p=10-10*d;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:.5,scale:1.05,top:20,filter:"blur(1px)"},o[0]=t):t=o[0],o[1]!==p||o[2]!==m||o[3]!==u?(n={opacity:m,scale:u,top:p,filter:"blur(0px)"},o[1]=p,o[2]=m,o[3]=u,o[4]=n):n=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:0,scale:.5,top:-20,filter:"blur(1px)"},r={type:"spring",stiffness:280,damping:60},o[5]=a,o[6]=r):(a=o[5],r=o[6]),o[7]!==c||o[8]!==n?(i=(0,s.jsx)(tB.P.div,{layout:!0,initial:t,animate:n,exit:a,transition:r,className:t$.animatedListItem,children:c}),o[7]=c,o[8]=n,o[9]=i):i=o[9],i}let tV=c.memo(e=>{let t,n,a,r,i,o,u,m,p,h,f,g,y,x=(0,l.c)(35);x[0]!==e?({children:t,className:n,delay:r,maxVisible:i,...a}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=a,x[4]=r,x[5]=i):(t=x[1],n=x[2],a=x[3],r=x[4],i=x[5]);let v=void 0===r?3e3:r,_=void 0===i?2:i;x[6]!==t?(o=Array.isArray(t)?t:[t],x[6]=t,x[7]=o):o=x[7];let b=o;x[8]===Symbol.for("react.memo_cache_sentinel")?(u=[],x[8]=u):u=x[8];let[j,C]=(0,c.useState)(u),[N,S]=(0,c.useState)(0);if(x[9]!==b||x[10]!==v||x[11]!==_||x[12]!==N||x[13]!==j.length?(m=()=>{let e=setTimeout(()=>{C(e=>{let t=[...e,b[N]];return t.length>_&&t.shift(),t}),S(e=>(e+1)%b.length)},0===j.length?Math.min(v,300):v);return()=>clearTimeout(e)},x[9]=b,x[10]=v,x[11]=_,x[12]=N,x[13]=j.length,x[14]=m):m=x[14],x[15]!==b||x[16]!==v||x[17]!==_||x[18]!==N||x[19]!==j?(p=[j,N,b,v,_],x[15]=b,x[16]=v,x[17]=_,x[18]=N,x[19]=j,x[20]=p):p=x[20],(0,c.useEffect)(m,p),x[21]!==n?(h=(0,d.$)(t$.animatedListContainer,n),x[21]=n,x[22]=h):h=x[22],x[23]!==N||x[24]!==j){let e;x[26]!==N||x[27]!==j.length?(e=(e,t)=>(0,s.jsx)(tU,{indexFromEnd:j.length-1-t,children:e},e.key??`${t}-${N}`),x[26]=N,x[27]=j.length,x[28]=e):e=x[28],f=j.map(e),x[23]=N,x[24]=j,x[25]=f}else f=x[25];return x[29]!==f?(g=(0,s.jsx)(tF.N,{children:f}),x[29]=f,x[30]=g):g=x[30],x[31]!==a||x[32]!==g||x[33]!==h?(y=(0,s.jsx)("div",{className:h,...a,children:g}),x[31]=a,x[32]=g,x[33]=h,x[34]=y):y=x[34],y});tV.displayName="AnimatedList";try{tU.displayName||(tU.displayName="AnimatedListItem")}catch{}let tz=[{title:"Training the model...",type:"prompt"},{title:"Parsing your prompts...",type:"prompt"},{title:"Predicting next step...",type:"prompt"},{title:"Tokenizing thoughts...",type:"text"},{title:"Analyzing semantics...",type:"code"},{title:"Dreaming in code...",type:"code"},{title:"Activating neural nets...",type:"text"},{title:"Aligning intents...",type:"prompt"},{title:"Expanding vocabulary...",type:"text"},{title:"Crafting solutions...",type:"code"},{title:"Exploring possibilities...",type:"prompt"},{title:"Synthesizing context...",type:"text"},{title:"Optimizing creativity...",type:"text"},{title:"Chatting with AI...",type:"prompt"},{title:"Thinking in tokens...",type:"prompt"},{title:"Generating new ideas...",type:"text"}],tW=()=>{let e,t,n,a,r=(0,l.c)(7),i=ei(tq),o=i&&i.length>0?i:tz;return r[0]!==o?(e=Array.from({length:4},()=>o).flat().map(tG),r[0]=o,r[1]=e):e=r[1],r[2]!==e?(t=(0,s.jsx)(tV,{maxVisible:3,delay:3e3,children:e}),r[2]=e,r[3]=t):t=r[3],r[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)("span",{className:tM.placeholderText,children:"Updating your loop..."}),r[4]=n):n=r[4],r[5]!==t?(a=(0,s.jsxs)("div",{className:tM.placeholder,children:[t,n]}),r[5]=t,r[6]=a):a=r[6],a};try{tW.displayName||(tW.displayName="LoopPlaceholder")}catch{}function tH(e){return{title:e.title,type:e.type}}function tq(e){return e?.nodes?.map(tH)??[]}function tG(e,t){return(0,s.jsx)(tr,{title:e.title,type:e.type,nodeId:`node-${t}`,className:tM.placeholderNode,pipelineId:"default-pipeline"},`node-${e.title}-${t}`)}var tK=n(16945);let tQ={container:"CompactNodePanel-module__container--TlevF",panelEmptyState:"CompactNodePanel-module__panelEmptyState--cb0p0",header:"CompactNodePanel-module__header--jUGrb",nodeDetails:"CompactNodePanel-module__nodeDetails--zmcQh",nodeTitleContainer:"CompactNodePanel-module__nodeTitleContainer--DHuox",nodeTitleText:"CompactNodePanel-module__nodeTitleText--To3al",descriptionText:"CompactNodePanel-module__descriptionText--CEsjF",nodeActions:"CompactNodePanel-module__nodeActions--aHenk",content:"CompactNodePanel-module__content--AOGbt",input:"CompactNodePanel-module__input--ULaU6",output:"CompactNodePanel-module__output--UUCOs"},tJ={container:"InputSection-module__container--wexU5",groupTitle:"InputSection-module__groupTitle--sGIYF",button:"InputSection-module__button--NSvN1",nodeModel:"InputSection-module__nodeModel--_mD_S",nodeInput:"InputSection-module__nodeInput--pwoVL",header:"InputSection-module__header--zJLlr"};var tY=n(66912);let tZ=(0,c.createContext)(null);function tX(e){let t,n,a,r=(0,l.c)(7),{availableModels:i,previewUrl:o,sendChatMessage:c,children:d}=e;return r[0]!==i||r[1]!==o||r[2]!==c?(n={availableModels:i,previewUrl:o,sendChatMessage:c},r[0]=i,r[1]=o,r[2]=c,r[3]=n):n=r[3],t=n,r[4]!==d||r[5]!==t?(a=(0,s.jsx)(tZ.Provider,{value:t,children:d}),r[4]=d,r[5]=t,r[6]=a):a=r[6],a}function t0(){let e=(0,c.useContext)(tZ);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{tZ.displayName||(tZ.displayName="AppContext")}catch{}try{tX.displayName||(tX.displayName="AppContextProvider")}catch{}function t1(e){let t,n,a,r=(0,l.c)(9),{onUpdateModel:i,selectedModelName:o}=e,{availableModels:c}=t0();r[0]!==c||r[1]!==o?(t=c?.find(e=>e.id===o),r[0]=c,r[1]=o,r[2]=t):t=r[2];let d=t;r[3]!==i?(n=e=>{i(e.id)},r[3]=i,r[4]=n):n=r[4];let u=n;return c&&d?(r[5]!==c||r[6]!==u||r[7]!==d?(a=(0,s.jsx)(tY.k,{models:c,selectedModel:d,onModelPicked:u,disabled:!1,type:"global",variant:"default"}),r[5]=c,r[6]=u,r[7]=d,r[8]=a):a=r[8],a):null}try{t1.displayName||(t1.displayName="ModelPicker")}catch{}var t2=n(67522),t3=n(76325);let t4={container:"ContentEditor-module__container--nk6da",cmContainer:"ContentEditor-module__cmContainer--vMg4R"};var t5=n(24774);let t6=t5.Lz.theme({".cm-content":{fontSize:"var(--text-body-size-small, 12px) !important",lineHeight:"18px !important"},".cm-gutterElement":{fontSize:"var(--text-body-size-small, 12px) !important"},".cm-scroller":{scrollbarWidth:"thin"}}),t7=e=>{let t,n,a,r,i,o,c,u=(0,l.c)(18),{className:m,content:p,onUpdate:h,placeholder:f,extensions:g,inputLabelId:y}=e,x=void 0===f?"Enter a prompt":f;return u[0]!==m?(t=(0,d.$)(t4.container,m),u[0]=m,u[1]=t):t=u[1],u[2]!==g?(n=g??[],u[2]=g,u[3]=n):n=u[3],u[4]!==n?(a=[t6,...n],u[4]=n,u[5]=a):a=u[5],u[6]!==h?(r=e=>h?.(e),u[6]=h,u[7]=r):r=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(i={indentUnit:2,indentWithTabs:!1,lineWrapping:!0},u[8]=i):i=u[8],u[9]!==p||u[10]!==y||u[11]!==x||u[12]!==a||u[13]!==r?(o=(0,s.jsx)(t3.default,{ariaLabelledBy:y,containerClassName:t4.cmContainer,extensions:a,height:"100%",hideHelp:!0,onChange:r,placeholder:x,spacing:i,value:p}),u[9]=p,u[10]=y,u[11]=x,u[12]=a,u[13]=r,u[14]=o):o=u[14],u[15]!==t||u[16]!==o?(c=(0,s.jsx)("form",{className:t,children:o}),u[15]=t,u[16]=o,u[17]=c):c=u[17],c};try{t7.displayName||(t7.displayName="ContentEditor")}catch{}var t8=n(47404);async function t9(e,t,n){let a=e.matchBefore(/@\w*/),r=e.matchBefore(/\{\{\w*/),i=a||r;if(!i||i.from===i.to&&!e.explicit)return null;let o=t(),s=a?i.text.slice(1):i.text.slice(2),l=o.filter(e=>e.id.toLowerCase().includes(s.toLowerCase())&&e.id!==n).map(e=>({label:e.title,detail:e.id,apply:`{{${e.id}}}`,boost:1,type:"variable"}));return{from:i.from,options:l,filter:!1}}let ne=e=>{let t,n,a,r,i,o,c,d=(0,l.c)(23),{className:u,content:m,onUpdate:p,placeholder:h,extensions:f,nodeId:g,inputLabelId:y}=e,x=void 0===h?"Enter a prompt":h,v=ei(nt);if(d[0]!==v?(t=()=>v,d[0]=v,d[1]=t):t=d[1],d[2]!==g||d[3]!==t){var _;_=t,n=[(0,t8.yU)({override:[async e=>t9(e,_,g)],icons:!1,defaultKeymap:!0})],d[2]=g,d[3]=t,d[4]=n}else n=d[4];let b=n;d[5]!==v?(a=()=>v,d[5]=v,d[6]=a):a=d[6],d[7]!==g||d[8]!==a?(r=function(e,t){let n=t5.NZ.mark({class:"cm-node-reference"});return t5.Z9.fromClass(class{update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=this.buildDecorations(e.view))}buildDecorations(a){let r=[],i=new Set(e().map(e=>e.id).filter(e=>e!==t)),o=/\{\{([^}]+)\}\}/g;for(let{from:e,to:t}of a.visibleRanges){let s,l=a.state.doc.sliceString(e,t);for(;null!==(s=o.exec(l));){let t=s[1];if(t&&i.has(t)){let t=e+s.index,a=t+s[0].length;r.push(n.range(t,a))}}}return t5.NZ.set(r)}constructor(e){var t,n;n=void 0,(t="decorations")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n,this.decorations=this.buildDecorations(e)}},{decorations:e=>e.decorations})}(a,g),d[7]=g,d[8]=a,d[9]=r):r=d[9];let j=r;d[10]!==f?(i=f??[],d[10]=f,d[11]=i):i=d[11],d[12]!==b||d[13]!==j||d[14]!==i?(o=[...i,b,j],d[12]=b,d[13]=j,d[14]=i,d[15]=o):o=d[15];let C=o;return d[16]!==C||d[17]!==u||d[18]!==m||d[19]!==y||d[20]!==p||d[21]!==x?(c=(0,s.jsx)(t7,{className:u,content:m,onUpdate:p,placeholder:x,extensions:C,inputLabelId:y}),d[16]=C,d[17]=u,d[18]=m,d[19]=y,d[20]=p,d[21]=x,d[22]=c):c=d[22],c};try{ne.displayName||(ne.displayName="ContentEditorWithAutocomplete")}catch{}function nt(e){return e?.nodes??[]}let nn=({className:e,content:t,onUpdate:a,nodeId:r,inputLabelId:i})=>{let[o,l]=(0,c.useState)();return(0,c.useEffect)(()=>{(async()=>{let{graphql:e}=await Promise.all([n.e("vendors-node_modules_vscode-languageserver-types_lib_esm_main_js"),n.e("vendors-node_modules_codemirror_lint_dist_index_js"),n.e("vendors-node_modules_cm6-graphql_dist_index_js")]).then(n.bind(n,1904));l([(0,t8.yU)(),e()])})()},[]),(0,s.jsx)(ne,{className:e,content:t,extensions:o,inputLabelId:i,nodeId:r,onUpdate:a,placeholder:"Enter a GraphQL query"})};try{nn.displayName||(nn.displayName="GraphQLContentEditor")}catch{}var na=n(65607),nr=n(2922);let ni={rangeValue:"NodeInput-module__rangeValue--N8Vt0",rangeContainer:"NodeInput-module__rangeContainer--cMtak",rangeLabels:"NodeInput-module__rangeLabels--KRuZe",rangeLabel:"NodeInput-module__rangeLabel--nMNnh",booleanContainer:"NodeInput-module__booleanContainer--XU8yP",fileContainer:"NodeInput-module__fileContainer--tHfkd"};var no=n(47347);let ns={dateContainer:"DatePicker-module__dateContainer--yKBHd",datePickerButton:"DatePicker-module__datePickerButton--MPd1F"};var nl=n(31075);function nc(e,t){let n,a,r=(0,l.c)(5),[i,o]=(0,c.useState)(e||""),s=(0,nl.S)(e);e!==s&&e!==i&&o(e||""),r[0]!==t?(n=e=>{o(e.target.value),t?.(e)},r[0]=t,r[1]=n):n=r[1];let d=n;return r[2]!==d||r[3]!==i?(a={value:i,onChange:d},r[2]=d,r[3]=i,r[4]=a):a=r[4],a}function nd(e){let t,n,a,r,i=(0,l.c)(8);i[0]!==e?({value:t,onChange:n,...a}=e,i[0]=e,i[1]=t,i[2]=n,i[3]=a):(t=i[1],n=i[2],a=i[3]);let{value:o,onChange:c}=nc(t,n);return i[4]!==c||i[5]!==a||i[6]!==o?(r=(0,s.jsx)(ew.A,{...a,value:o,onChange:c}),i[4]=c,i[5]=a,i[6]=o,i[7]=r):r=i[7],r}try{nd.displayName||(nd.displayName="TextInput")}catch{}function nu(e){if(!e)return{isValid:!0,parsedDate:null};let t=k(e)||T(e),n=t?E(e):null;return{isValid:t,parsedDate:n}}function nm({value:e,onChange:t,placeholder:n="Enter a date...",className:a}){let[r,i]=(0,c.useState)(()=>nu(e)),o=(0,eO.d)(e=>{i(nu(e))},500);(0,c.useEffect)(()=>{o(e)},[e,o]);let l=e&&!r.isValid;return(0,s.jsx)("div",{className:(0,d.$)(ns.dateContainer,a),children:(0,s.jsxs)(eS.A,{children:[(0,s.jsx)(eS.A.Label,{visuallyHidden:!0,children:"Enter a date"}),(0,s.jsx)(nd,{value:e,onChange:e=>{t(e.target.value)},placeholder:n,trailingAction:(0,s.jsx)(no.DatePicker,{value:r.parsedDate,onChange:e=>{e?t(A(e)||""):t("")},anchor:e=>{let{"aria-labelledby":t,...n}=e;return(0,s.jsx)(m.K,{...n,"aria-label":"Select date",className:(0,d.$)(n.className,ns.datePickerButton),icon:p.CalendarIcon,size:"small",variant:"invisible"})}})}),(0,s.jsx)(eS.A.Caption,{children:"Enter a date in YYYY-MM-DD format or use the @today macro"}),l&&(0,s.jsx)(eS.A.Validation,{variant:"error",children:"Invalid date or macro"})]})})}try{nm.displayName||(nm.displayName="DatePicker")}catch{}function np(e){let t=(0,l.c)(54),{content:n,nodeId:a,onChange:r,className:i,inputLabelId:o}=e,c=ev(a);if(!c||"text"!==c.type)return null;switch(c.inputType.type){case"range":{let e,a,o,l,d,u,m;t[0]!==n?(e=(0,s.jsx)("div",{className:ni.rangeValue,children:n}),t[0]=n,t[1]=e):e=t[1];let p=n||"0";return t[2]!==r?(a=e=>r(e.target.value),t[2]=r,t[3]=a):a=t[3],t[4]!==i||t[5]!==c.inputType.max||t[6]!==c.inputType.min||t[7]!==p||t[8]!==a?(o=(0,s.jsx)("div",{className:ni.rangeContainer,children:(0,s.jsx)("input",{type:"range",value:p,min:c.inputType.min,max:c.inputType.max,onChange:a,className:i})}),t[4]=i,t[5]=c.inputType.max,t[6]=c.inputType.min,t[7]=p,t[8]=a,t[9]=o):o=t[9],t[10]!==c.inputType.min?(l=(0,s.jsx)("div",{className:ni.rangeLabel,children:c.inputType.min}),t[10]=c.inputType.min,t[11]=l):l=t[11],t[12]!==c.inputType.max?(d=(0,s.jsx)("div",{className:ni.rangeLabel,children:c.inputType.max}),t[12]=c.inputType.max,t[13]=d):d=t[13],t[14]!==l||t[15]!==d?(u=(0,s.jsxs)("div",{className:ni.rangeLabels,children:[l,d]}),t[14]=l,t[15]=d,t[16]=u):u=t[16],t[17]!==e||t[18]!==o||t[19]!==u?(m=(0,s.jsxs)("div",{children:[e,o,u]}),t[17]=e,t[18]=o,t[19]=u,t[20]=m):m=t[20],m}case"boolean":{let e,a,o="true"===n;return t[21]!==r?(e=e=>r(e.target.checked.toString()),t[21]=r,t[22]=e):e=t[22],t[23]!==i||t[24]!==o||t[25]!==e?(a=(0,s.jsx)("div",{className:ni.booleanContainer,children:(0,s.jsx)(na.A,{checked:o,onChange:e,className:i})}),t[23]=i,t[24]=o,t[25]=e,t[26]=a):a=t[26],a}case"select":{let e,a,o;return t[27]!==r?(e=e=>r(e.target.value),t[27]=r,t[28]=e):e=t[28],t[29]!==c.inputType.options?(a=c.inputType.options?.map(nh),t[29]=c.inputType.options,t[30]=a):a=t[30],t[31]!==i||t[32]!==n||t[33]!==e||t[34]!==a?(o=(0,s.jsx)("div",{children:(0,s.jsx)(nr.A,{value:n,onChange:e,className:i,children:a})}),t[31]=i,t[32]=n,t[33]=e,t[34]=a,t[35]=o):o=t[35],o}case"file":{let e,a,o,l;return t[36]!==c.inputType.fileType?(e=function(e){switch(e){case"pdf":return".pdf";case"image":return"image/*";case"video":return"video/*";case"audio":return"audio/*";case"document":return".doc,.docx,.txt,.rtf";case"code":return".js,.jsx,.ts,.tsx,.py,.java,.cpp,.c,.h,.cs";default:return"*/*"}}(c.inputType.fileType),t[36]=c.inputType.fileType,t[37]=e):e=t[37],t[38]!==r?(a=e=>{let t=e.target.files?.[0];t&&r(t.name)},t[38]=r,t[39]=a):a=t[39],t[40]!==i?(o=(0,d.$)(i,ni.fileContainer),t[40]=i,t[41]=o):o=t[41],t[42]!==n||t[43]!==e||t[44]!==a||t[45]!==o?(l=(0,s.jsx)("div",{children:(0,s.jsx)(ew.A,{type:"file",value:n,accept:e,onChange:a,className:o})}),t[42]=n,t[43]=e,t[44]=a,t[45]=o,t[46]=l):l=t[46],l}case"date":{let e;return t[47]!==c.content||t[48]!==r?(e=(0,s.jsx)(nm,{value:c.content,onChange:r,placeholder:"Select a date..."}),t[47]=c.content,t[48]=r,t[49]=e):e=t[49],e}default:{let e;return t[50]!==n||t[51]!==o||t[52]!==r?(e=(0,s.jsx)(t7,{content:n,inputLabelId:o,onUpdate:r,placeholder:"Enter a value"}),t[50]=n,t[51]=o,t[52]=r,t[53]=e):e=t[53],e}}}function nh(e){return(0,s.jsx)(nr.A.Option,{value:e,children:e},e)}try{np.displayName||(np.displayName="NodeInput")}catch{}var nf=n(8579);function ng(e){let t,n,a,r,i,o,u,m,h,f=(0,l.c)(25),{additionalFields:g,content:y,contentEditor:x,children:v,inputLabelId:_}=e,[b,j]=(0,c.useState)(!0),C=b?p.ChevronDownIcon:p.ChevronRightIcon,N=b?"Collapse input section":"Expand input section";return f[0]!==b?(t=()=>j(!b),f[0]=b,f[1]=t):t=f[1],f[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.$)(tJ.groupTitle,tJ.button),f[2]=n):n=f[2],f[3]!==_||f[4]!==C||f[5]!==N||f[6]!==t?(a=(0,s.jsx)(eI.Q,{leadingVisual:C,"aria-label":N,onClick:t,variant:"invisible",size:"small",id:_,className:n,children:"Input"}),f[3]=_,f[4]=C,f[5]=N,f[6]=t,f[7]=a):a=f[7],f[8]!==y?(r=y?y.toString():"",f[8]=y,f[9]=r):r=f[9],f[10]!==r?(i=(0,s.jsx)(nf.T,{icon:p.CopyIcon,variant:"invisible",ariaLabel:"Copy input",textToCopy:r}),f[10]=r,f[11]=i):i=f[11],f[12]!==a||f[13]!==i?(o=(0,s.jsxs)("div",{className:tJ.header,children:[a,i]}),f[12]=a,f[13]=i,f[14]=o):o=f[14],f[15]!==v||f[16]!==x||f[17]!==b?(u=b&&(0,s.jsxs)(s.Fragment,{children:[x,v]}),f[15]=v,f[16]=x,f[17]=b,f[18]=u):u=f[18],f[19]!==o||f[20]!==u?(m=(0,s.jsxs)("div",{className:tJ.nodeInput,children:[o,u]}),f[19]=o,f[20]=u,f[21]=m):m=f[21],f[22]!==g||f[23]!==m?(h=(0,s.jsxs)("div",{className:tJ.container,children:[g,m]}),f[22]=g,f[23]=m,f[24]=h):h=f[24],h}try{ng.displayName||(ng.displayName="InputSectionLayout")}catch{}function ny(e){let t=(0,l.c)(39),{nodeId:n,onUpdate:a}=e,r=(0,eA.h)(),i=ev(n),o=ei(e=>ex(n,e)?.content??""),d=(0,c.useId)();if(!i)return null;switch(i.type){case"loop":default:return null;case"github-graphql":{let e,r,i;t[0]!==a?(e=e=>a({content:e}),t[0]=a,t[1]=e):e=t[1],t[2]!==d||t[3]!==o||t[4]!==n||t[5]!==e?(r=(0,s.jsx)(nn,{content:o,inputLabelId:d,nodeId:n,onUpdate:e}),t[2]=d,t[3]=o,t[4]=n,t[5]=e,t[6]=r):r=t[6];let l=r;return t[7]!==l||t[8]!==d||t[9]!==o?(i=(0,s.jsx)(ng,{content:o,contentEditor:l,inputLabelId:d}),t[7]=l,t[8]=d,t[9]=o,t[10]=i):i=t[10],i}case"text":{let e,r,i;t[11]!==a?(e=e=>a({content:e}),t[11]=a,t[12]=e):e=t[12],t[13]!==d||t[14]!==o||t[15]!==n||t[16]!==e?(r=(0,s.jsx)(np,{className:tJ.nodeInput,content:o,inputLabelId:d,nodeId:n,onChange:e}),t[13]=d,t[14]=o,t[15]=n,t[16]=e,t[17]=r):r=t[17];let l=r;return t[18]!==l||t[19]!==d||t[20]!==o?(i=(0,s.jsx)(ng,{content:o,contentEditor:l,inputLabelId:d}),t[18]=l,t[19]=d,t[20]=o,t[21]=i):i=t[21],i}case"prompt":{let e,l,c,u,m;t[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t2.wv)(),t[22]=e):e=t[22];let p=e.id;t[23]!==r.copilot_loops_post_staff_ship_features||t[24]!==i||t[25]!==a?(l=r.copilot_loops_post_staff_ship_features?(0,s.jsxs)("div",{className:tJ.nodeModel,children:[(0,s.jsx)("div",{className:tJ.groupTitle,children:"Model"}),(0,s.jsx)("div",{children:(0,s.jsx)(t1,{selectedModelName:i.model??p,onUpdateModel:e=>a({...i,model:e})})})]}):null,t[23]=r.copilot_loops_post_staff_ship_features,t[24]=i,t[25]=a,t[26]=l):l=t[26];let h=l;t[27]!==a?(c=e=>a({content:e}),t[27]=a,t[28]=c):c=t[28],t[29]!==d||t[30]!==o||t[31]!==n||t[32]!==c?(u=(0,s.jsx)(ne,{content:o,onUpdate:c,nodeId:n,inputLabelId:d}),t[29]=d,t[30]=o,t[31]=n,t[32]=c,t[33]=u):u=t[33];let f=u;return t[34]!==h||t[35]!==f||t[36]!==d||t[37]!==o?(m=(0,s.jsx)(ng,{additionalFields:h,content:o,contentEditor:f,inputLabelId:d}),t[34]=h,t[35]=f,t[36]=d,t[37]=o,t[38]=m):m=t[38],m}}}try{ny.displayName||(ny.displayName="InputSection")}catch{}function nx(e){let t,n,a,r,i=(0,l.c)(7),{nodeId:o}=e,c=(0,eA.h)(),{removeNode:d}=eF();i[0]!==o||i[1]!==d?(t=()=>{d(o)},i[0]=o,i[1]=d,i[2]=t):t=i[2];let u=t;return c.copilot_loops_post_staff_ship_features?(i[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(eT.W.Anchor,{children:(0,s.jsx)(m.K,{"aria-label":"Additional actions",icon:p.KebabHorizontalIcon})}),i[3]=n):n=i[3],i[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(ek.l.LeadingVisual,{children:(0,s.jsx)(p.TrashIcon,{})}),i[4]=a):a=i[4],i[5]!==u?(r=(0,s.jsxs)(eT.W,{children:[n,(0,s.jsx)(eT.W.Overlay,{align:"end",children:(0,s.jsx)(ek.l,{children:(0,s.jsxs)(ek.l.Item,{onSelect:u,variant:"danger",children:[a,"Delete"]})})})]}),i[5]=u,i[6]=r):r=i[6],r):null}try{nx.displayName||(nx.displayName="NodeContextMenu")}catch{}var nv=n(44446),n_=n(91936);let nb={outputHeader:"NodeOutput-module__outputHeader--NrD2t",outputType:"NodeOutput-module__outputType--H7w2K",nodeValue:"NodeOutput-module__nodeValue--haJEw",jsonOutput:"NodeOutput-module__jsonOutput--YkeGl",markdownOutput:"NodeOutput-module__markdownOutput--z0yEE"};var nj=n(35714);let nC={container:"CodeBlocks-module__container--HAo0t",copyContainer:"CodeBlocks-module__copyContainer--qLr5N",copyContent:"CodeBlocks-module__copyContent--WbMzw",copyButton:"CodeBlocks-module__copyButton--xRixl",immersive:"CodeBlocks-module__immersive--WOvoW",code:"CodeBlocks-module__code--fNu3l",codeContainer:"CodeBlocks-module__codeContainer--RWmQU",codeWrap:"CodeBlocks-module__codeWrap--qABxr"};var nN=n(26427);function nS(e){let t,n,a,r,i,o,u,m,p,h=(0,l.c)(18),{children:g,code:y}=e,x=(0,c.useId)(),{chatMode:v,wrapCodeLines:_}=(0,c.useContext)(nN.F);h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.$)(nC.container,nC.immersive),h[0]=t):t=h[0],h[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.$)(nC.copyContainer),a=(0,d.$)(nC.copyContent),h[1]=n,h[2]=a):(n=h[1],a=h[2]),h[3]!==v?(r=()=>{(0,f.BI)("dotcom_chat.activate",{target:"CODE_BLOCK_COPY",mode:v})},h[3]=v,h[4]=r):r=h[4],h[5]!==y||h[6]!==r?(i=(0,s.jsx)("div",{className:n,children:(0,s.jsx)("div",{className:a,children:(0,s.jsx)(nf.T,{textToCopy:y,ariaLabel:"Copy code",className:nC.copyButton,size:"small",onCopy:r})})}),h[5]=y,h[6]=r,h[7]=i):i=h[7],h[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,d.$)(nC.codeContainer),h[8]=o):o=h[8];let b=_&&nC.codeWrap;return h[9]!==b?(u=(0,d.$)(b),h[9]=b,h[10]=u):u=h[10],h[11]!==g||h[12]!==u?(m=(0,s.jsx)("div",{className:o,children:(0,s.jsx)("pre",{className:nC.code,tabIndex:0,children:(0,s.jsx)("code",{className:u,children:g})})}),h[11]=g,h[12]=u,h[13]=m):m=h[13],h[14]!==x||h[15]!==i||h[16]!==m?(p=(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("figure",{className:t,"aria-labelledby":x,children:[i,m]})}),h[14]=x,h[15]=i,h[16]=m,h[17]=p):p=h[17],p}try{nS.displayName||(nS.displayName="CodeBlocksForLoop")}catch{}var nw=n(47970);let nI="data-codeblock-for-loop-props",nk=(0,nj.F)(nI),nT={code:(e,t)=>{let n=(0,nj.k)(e,nI);return n?(0,s.jsx)(nS,{...n,children:e.children}):t}},nE={diagramContainer:"Mermaid-module__diagramContainer--jkE_P",hiddenSourceCode:"Mermaid-module__hiddenSourceCode--xCGnR",loaderContainer:"Mermaid-module__loaderContainer--deaNV"},nA="data-mermaid-props",nR=(0,nj.F)(nA);function nL(e){let t,n,a,r,i,o,c,u,m=(0,l.c)(16),{code:p,identity:h,viewscreenHost:f}=e,g=`${f}/markdown/mermaid`;t=btoa(encodeURIComponent(p)),m[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.$)("js-render-needs-enrichment","render-needs-enrichment",nE.diagramContainer),m[0]=n):n=m[0];let y=`${g}?data=${t}`;return m[1]!==p?(a=JSON.stringify({data:p}),m[1]=p,m[2]=a):a=m[2],m[3]!==p?(r=(0,s.jsx)("div",{className:nE.hiddenSourceCode,children:(0,s.jsx)("pre",{lang:"mermaid",children:p})}),m[3]=p,m[4]=r):r=m[4],m[5]!==p||m[6]!==a||m[7]!==r?(i=(0,s.jsx)("div",{className:"js-render-enrichment-target","data-json":a,"data-plain":p,children:r}),m[5]=p,m[6]=a,m[7]=r,m[8]=i):i=m[8],m[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,d.$)("js-render-enrichment-loader",nE.loaderContainer),m[9]=o):o=m[9],m[10]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)("span",{className:o,role:"presentation",children:(0,s.jsx)(tt.A,{})}),m[10]=c):c=m[10],m[11]!==f||m[12]!==h||m[13]!==y||m[14]!==i?(u=(0,s.jsxs)("section",{className:n,"data-identity":h,"data-host":f,"data-src":y,"data-type":"mermaid","aria-label":"Mermaid diagram rendered output container",children:[i,c]}),m[11]=f,m[12]=h,m[13]=y,m[14]=i,m[15]=u):u=m[15],u}let nP={code:(e,t)=>{if(!e.className?.includes("language-mermaid"))return t;let n=(0,nj.k)(e,nA);return n?(0,s.jsx)(nL,{code:n.code,identity:n.identity,viewscreenHost:n.viewscreenHost}):t}};try{nL.displayName||(nL.displayName="MermaidRenderer")}catch{}function nD(e){let t,n,a,r,i,o,c,d,u,m=(0,l.c)(20),{isRunning:h,node:f,nodeValue:g}=e,{previewUrl:y}=t0();if(m[0]===Symbol.for("react.memo_cache_sentinel")?(n={transformMarkdown:e=>(0,nw.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[nk]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1})}}}),transformHtml:e=>(0,nw.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&nk in a.properties&&n.children.splice(t,1,a)}),reactComponents:nT},m[0]=n):n=m[0],m[1]!==y){var x;a=[n],y&&a.push((x={viewscreenHost:y},{transformMarkdown:e=>(0,nw.YR)(e,"code",e=>{"mermaid"===e.lang&&(e.data={...e.data,hName:"code",hProperties:{className:["language-mermaid"],[nR]:JSON.stringify({code:e.value,identity:`mermaid-${Math.random().toString(36).slice(2,11)}`,viewscreenHost:x.viewscreenHost})}})}),transformHtml:e=>(0,nw.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&nR in a.properties&&n.children.splice(t,1,a)}),reactComponents:nP})),m[1]=y,m[2]=a}else a=m[2];t=a;let v=L.getMetadata(f.type)?.outputLabel??"Markdown";m[3]!==g?(r=function e(t){return null==t?"":"string"==typeof t?t:t&&"object"==typeof t?JSON.stringify(t,null,2):Array.isArray(t)?t.map(e).join(`
`):String(t)}(g),m[3]=g,m[4]=r):r=m[4];let _=r;return(m[5]!==v?(i=(0,s.jsx)("div",{className:nb.outputType,children:v}),m[5]=v,m[6]=i):i=m[6],m[7]!==_?(o=(0,s.jsx)(nf.T,{icon:p.CopyIcon,variant:"invisible",ariaLabel:"Copy output",textToCopy:_}),m[7]=_,m[8]=o):o=m[8],m[9]!==i||m[10]!==o?(c=(0,s.jsxs)("div",{className:nb.outputHeader,children:[i,o]}),m[9]=i,m[10]=o,m[11]=c):c=m[11],m[12]!==t||m[13]!==h||m[14]!==f||m[15]!==_)?(d=(0,s.jsx)("div",{className:nb.nodeValue,children:"github-graphql"===f.type?(0,s.jsx)("pre",{className:nb.jsonOutput,children:_}):(0,s.jsx)(n_.To,{extensions:t,className:nb.markdownOutput,isStreaming:h,markdown:_})}),m[12]=t,m[13]=h,m[14]=f,m[15]=_,m[16]=d):d=m[16],m[17]!==c||m[18]!==d?(u=(0,s.jsxs)(s.Fragment,{children:[c,d]}),m[17]=c,m[18]=d,m[19]=u):u=m[19],u}try{nD.displayName||(nD.displayName="NodeOutput")}catch{}let nO={errorContainer:"NodeError-module__errorContainer--oVXaY",errorNotice:"NodeError-module__errorNotice--V2hmE",errorIcon:"NodeError-module__errorIcon--O883B",errorText:"NodeError-module__errorText--jT9JA",fixErrorButton:"NodeError-module__fixErrorButton--w9bNG"};function nM(e){let t,n,a,r,i,o=(0,l.c)(11),{errors:c,onFixErrorClick:d,title:u}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(p.AlertIcon,{className:nO.errorIcon}),o[0]=t):t=o[0],o[1]!==u?(n=(0,s.jsxs)("div",{className:nO.errorNotice,children:[t,u]}),o[1]=u,o[2]=n):n=o[2],o[3]!==c?(a=c.map(nB),o[3]=c,o[4]=a):a=o[4],o[5]!==d?(r=(0,s.jsx)(eI.Q,{className:nO.fixErrorButton,leadingVisual:p.BeakerIcon,onClick:d,children:"Try to fix it"}),o[5]=d,o[6]=r):r=o[6],o[7]!==n||o[8]!==a||o[9]!==r?(i=(0,s.jsxs)("div",{className:nO.errorContainer,children:[n,a,r]}),o[7]=n,o[8]=a,o[9]=r,o[10]=i):i=o[10],i}function nB(e){return(0,s.jsx)("p",{className:nO.errorText,children:e},e)}try{nM.displayName||(nM.displayName="NodeError")}catch{}let nF={container:"OutputSection-module__container--SrRHB",header:"OutputSection-module__header--Xo32h",output:"OutputSection-module__output--VgJD0",groupTitle:"OutputSection-module__groupTitle--dVJrY",emptyState:"OutputSection-module__emptyState--mXoKy",emptyStateText:"OutputSection-module__emptyStateText--GwAYJ"},n$={container:"NodeRunning-module__container--Fstd4",text:"NodeRunning-module__text--v_PEz"};var nU=n(50539);function nV(e){let t,n,a,r=(0,l.c)(7),{isRunning:i}=e,o=i?"Running the node...":"Waiting on upstream nodes...",c=i?"thinking":"static";return r[0]!==c?(t=(0,s.jsx)(nU.N,{animationType:c,loopAnimation:!0}),r[0]=c,r[1]=t):t=r[1],r[2]!==o?(n=(0,s.jsx)("div",{className:n$.text,children:o}),r[2]=o,r[3]=n):n=r[3],r[4]!==t||r[5]!==n?(a=(0,s.jsxs)("div",{className:n$.container,children:[t,n]}),r[4]=t,r[5]=n,r[6]=a):a=r[6],a}try{nV.displayName||(nV.displayName="NodeRunning")}catch{}let nz="The following errors were found in the Loop configuration:",nW="The following errors were found while running the Loop:";function nH(e,t){return`${nW}

- ${t} (Node ${e})

Fix the Loop by updating this node or other nodes upstream in the Loop.`}function nq(e){return`- ${e.error} (Nodes ${e.involvedNodes.join(", ")})`}function nG(e){return`- ${e.error} (Node ${e.nodeId})`}function nK(e){return!!e&&(e.startsWith(nz)||e.startsWith(nW))}function nQ(e){let t,n,a,r,i,o=(0,l.c)(25),{isRunning:d,node:u,nodeId:m,onRun:h,onStop:g}=e,y=function(e){let{data:t}=eg(t=>t?.nodes[e]?.error);return t}(m),x=e_(m),v=function(e){let t,n=(0,l.c)(5),a=el();if(n[0]!==e||n[1]!==a){let r;n[3]!==e?(r=t=>t.involvedNodes.includes(e),n[3]=e,n[4]=r):r=n[4],t=a.filter(r).map(ec),n[0]=e,n[1]=a,n[2]=t}else t=n[2];return t}(m),_=ej(),{sendChatMessage:b}=t0(),[j,C]=(0,c.useState)(!0);o[0]!==y||o[1]!==m||o[2]!==b||o[3]!==v?(t=()=>{let e;if(v.length||y){if(v.length)e=nH(m,v.join("; "));else{if(!y)return;e=nH(m,y)}b(e),(0,f.BI)("dotcom_chat.activate",{target:"PANEL_NODE_FIX_ERROR",mode:"loops"})}},o[0]=y,o[1]=m,o[2]=b,o[3]=v,o[4]=t):t=o[4];let N=t,S=j?p.ChevronDownIcon:p.ChevronRightIcon,w=j?"Collapse output section":"Expand output section";return o[5]!==j?(n=()=>C(!j),o[5]=j,o[6]=n):n=o[6],o[7]!==S||o[8]!==w||o[9]!==n?(a=(0,s.jsx)("div",{className:nF.header,children:(0,s.jsx)(eI.Q,{leadingVisual:S,"aria-label":w,onClick:n,variant:"invisible",size:"small",className:nF.groupTitle,children:"Output"})}),o[7]=S,o[8]=w,o[9]=n,o[10]=a):a=o[10],o[11]!==j||o[12]!==_||o[13]!==d||o[14]!==u||o[15]!==y||o[16]!==x||o[17]!==h||o[18]!==g||o[19]!==N||o[20]!==v?(r=j&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:nF.output,children:_&&!x?(0,s.jsx)(nV,{isRunning:d}):v.length>0?(0,s.jsx)(nM,{errors:v,onFixErrorClick:N,title:"Oops, this node is configured incorrectly"}):y?(0,s.jsx)(nM,{errors:[y],onFixErrorClick:N}):x?(0,s.jsx)(nD,{isRunning:d,node:u,nodeValue:x}):(0,s.jsxs)("div",{className:nF.emptyState,children:[(0,s.jsx)(eH,{onClick:()=>{h(),(0,f.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_RUN",mode:"loops"})},onStop:()=>{g(),(0,f.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_STOP",mode:"loops"})},isLoading:d,value:x,variant:"default"}),(0,s.jsxs)("p",{className:nF.emptyStateText,children:["No output yet.",(0,s.jsx)("br",{})," Run this node to generate output."]})]})})}),o[11]=j,o[12]=_,o[13]=d,o[14]=u,o[15]=y,o[16]=x,o[17]=h,o[18]=g,o[19]=N,o[20]=v,o[21]=r):r=o[21],o[22]!==a||o[23]!==r?(i=(0,s.jsxs)("div",{className:nF.container,children:[a,r]}),o[22]=a,o[23]=r,o[24]=i):i=o[24],i}try{nQ.displayName||(nQ.displayName="OutputSection")}catch{}function nJ(){let e,t,n=(0,l.c)(3),{streamingMessage:a,isWaitingOnCopilot:r}=(0,h.Pk)(),i=a||r;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(nv.I,{icon:"node",size:32}),n[0]=e):e=n[0],n[1]!==i?(t=(0,s.jsxs)("div",{className:tQ.panelEmptyState,children:[e,i?(0,s.jsx)("span",{children:"Select a node in the loop once creation has completed."}):(0,s.jsx)("span",{children:"Select a node in the loop to view and edit."})]}),n[1]=i,n[2]=t):t=n[2],t}function nY(e){let t,n,a,r,i,o,c,d,u,m,p,h,g,y,x,v,_=(0,l.c)(48),{nodeId:b}=e;_[0]!==b?(t={nodeId:b},_[0]=b,_[1]=t):t=_[1];let{node:j,onUpdate:C,runPipelineFromNode:N,onStop:S}=function({nodeId:e}){let t=e5(),{runPipeline:n,stopPipeline:a}=e0(),{updateNode:r}=eF(),i=ed(),o=ev(e),s=F(t).some(t=>t.id===e),l=async()=>{!i&&o&&n(t,o.id)};return{isOutput:s,node:o,runPipelineFromNode:l,onUpdate:e=>{if(!o)return;let t=M({...o,...e},[]);t&&r(o.id,t)},onStop:a}}(t),w=e_(b),I=eb(b);return j?(_[2]!==j?(n=(0,s.jsx)(e9,{type:j.type,node:j}),_[2]=j,_[3]=n):n=_[3],_[4]!==j.title?(a=(0,s.jsx)("span",{className:tQ.nodeTitleText,children:j.title}),_[4]=j.title,_[5]=a):a=_[5],_[6]!==j?(r=(0,s.jsx)(te,{type:j.type,node:j}),_[6]=j,_[7]=r):r=_[7],_[8]!==n||_[9]!==a||_[10]!==r?(i=(0,s.jsxs)("div",{className:tQ.nodeTitleContainer,children:[n,a,r]}),_[8]=n,_[9]=a,_[10]=r,_[11]=i):i=_[11],_[12]!==j.description?(o=(0,s.jsx)("span",{className:tQ.descriptionText,children:j.description}),_[12]=j.description,_[13]=o):o=_[13],_[14]!==i||_[15]!==o?(c=(0,s.jsxs)("div",{className:tQ.nodeDetails,children:[i,o]}),_[14]=i,_[15]=o,_[16]=c):c=_[16],_[17]!==I||_[18]!==j.type||_[19]!==w||_[20]!==S||_[21]!==N?(d=L.isExecutable(j.type)&&(0,s.jsx)(eH,{onClick:()=>{N(),(0,f.BI)("node_action.select",{target:"PANEL_NODE_RUN",mode:"loops"})},onStop:()=>{S(),(0,f.BI)("node_action.select",{target:"PANEL_NODE_STOP",mode:"loops"})},isLoading:I,value:w,variant:"default",iconOnly:!0}),_[17]=I,_[18]=j.type,_[19]=w,_[20]=S,_[21]=N,_[22]=d):d=_[22],_[23]!==b?(u=(0,s.jsx)(nx,{nodeId:b}),_[23]=b,_[24]=u):u=_[24],_[25]!==d||_[26]!==u?(m=(0,s.jsxs)("div",{className:tQ.nodeActions,children:[d,u]}),_[25]=d,_[26]=u,_[27]=m):m=_[27],_[28]!==m||_[29]!==c?(p=(0,s.jsxs)("div",{className:tQ.header,children:[c,m]}),_[28]=m,_[29]=c,_[30]=p):p=_[30],_[31]!==b||_[32]!==C?(h=(0,s.jsx)("div",{className:tQ.input,children:(0,s.jsx)(ny,{nodeId:b,onUpdate:C})}),_[31]=b,_[32]=C,_[33]=h):h=_[33],_[34]!==I||_[35]!==j||_[36]!==b||_[37]!==S||_[38]!==N?(g=L.isExecutable(j.type)&&(0,s.jsx)(nQ,{isRunning:I,node:j,nodeId:b,onRun:N,onStop:S}),_[34]=I,_[35]=j,_[36]=b,_[37]=S,_[38]=N,_[39]=g):g=_[39],_[40]!==g?(y=(0,s.jsx)("div",{className:tQ.output,children:g}),_[40]=g,_[41]=y):y=_[41],_[42]!==h||_[43]!==y?(x=(0,s.jsxs)("div",{className:tQ.content,children:[h,y]}),_[42]=h,_[43]=y,_[44]=x):x=_[44],_[45]!==p||_[46]!==x?(v=(0,s.jsxs)("div",{className:tQ.container,children:[p,x]}),_[45]=p,_[46]=x,_[47]=v):v=_[47],v):null}function nZ(e){let t,n=(0,l.c)(2),{nodeId:a}=e;return n[0]!==a?(t=a?(0,s.jsx)(nY,{nodeId:a}):(0,s.jsx)(nJ,{}),n[0]=a,n[1]=t):t=n[1],t}try{nJ.displayName||(nJ.displayName="EmptyNodePanel")}catch{}try{nY.displayName||(nY.displayName="ActiveNodePanel")}catch{}try{nZ.displayName||(nZ.displayName="CompactNodePanel")}catch{}var nX=n(40136),n0=n(77191);function n1(e){let t,n,a=(0,l.c)(7),{textAreaRef:r}=e,i=Q(),{sendChatMessage:o}=t0(),c=(0,h.pn)(n2);a[0]!==i||a[1]!==o?(t=async e=>{(0,f.BI)("dotcom_chat.activate",{target:"PANEL_CHAT_MESSAGE_SUBMIT",mode:"loops"}),o(e),i({type:"FOCUS_NODE",nodeId:null})},a[0]=i,a[1]=o,a[2]=t):t=a[2];let d=t,u=!!c;return a[3]!==d||a[4]!==u||a[5]!==r?(n=(0,s.jsx)(n0.V,{textAreaRef:r,onSubmit:d,placeholder:"Refine your loop",size:"large",isStreaming:u,hideAttachmentButton:!0}),a[3]=d,a[4]=u,a[5]=r,a[6]=n):n=a[6],n}function n2(e){return e.streamingMessage}try{n1.displayName||(n1.displayName="ChatInput")}catch{}var n3=n(99357),n4=n(44669),n5=n(25745),n6=n(59220),n7=n(99377);let n8={container:"AutofixChatMessage-module__container--QqD4m",icon:"AutofixChatMessage-module__icon--orVjx",text:"AutofixChatMessage-module__text--EPIim"};function n9(e){let t,n,a,r=(0,l.c)(5),{isRunning:i}=e;return r[0]!==i?(t=i?(0,s.jsx)(tt.A,{size:"small"}):(0,s.jsx)(p.CheckIcon,{size:16,className:n8.icon}),r[0]=i,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)("span",{className:n8.text,children:"Copilot found an issue in your loop. Fixing now..."}),r[2]=n):n=r[2],r[3]!==t?(a=(0,s.jsxs)("div",{className:n8.container,children:[t,n]}),r[3]=t,r[4]=a):a=r[4],a}try{n9.displayName||(n9.displayName="AutofixChatMessage")}catch{}let ae={container:"ChatMessages-module__container--iorVa",scrollContainer:"ChatMessages-module__scrollContainer--CAONK",input:"ChatMessages-module__input--lZJYB",messagesWrapper:"ChatMessages-module__messagesWrapper--L0fRG",messagesContainer:"ChatMessages-module__messagesContainer--mXTpX",legalDisclaimer:"ChatMessages-module__legalDisclaimer--aeGDj"},at=e=>!e.content&&(!e.confirmations||0===e.confirmations.length)&&(!e.clientConfirmations||0===e.clientConfirmations.length);function an(e){let t,n,a,r,i,o=(0,l.c)(20),{inputRef:c}=e,d=(0,h.Pk)(),{isWaitingOnCopilot:u,streamingMessage:m}=d,{scrollToBottom:p}=(0,nX.b)();o[0]!==p?(t=()=>p("instant"),n=[p],o[0]=p,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,z.N)(t,n);let{messages:f,groupedMessages:g}=(0,n6.a)(d);if(o[3]!==f.length?(a=0===f.length&&(0,s.jsx)("p",{className:ae.legalDisclaimer,children:(0,s.jsx)(n5.h,{})}),o[3]=f.length,o[4]=a):a=o[4],o[5]!==f.length||o[6]!==g||o[7]!==c||o[8]!==u||o[9]!==m){let e;o[11]!==f.length||o[12]!==g.length||o[13]!==c||o[14]!==u||o[15]!==m?(e=(e,t)=>{if(0===e.length||!e[0])return null;let n=`group-${e[0].id}`;return(0,s.jsx)(n4.i,{isLastGroup:t===g.length-1,children:e.map((n,a)=>{let r=t===g.length-1&&a===e.length-1;if(!(n===m||n.id===n7.Wp||!at(n)||n.error))return null;if("user"===n.role&&nK(n.content)){let a=e[e.length-1],i=t===g.length-1,o=r&&u,l=a?.role==="assistant"&&(a===m||a&&i&&u);return(0,s.jsx)(n9,{isRunning:o||l},n.id)}return(0,s.jsx)(n3.c,{isLatestMessage:r,isFirstReply:1===f.length,isStreaming:n.id===m?.id||r&&u,message:n,inputRef:c},n.id)})},n)},o[11]=f.length,o[12]=g.length,o[13]=c,o[14]=u,o[15]=m,o[16]=e):e=o[16],r=g.map(e),o[5]=f.length,o[6]=g,o[7]=c,o[8]=u,o[9]=m,o[10]=r}else r=o[10];return o[17]!==a||o[18]!==r?(i=(0,s.jsx)("div",{className:ae.messagesWrapper,children:(0,s.jsxs)("div",{className:ae.messagesContainer,children:[a,r]})}),o[17]=a,o[18]=r,o[19]=i):i=o[19],i}try{an.displayName||(an.displayName="ChatMessages")}catch{}function aa(e){let t,n,a,r,i=(0,l.c)(6),{isMobileView:o}=e,d=(0,c.useRef)(null);return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(an,{inputRef:d}),i[0]=t):t=i[0],i[1]!==o?(n=(0,s.jsx)(nX.$,{disabled:o,className:ae.scrollContainer,children:t}),i[1]=o,i[2]=n):n=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("div",{className:ae.input,children:(0,s.jsx)(n1,{textAreaRef:d})}),i[3]=a):a=i[3],i[4]!==n?(r=(0,s.jsxs)("div",{className:ae.container,children:[n,a]}),i[4]=n,i[5]=r):r=i[5],r}try{aa.displayName||(aa.displayName="Chat")}catch{}var ar=n(99038);let ai={container:"SidePanel-module__container--dHo2v",panelHeader:"SidePanel-module__panelHeader--Q5UNL",segmentedControl:"SidePanel-module__segmentedControl--ehaGC",content:"SidePanel-module__content--epJfI"},ao={container:"ConfigurePanel-module__container--NrEV1",nameForm:"ConfigurePanel-module__nameForm--idXyr",descriptionForm:"ConfigurePanel-module__descriptionForm--KqbFA",iconForm:"ConfigurePanel-module__iconForm--EuLBG",iconSection:"ConfigurePanel-module__iconSection--woydt",iconView:"ConfigurePanel-module__iconView--t2M8_",iconColorLabel:"ConfigurePanel-module__iconColorLabel--_k3jI",descriptionInput:"ConfigurePanel-module__descriptionInput--_X1M2",descriptionCounter:"ConfigurePanel-module__descriptionCounter--YPeY3"};function as(e,t){let n=function(e){let t=0;for(let n=0;n<e.length;n++)t=(31*t+e.charCodeAt(n))%0x3b9aca07;return t}(e)%t.length;return t[n]}let al=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"];var ac=n(19647);function ad(e){let t,n,a,r,i=(0,l.c)(8);i[0]!==e?({value:t,onChange:n,...a}=e,i[0]=e,i[1]=t,i[2]=n,i[3]=a):(t=i[1],n=i[2],a=i[3]);let{value:o,onChange:c}=nc(t,n);return i[4]!==c||i[5]!==a||i[6]!==o?(r=(0,s.jsx)(ac.Ay,{...a,value:o,onChange:c}),i[4]=c,i[5]=a,i[6]=o,i[7]=r):r=i[7],r}try{ad.displayName||(ad.displayName="TextArea")}catch{}let au=e=>e.charAt(0).toUpperCase()+e.slice(1);function am(){let e,t,n,a,r,i,o,d,u,m,p,h,f,g,y,x,v,_,b,j,C,N,S,w,I,k=(0,l.c)(54),T=eB(),{data:E}=er();k[0]!==E?.title?(e=()=>E?.title?as(E?.title,al):"blue",k[0]=E?.title,k[1]=e):e=k[1];let[A]=(0,c.useState)(e);k[2]!==E||k[3]!==T?(t=e=>{if(!E)return;let t=e.target.value;T.mutate({loopID:E.id,updateFn:e=>e?{...e,title:t}:E})},k[2]=E,k[3]=T,k[4]=t):t=k[4];let R=t;k[5]!==E||k[6]!==T?(n=e=>{if(!E)return;let t=e.target.value;T.mutate({loopID:E.id,updateFn:e=>e?{...e,description:t}:E})},k[5]=E,k[6]=T,k[7]=n):n=k[7];let L=n;k[8]!==E||k[9]!==T?(a=e=>{E&&T.mutate({loopID:E.id,updateFn:t=>t?{...t,color:e}:E})},k[8]=E,k[9]=T,k[10]=a):a=k[10];let P=a;if(!E)return null;let{title:D,color:O,description:M}=E,B=O||A;k[11]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)(eS.A.Label,{children:"Name"}),k[11]=r):r=k[11],k[12]!==R||k[13]!==D?(i=(0,s.jsx)(nd,{block:!0,value:D,onChange:R,placeholder:"Loop name"}),k[12]=R,k[13]=D,k[14]=i):i=k[14],k[15]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(eS.A.Caption,{children:"Memorable name that helps you find your loop."}),k[15]=o):o=k[15],k[16]!==i?(d=(0,s.jsxs)(eS.A,{className:ao.nameForm,children:[r,i,o]}),k[16]=i,k[17]=d):d=k[17],k[18]!==B?(u=(0,s.jsx)("div",{className:ao.iconView,children:(0,s.jsx)(nv.I,{color:B,hasBackground:!0,icon:"loops",size:24})}),k[18]=B,k[19]=u):u=k[19],k[20]===Symbol.for("react.memo_cache_sentinel")?(p=(0,s.jsx)(eS.A.Label,{children:"Icon"}),m=(0,s.jsx)(eS.A.Caption,{children:"Pick a color to easier recognize your loop."}),k[20]=m,k[21]=p):(m=k[20],p=k[21]),k[22]===Symbol.for("react.memo_cache_sentinel")?(h=(0,s.jsx)("span",{className:ao.iconColorLabel,children:"Color: "}),k[22]=h):h=k[22],k[23]!==B?(f=au(B),k[23]=B,k[24]=f):f=k[24],k[25]!==f?(g=(0,s.jsxs)(eT.W.Button,{variant:"default",children:[h,(0,s.jsx)("span",{children:f})]}),k[25]=f,k[26]=g):g=k[26],k[27]!==B||k[28]!==P?(y=al.map(e=>(0,s.jsx)(ek.l.Item,{onSelect:()=>P(e),selected:B===e,children:au(e)},e)),k[27]=B,k[28]=P,k[29]=y):y=k[29],k[30]!==y?(x=(0,s.jsx)(eT.W.Overlay,{children:(0,s.jsx)(ek.l,{selectionVariant:"single",children:y})}),k[30]=y,k[31]=x):x=k[31],k[32]!==g||k[33]!==x?(v=(0,s.jsxs)(eS.A,{className:ao.iconForm,children:[p,m,(0,s.jsxs)(eT.W,{children:[g,x]})]}),k[32]=g,k[33]=x,k[34]=v):v=k[34],k[35]!==v||k[36]!==u?(_=(0,s.jsxs)("div",{className:ao.iconSection,children:[u,v]}),k[35]=v,k[36]=u,k[37]=_):_=k[37],k[38]===Symbol.for("react.memo_cache_sentinel")?(b=(0,s.jsx)(eS.A.Label,{children:"Description"}),k[38]=b):b=k[38];let F=M||"";k[39]!==L||k[40]!==F?(j=(0,s.jsx)(ad,{block:!0,value:F,onChange:L,rows:4,maxLength:200,resize:"vertical",placeholder:"Describe what this loop does"}),k[39]=L,k[40]=F,k[41]=j):j=k[41];let $=M?.length??0;return k[42]!==$?(C=(0,s.jsxs)("div",{className:ao.descriptionCounter,children:[(0,s.jsx)("span",{children:$})," / 200"]}),k[42]=$,k[43]=C):C=k[43],k[44]!==j||k[45]!==C?(N=(0,s.jsxs)("div",{className:ao.descriptionInput,children:[j,C]}),k[44]=j,k[45]=C,k[46]=N):N=k[46],k[47]===Symbol.for("react.memo_cache_sentinel")?(S=(0,s.jsx)(eS.A.Caption,{children:"Shows beneath the title on your loop overview page and does not impact responses."}),k[47]=S):S=k[47],k[48]!==N?(w=(0,s.jsxs)(eS.A,{className:ao.descriptionForm,children:[b,N,S]}),k[48]=N,k[49]=w):w=k[49],k[50]!==_||k[51]!==w||k[52]!==d?(I=(0,s.jsxs)("div",{className:ao.container,children:[d,_,w]}),k[50]=_,k[51]=w,k[52]=d,k[53]=I):I=k[53],I}try{am.displayName||(am.displayName="ConfigurePanel")}catch{}function ap(e){let t,n,a,r,i,o,d,u,m,g,y,x=(0,l.c)(25),{isMobileView:v,nodeId:_}=e,{streamingMessage:b,isWaitingOnCopilot:j}=(0,h.Pk)(),C=b||j,[N,S]=(0,c.useState)(C?"chat":"node");x[0]!==C?(t=()=>{C&&S("chat")},n=[C],x[0]=C,x[1]=t,x[2]=n):(t=x[1],n=x[2]),(0,c.useEffect)(t,n),x[3]!==C||x[4]!==_?(a=()=>{_&&!C&&S("node")},r=[C,_],x[3]=C,x[4]=_,x[5]=a,x[6]=r):(a=x[5],r=x[6]),(0,c.useEffect)(a,r),x[7]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{let t,n;0===e?(t="chat",n="PANEL_SELECT_CHAT"):1===e?(t="node",n="PANEL_SELECT_NODE"):(t="configure",n="PANEL_SELECT_CONFIGURE"),S(t),(0,f.BI)("dotcom_chat.activate",{target:n,mode:"loops"})},x[7]=i):i=x[7];let w=i,I="chat"===N;x[8]!==I?(o=(0,s.jsx)(tK.I.Button,{selected:I,leadingIcon:p.CommentIcon,children:"Refine"}),x[8]=I,x[9]=o):o=x[9];let k="node"===N;x[10]!==k?(d=(0,s.jsx)(tK.I.Button,{selected:k,leadingIcon:ar.GS,children:"Node"}),x[10]=k,x[11]=d):d=x[11];let T="configure"===N;return x[12]!==T?(u=(0,s.jsx)(tK.I.Button,{selected:T,leadingIcon:p.GearIcon,children:"Configure"}),x[12]=T,x[13]=u):u=x[13],x[14]!==u||x[15]!==o||x[16]!==d?(m=(0,s.jsx)("div",{className:ai.panelHeader,children:(0,s.jsxs)(tK.I,{"aria-label":"Loops panel",className:ai.segmentedControl,onChange:w,children:[o,d,u]})}),x[14]=u,x[15]=o,x[16]=d,x[17]=m):m=x[17],x[18]!==N||x[19]!==v||x[20]!==_?(g=(0,s.jsx)("div",{className:ai.content,children:"node"===N?(0,s.jsx)(nZ,{nodeId:_},_||"empty"):"chat"===N?(0,s.jsx)(aa,{isMobileView:v}):(0,s.jsx)(am,{})}),x[18]=N,x[19]=v,x[20]=_,x[21]=g):g=x[21],x[22]!==m||x[23]!==g?(y=(0,s.jsxs)("div",{className:ai.container,children:[m,g]}),x[22]=m,x[23]=g,x[24]=y):y=x[24],y}try{ap.displayName||(ap.displayName="SidePanel")}catch{}function ah(){let e,t,n,a,r,i,o,g,y,x,v,_,b=(0,l.c)(33),{data:j}=er(),C=!!j,N=K(ag),S=j?.id,w=Q(),[I,k]=(0,c.useState)(!1),{streamingMessage:T,isWaitingOnCopilot:E}=(0,h.Pk)(),A=T||E,[R,L]=(0,c.useState)(af);b[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{L(window.innerWidth<1024)},b[0]=e):e=b[0],(0,u.w)(e);let P=!!N&&!!S,D=!R||I||P;b[1]!==w||b[2]!==R?(t=()=>{w({type:"FOCUS_NODE",nodeId:null}),R&&k(!1)},b[1]=w,b[2]=R,b[3]=t):t=b[3];let O=t;b[4]!==I?(n=()=>{(0,f.BI)("dotcom_chat.activate",{target:I?"PANEL_MOBILE_CLOSE":"PANEL_MOBILE_OPEN",mode:"loops"}),k(!I)},b[4]=I,b[5]=n):n=b[5];let M=n;return b[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("div",{className:tM.header,children:(0,s.jsx)(tO,{})}),b[6]=a):a=b[6],b[7]!==R||b[8]!==I||b[9]!==M?(r=R&&(0,s.jsx)(m.K,{className:tM.panelToggleButton,onClick:M,icon:p.HistoryIcon,"aria-label":I?"Close panel":"Open panel","aria-expanded":I}),b[7]=R,b[8]=I,b[9]=M,b[10]=r):r=b[10],b[11]!==O||b[12]!==R||b[13]!==D?(i=R&&D&&(0,s.jsx)("div",{className:tM.backdrop,onClick:O}),b[11]=O,b[12]=R,b[13]=D,b[14]=i):i=b[14],b[15]!==D?(o=(0,d.$)(tM.panel,{[tM.visible]:D}),b[15]=D,b[16]=o):o=b[16],b[17]!==R||b[18]!==N?(g=(0,s.jsx)("div",{className:tM.scrollContainer,children:(0,s.jsx)(ComponentErrorBoundary,{name:"side-panel",children:(0,s.jsx)(ap,{isMobileView:R,nodeId:N})})}),b[17]=R,b[18]=N,b[19]=g):g=b[19],b[20]!==o||b[21]!==g?(y=(0,s.jsx)("div",{className:o,children:g}),b[20]=o,b[21]=g,b[22]=y):y=b[22],b[23]!==C||b[24]!==A?(x=A?(0,s.jsx)(tW,{}):C?(0,s.jsx)(ComponentErrorBoundary,{name:"canvas",children:(0,s.jsx)(ts,{})}):null,b[23]=C,b[24]=A,b[25]=x):x=b[25],b[26]!==x?(v=(0,s.jsx)("div",{className:tM.canvas,children:x}),b[26]=x,b[27]=v):v=b[27],b[28]!==v||b[29]!==r||b[30]!==i||b[31]!==y?(_=(0,s.jsxs)("div",{className:tM.container,children:[a,(0,s.jsxs)("div",{className:tM.main,children:[r,i,y,v]})]}),b[28]=v,b[29]=r,b[30]=i,b[31]=y,b[32]=_):_=b[32],_}function af(){return"undefined"!=typeof window&&window.innerWidth<1024}function ag(e){return e.uiState.focusedNodeId}try{ah.displayName||(ah.displayName="Layout")}catch{}let ay={container:"PipesPreviewArea-module__container--aXrRa"};function ax(e){for(let n of e.references??[]){var t;if(n.type===tj&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t=B({description:n.description,id:n.id,title:n.title,nodes:n.nodes,updatedAt:e.createdAt},[]);return{messageId:e.id,pipeline:t}}}}function av(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=ax(n);if(e)return e}}let a_=new Set([eo.EmptyInputValue]);var ab=n(47397);let aj=(0,n(85351).A)("localStorage"),aC="copilot-loops-thread-";function aN(e,t){if(null!==t)try{let n=`${aC}${e}`;aj.setItem(n,t)}catch(e){}}var aS=n(44435);function aw(e){return!!e}async function aI(){return new Promise(e=>setTimeout(e,10))}function ak(e){let t=e.messages.toReversed().filter(e=>"user"===e.role).slice(0,2);return!(t.length<2)&&t.every(e=>nK(e.content))}let aT=(e,t)=>{let n={...e},a=n.content;return"string"==typeof a&&(n.content=function(e,t,n=!1){let a=j();return e.replace(a,(e,a,r,i)=>{let o=t[a];if(void 0===o)return b(`Node with ID "${a}" not found in node map`),e;let s=o;if(r)if(o&&"object"==typeof o&&!Array.isArray(o)){let e=function(e,t){if(!t||!e)return null;let n=t.split("."),a=e;for(let e of n){if(null==a||"object"!=typeof a||null===a)return null;a=a[e]}return a}(o,r);if(null!==e)s=e;else throw Error(`Path "${r}" on node with ID "${a}" does not have a value`)}else throw Error(`Cannot access path "${r}" on non-object node with ID "${a}"`);return String(("string"!=typeof s||n?JSON.stringify(s):s)??e)})}(a,t,L.requiresCodeEvaluation(e.type))),n};function aE(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function aA(e,t){var n=aE(e,t,"get");return n.get?n.get.call(e):n.value}function aR(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function aL(e,t,n){var a=aE(e,t,"set");if(a.set)a.set.call(e,n);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=n}return n}var aP=new WeakMap,aD=new WeakMap,aO=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t){let n={graphQLClient:aA(this,aD),chatClient:aA(this,aO),signal:e,onPartialResult:t};return L.executeNode(aA(this,aP),n)}constructor(e,t,n){aR(this,aP,{writable:!0,value:void 0}),aR(this,aD,{writable:!0,value:void 0}),aR(this,aO,{writable:!0,value:void 0}),aL(this,aP,e),aL(this,aD,t),aL(this,aO,n)}};function aM(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function aB(e,t){var n=aM(e,t,"get");return n.get?n.get.call(e):n.value}function aF(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function a$(e,t,n){var a=aM(e,t,"set");if(a.set)a.set.call(e,n);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=n}return n}var aU=new WeakMap,aV=new WeakMap,az=new WeakMap,aW=new WeakMap,aH=new WeakMap,aq=new WeakMap,aG=new WeakMap;let PipelineRunner=class PipelineRunner{async run(e,t){let n=F(aB(this,az));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>this.runNodeUnlessRunning(n,e,t)))}stop(e){aB(this,aG).abort(),e(aB(this,aW))}isCancelled(){return aB(this,aG).signal.aborted}async runNodeUnlessRunning(e,t,n){let a=aB(this,aq).get(e.id);if(a)return a;let r=this.runNode(e,t,n);return aB(this,aq).set(e.id,r),r}async runNode(e,t,n){if(this.isCancelled())return null;let a=await n(aB(this,az).id,aB(this,aW)),r=a?.nodes[e.id]?.value;if(r)return r;let i=[...new Set(aB(this,aH).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>aB(this,az).nodes.find(t=>t.id===e)).filter(e=>!!e),o=await Promise.all(i.map(async e=>[e.id,await this.runNodeUnlessRunning(e,t,n)]));if(o.some(([e,t])=>null===t)||this.isCancelled())return null;let s=Object.fromEntries(o);try{let n=aT(e,s),a=new NodeRunner(n,aB(this,aU),aB(this,aV));t({type:"SET_RUNNING",nodeID:e.id});let r=await a.run(aB(this,aG).signal,n=>{this.isCancelled()||t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})});return this.isCancelled()||t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:r}),r}catch(n){var l;return this.isCancelled()||t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(l=n)instanceof Error?l.message:"string"==typeof l?l:"object"==typeof l?JSON.stringify(l):""}),null}}constructor(e,t,n,a){aF(this,aU,{writable:!0,value:void 0}),aF(this,aV,{writable:!0,value:void 0}),aF(this,az,{writable:!0,value:void 0}),aF(this,aW,{writable:!0,value:void 0}),aF(this,aH,{writable:!0,value:void 0}),aF(this,aq,{writable:!0,value:void 0}),aF(this,aG,{writable:!0,value:void 0}),a$(this,aU,n),a$(this,aV,a),a$(this,az,e),a$(this,aW,t),a$(this,aH,P(e)),a$(this,aq,new Map),a$(this,aG,new AbortController)}};function aK(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function aQ(e,t){var n=aK(e,t,"get");return n.get?n.get.call(e):n.value}function aJ(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function aY(e,t,n){var a=aK(e,t,"set");if(a.set)a.set.call(e,n);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=n}return n}var aZ=new WeakMap,aX=new WeakMap,a0=new WeakMap,a1=new WeakMap;let PipesService=class PipesService{async getGraphQLResponse(e){return aQ(this,aX).getGraphQLResponse(e)}async getLoop(e,t="draft"){return aQ(this,aZ).getLoop(e,t)}async getAllLoops(e="latest"){return(await aQ(this,aZ).getAllLoops(e)).sort((e,t)=>{var n,a;return n=t.updatedAt,a=e.updatedAt,new Date(n).getTime()-new Date(a).getTime()})}async createLoop(e){return aQ(this,aZ).createLoop(e)}async updateLoop(e,t){return aQ(this,aZ).updateLoop(e,t)}async deleteLoop(e){try{let t=`${aC}${e}`;aj.removeItem(t)}catch(e){}return aQ(this,aZ).deleteLoop(e)}async saveLoop(e){return aQ(this,aZ).saveLoop(e)}async revertLoop(e){return aQ(this,aZ).revertLoop(e)}async getExecution(e,t){return aQ(this,aZ).getExecution(e,t)}async createExecution(e,t){return aQ(this,aZ).createExecution(e,t)}async updateExecution(e,t,n){return aQ(this,aZ).updateExecution(e,t,n)}isExecutionRunning(e){return!!aQ(this,a1).get(e)}async runPipeline(e,t,n,a){if(es(e).length>0)return;let r=new PipelineRunner(e,t,aQ(this,aX),aQ(this,a0));aQ(this,a1).set(t,r);try{return await r.run(n,a)}finally{aQ(this,a1).delete(t)}}stopPipeline(e,t){let n=aQ(this,a1).get(e);n&&(n.stop(t),aQ(this,a1).delete(e))}constructor(e,t,n){aJ(this,aZ,{writable:!0,value:void 0}),aJ(this,aX,{writable:!0,value:void 0}),aJ(this,a0,{writable:!0,value:void 0}),aJ(this,a1,{writable:!0,value:new Map}),aY(this,aZ,e),aY(this,aX,t),aY(this,a0,n)}};function a2(e){return e.id===t_&&"service"in e&&e.service instanceof PipesService}var a3=n(39627);function a4(){let e,t,n=(0,l.c)(5),a=(0,Z.zy)(),r=(0,Z.Zp)(),i=et(),o=(0,c.useRef)(!0);return n[0]!==a.search||n[1]!==i||n[2]!==r?(e=()=>{o.current&&(o.current=!1,async function(){let e=`${tv.Jz}/loops`;try{let t=new URLSearchParams(a.search).get("data");if(!t)return void r(e);let n=function(e){try{let t=(0,tR.decompressFromEncodedURIComponent)(e);if(t){let e=JSON.parse(t);if(!e.title||!e.nodes)return null;return e}}catch{}try{let t=decodeURIComponent(atob(e)),n=JSON.parse(t);if(!n.title||!n.nodes)return null;return n}catch{return null}}(t);if(!n)return void r(e);let o={id:crypto.randomUUID(),title:n.title??"Shared Loop",description:n.description||"",nodes:n.nodes||[],updatedAt:new Date().toISOString()};await i.createLoop(o),(0,f.BI)("dotcom_chat.activate",{target:"LOOP_IMPORT_SHARED",mode:"loops"}),r(`${tv.Jz}/l/${o.id}`)}catch{r(e)}}())},t=[a.search,r,i],n[0]=a.search,n[1]=i,n[2]=r,n[3]=e,n[4]=t):(e=n[3],t=n[4]),(0,c.useEffect)(e,t),null}try{a4.displayName||(a4.displayName="SharedLoopImporter")}catch{}function a5(e){let t,n,a=(0,l.c)(6),{chatState:r,plugin:i}=e;if(!a2(i))throw Error("PipesPreviewArea can only be used with a PipesPlugin");return a[0]!==r||a[1]!==i.previewUrl?(t=(0,s.jsx)(a6,{chatState:r,previewUrl:i.previewUrl}),a[0]=r,a[1]=i.previewUrl,a[2]=t):t=a[2],a[3]!==i.service||a[4]!==t?(n=(0,s.jsx)(ee,{value:i.service,children:t}),a[3]=i.service,a[4]=t,a[5]=n):n=a[5],n}function a6(e){let t,n,a,r,i,o=(0,l.c)(17),{chatState:c,previewUrl:d}=e,{loopID:u}=(0,Z.g)(),m=(0,ab.b)(),{currentReferences:p}=c;o[0]!==c?(t=(0,aS.W)(c),o[0]=c,o[1]=t):t=o[1];let h=t,{data:f}=er(),g=(0,t2.GF)(c.availableModels);o[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],o[2]=n):n=o[2],(0,z.N)(a7,n),o[3]!==p||o[4]!==g||o[5]!==f||o[6]!==u||o[7]!==m||o[8]!==h?(a=async e=>{if(!u)return;let t=e.trim();if(""===t)return;let n=p;f&&(n=[...n,{type:tj,...f}]),m.sendChatMessage({thread:h,content:t,modeOverride:tb,model:g,references:n})},o[3]=p,o[4]=g,o[5]=f,o[6]=u,o[7]=m,o[8]=h,o[9]=a):a=o[9];let y=a;return o[10]!==c?(r=(0,s.jsx)(G,{children:(0,s.jsx)(a8,{chatState:c})}),o[10]=c,o[11]=r):r=o[11],o[12]!==c.availableModels||o[13]!==d||o[14]!==y||o[15]!==r?(i=(0,s.jsx)(tX,{availableModels:c.availableModels,previewUrl:d,sendChatMessage:y,children:r}),o[12]=c.availableModels,o[13]=d,o[14]=y,o[15]=r,o[16]=i):i=o[16],i}function a7(){let e=document.querySelector("header.AppHeader");return e&&(e.style.display="none"),()=>{e&&(e.style.display="")}}function a8(e){let t,n,a,r=(0,l.c)(6),{chatState:i}=e;(function(e){let t,n,a,r,i,o=(0,l.c)(20),{data:s}=er("draft",aw),d=(0,ab.b)();o[0]!==e?(t=(0,aS.W)(e),o[0]=e,o[1]=t):t=o[1];let u=t,{threads:m,threadsLoading:p}=e,{loopID:h}=(0,Z.g)(),f=e.selectedThreadID;o[2]!==s||o[3]!==h||o[4]!==d||o[5]!==u?.id||o[6]!==m||o[7]!==p.state?(n=()=>{(async()=>{if("pending"===p.state)return d.fetchThreads();if(!s||"loaded"!==p.state||!h)return;let e=function(e){try{let t=`${aC}${e}`;return aj.getItem(t)}catch(e){return _("Failed to read loop thread ID from localStorage:",e),null}}(h);if(e&&u?.id!==e){let t=m.get(e);t&&await d.selectThread(t,{includeThreads:!1})}})()},o[2]=s,o[3]=h,o[4]=d,o[5]=u?.id,o[6]=m,o[7]=p.state,o[8]=n):n=o[8];let g=u?.id;o[9]!==s||o[10]!==h||o[11]!==d||o[12]!==g||o[13]!==m||o[14]!==p?(a=[s,d,g,m,p,h],o[9]=s,o[10]=h,o[11]=d,o[12]=g,o[13]=m,o[14]=p,o[15]=a):a=o[15],(0,c.useEffect)(n,a),o[16]!==h||o[17]!==f?(r=()=>{h&&f&&aN(h,f)},i=[f,h],o[16]=h,o[17]=f,o[18]=r,o[19]=i):(r=o[18],i=o[19]),(0,c.useEffect)(r,i)})(i),function(e){let{data:t}=er(),n=Q(),a=function(e,t){let{loopID:n}=(0,Z.g)(),{pipeline:a,messageId:r}=av(t)??{};return(0,c.useMemo)(()=>n&&a?{...a,id:n}:a,[r,n])}(e.selectedThreadID,e.messages),{data:r}=eg(),{sendChatMessage:i}=t0(),{updateLoop:o}=eF(),{runPipeline:s}=e0();(0,c.useEffect)(()=>{let l=!1,c=async(t,a)=>{if(await aI(),l)return;if(a.length>0&&a.every(e=>a_.has(e.errorType))){let e=function(e){let t=new Set(es(e).reduce((e,t)=>e.concat(t.involvedNodes),[]));for(let n of P(e).layers)for(let e of n)if(t.has(e.id))return e.id}(t);e&&n({type:"FOCUS_NODE",nodeId:e});return}if(a.length>0&&!ak(e))return void i(function(e){let t=e.map(nq).join(`
`);return`${nz}

${t}

Fix the Loop by modifying its nodes to resolve these errors.`}(a));if(await s(t),l)return;let o=Object.entries(r?.nodes??{}).filter(([e,t])=>t?.error).map(([e,t])=>({nodeId:e,error:t?.error}));if(o.length>0&&!ak(e))return void i(function(e){let t=e.map(nG).join(`
`);return`${nW}

${t}

Fix the Loop by modifying its nodes to resolve these errors.`}(o))};return(async()=>{if(!a||new Date(t?.updatedAt??0)>=new Date(a?.updatedAt??0)||l)return;o(a);let e=es(a);c(a,e)})(),()=>{l=!0}},[a])}(i);let{data:o}=er(),d=(0,Z.zy)(),u=tw.test(d.pathname);r[0]!==o?(t=()=>{let e=o?.title?`${o.title} \xb7 Loops \xb7 GitHub Copilot`:"Loops \xb7 GitHub Copilot";(0,a3.D)(e)},r[0]=o,r[1]=t):t=r[1];let m=o?.title;if(r[2]!==m?(n=[m],r[2]=m,r[3]=n):n=r[3],(0,c.useEffect)(t,n),u){let e;return r[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(a4,{}),r[4]=e):e=r[4],e}return r[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("div",{className:ay.container,children:(0,s.jsx)(ah,{})}),r[5]=a):a=r[5],a}try{a5.displayName||(a5.displayName="PipesPreviewArea")}catch{}try{a6.displayName||(a6.displayName="PipesPreviewAreaInner")}catch{}try{a8.displayName||(a8.displayName="PipesPreview")}catch{}var a9=n(48053),re=n(96679);function rt(e){let t,n,a=(0,l.c)(5),{onLinkClick:r}=e,i=(0,Z.zy)(),o=re.fV?.pathname||i?.pathname||"";a[0]!==r?(t=(e,t)=>{r?.(e,t)},a[0]=r,a[1]=t):t=a[1];let c=t,d=o===tC?"page":void 0;return a[2]!==c||a[3]!==d?(n=(0,s.jsx)(a9.Vx,{"aria-current":d,displayName:"Loops",href:tC,icon:ar.LP,id:t_,onLinkClick:c}),a[2]=c,a[3]=d,a[4]=n):n=a[4],n}try{rt.displayName||(rt.displayName="PipesNavigation")}catch{}var rn=n(83880);function ra(){let{message:e}=(0,rn.V)(),t=ax(e);return t?.pipeline??null}let rr={container:"LoopBlock-module__container--CK9SB",streaming:"LoopBlock-module__streaming--TPBwx",header:"LoopBlock-module__header--uYMyT",headerCollapsed:"LoopBlock-module__headerCollapsed--NY9yJ",expandButton:"LoopBlock-module__expandButton--Kkc8L",content:"LoopBlock-module__content--tBcqk",node:"LoopBlock-module__node--B18Tf",iconContainer:"LoopBlock-module__iconContainer--VPfOh",checkIcon:"LoopBlock-module__checkIcon--eqIgJ",nodeTitle:"LoopBlock-module__nodeTitle--sHCHD"};function ri(e){let t,n,a,r,i,o,u,m,h,f=(0,l.c)(26),{loop:g,headerButton:y,isStreaming:x}=e,[v,_]=(0,c.useState)(!0);if(!g)return null;f[0]!==v?(t=()=>_(!v),f[0]=v,f[1]=t):t=f[1];let b=t,j=x&&rr.streaming;f[2]!==j?(n=(0,d.$)(rr.container,j),f[2]=j,f[3]=n):n=f[3];let C=!v&&rr.headerCollapsed;return f[4]!==C?(a=(0,d.$)(rr.header,C),f[4]=C,f[5]=a):a=f[5],f[6]!==v?(r=v?(0,s.jsx)(p.ChevronDownIcon,{size:16}):(0,s.jsx)(p.ChevronRightIcon,{size:16}),f[6]=v,f[7]=r):r=f[7],f[8]!==g.title?(i=(0,s.jsx)("span",{children:g.title}),f[8]=g.title,f[9]=i):i=f[9],f[10]!==r||f[11]!==i||f[12]!==b?(o=(0,s.jsx)(eI.Q,{variant:"invisible",onClick:b,className:rr.expandButton,leadingVisual:r,children:i}),f[10]=r,f[11]=i,f[12]=b,f[13]=o):o=f[13],f[14]!==y||f[15]!==a||f[16]!==o?(u=(0,s.jsxs)("div",{className:a,children:[o,y]}),f[14]=y,f[15]=a,f[16]=o,f[17]=u):u=f[17],f[18]!==v||f[19]!==x||f[20]!==g.nodes?(m=v&&(0,s.jsx)("div",{className:rr.content,children:g.nodes.map((e,t)=>{let n=x&&t===g.nodes.length-1;return(0,s.jsxs)("div",{className:rr.node,children:[(0,s.jsx)("div",{className:rr.iconContainer,children:(0,s.jsx)(p.CheckCircleFillIcon,{size:16,className:rr.checkIcon})}),n&&!e.title?null:(0,s.jsx)("span",{className:rr.nodeTitle,children:e.title})]},e.id)})}),f[18]=v,f[19]=x,f[20]=g.nodes,f[21]=m):m=f[21],f[22]!==m||f[23]!==n||f[24]!==u?(h=(0,s.jsxs)("div",{className:n,children:[u,m]}),f[22]=m,f[23]=n,f[24]=u,f[25]=h):h=f[25],h}try{ri.displayName||(ri.displayName="LoopBlockContent")}catch{}function ro(e){let t,n=(0,l.c)(3),{isStreaming:a}=e,r=ra();return n[0]!==a||n[1]!==r?(t=(0,s.jsx)(ri,{loop:r,isStreaming:a}),n[0]=a,n[1]=r,n[2]=t):t=n[2],t}try{ro.displayName||(ro.displayName="ReadOnlyLoopBlock")}catch{}function rs(e){let t,n,a,r=(0,l.c)(13),{isStreaming:i}=e,o=ra(),{updateLoop:c}=eF(),{data:d}=er(),u=d?.id;r[0]!==d||r[1]!==o||r[2]!==u||r[3]!==c?(t=()=>{d&&u&&o&&c({...o,id:u})},r[0]=d,r[1]=o,r[2]=u,r[3]=c,r[4]=t):t=r[4];let m=t;r[5]!==m||r[6]!==i||r[7]!==u?(n=u&&!i?(0,s.jsx)(eI.Q,{variant:"invisible",onClick:m,children:"Restore"}):null,r[5]=m,r[6]=i,r[7]=u,r[8]=n):n=r[8];let p=n;return r[9]!==i||r[10]!==o||r[11]!==p?(a=(0,s.jsx)(ri,{loop:o,headerButton:p,isStreaming:i}),r[9]=i,r[10]=o,r[11]=p,r[12]=a):a=r[12],a}try{rs.displayName||(rs.displayName="InteractiveLoopBlock")}catch{}function rl(e){let t,n=(0,l.c)(4),{isStreaming:a}=e;if((0,c.useContext)(X)){let e;return n[0]!==a?(e=(0,s.jsx)(rs,{isStreaming:a}),n[0]=a,n[1]=e):e=n[1],e}return n[2]!==a?(t=(0,s.jsx)(ro,{isStreaming:a}),n[2]=a,n[3]=t):t=n[3],t}try{rl.displayName||(rl.displayName="LoopBlock")}catch{}let rc="data-loop-block",rd=(0,nj.F)(rc),ru={div:(e,t)=>{let n=(0,nj.k)(e,rc);return n?(0,s.jsx)(rl,{...n}):t}};function rm(){return{transformMarkdown:e=>(0,nw.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[rd]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,nw.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&rd in a.properties&&n.children.splice(t,1,a)}),reactComponents:ru}}function rp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rh(e){return!!e&&"object"==typeof e&&"loopID"in e&&"string"==typeof e.loopID}function rf(e){return!!e&&"object"==typeof e&&"pipelineId"in e&&"string"==typeof e.pipelineId&&"executionId"in e&&"string"==typeof e.executionId&&"execution"in e&&"object"==typeof e.execution}let IndexedDBPipesStorage=class IndexedDBPipesStorage{async getLoop(e,t){let n=await this.getPipelineRecord(e);return n?"latest"===t?n.pipeline:n.draftPipeline:null}async getAllLoops(e){let t=await this.getAllPipelineRecords();return t?t.map(t=>"latest"===e?t.pipeline:t.draftPipeline).filter(e=>null!==e):[]}async createLoop(e){try{let t,n;"string"==typeof e?(t=null,n=e):n=(t=e).id;let a={loopID:n,pipeline:null,draftPipeline:t?{...t}:null},r=await this.createPipelineRecord(a);return{success:!0,loop:r?.draftPipeline||void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async updateLoop(e,t){try{let n=await this.updatePipelineRecord(e,e=>{let n=t(e.draftPipeline);return{...e,draftPipeline:n}});return{success:!0,loop:n?.draftPipeline||void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async deleteLoop(e){try{return await this.deletePipeline(e),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async saveLoop(e){try{let t=await this.updatePipelineRecord(e,e=>{if(!e.draftPipeline)throw Error("No draft pipeline to save");return{...e,pipeline:{...e.draftPipeline}}});return{success:!0,loop:t?.pipeline||void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async revertLoop(e){try{let t=await this.updatePipelineRecord(e,e=>{if(!e.pipeline)throw Error("No saved pipeline to revert to");return{...e,draftPipeline:{...e.pipeline}}});return{success:!0,loop:t?.draftPipeline||void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getPipelineRecord(e){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readonly",t=>t.get(e),e=>rh(e)?e:null)}async getPipeline(e){return this.getPipelineRecord(e)}async getAllPipelineRecords(){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readonly",e=>e.getAll(),e=>Array.isArray(e)?e.filter(e=>rh(e)?e.pipeline:null):[])}createPipelineRecord(e){let t=new Date().toISOString(),n=e.pipeline?{...e.pipeline,id:e.loopID,updatedAt:t}:e.pipeline,a=e.draftPipeline?{...e.draftPipeline,id:e.loopID,updatedAt:t}:e.draftPipeline,r={...e,pipeline:n,draftPipeline:a};return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite",e=>e.put(r),()=>r)}async updatePipelineRecord(e,t){let n=await this.getDatabase();return new Promise((a,r)=>{let i=n.transaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite");i.oncomplete=()=>n.close(),i.onerror=()=>r(i.error);let o=i.objectStore(IndexedDBPipesStorage.PIPELINES_STORE),s=o.get(e);s.onerror=()=>r(s.error),s.onsuccess=()=>{let n=s.result;if(!rh(n))return void r(Error(`Pipeline with ID ${e} not found`));try{let i=t(n),s=i.pipeline?{...i.pipeline,id:e}:i.pipeline,l=i.draftPipeline?{...i.draftPipeline,id:e,updatedAt:new Date().toISOString()}:i.draftPipeline,c={...i,pipeline:s,draftPipeline:l},d=o.put(c);d.onerror=()=>r(d.error),d.onsuccess=()=>a(c)}catch(e){r(e)}}})}deletePipeline(e){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite",t=>t.delete(e),()=>e)}getExecution(e,t){return void 0!==t?this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readonly",n=>n.get([e,t]),e=>rf(e)?e.execution:null):this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readonly",t=>t.index("pipelineId").getAll(e),e=>{if(!Array.isArray(e))return null;let t=e.filter(rf);return 0===t.length?null:(t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),t[0]?.execution??null)})}async createExecution(e,t){let n=crypto.randomUUID(),a={id:n,nodes:{},...t};return this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readwrite",t=>t.put({pipelineId:e,executionId:n,execution:a,createdAt:new Date().toISOString()}),()=>a)}async updateExecution(e,t,n){let a=await this.getDatabase();return new Promise((r,i)=>{let o=a.transaction(IndexedDBPipesStorage.EXECUTION_STORE,"readwrite");o.oncomplete=()=>a.close(),o.onerror=()=>i(o.error);let s=o.objectStore(IndexedDBPipesStorage.EXECUTION_STORE),l=s.get([e,t]);l.onerror=()=>i(l.error),l.onsuccess=()=>{let a=l.result;if(!rf(a))return void i(Error(`Execution with ID ${t} for pipeline ${e} not found`));try{let o={pipelineId:e,executionId:t,execution:n,createdAt:a.createdAt},l=s.put(o);l.onerror=()=>i(l.error),l.onsuccess=()=>r(n)}catch(e){i(e)}}})}async withTransaction(e,t,n,a){let r=await this.getDatabase();return new Promise((i,o)=>{let s=r.transaction(e,t);s.oncomplete=()=>r.close(),s.onerror=()=>o(s.error);let l=n(s.objectStore(e));l.onsuccess=()=>i(a(l.result)),l.onerror=()=>o(l.error)})}getDatabase(){return new Promise((e,t)=>{let n=indexedDB.open(IndexedDBPipesStorage.PIPES_DB,IndexedDBPipesStorage.CURRENT_VERSION);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=async e=>{try{await IndexedDBPipesStorage.handleDatabaseUpgrade(n.result,e)}catch(e){t(e)}}})}static async handleDatabaseUpgrade(e,t){let n=t.oldVersion;if(0===n)return void await IndexedDBPipesStorage.upgradeFromVersion0(e);n<2&&await IndexedDBPipesStorage.upgradeFromVersion1(t),n<3&&await IndexedDBPipesStorage.upgradeFromVersion2(t),n<4&&await IndexedDBPipesStorage.upgradeFromVersion3(t),n<5&&await IndexedDBPipesStorage.upgradeFromVersion4(t),n<6&&await IndexedDBPipesStorage.upgradeFromVersion5(t)}static upgradeFromVersion0(e){return new Promise((t,n)=>{try{e.createObjectStore(IndexedDBPipesStorage.PIPELINES_STORE,{keyPath:"loopID"}).createIndex("loopID","loopID",{unique:!0});let n=e.createObjectStore(IndexedDBPipesStorage.EXECUTION_STORE,{keyPath:["pipelineId","executionId"]});n.createIndex("pipelineId, executionId",["pipelineId","executionId"],{unique:!0}),n.createIndex("pipelineId","pipelineId",{unique:!1}),t()}catch(e){n(e)}})}static async waitForAllAndResolve(e,t,n){try{await Promise.all(e),t()}catch(e){n(e)}}static upgradeFromVersion1(e){return new Promise((t,n)=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();let r=a.objectStore(IndexedDBPipesStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let a=e.target?.result;if(a)try{let e=a.value;e.pipeline&&(e.pipeline.updatedAt=new Date().toISOString());let t=new Promise((t,n)=>{let r=a.update(e);r.onsuccess=()=>t(),r.onerror=()=>n(r.error)});i.push(t),a.continue()}catch(e){n(e)}else IndexedDBPipesStorage.waitForAllAndResolve(i,t,n)},r.onerror=function(){n(r.error)}})}static upgradeFromVersion2(e){return new Promise((t,n)=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();let r=[],i=a.objectStore(IndexedDBPipesStorage.PIPELINES_STORE).openCursor();i.onsuccess=function(e){let i=e.target?.result;if(i){let e=i.value;e?.pipeline&&!e.pipeline.updatedAt&&(e.pipeline.updatedAt=new Date().toISOString()),r.push(e),i.continue()}else try{a.db.deleteObjectStore(IndexedDBPipesStorage.PIPELINES_STORE);let e=a.db.createObjectStore(IndexedDBPipesStorage.PIPELINES_STORE,{keyPath:"loopID"});e.createIndex("loopID","loopID",{unique:!0});let i=r.map(e=>({loopID:e.pipeline.id,threadID:e.threadID,pipeline:e.pipeline}));if(0===i.length)return void t();let o=[];for(let t of i){let n=new Promise((n,a)=>{let r=e.put(t);r.onsuccess=()=>n(),r.onerror=()=>a(r.error)});o.push(n)}IndexedDBPipesStorage.waitForAllAndResolve(o,t,n)}catch(e){n(e)}},i.onerror=function(){n(i.error)}})}static upgradeFromVersion3(e){return new Promise((t,n)=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();let r=a.objectStore(IndexedDBPipesStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let a=e.target?.result;if(a)try{let e=a.value;if(e.pipeline&&!e.draftPipeline){e.draftPipeline={...e.pipeline};let t=new Promise((t,n)=>{let r=a.update(e);r.onsuccess=()=>t(),r.onerror=e=>n(e)});i.push(t)}a.continue()}catch(e){n(e)}else IndexedDBPipesStorage.waitForAllAndResolve(i,t,n)},r.onerror=function(){n(r.error)}})}static upgradeFromVersion4(e){return new Promise((t,n)=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();let r=a.objectStore(IndexedDBPipesStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let a=e.target?.result;if(a)try{let e=a.value;if(e.threadID&&e.loopID)try{aN(e.loopID,e.threadID)}catch(e){}if("threadID"in e){delete e.threadID;let t=new Promise((t,n)=>{let r=a.update(e);r.onsuccess=()=>t(),r.onerror=e=>n(e)});i.push(t)}a.continue()}catch(e){n(e)}else IndexedDBPipesStorage.waitForAllAndResolve(i,t,n)},r.onerror=function(){n(r.error)}})}static upgradeFromVersion5(e){return new Promise(t=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();n.db.deleteObjectStore(IndexedDBPipesStorage.EXECUTION_STORE);let a=n.db.createObjectStore(IndexedDBPipesStorage.EXECUTION_STORE,{keyPath:["pipelineId","executionId"]});a.createIndex("pipelineId, executionId",["pipelineId","executionId"],{unique:!0}),a.createIndex("pipelineId","pipelineId",{unique:!1}),t()})}};rp(IndexedDBPipesStorage,"PIPES_DB","copilot-pipes"),rp(IndexedDBPipesStorage,"PIPELINES_STORE","pipelines"),rp(IndexedDBPipesStorage,"EXECUTION_STORE","executionStates"),rp(IndexedDBPipesStorage,"CURRENT_VERSION",6);var rg=n(879);function ry(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function rx(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function rv(e,t){var n=rx(e,t,"get");return n.get?n.get.call(e):n.value}function r_(e,t,n){ry(e,t),t.set(e,n)}function rb(e,t,n){var a=rx(e,t,"set");if(a.set)a.set.call(e,n);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=n}return n}var rj=new WeakMap,rC=new WeakMap,rN=new WeakMap,rS=new WeakSet;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let a=(0,t2.wv)(),r=t??a.id,i=await rv(this,rj).getAuthToken(),o=await (0,tv.p)({basePath:rv(this,rC),body:{messages:e,model:r,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:i,integrationId:this.directConnectConfiguration.integrationID,realIp:rv(this,rN),signal:n});if(!o.ok){let e=await o.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||o.error}catch(e){}throw(0,f.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&o.body&&(yield*(function(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return n})(this,rS,rw).call(this,o.body,n))}get directConnectConfiguration(){return{integrationID:"copilot-chat"}}constructor(e,t,n=""){!function(e,t){ry(e,t),t.add(e)}(this,rS),r_(this,rj,{writable:!0,value:void 0}),r_(this,rC,{writable:!0,value:void 0}),r_(this,rN,{writable:!0,value:void 0}),rb(this,rC,e),rb(this,rj,new rg.J(t)),rb(this,rN,n)}};async function*rw(e,t){let n=new TextDecoder("utf-8"),a=e.getReader(),r="";try{for(;;){if(t?.aborted)return;let{done:e,value:i}=await a.read();if(e)break;for(r+=n.decode(i);;){if(r.startsWith("data: [DONE]"))return;let e=r.indexOf(`

`);if(-1===e)break;let t=r.slice(0,e).replace(/^data:\s+/,"");if(""===t){r=r.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"";n&&(yield n)}catch{}r=r.slice(e+2)}}}finally{a.releaseLock()}}var rI=n(60039);let rk=["SAML"],rT={FORBIDDEN:["SAML error"]};function rE(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var rA=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t){var n;let a=await (0,rI.Sr)((n=rE(this,rA,"get"),n.get?n.get.call(this):n.value),{method:"POST",body:{query:e},signal:t});if(a.ok){let e=await a.json();if(function(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!rk.includes(e.type)&&!rT[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,f.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw b(n),(0,f.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}(e,a.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e){!function(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}(this,rA,{writable:!0,value:void 0}),function(e,t,n){var a=rE(e,t,"set");if(a.set)a.set.call(e,n);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=n}}(this,rA,e)}};var rR=n(52523);let rL={header:"LoopsView-module__header--SAuoB",input:"LoopsView-module__input--vIdQn"};var rP=n(33484);let rD={header:"LoopsViewHeader-module__header--rHbds",rightControls:"LoopsViewHeader-module__rightControls--aKkbw"};function rO(){let e,t,n,a,r=(0,l.c)(4),i=(0,c.useRef)(null),o=(0,c.useRef)(null);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(eT.W.Anchor,{children:(0,s.jsx)(m.K,{icon:p.KebabHorizontalIcon,"aria-label":"Menu",onClick:rB})}),r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{i.current?.openDialog(),(0,f.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsxs)(ek.l.Item,{onSelect:t,children:["Give feedback",(0,s.jsx)(ek.l.LeadingVisual,{children:(0,s.jsx)(p.CommentIcon,{})})]}),r[2]=n):n=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("div",{className:rD.header,children:(0,s.jsxs)("div",{className:rD.rightControls,children:[(0,s.jsxs)(eT.W,{anchorRef:o,children:[e,(0,s.jsx)(eT.W.Overlay,{width:"small",children:(0,s.jsx)(ek.l,{children:(0,s.jsxs)(ek.l.Group,{children:[n,(0,s.jsxs)(ek.l.LinkItem,{href:"/settings/copilot",onClick:rM,children:[(0,s.jsx)(ek.l.LeadingVisual,{children:(0,s.jsx)(p.GearIcon,{})}),"Settings"]})]})})})]}),(0,s.jsx)(rP.l,{ref:i,mode:"immersive",returnFocusRef:o})]})}),r[3]=a):a=r[3],a}function rM(){return(0,f.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function rB(){return(0,f.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}try{rO.displayName||(rO.displayName="LoopsViewHeader")}catch{}let rF=[{altText:"GitHub Battle Royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub Battle Royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",inputType:{type:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",inputType:{type:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",inputType:{type:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",inputType:{type:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]}},{altText:"Battle Royale report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First Responder Activity Report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",inputType:{type:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",inputType:{type:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",inputType:{type:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]}},{altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub Feature Announcement Magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",inputType:{type:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",inputType:{type:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",inputType:{type:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",inputType:{type:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,inputType:{type:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]}}];var r$=n(35066);function rU(e){let t,n,a,r,i,o,c,d,u,m=(0,l.c)(25),{item:p,onClick:h}=e;m[0]!==p.color?(t=al.find(e=>e===p.color),m[0]=p.color,m[1]=t):t=m[1];let f=t,g=`${tv.Jz}/l/${p.id}`;return m[2]!==f||m[3]!==p.title?(n=f??as(p.title,al),m[2]=f,m[3]=p.title,m[4]=n):n=m[4],m[5]!==n?(a=(0,s.jsx)(r$.Z.Icon,{icon:"loops",color:n}),m[5]=n,m[6]=a):a=m[6],m[7]!==p.title?(r=(0,s.jsx)(r$.Z.Heading,{children:p.title}),m[7]=p.title,m[8]=r):r=m[8],m[9]!==p.description?(i=(0,s.jsx)(r$.Z.Description,{children:p.description}),m[9]=p.description,m[10]=i):i=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(ar.GS,{}),m[11]=o):o=m[11],m[12]!==p.nodes.length?(c=(0,s.jsxs)(r$.Z.Metadata,{children:[o,p.nodes.length]}),m[12]=p.nodes.length,m[13]=c):c=m[13],m[14]!==p.id?(d=(0,s.jsx)(r$.Z.Menu,{children:(0,s.jsx)(tf,{loopId:p.id})}),m[14]=p.id,m[15]=d):d=m[15],m[16]!==p.id||m[17]!==h||m[18]!==g||m[19]!==a||m[20]!==r||m[21]!==i||m[22]!==c||m[23]!==d?(u=(0,s.jsxs)(r$.Z,{href:g,onClick:h,children:[a,r,i,c,d]},p.id),m[16]=p.id,m[17]=h,m[18]=g,m[19]=a,m[20]=r,m[21]=i,m[22]=c,m[23]=d,m[24]=u):u=m[24],u}try{rU.displayName||(rU.displayName="LoopCard")}catch{}function rV(e){let t,n,a,r,i,o,c,d=(0,l.c)(20),{altText:u,assetPath:m,exampleLoop:p,onSelect:h}=e;d[0]!==p||d[1]!==h?(t=()=>{(0,f.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),h({...p,id:crypto.randomUUID(),updatedAt:new Date().toISOString()})},d[0]=p,d[1]=h,d[2]=t):t=d[2];let g=t;return d[3]!==u||d[4]!==m?(n=(0,s.jsx)(r$.Z.Image,{alt:u,img:m}),d[3]=u,d[4]=m,d[5]=n):n=d[5],d[6]!==p.title?(a=(0,s.jsx)(r$.Z.Heading,{children:p.title}),d[6]=p.title,d[7]=a):a=d[7],d[8]!==p.description?(r=(0,s.jsx)(r$.Z.Description,{children:p.description}),d[8]=p.description,d[9]=r):r=d[9],d[10]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(ar.GS,{}),d[10]=i):i=d[10],d[11]!==p.nodes.length?(o=(0,s.jsxs)(r$.Z.Metadata,{children:[i,p.nodes.length]}),d[11]=p.nodes.length,d[12]=o):o=d[12],d[13]!==p.title||d[14]!==g||d[15]!==n||d[16]!==a||d[17]!==r||d[18]!==o?(c=(0,s.jsxs)(r$.Z,{onClick:g,children:[n,a,r,o]},p.title),d[13]=p.title,d[14]=g,d[15]=n,d[16]=a,d[17]=r,d[18]=o,d[19]=c):c=d[19],c}try{rV.displayName||(rV.displayName="LoopExampleCard")}catch{}function rz(e){let t,n,a=(0,l.c)(5),{chatState:r,plugin:i}=e;if(!i||!a2(i))throw Error("LoopsView can only be used with a PipesPlugin");return a[0]!==r?(t=(0,s.jsx)(rW,{chatState:r}),a[0]=r,a[1]=t):t=a[1],a[2]!==i.service||a[3]!==t?(n=(0,s.jsx)(ee,{value:i.service,children:t}),a[2]=i.service,a[3]=t,a[4]=n):n=a[4],n}function rW(e){let t,n,a,r,i,o,d,u,m,p,h,g,y,x,v,_=(0,l.c)(32),{chatState:b}=e,{data:j,isLoading:C}=function(e){let t,n,a,r=(0,l.c)(8),i="latest",o=et();return r[0]!==i?(t=[eM,i],r[0]=i,r[1]=t):t=r[1],r[2]!==o||r[3]!==i?(n=async()=>await o.getAllLoops(i),r[2]=o,r[3]=i,r[4]=n):n=r[4],r[5]!==t||r[6]!==n?(a={queryKey:t,queryFn:n,refetchOnMount:!0},r[5]=t,r[6]=n,r[7]=a):a=r[7],(0,Y.I)(a)}(),N=(0,ab.b)(),S=(0,Z.Zp)(),w=et(),I=(0,t2.GF)(b.availableModels);_[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],_[0]=t):t=_[0],(0,c.useEffect)(rG,t),_[1]!==N?(n=()=>{N.selectThread(null,{includeThreads:!1,clearTopic:!0})},a=[N],_[1]=N,_[2]=n,_[3]=a):(n=_[2],a=_[3]),(0,c.useEffect)(n,a),_[4]!==I||_[5]!==w||_[6]!==N||_[7]!==S?(r=async e=>{let t=e.trim();if(""===t)return;(0,f.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),a=await N.createThread();await w.createLoop(n),aN(n,a.id),N.sendChatMessage({content:t,model:I,references:[],thread:a}),S(`${tv.Jz}/l/${n}`)},_[4]=I,_[5]=w,_[6]=N,_[7]=S,_[8]=r):r=_[8];let k=r;_[9]!==w||_[10]!==S?(i=async e=>{await w.createLoop(e),S(`${tv.Jz}/l/${e.id}`)},_[9]=w,_[10]=S,_[11]=i):i=_[11];let T=i;return _[12]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(rO,{}),_[12]=o):o=_[12],_[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsxs)(rR.A.Header,{children:[(0,s.jsx)(rR.A.Icon,{icon:(0,s.jsx)(nv.I,{icon:"loops",size:32})}),(0,s.jsx)(rR.A.Title,{children:"Automate once. Loop forever."}),(0,s.jsx)(rR.A.Description,{children:"Loops simplifies workflow automation by allowing you to define processes with clear inputs, prompts, and outputs\u2014no manual setup required. Powered by Copilot, Loops makes it easy to automate and manage tasks, streamlining your operations with minimal effort."})]}),_[13]=d):d=_[13],_[14]!==k?(u=(0,s.jsx)(n0.V,{hideAttachmentButton:!0,placeholder:"What would you like to automate?",size:"large",onSubmit:k}),_[14]=k,_[15]=u):u=_[15],_[16]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsx)(n5.h,{}),_[16]=m):m=_[16],_[17]!==u?(p=(0,s.jsxs)("div",{className:rL.header,children:[d,(0,s.jsxs)("div",{className:rL.input,children:[u,m]})]}),_[17]=u,_[18]=p):p=_[18],_[19]!==C||_[20]!==j?(h=C||j&&j.length>0?(0,s.jsxs)(rR.A.Section,{children:[(0,s.jsx)(rR.A.Section.Title,{children:"Your loops"}),(0,s.jsx)(rR.A.Section.Grid,{loading:C,children:j?.map(rH)})]}):null,_[19]=C,_[20]=j,_[21]=h):h=_[21],_[22]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.jsx)(rR.A.Section.Title,{children:"Examples"}),_[22]=g):g=_[22],_[23]!==T?(y=rF.map(e=>{let{altText:t,assetPath:n,loop:a}=e;return(0,s.jsx)(rV,{altText:t,assetPath:n,exampleLoop:a,onSelect:T},a.title)}),_[23]=T,_[24]=y):y=_[24],_[25]!==C||_[26]!==y?(x=(0,s.jsxs)(rR.A.Section,{children:[g,(0,s.jsx)(rR.A.Section.Grid,{loading:C,children:y})]}),_[25]=C,_[26]=y,_[27]=x):x=_[27],_[28]!==p||_[29]!==h||_[30]!==x?(v=(0,s.jsxs)(s.Fragment,{children:[o,(0,s.jsxs)(rR.A.Container,{children:[p,h,x]})]}),_[28]=p,_[29]=h,_[30]=x,_[31]=v):v=_[31],v}function rH(e){return(0,s.jsx)(rU,{item:e,onClick:rq},e.id)}function rq(){return(0,f.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function rG(){(0,a3.D)("Loops \xb7 GitHub Copilot")}try{rz.displayName||(rz.displayName="LoopsView")}catch{}try{rW.displayName||(rW.displayName="LoopsViewInner")}catch{}function rK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let PipesPlugin=class PipesPlugin{matchPage(e){return!!e&&(tS.test(e.pathname)||tw.test(e.pathname))}matchView(e){return!!e&&tN.test(e.pathname)}matchThread(e,t){return!!this.routes.some(e=>e.test(re.fV.pathname))||!!av(t,!0)}async overrideCreateMessageOptions(e){return{...e,mode:tb}}constructor(e,t,n,a,r){rK(this,"id",t_),rK(this,"displayName","Loops"),rK(this,"service",void 0),rK(this,"previewUrl",void 0),rK(this,"markdownExtensions",[rm]),rK(this,"routes",[tN,tS,tw]),rK(this,"skipSyncRouteToThread",!0),rK(this,"PageComponent",a5),rK(this,"ViewComponent",rz),rK(this,"NavigationComponent",rt),this.service=new PipesService(new IndexedDBPipesStorage,new GraphQLClient(t),new ChatCompletionsClient(e,n,r)),this.previewUrl=a}}},68714:(e,t,n)=>{n.d(t,{$7:()=>d,Ao:()=>p,BV:()=>f,OW:()=>CopilotSpaceSSOError,Tx:()=>h,e9:()=>u,i9:()=>CopilotSpaceNotFoundError,jS:()=>m});var a=n(97665),r=n(94747),i=n(97286),o=n(29255),s=n(47397),l=n(96540),c=n(34901);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function d(){let e=(0,a.jE)();return(0,r.n)({mutationFn:async e=>{let t=await (0,o.ee)(e);if(!t.ok)throw Error(String(t.error));return{status:t.status,ok:!0,payload:t.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:o.O6})}})}function u(e){let t=(0,s.b)(),{data:n}=m(e);(0,l.useEffect)(()=>{n&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:n})},[n,t])}function m(e){return(0,i.I)({queryKey:o.O6,queryFn:o.CT,enabled:e,staleTime:3e5})}function p(e){return(0,i.I)({queryKey:(0,o.dp)(e),queryFn:async()=>{let t=await (0,o.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function h(e,t){return(0,i.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,o.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function f(){return(0,c.A3)("customCopilotsEnabled")}},29255:(e,t,n)=>{n.d(t,{A2:()=>m,CT:()=>c,Lr:()=>d,O6:()=>s,dp:()=>l,ee:()=>u});var a=n(22069),r=n(6901),i=n(60039);let o="/github-copilot/chat",s=["copilot-chat","custom-copilots"];function l(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function c(){let e=await (0,i.lS)(`${o}/custom_copilots`);if(!e.ok)throw Error(`Failed to fetch spaces: ${a.nN[e.status]||a.DW}`);return await e.json()}async function d(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:n}=e,r=`${o}/custom_copilots/${t}/${n}`,s=await (0,i.lS)(r);if(!s.ok)return{status:s.status,ok:!1,error:a.nN[s.status]||a.DW};let l=await s.json();return{status:s.status,ok:!0,payload:l}}async function u(e){let t=await (0,i.lS)((0,r.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function m(e){let t=await (0,i.lS)(`${(0,r.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}},61407:(e,t,n)=>{n.d(t,{t:()=>r});var a=n(79607);let r=({items:e,filter:t,key:n,secondaryKey:r})=>{let i=e.map(e=>[(0,a.dt)(t,n(e)),e]);return r&&(i=i.map(([e,n])=>[Math.max(e,(0,a.dt)(t,r(n))),n])),i.filter(([e])=>e>a.IP).sort(([e,t],[a,r])=>a===e?n(t).localeCompare(n(r)):a-e).map(([,e])=>e)}},79607:(e,t,n)=>{n.d(t,{Dx:()=>o,IP:()=>i,M4:()=>r,dt:()=>s});var a=n(91385);let r=1/0,i=-1/0,o=1,s=(e,t,n=o)=>{let s=e.trim().toLowerCase(),l=t.trim().toLowerCase();if(s===l)return r;if(0===l.length||0===s.length)return i;let c=(0,a.fN)(s,l);return c===1/0&&s!==l?i:l.startsWith(s)||l.endsWith(s)?c+n:c}},88245:(e,t,n)=>{n.d(t,{A:()=>o});let a=n.p+"jetbrains-e16495e63a33.png",r=n.p+"neovim-3301f23c4307.png",i=n.p+"vscode-380056900de8.png",o={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:i,name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:n.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:n.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:a,name:"JetBrains",eventName:"JETBRAINS"},neovim:{url:"https://github.com/github/copilot.vim",icon:r,name:"Neovim",eventName:"NEOVIM"}}},74547:(e,t,n)=>{n.d(t,{FC:()=>l,I0:()=>o,dV:()=>s,h$:()=>d,jK:()=>c});let a=null,r=!1;function i(e){let t=function(){let e=document.querySelector("context-region");return e&&e.isConnected&&e.pushCrumb&&"function"==typeof e.pushCrumb?e:null}();if(t)return void e(t);a=e,function(){if(r)return;r=!0;let e=document.querySelector("context-region-controller");e&&e.addEventListener("context-region-connected",()=>{a&&(a(e.contextRegion),a=null)},{once:!0})}()}function o(e){i(t=>t.pushCrumb(e))}function s(){i(e=>e.popCrumb())}function l(e){i(t=>t.replaceCrumbs(e))}function c(e){i(t=>t.renameCurrentCrumb(e))}function d(e){i(t=>t.replaceCurrentCrumb(e))}},11251:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(96540);function r({focusRowRef:e,mouseRowRef:t}){let[n,r]=a.useState(!1);return a.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&r(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{r(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{r(!1)}}},[e,t]),n}},31075:(e,t,n)=>{n.d(t,{S:()=>r});var a=n(96540);function r(e){let t=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>{t.current=e},[e]),t.current}},76325:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var a=n(74848),r=n(24774),i=n(96540),o=n(6585),s=n(5853),l=n(9299),c=n(45230),d=n(54528),u=n(15874);let m=(0,n(57909).zw)()?[]:[{key:"Alt-g",run:()=>!0,preventDefault:!0}],p=[(0,c.b6)(),(0,u.WD)(),(0,r.$K)({formatNumber:e=>e.toString().padStart(3," ")}),(0,u.SG)(),(0,r.vX)({position:"absolute"}),(0,d.$P)({top:!0}),r.Lz.editorAttributes.of({class:"js-codemirror-editor","data-testid":"codemirror-editor"}),r.w4.of([...m,...c.pw,...d.Eo,...c.cL])];var h=n(43720);let f={"&":{background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--codeMirror-fgColor, var(--color-codemirror-text))",cursor:"text"},".cm-gutters":{background:"var(--codeMirror-gutters-bgColor, var(--color-codemirror-gutters-bg))",borderRightWidth:0},".cm-lineNumbers .cm-gutterElement":{color:"var(--codeMirror-lineNumber-fgColor, var(--color-codemirror-linenumber-text))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-gutter-fontSize, var(--codeMirror-content-fontSize, 12px))",lineHeight:"20px",padding:"0 16px 0 16px"},".cm-content":{caretColor:"var(--codeMirror-cursor-fgColor, var(--color-codemirror-cursor))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-content-fontSize, 12px)",background:"var(--codeMirror-lines-bgColor, var(--color-codemirror-lines-bg))",lineHeight:"20px",paddingTop:"8px"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},"&.cm-focused":{outline:"none"},"&.hide-help-until-focus":{"&.cm-focused .cm-panels-bottom":{display:"block"},"& .cm-panels-bottom":{display:"none"}},"&.hide-help":{"& .cm-panels-top":{display:"none",position:"absolute"}},".cm-content ::-moz-selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},".cm-activeLine":{backgroundColor:"var(--codeMirror-activeline-bgColor, var(--color-codemirror-activeline-bg))"},".cm-line":{paddingLeft:"16px"},".cm-help-panel":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"7px 10px",margin:0,fontSize:"13px",lineHeight:"16px",color:"var(--fgColor-muted, var(--color-fg-muted))",cursor:"default"},".cm-panels-bottom":{borderTop:"var(--borderWidth-thin, 1px) solid var(--borderColor-default, var(--color-border-default))",background:"none"},".js-upload-markdown-image & .cm-panels-bottom":{bottom:"30px !important"},".cm-panel.cm-search":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"8px",fontSize:"16px"},".cm-panel.cm-search > button":{borderRadius:"6px",padding:"4px 8px",background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--button-default-fgColor-rest, var(--color-btn-text))",border:"1px solid var(--button-default-borderColor-rest, var(--color-btn-border))",textTransform:"capitalize"},".cm-panel.cm-search > label":{color:"var(--fgColor-default, var(--color-fg-default))",textTransform:"capitalize",fontSize:"12px"},".cm-panel.cm-search > input":{borderRadius:"6px",padding:"4px 8px",background:"var(--bgColor-default, var(--color-canvas-default))",color:"var(--fgColor-default, var(--color-fg-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",fontSize:"12px"},'.cm-panel.cm-search > button[name="close"]':{padding:"4px"},".cm-panels-top":{borderBottom:"var(--borderWidth-thin, 1px) solid var(--color-border-default)",background:"none"},".cm-panel.cm-search input, .cm-panel.cm-search button, .cm-panel.cm-search label":{marginRight:"8px",marginBottom:"4px",marginTop:"4px",marginLeft:0},".cm-lintRange":{cursor:"help",backgroundImage:"none !important"},".cm-placeholder":{height:"1em",color:"var(--fgColor-muted)"},"&.custom-tooltips .cm-tooltip":{border:"none !important",backgroundColor:"transparent !important"},"&.custom-tooltips .cm-diagnostic":{padding:0,marginLeft:"0 !important",borderLeft:"none !important",whiteSpace:"unset"}},g=[{tag:[h._A.keyword],color:"var(--codeMirror-syntax-fgColor-keyword, var(--color-codemirror-syntax-keyword))"},{tag:[h._A.comment],color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"},{tag:[h._A.bracket],color:"var(--codeMirror-matchingBracket-fgColor, var(--color-codemirror-matchingbracket-text))"},{tag:[h._A.string,h._A.url,h._A.regexp],color:"var(--codeMirror-syntax-fgColor-string, var(--color-codemirror-syntax-string))"},{tag:[h._A.constant(h._A.name),h._A.propertyName,h._A.attributeName],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[h._A.atom,h._A.number,h._A.bool],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[h._A.function(h._A.variableName)],color:"var(--codeMirror-syntax-fgColor-entity, var(--color-codemirror-syntax-entity))"},{tag:h._A.definition(h._A.variableName),color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"},{tag:h._A.meta,color:"inherit"},{tag:h._A.heading,fontWeight:"bold",color:"inherit !important"},{tag:h._A.monospace,color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"}],y=[{tag:h._A.link,textDecoration:"underline"},{tag:h._A.emphasis,fontStyle:"italic"},{tag:h._A.strong,fontWeight:"bold"},{tag:h._A.strikethrough,textDecoration:"line-through"}],x=[...g,...y],v=[...g,...y];function _(e=[]){let t=[...null!==document.querySelector('[data-color-mode="dark"]')?v:x,...e];return[r.Lz.theme(f),(0,u.y9)(u.cr.define(t),{fallback:!0})]}let b=e=>{let t=[o.$t.tabSize.of(e.indentUnit)];return e.indentWithTabs?t.push(u.Xt.of("	")):t.push(u.Xt.of(" ".repeat(e.indentUnit))),e.lineWrapping&&t.push(r.Lz.lineWrapping),t};var j=n(13281);let C=(e,t)=>{let{state:n,placeholder:a,replacementText:r}=e.detail;"uploading"===n?(0,j.w0)(t)?(0,j.tJ)(t,a):(0,j.TC)(t,r):("uploaded"===n||"failed"===n)&&(0,j.TB)(t,a,r)},N=(e,t)=>{let{left:n,top:a}=e.detail,r=t.posAtCoords({x:n,y:a});r&&t.dispatch({selection:{anchor:r,head:r}})},S=new WeakMap;function w(e,t){if((0,j.w0)(e)){let n=(0,j.Lo)(e.state);(0,j.tJ)(e,`${t}${n}${t}`)}else{let n=(0,j.BE)(e);(0,j.TC)(e,t.repeat(2)),(0,j.f9)(e,n.anchor+t.length)}return!0}function I(e,t){let n=(0,j.BE)(e),a=e.state.doc.lineAt(n.from),r=(0,j.Lo)(e.state),i=RegExp(`^${"ol"===t?"\\d+\\.":t}\\s`);if(r){let n=(r.endsWith(`
`)?r.slice(0,-2):r).split(`
`).map((t,n)=>{let r=a.number+n;return{text:e.state.doc.line(r).text,lineNumber:r}}),o=n.every(e=>i.test(e.text));for(let a=0;a<n.length;a++){let r=n[a];if(o){let t=r.text.match(i);t&&(0,j.YH)(e,r?.lineNumber,t[0])}else{let n=`${"ol"===t?`${a+1}.`:t} `;(0,j.Md)(e,r?.lineNumber,n)}}}else{let r=a.text.match(i);if(r)(0,j.YH)(e,a.number,r[0]);else{let r=`${"ol"===t?"1.":t} `;(0,j.Md)(e,a.number,r),a.text||(0,j.f9)(e,n.anchor+r.length)}}return!0}let k=[{key:"Mod-i",run:e=>w(e,"_"),preventDefault:!0},{key:"Mod-b",run:e=>w(e,"**"),preventDefault:!0},{key:"Mod-e",run:e=>w(e,"`"),preventDefault:!0},{key:"Mod-k",run:e=>{let t=(0,j.Lo)(e.state);if(t){let n=`[${t}](url)`;(0,j.tJ)(e,n);let a=(0,j.I6)(e,n).value.from;(0,j.td)(e,a+t.length+3,a+t.length+6)}else{let t=(0,j.BE)(e);(0,j.TC)(e,"[](url)"),(0,j.f9)(e,t.anchor+1)}return!0},preventDefault:!0},{key:"Shift-Mod-.",run:e=>I(e,">"),preventDefault:!0},{key:"Shift-Mod-7",run:e=>I(e,"ol"),preventDefault:!0},{key:"Shift-Mod-8",run:e=>I(e,"-"),preventDefault:!0},{key:"Mod-v",run:e=>(S.set(e,!1),!1)},{key:"Shift-Mod-v",run:e=>(S.set(e,!0),!1)}];function T(e){let t=r.NZ.line({attributes:{dir:"auto"}}),n=new o.vB;for(let{from:a,to:r}of e.visibleRanges)for(let i=a;i<=r;){let a=e.state.doc.lineAt(i);n.add(a.from,a.from,t),i=a.to+1}return n.finish()}let E=r.Z9.fromClass(class{update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=T(e.view))}constructor(e){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"decorations",void 0),this.decorations=T(e)}},{decorations:e=>e.decorations}),A=[r.Lz.domEventHandlers({keydown(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&e.stopPropagation()},paste(e,t){S.get(t)||function(e,t){let n=(0,j.Lo)(e.state),a=t.clipboardData;if(n&&a){let r=a.getData("text/plain");if(!/^https?:\/\//i.test(r))return;r&&(t.preventDefault(),(0,j.tJ)(e,`[${n}](${r})`))}}(t,e),S.set(t,!1)}}),r.w4.of(k),E];var R=n(47404),L=n(5225),P=n(35984),D=n(26559);let O=(0,L.A)(async function(){let e=new Request("/autocomplete/emojis_for_editor",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json",...(0,D.kt)()}}),t=await fetch(e);if(200!==t.status)throw Error(`emoji request failed with a ${t.status}`);let n=await t.json();return Object.keys(n).map(e=>{let t=n[e];return{name:e,src:t[0],emoji:t[1]}})}),M=o.Pe.define({map:({from:e,to:t,severity:n},a)=>({from:a.mapPos(e),to:a.mapPos(t),severity:n})}),B=o.sU.define({create:()=>r.NZ.none,update(e,t){for(let n of(e=e.map(t.changes),t.effects))n.is(M)&&("error"===n.value.severity?e=e.update({add:[F.range(n.value.from,n.value.to)]}):"warning"===n.value.severity?e=e.update({add:[$.range(n.value.from,n.value.to)]}):"info"===n.value.severity&&(e=e.update({add:[U.range(n.value.from,n.value.to)]})));return e},provide:e=>r.Lz.decorations.from(e)}),F=r.NZ.mark({class:"CodeMirror-lint-mark-error"}),$=r.NZ.mark({class:"CodeMirror-lint-mark-warning"}),U=r.NZ.mark({class:"CodeMirror-lint-mark-info"}),V=(e,t)=>{let{from:n,to:a,severity:r}=e.detail,i=(0,j.TU)(t,{line:n.lineNumber,ch:n.character}),o=(0,j.TU)(t,{line:a.lineNumber,ch:a.character});t.dispatch({effects:[M.of({from:i,to:o,severity:r})]})},z={ruby:[{tag:h._A.variableName,color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"}],html:[{tag:h._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.name,color:"var(--color-prettylights-syntax-entity-tag)"}],javascript:[{tag:h._A.name,color:"var(--color-prettylights-syntax-variable)"}],typescript:[{tag:h._A.name,color:"var(--color-prettylights-syntax-variable)"},{tag:h._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],java:[{tag:h._A.typeName,color:"var(--color-prettylights-syntax-entity)"}],"c++":[{tag:h._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],php:[{tag:h._A.processingInstruction,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.name,color:"var(--color-prettylights-syntax-entity)"}]},W=Object.keys(z);var H=n(44246);let q={key:"Tab",run:({state:e,dispatch:t})=>e.selection.ranges.some(e=>!e.empty)?(0,c.UY)({state:e,dispatch:t}):(t(e.update(e.replaceSelection(e.facet(u.Xt)),{scrollIntoView:!0,userEvent:"input"})),!0),shift:c.Mg},G=[],K=[],Q=(0,i.forwardRef)((e,t)=>{let{value:n="",extensions:c=G,keyBindings:d=K,height:u="85vh",width:m="100%",focusNextRenderRef:h,containerClassName:f,...g}=e,y=(0,i.useRef)(null),x=function({extensions:e=[],fileName:t="",onChange:n,spacing:a,isHpc:c,isReadOnly:d,enableFileUpload:u,parentRef:m,placeholder:h="Enter file contents here",ariaLabelledBy:f,value:g,width:y="",height:x="",minHeight:v="",hideHelpUntilFocus:j,hideHelp:S,onCreateEditor:w,onDestroyEditor:I}){let k=(0,i.useRef)(void 0),T=(0,i.useMemo)(()=>new o.xx,[]),E=(0,i.useMemo)(()=>new o.xx,[]),L=(0,i.useMemo)(()=>new o.xx,[]),D=(0,i.useCallback)(e=>{e.docChanged&&n(e.state.doc.toString()||"")},[n]),M=(0,i.useMemo)(()=>r.Lz.updateListener.of(D),[D]),F=(0,i.useMemo)(()=>r.Lz.theme({"&":{height:x,minHeight:v,width:y}}),[x,v,y]),$=(0,i.useMemo)(()=>{let t=[...p,M,F,(0,r.qf)(h),...b(a),[r.Lz.domEventHandlers({"secret-detected:lint":V}),B],T.of([]),E.of([]),L.of([_()]),[r.Z9.fromClass(class{constructor(e){e.scrollDOM.tabIndex=0,e.scrollDOM.setAttribute("role","region"),e.scrollDOM.setAttribute("aria-labelledby",f)}})],r.Lz.contentAttributes.of({"aria-labelledby":`${f} focus-trap-help-panel`}),r.Lz.editorAttributes.of({class:j?"hide-help-until-focus":""}),r.Lz.editorAttributes.of({class:S?"hide-help":""})];return(u&&(t.push((0,r.A)()),t.push([r.Lz.domEventHandlers({"upload:editor:change":C,"upload:editor:cursor":N})])),c&&t.push(r.Lz.editorAttributes.of({"data-hpc":"true"})),d)?t.push(o.$t.readOnly.of(!0)):t.push([function(e,t,n){let a=new o.xx;return[a.of(n?t:[]),r.w4.of([{key:e,run:function(e){let n=a.get(e.state)===t;return e.dispatch({effects:a.reconfigure(n?[]:t)}),!0}}])]}("Shift-Ctrl-m",r.w4.of([q]),!0),(0,H.G)(function(){let e=document.createElement("div"),t=e=>{let t=document.createElement("kbd");return t.textContent=e,t};return e.append("Use ",t("Control + Shift + m")," to toggle the ",t("tab")," key moving focus. Alternatively, use ",t("esc")," then ",t("tab")," to move to the next interactive element on the page."),e.className="cm-help-panel",e.id="focus-trap-help-panel",e}(),S?"top":"bottom")]),t.push(...e),t},[M,F,h,a,T,E,L,f,j,S,u,c,d,e]);return(0,i.useEffect)(()=>{let e=m.current;if(!e)return;let t=o.$t.create({doc:g,extensions:$}),n=new r.Lz({state:t,parent:e});return w?.(n),k.current=n,()=>{n.destroy(),I?.(n)}},[]),(0,i.useEffect)(()=>{k.current&&(k.current.dispatch({effects:E.reconfigure([])}),k.current.dispatch({effects:o.Pe.reconfigure.of($)}))},[E,$]),(0,i.useEffect)(()=>{if(k.current&&void 0!==g){let e=k.current.state.doc.toString()||"",t=g||"";t!==e&&k.current.dispatch({changes:{from:0,to:e.length,insert:t}})}},[g]),(0,i.useEffect)(()=>{let e=async()=>{let e=t.split(".").pop()||"",n=e?s.e.find(n=>n.extensions.includes(e)||n.filename&&n.filename.test(t)):void 0;if(n&&k.current){var a;let e=(a=n.name,W.includes(a.toLowerCase())?z[a.toLowerCase()]:null);e&&k.current.dispatch({effects:L.reconfigure(_(e))}),"Markdown"===n.name?(k.current.dispatch({effects:T.reconfigure((0,l.markdown)({base:l.markdownLanguage}))}),k.current.dispatch({effects:o.Pe.reconfigure.of([...A,...$])}),k.current.dispatch({effects:E.reconfigure([P.E,(0,R.yU)({override:[async e=>(function(e,t=[]){let n=e.matchBefore(/:\w+/);if(!n||n&&n.from===n.to&&!e.explicit)return null;let a=t.filter(e=>-1!==e.name.indexOf(n.text.replace(":",""))).map(e=>({label:e.name,apply:e.emoji||`:${e.name}:`,type:e.src}));return{from:n.from,to:n.to,options:a,filter:!1}})(e,await O())],icons:!1,addToOptions:[{render:e=>{let t=document.createElement("img");return t.className="emoji emoji-result mr-2",t.height=20,t.width=20,t.alt=`:${e.label}:`,t.src=e.type,t.setAttribute("async",""),t},position:0}]}),o.Nb.highest(r.w4.of([{key:"Tab",run:R.$w}]))])})):(k.current.dispatch({effects:E.reconfigure([])}),k.current.dispatch({effects:T.reconfigure(await n.load())}))}};k.current&&e()},[t,T,E,$,L]),k}({parentRef:y,value:n,height:u,width:m,extensions:(0,i.useMemo)(()=>[...c,r.w4.of(d)],[c,d]),...g});return(0,i.useImperativeHandle)(t,()=>({editor:y.current,view:x.current}),[y,x]),h?.current&&x&&(window.requestAnimationFrame(()=>{x.current&&!x.current.hasFocus&&x.current.focus()}),h.current=!1),(0,a.jsx)("div",{className:f,ref:y})});Q.displayName="CodeMirror";let J=Q},54763:(e,t,n)=>{n.d(t,{E:()=>i});var a=n(74848),r=n(69098);function i({children:e}){return(0,r.P)()?(0,a.jsx)(a.Fragment,{children:e}):null}try{i.displayName||(i.displayName="AllShortcutsEnabled")}catch{}},69098:(e,t,n)=>{n.d(t,{$:()=>o,P:()=>s});var a=n(74848),r=n(96540);let i=r.createContext(!0);function o({allShortcutsEnabled:e,children:t}){return(0,a.jsxs)(i.Provider,{value:e,children:[" ",t," "]})}function s(){return r.useContext(i)}try{i.displayName||(i.displayName="AllShortcutsEnabledContext")}catch{}try{o.displayName||(o.displayName="AllShortcutsEnabledProvider")}catch{}},85579:(e,t,n)=>{n.d(t,{Ck:()=>s,JS:()=>o});var a=n(74848),r=n(96540);let i=(0,r.createContext)({query:"",setQuery:()=>void 0});function o(){return(0,r.useContext)(i)}function s({children:e}){let[t,n]=(0,r.useState)(""),o=(0,r.useMemo)(()=>({query:t,setQuery:n}),[n,t]);return(0,a.jsx)(i.Provider,{value:o,children:e})}try{i.displayName||(i.displayName="FileQueryContext")}catch{}try{s.displayName||(s.displayName="FileQueryProvider")}catch{}},141:(e,t,n)=>{n.d(t,{eu:()=>l,qV:()=>s,sq:()=>c});var a=n(74848),r=n(64262),i=n(96540);let o=i.createContext({});function s({children:e,...t}){return(0,a.jsx)(o.Provider,{value:t,children:e})}function l(){return i.useContext(o)}function c(){return(0,r.X)()}try{o.displayName||(o.displayName="FilesPageInfoContext")}catch{}try{s.displayName||(s.displayName="FilesPageInfoProvider")}catch{}},75718:(e,t,n)=>{n.d(t,{P:()=>l});var a=n(74848),r=n(21728),i=n(95726),o=n(47397);let s={ambientErrorBanner:"AmbientErrorBanner-module__ambientErrorBanner--iXbHt",largeBorderRadius:"AmbientErrorBanner-module__largeBorderRadius--Qk23B",mediumBorderRadius:"AmbientErrorBanner-module__mediumBorderRadius--dREtI"};function l(e){let t,n,l=(0,r.c)(6),{ambientError:c,useLargerBorderRadius:d}=e,u=(0,o.b)(),m=void 0!==d&&d?s.largeBorderRadius:s.mediumBorderRadius,p=`${s.ambientErrorBanner} ${m}`;return l[0]!==u?(t=()=>{u.dismissAmbientError()},l[0]=u,l[1]=t):t=l[1],l[2]!==c.message||l[3]!==p||l[4]!==t?(n=(0,a.jsx)(i.l,{className:p,description:c.message,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:t}),l[2]=c.message,l[3]=p,l[4]=t,l[5]=n):n=l[5],n}try{l.displayName||(l.displayName="AmbientErrorBanner")}catch{}},97785:(e,t,n)=>{n.d(t,{o:()=>d});var a=n(74848),r=n(21728),i=n(34164),o=n(96540);let s={chatImageAttachment:"ChatImage-module__chatImageAttachment--A31NV",squareView:"ChatImage-module__squareView--z0mEJ",fullView:"ChatImage-module__fullView--n3xkp",userAttachedImage:"ChatImage-module__userAttachedImage--fpKCB",overlay:"ChatImage-module__overlay--KqENn",overlayScreen:"ChatImage-module__overlayScreen--QlNhZ",expandIcon:"ChatImage-module__expandIcon--B0sBN"};function l(e){let t,n,i=(0,r.c)(5),{className:o,size:s}=e,l=s||14,c=s||14;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.672 5.342a.8.8 0 0 0 .05-.295V.805a.75.75 0 0 0-.75-.75H8.73a.75.75 0 0 0 0 1.5h2.433L8.138 4.577A.75.75 0 0 0 9.2 5.638l3.024-3.023v2.432a.75.75 0 0 0 1.45.295M.328 8.657a.8.8 0 0 0-.05.295v4.243a.75.75 0 0 0 .75.75h4.243a.75.75 0 0 0 0-1.5H2.838l3.024-3.023A.75.75 0 1 0 4.8 8.362l-3.024 3.023V8.952a.75.75 0 0 0-1.45-.295",clipRule:"evenodd"}),i[0]=t):t=i[0],i[1]!==o||i[2]!==l||i[3]!==c?(n=(0,a.jsx)("svg",{className:o,xmlns:"http://www.w3.org/2000/svg",width:l,height:c,fill:"none",viewBox:"0 0 14 14",role:"presentation",children:t}),i[1]=o,i[2]=l,i[3]=c,i[4]=n):n=i[4],n}try{l.displayName||(l.displayName="ExpandIcon")}catch{}let c=e=>{let t,n,c,d,u,m,p,h,f,g=(0,r.c)(25),{src:y,alt:x,onClick:v,useOverlay:_,mode:b,squareView:j}=e,[C,N]=(0,o.useState)(!1),S=j?s.squareView:s.fullView,w="assistive"===b;g[0]!==S||g[1]!==w?(t=(0,i.$)(s.chatImageAttachment,S,{assistive:w}),g[0]=S,g[1]=w,g[2]=t):t=g[2];let I=j?s.squareView:s.fullView;return g[3]!==I?(n=(0,i.$)(s.userAttachedImage,I),g[3]=I,g[4]=n):n=g[4],g[5]!==x||g[6]!==y||g[7]!==n?(c=(0,a.jsx)("img",{className:n,src:y,alt:x}),g[5]=x,g[6]=y,g[7]=n,g[8]=c):c=g[8],g[9]!==C||g[10]!==j?(d=(0,i.$)(s.overlay,{hovered:C,[s.squareView]:j}),g[9]=C,g[10]=j,g[11]=d):d=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(u=()=>N(!0),m=()=>N(!1),g[12]=u,g[13]=m):(u=g[12],m=g[13]),g[14]!==_?(p=_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:s.overlayScreen}),(0,a.jsx)(l,{className:s.expandIcon,size:20})]}),g[14]=_,g[15]=p):p=g[15],g[16]!==v||g[17]!==y||g[18]!==p||g[19]!==d?(h=(0,a.jsx)("a",{href:y,className:d,onClick:v,onMouseEnter:u,onMouseLeave:m,"aria-label":"Open image thumbnail",target:"_blank",rel:"noreferrer",children:p}),g[16]=v,g[17]=y,g[18]=p,g[19]=d,g[20]=h):h=g[20],g[21]!==h||g[22]!==t||g[23]!==c?(f=(0,a.jsxs)("div",{className:t,children:[c,h]}),g[21]=h,g[22]=t,g[23]=c,g[24]=f):f=g[24],f},d=(0,o.memo)(c);try{c.displayName||(c.displayName="ChatImageUnmemoized")}catch{}try{d.displayName||(d.displayName="ChatImage")}catch{}},77191:(e,t,n)=>{n.d(t,{V:()=>tY});var a,r=n(74848),i=n(21728),o=n(38007),s=n(98386),l=n(42080),c=n(99837),d=n(38621),u=n(65556),m=n(55847),p=n(63867),h=n(34164),f=n(96540),g=n(94747),y=n(60039),x=n(7277),v=n(47970),_=n(34901),b=n(47397),j=n(26268),C=n(36721);let N=e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}};var S=n(22069);let w=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,I=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function k(e){let t=await (0,y.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new I;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function T(e){let{itemUrl:t}=e,n=await (0,y.lS)(`/copilot/chat-links?item_url=${t}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return await n.json()}var E=n(85647),A=n(17515),R=n(74244),L=n(44435);let P=({manager:e})=>[{label:"Delete conversation",command:"delete",icon:d.TrashIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,L.W)(n);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Rename conversation",command:"rename",icon:d.PencilIcon,requiresParams:!0,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let a=(0,L.W)(n);if(!a)throw Error("Thread not found");await e.renameThread(a,t),(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Start a new conversation",command:"new",icon:d.PlusIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}}],D=async(e,t,n)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let a=P({manager:n}).filter(t=>{let n=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.command.toLowerCase().includes(n)});if(1!==a.length)return!1;let r=a[0],i=e.substring(r.command.length).trim();return await r.action(i,t),!0};var O=n(67522);function M(e,t,n){if("immersive"===e&&/^\/copilot(\/agents)?\/?$/.test(t)){let e=n.get("prompt");if(e)return e}}var B=n(91819),F=n(31971),$=n(22469),U=n(53850),V=n(86571),z=n(6901);let W=(e,t,n)=>e&&"immersive"===t&&!n;var H=n(15385),q=n(10569),G=n(80597),K=n(39818),Q=n(39459);function J(e){let t,n,a,s,l,c,u=(0,i.c)(24),{onSelectPanel:m,onSelectAgent:p}=e,{availableAgents:h,showLimit:f,disabled:g,loading:y}=(0,K.JE)(),x=h&&h.length>0;if(y){let e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(H.l.Item,{disabled:!0,children:[(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(d.MentionIcon,{})}),"Extension"]}),u[0]=e):e=u[0],e}if(g){let e,t,n;return u[1]!==m?(e=()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),m("agents-not-supported")},u[1]=m,u[2]=e):e=u[2],u[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(d.MentionIcon,{})}),u[3]=t):t=u[3],u[4]!==e?(n=(0,r.jsxs)(H.l.Item,{onSelect:e,children:[t,"Extension\u2026"]}),u[4]=e,u[5]=n):n=u[5],n}if(!x){let e,t,n;return u[6]!==m?(e=()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),m("no-agents-available")},u[6]=m,u[7]=e):e=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(d.MentionIcon,{})}),u[8]=t):t=u[8],u[9]!==e?(n=(0,r.jsxs)(H.l.Item,{onSelect:e,children:[t,"Extension\u2026"]}),u[9]=e,u[10]=n):n=u[10],n}if(u[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(q.W.Anchor,{children:(0,r.jsxs)(H.l.Item,{onSelect:Z,children:[(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(d.MentionIcon,{})}),"Extension"]})}),u[11]=t):t=u[11],u[12]!==h||u[13]!==p||u[14]!==f){let e;u[16]!==p||u[17]!==f?(e=e=>(0,r.jsxs)(H.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),p(e)},children:[(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(Q.r,{src:e.avatarUrl})}),e.name,!f&&(0,r.jsxs)(H.l.Description,{variant:"inline",truncate:!0,children:[K.Z3,e.slug]}),f&&(0,r.jsx)(H.l.Description,{variant:"block",children:"Start a new conversation to use other extensions."})]},e.slug),u[16]=p,u[17]=f,u[18]=e):e=u[18],n=h.map(e),u[12]=h,u[13]=p,u[14]=f,u[15]=n}else n=u[15];return u[19]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(H.l.Divider,{}),u[19]=a):a=u[19],u[20]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(d.TelescopeIcon,{})}),u[20]=s):s=u[20],u[21]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsxs)(H.l.LinkItem,{href:K.bn,onClick:Y,children:[s,"Marketplace",(0,r.jsx)(H.l.TrailingVisual,{children:(0,r.jsx)(d.LinkExternalIcon,{})})]}),u[21]=l):l=u[21],u[22]!==n?(c=(0,r.jsxs)(q.W,{children:[t,(0,r.jsx)(q.W.Overlay,{width:"small",children:(0,r.jsxs)(H.l,{children:[n,a,l]})})]}),u[22]=n,u[23]=c):c=u[23],c}function Y(){(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function Z(){(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{J.displayName||(J.displayName="AgentMenu")}catch{}var X=n(68714),ee=n(75177),et=n(34614),en=n(2724);function ea(e){let t,n,a=(0,i.c)(3),{onClose:o}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},a[0]=t):t=a[0],a[1]!==o?(n=(0,r.jsx)(en.l,{width:"large",title:"Extensions",position:t,onClose:o,renderBody:er}),a[1]=o,a[2]=n):n=a[2],n}function er(){return(0,r.jsx)(ee.A,{sx:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center",px:4,py:8,flex:1,height:"100%"},children:(0,r.jsxs)(ee.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,color:"fg.muted"},children:[(0,r.jsx)(d.TelescopeIcon,{size:24}),(0,r.jsx)(ee.A,{as:"h3",sx:{fontSize:2,fontWeight:"bold",mt:2,color:"fg.default"},children:"Chat with your favorite tools and services"}),(0,r.jsx)(ee.A,{as:"p",sx:{fontSize:1,fontWeight:"normal"},children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,r.jsx)(m.Q,{as:"a",href:K.bn,children:"Browse marketplace"}),(0,r.jsx)(ee.A,{sx:{mt:2},children:(0,r.jsx)(et.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function ei(e){let t,n,a,o=(0,i.c)(8),{onClose:s}=e,l=(0,b.b)(),c=(0,_.Pk)(),u=(0,X.BV)(),p=(0,O.GF)(c.availableModels);return o[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},o[0]=t):t=o[0],o[1]!==u||o[2]!==p||o[3]!==l?(n=()=>(0,r.jsx)(ee.A,{sx:{display:"flex",flexDirection:"column",textAlign:"center",px:4,py:10,height:"100%",alignItems:"center",justifyContent:"center"},children:(0,r.jsxs)(ee.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,color:"fg.muted"},children:[(0,r.jsx)(ee.A,{sx:{display:"flex",color:"attention.fg"},children:(0,r.jsx)(d.AlertIcon,{size:24})}),(0,r.jsxs)(ee.A,{as:"h3",sx:{fontSize:2,fontWeight:"bold",mt:2,color:"fg.default"},children:[u?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,r.jsxs)(ee.A,{as:"p",sx:{fontSize:1,fontWeight:"normal"},children:["Switch back to the ",p.displayName," model or start a new conversation"]}),(0,r.jsx)(m.Q,{onClick:()=>{l.selectThread(null),l.selectModel(p)},children:"New conversation"})]})}),o[1]=u,o[2]=p,o[3]=l,o[4]=n):n=o[4],o[5]!==s||o[6]!==n?(a=(0,r.jsx)(en.l,{width:"large",title:"Extensions",position:t,onClose:s,renderBody:n}),o[5]=s,o[6]=n,o[7]=a):a=o[7],a}try{ea.displayName||(ea.displayName="NoAgentsAvailableDialog")}catch{}try{ei.displayName||(ei.displayName="AgentsNotSupportedDialog")}catch{}var eo=n(85351),es=n(87330),el=n(45286),ec=n(84217),ed=n(52464),eu=n(3971),em=n(30631),ep=n(53110),eh=n(40961);let ef={disabledForPreviewModelsPanel:"KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--NqDvF"},eg=(0,f.forwardRef)(function(e,t){let n,a,o,s,l,c,u=(0,i.c)(13);u[0]!==e?({open:a,setOpen:o,...n}=e,u[0]=e,u[1]=n,u[2]=a,u[3]=o):(n=u[1],a=u[2],o=u[3]);let m=!!a||void 0;return u[4]!==a||u[5]!==o?(s=()=>o(!a),u[4]=a,u[5]=o,u[6]=s):s=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(l={color:"fg.muted"},u[7]=l):l=u[7],u[8]!==n||u[9]!==t||u[10]!==m||u[11]!==s?(c=(0,r.jsx)(es.K,{ref:t,"aria-expanded":m,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:d.BookIcon,onClick:s,sx:l,variant:"invisible",...n}),u[8]=n,u[9]=t,u[10]=m,u[11]=s,u[12]=c):c=u[12],c});function ey({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:n,onOpenChange:a,anchorRef:i}){let o=(0,_.Pk)(),l=(0,b.b)(),c=(0,eo.A)("localStorage"),{knowledgeBases:d}=o,[u,m]=(0,f.useState)([]),[p,h]=(0,f.useState)(!0),[g,y]=(0,f.useState)(""),x=(0,f.useRef)(null),v=c.getItem("lastUsedKnowledgeBaseId")||"",j=c.getItem("lastUsedKnowledgeBaseOrg")||"",{currentReferences:C}=o;(0,f.useEffect)(()=>{n||y("")},[n]);let N=(0,f.useMemo)(()=>""===g?d:d.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())),[g,d]),w=(0,f.useMemo)(()=>N.reduce((e,t)=>{let n=e.find(e=>e.org===t.ownerLogin);return n?n.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[N]),[I,k]=(0,f.useState)(!1),T=p||"pending"===o.knowledgeBasesLoading.state,E=I||"error"===o.knowledgeBasesLoading.state,A=(0,f.useRef)(!1);(0,f.useEffect)(()=>{let e=async()=>{h(!0),await l.fetchKnowledgeBases();let e=await l.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?m(e.payload||[]):k(!0),h(!1)};n&&!A.current&&(A.current=!0,e())},[n,l]);let L=eC(),P=e=>{l.dismissAttachKnowledgeBaseHerePopover(),l.clearCurrentReferences(["image","issue"]),l.clearCurrentTopic(),o.selectedThreadID&&R.J.setSelectedTopic(o.selectedThreadID,null);let t=(0,S.UU)(e);l.addReference(t,"docsetMenu"),c.setItem("lastUsedKnowledgeBaseId",e.id),c.setItem("lastUsedKnowledgeBaseOrg",e.ownerLogin)},D=e=>{let t=e.filter(e=>(0,S.P)(e)&&!C.some(t=>(0,S.P)(t)&&t.id===e.id));for(let t of C.filter(t=>(0,S.P)(t)&&!e.some(e=>e.id===t.id)))l.removeReference(t);for(let e of t)l.addReference((0,S.UU)(e),"docsetMenu")};if(o.model?.hasLimitedCapabilities)return(0,r.jsx)(ew,{open:n,setOpen:a,...e});if(!T&&0===d.length)return(0,r.jsx)(ex,{administratedCopilotEnterpriseOrganizations:u,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:n,setOpen:a,mode:o.mode,...t});let O=e=>{if(F.W.topicsAsReferences)D(e.map(e=>d.find(t=>t.id===e.id)).filter(e=>void 0!==e));else{let t=e?d.find(t=>t.id===e.id):void 0;t&&e&&P(t)}},M=N.sort((e,t)=>e.id===v?-1:+(t.id===v)).map(e=>({id:e.id,key:e.id,groupId:e.ownerLogin,text:e.name,description:e.description,disabled:!e.canChat,descriptionVariant:"block"})),B=[...w].sort((e,t)=>e.org===j?-1:+(t.org===j)).map(e=>({id:e.org,key:e.org,text:e.org,groupId:e.org,header:{title:e.org}})),$=d.filter(e=>C.some(t=>(0,S.P)(t)&&t.id===e.id)),U={selected:$.length>0?$[0]:void 0,onSelectedChange:e=>O(e)};return(0,r.jsx)("div",{ref:x,...(0,s.G)("knowledge-select-panel"),children:(0,r.jsx)(el.X,{title:F.W.topicsAsReferences?"Select knowledge bases":"Select a knowledge base",subtitle:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,eh.flushSync)(()=>a(!1)),i.current?.focus()},open:n,renderAnchor:null,anchorRef:i,onOpenChange:a,loading:T,items:M,onFilterChange:y,groupMetadata:B,notice:null!==L?{text:L,variant:"info"}:void 0,message:E?{variant:"error",title:"Failed to load knowledge bases",body:"Try again later"}:0===w.length?{variant:"empty",title:`No knowledge bases found for \`${g}\``,body:"Try a different search term"}:void 0,...F.W.topicsAsReferences?{selected:$,onSelectedChange:e=>O(e)}:U,variant:"modal",overlayProps:{maxHeight:"xlarge"},width:"large"})})}function ex(e){let t,n,a,o,l,c,u,m,p,h,f,g,y,x,v,_,b,j,C,N,S,w,I,k,T,E,A,R=(0,i.c)(56),{administratedCopilotEnterpriseOrganizations:L,anchorRef:P,open:D,setOpen:O}=e,M=eC();R[0]!==P||R[1]!==D||R[2]!==O?(t=P?{anchorRef:P,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,r.jsx)(eg,{open:D,setOpen:O,...t})}},R[0]=P,R[1]=D,R[2]=O,R[3]=t):t=R[3];let B=t,F=L?.length===0;R[4]!==F?(n=F?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{},R[4]=F,R[5]=n):n=R[5];let $=n;R[6]!==F?(a=F?{maxHeight:"100%"}:{},R[6]=F,R[7]=a):a=R[7];let U=a;R[8]!==F?(o=F?{height:"100%"}:{},R[8]=F,R[9]=o):o=R[9];let V=o;return R[10]!==O?(l=()=>O(!0),c=()=>O(!1),R[10]=O,R[11]=l,R[12]=c):(l=R[11],c=R[12]),R[13]===Symbol.for("react.memo_cache_sentinel")?(u={anchorSide:"outside-bottom",sx:{width:"min(100%, 350px)"}},R[13]=u):u=R[13],R[14]!==V?(m={display:"flex",flexDirection:"column",...V},R[14]=V,R[15]=m):m=R[15],R[16]===Symbol.for("react.memo_cache_sentinel")?(p=(0,s.G)("empty-knowledge-base-picker"),R[16]=p):p=R[16],R[17]===Symbol.for("react.memo_cache_sentinel")?(h={borderBottom:"1px solid",borderColor:"border.muted"},R[17]=h):h=R[17],R[18]===Symbol.for("react.memo_cache_sentinel")?(f={display:"flex",justifyContent:"space-between",alignItems:"center",py:2,px:3},R[18]=f):f=R[18],R[19]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)(ec.A,{id:"knowledge-base-dialog-title",as:"h4",sx:{fontSize:1},children:"Attach a knowledge base"}),R[19]=g):g=R[19],R[20]!==O?(y=(0,r.jsx)(ee.A,{sx:h,children:(0,r.jsxs)(ee.A,{sx:f,children:[g,(0,r.jsx)(es.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:d.XIcon,variant:"invisible",onClick:()=>O(!1)})]})}),R[20]=O,R[21]=y):y=R[21],R[22]!==$?(x={display:"flex",flexDirection:"column",alignItems:"center",gap:3,pt:3,...$},R[22]=$,R[23]=x):x=R[23],R[24]===Symbol.for("react.memo_cache_sentinel")?(v=(0,r.jsx)(ep.A,{icon:d.BookIcon,size:"medium",sx:{color:"fg.muted"}}),R[24]=v):v=R[24],R[25]!==U?(_={gap:2,display:"flex",alignItems:"center",flexDirection:"column",...U},R[25]=U,R[26]=_):_=R[26],R[27]===Symbol.for("react.memo_cache_sentinel")?(b=(0,r.jsx)(ed.A,{sx:{fontSize:1,fontWeight:600},children:"You don't have any knowledge bases"}),R[27]=b):b=R[27],R[28]===Symbol.for("react.memo_cache_sentinel")?(j={color:"fg.muted",textAlign:"center",fontSize:0,px:3},C=(0,r.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),R[28]=j,R[29]=C):(j=R[28],C=R[29]),R[30]!==F?(N=F&&(0,r.jsx)(ed.A,{as:"p",sx:{mt:3,mb:4},...(0,s.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."}),R[30]=F,R[31]=N):N=R[31],R[32]!==N?(S=(0,r.jsxs)(ee.A,{sx:j,children:[C,N]}),R[32]=N,R[33]=S):S=R[33],R[34]!==L?(w=L.length>0&&(0,r.jsx)(ev,{administratedCopilotEnterpriseOrganizations:L}),R[34]=L,R[35]=w):w=R[35],R[36]!==_||R[37]!==S||R[38]!==w?(I=(0,r.jsxs)(ee.A,{sx:_,children:[b,S,w]}),R[36]=_,R[37]=S,R[38]=w,R[39]=I):I=R[39],R[40]!==x||R[41]!==I?(k=(0,r.jsxs)(ee.A,{sx:x,children:[v,I]}),R[40]=x,R[41]=I,R[42]=k):k=R[42],R[43]!==M?(T=M&&(0,r.jsx)(ee.A,{sx:{borderTop:"1px solid",borderColor:"border.muted",px:2,py:3},children:(0,r.jsx)(ej,{message:M})}),R[43]=M,R[44]=T):T=R[44],R[45]!==y||R[46]!==k||R[47]!==T||R[48]!==m?(E=(0,r.jsxs)(ee.A,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:m,...p,children:[y,k,T]}),R[45]=y,R[46]=k,R[47]=T,R[48]=m,R[49]=E):E=R[49],R[50]!==B||R[51]!==D||R[52]!==E||R[53]!==l||R[54]!==c?(A=(0,r.jsx)(eu.T,{open:D,onOpen:l,onClose:c,overlayProps:u,...B,children:E}),R[50]=B,R[51]=D,R[52]=E,R[53]=l,R[54]=c,R[55]=A):A=R[55],A}function ev(e){let t=(0,i.c)(14),{administratedCopilotEnterpriseOrganizations:n}=e;if(1===n.length){let e,a,i,o;return t[0]!==n[0]?(e=eS(n[0]),t[0]=n[0],t[1]=e):e=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(a={mb:4},i=(0,s.G)("create-knowledge-base-button"),t[2]=a,t[3]=i):(a=t[2],i=t[3]),t[4]!==e?(o=(0,r.jsx)(m.Q,{as:"a",href:e,sx:a,...i,children:"Create a knowledge base"}),t[4]=e,t[5]=o):o=t[5],o}{let e,a,i,o,l,c;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e={width:"100%",textAlign:"left",borderTop:"1px solid",borderColor:"border.muted",pt:3},a=(0,s.G)("create-knowledge-base-dropdown"),t[6]=e,t[7]=a):(e=t[6],a=t[7]),t[8]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(ec.A,{as:"h3",sx:{fontSize:0,color:"fg.muted",pl:3},children:"Create a knowledge base for an organization"}),t[8]=i):i=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(o={maxHeight:"160px",overflow:"scroll"},t[9]=o):o=t[9],t[10]!==n?(l=n.map(e_),t[10]=n,t[11]=l):l=t[11],t[12]!==l?(c=(0,r.jsxs)(ee.A,{sx:e,...a,children:[i,(0,r.jsx)(H.l,{sx:o,children:l})]}),t[12]=l,t[13]=c):c=t[13],c}}function e_(e){return(0,r.jsx)(eb,{org:e},e.id)}function eb(e){let t,n,a,o,s,l,c,d=(0,i.c)(14),{org:u}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t={flex:1,color:"fg.default"},d[0]=t):t=d[0],d[1]!==u?(n=eS(u),d[1]=u,d[2]=n):n=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(a={mr:2},d[3]=a):a=d[3],d[4]!==u.avatarUrl||d[5]!==u.login?(o=(0,r.jsx)(Q.r,{square:!0,src:u.avatarUrl,alt:u.login,sx:a,"aria-hidden":"true"}),d[4]=u.avatarUrl,d[5]=u.login,d[6]=o):o=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(s={minWidth:"80%"},d[7]=s):s=d[7],d[8]!==u.login?(l=(0,r.jsx)(em.A,{inline:!0,title:u.login,sx:s,children:u.login}),d[8]=u.login,d[9]=l):l=d[9],d[10]!==n||d[11]!==o||d[12]!==l?(c=(0,r.jsx)(H.l.Item,{children:(0,r.jsxs)(et.A,{sx:t,href:n,children:[o,l]})}),d[10]=n,d[11]=o,d[12]=l,d[13]=c):c=d[13],c}function ej(e){let t,n,a=(0,i.c)(3),{message:o}=e;return o?(a[0]===Symbol.for("react.memo_cache_sentinel")?(t={color:"fg.muted",fontSize:0,ml:2},a[0]=t):t=a[0],a[1]!==o?(n=(0,r.jsx)(ee.A,{"data-testid":"knowledge-select-panel-sso",sx:t,children:o}),a[1]=o,a[2]=n):n=a[2],n):null}function eC(){let e=(0,_.Pk)(),t=e.ssoOrganizations.map(eN);for(let n of e.knowledgeBases)for(let e of n.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;{if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function eN(e){return e.login}function eS(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function ew(e){let t,n,a,o,s,l=(0,i.c)(13),{anchorRef:c,open:u,setOpen:m}=e;l[0]!==c||l[1]!==u||l[2]!==m?(t=c?{anchorRef:c,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,r.jsx)(eg,{open:u,setOpen:m,...t})}},l[0]=c,l[1]=u,l[2]=m,l[3]=t):t=l[3];let p=t;return l[4]!==m?(n=()=>m(!0),a=()=>m(!1),l[4]=m,l[5]=n,l[6]=a):(n=l[5],a=l[6]),l[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsxs)("div",{className:(0,h.$)("m-3 d-flex flex-column flex-items-center text-center",ef.disabledForPreviewModelsPanel),children:[(0,r.jsx)(d.AlertIcon,{className:"fgColor-attention mb-3"}),(0,r.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,r.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]}),l[7]=o):o=l[7],l[8]!==p||l[9]!==u||l[10]!==n||l[11]!==a?(s=(0,r.jsx)(eu.T,{open:u,onOpen:n,onClose:a,...p,children:o}),l[8]=p,l[9]=u,l[10]=n,l[11]=a,l[12]=s):s=l[12],s}try{eg.displayName||(eg.displayName="KBIconButton")}catch{}try{(a=KBIconButtonInner).displayName||(a.displayName="KBIconButtonInner")}catch{}try{ey.displayName||(ey.displayName="KnowledgeSelectPanel")}catch{}try{ex.displayName||(ex.displayName="EmptyKnowledgeBase")}catch{}try{ev.displayName||(ev.displayName="CreateKnowledgeBaseButton")}catch{}try{eb.displayName||(eb.displayName="CreateKnowledgeBaseActionRow")}catch{}try{ej.displayName||(ej.displayName="SSOFooter")}catch{}try{ew.displayName||(ew.displayName="DisabledForPreviewModels")}catch{}var eI=n(70066),ek=n(70170),eT=n(83978),eE=n(97286);async function eA(e,t,n,a){return new Promise((r,i)=>{if(!window.Worker)return void setTimeout(()=>r(e.filter(e=>e.includes(t))));let o=new Worker(n);o.addEventListener("message",e=>r(e.data.list)),o.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),a.addEventListener("abort",()=>{o.terminate(),i(Error("Worker aborted"))}),o.postMessage({baseList:e,query:t})})}function eR(e,t){let n,a,r,o=(0,i.c)(9),{findFileWorkerPath:s}=(0,_.Pk)();o[0]!==e||o[1]!==t||o[2]!==s?(n=["copilot-worker-filter",s,e,t],a=async n=>{let{signal:a}=n;return e?0===t.length?e:eA(e,t,s,a):[]},o[0]=e,o[1]=t,o[2]=s,o[3]=n,o[4]=a):(n=o[3],a=o[4]);let l=null!==e;return o[5]!==n||o[6]!==a||o[7]!==l?(r={queryKey:n,queryFn:a,enabled:l,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:eL},o[5]=n,o[6]=a,o[7]=l,o[8]=r):r=o[8],(0,eE.I)(r)}function eL(e){return e}function eP(e,t){let n,a,r,o=(0,i.c)(11),s=void 0===t||t,l=(0,b.b)(),c=null!==e;return o[0]!==s||o[1]!==e?(n=["copilot-repository-files",e,s],o[0]=s,o[1]=e,o[2]=n):n=o[2],o[3]!==s||o[4]!==l||o[5]!==e?(a=async()=>{if(!e)return{};let t=await l.service.listRepoFiles(e,s);if(!t.ok)throw Error("Failed to fetch files for repository");return t.payload},o[3]=s,o[4]=l,o[5]=e,o[6]=a):a=o[6],o[7]!==c||o[8]!==n||o[9]!==a?(r={enabled:c,queryKey:n,queryFn:a,staleTime:3e5},o[7]=c,o[8]=n,o[9]=a,o[10]=r):r=o[10],(0,eE.I)(r)}function eD(e,t){let n,a,r,o=(0,i.c)(11),s=(0,b.b)(),l=null!==e&&t.length>0;return o[0]!==e||o[1]!==t?(n=["copilot-repository-symbols",e,t],o[0]=e,o[1]=t,o[2]=n):n=o[2],o[3]!==s||o[4]!==e||o[5]!==t?(a=async()=>{if(!e)return[];let n=await s.service.querySymbols(e,t);if(!n.ok)throw Error("Failed to fetch symbols for repository");return n.payload.filter(eO)},o[3]=s,o[4]=e,o[5]=t,o[6]=a):a=o[6],o[7]!==l||o[8]!==n||o[9]!==a?(r={enabled:l,queryKey:n,queryFn:a},o[7]=l,o[8]=n,o[9]=a,o[10]=r):r=o[10],(0,eE.I)(r)}function eO(e){return!!e.symbol}var eM=n(51295);let eB={chooseRepoInstructionPanel:"ReferencesSelectPanel-module__chooseRepoInstructionPanel--ZB4TR",chooseRepoTitle:"ReferencesSelectPanel-module__chooseRepoTitle--WR2cM",chooseRepoSubtitle:"ReferencesSelectPanel-module__chooseRepoSubtitle--D5U0G"};var eF=n(76016);let e$="Search",eU=e=>{let t=e.includes("files"),n=e.includes("folders"),a=e.includes("symbols");return t&&n&&a?"Select files, folders, and symbols":t&&n?"Select files and folders":t&&a?"Select files and symbols":n&&a?"Select folders and symbols":t?"Select files":n?"Select folders":a?"Select symbols":"Select references"},eV=(e,t)=>{let n=t.includes("files"),a=t.includes("folders"),r=t.includes("symbols"),i="references";return n&&a&&r?i="files, folders, and symbols":n&&a?i="files and folders":n&&r?i="files and symbols":a&&r?i="folders and symbols":n?i="files":a?i="folders":r&&(i="symbols"),`Choose ${i} from ${e} to chat about. Use fewer references for more accurate responses.`},ez=e=>{let t=e.includes("files"),n=e.includes("folders"),a=e.includes("symbols");return t&&n&&a?"Fetching files, folders, and symbols\u2026":t&&n?"Fetching files and folders\u2026":t&&a?"Fetching files and symbols\u2026":n&&a?"Fetching folders and symbols\u2026":t?"Fetching files\u2026":n?"Fetching folders\u2026":a?"Fetching symbols\u2026":"Fetching references\u2026"},eW=e=>{let t=e.includes("files"),n=e.includes("folders"),a=e.includes("symbols"),r="References";return t&&n&&a?r="Files, folders, and symbols":t&&n?r="Files and folders":t&&a?r="Files and symbols":n&&a?r="Folders and symbols":t?r="Files":n?r="Folders":a&&(r="Symbols"),r},eH=e=>{let t=e.includes("files"),n=e.includes("folders"),a=e.includes("symbols");return t&&n&&a?"Choose a repository to browse for files, folders, and symbols.":t&&n?"Choose a repository to browse for files and folders.":t&&a?"Choose a repository to browse for files and symbols.":n&&a?"Choose a repository to browse for folders and symbols.":t?"Choose a repository to browse for files.":n?"Choose a repository to browse for folders.":a?"Choose a repository to browse for symbols.":"Choose a repository to browse for references."},eq=e=>{let t=e.includes("files"),n=e.includes("folders"),a=e.includes("symbols");return t&&n&&a?"No files, folders, or symbols found":t&&n?"No files or folders found":t&&a?"No files or symbols found":n&&a?"No folders or symbols found":t?"No files found":n?"No folders found":a?"No symbols found":"No references found"},eG=e=>{let t,n,a,o,s=(0,i.c)(12);s[0]!==e?({open:n,onOpenChange:t,...a}=e,s[0]=e,s[1]=t,s[2]=n,s[3]=a):(t=s[1],n=s[2],a=s[3]);let{currentTopic:l}=(0,_.Pk)();if(!(0,S.Z6)(l)){let e;return s[4]!==t||s[5]!==n?(e=(0,r.jsx)(eY,{open:n,setOpen:t}),s[4]=t,s[5]=n,s[6]=e):e=s[6],e}return s[7]!==l||s[8]!==t||s[9]!==n||s[10]!==a?(o=(0,r.jsx)(eJ,{...a,open:n,onOpenChange:t,sourceRepository:l}),s[7]=l,s[8]=t,s[9]=n,s[10]=a,s[11]=o):o=s[11],o},eK=e=>{let t,n,a,o,s,l,c,d,u,m,p,h=(0,i.c)(34);h[0]!==e?({open:a,onOpenChange:n,cancelReturnFocusRef:t,submitReturnFocusRef:s,...o}=e,h[0]=e,h[1]=t,h[2]=n,h[3]=a,h[4]=o,h[5]=s):(t=h[1],n=h[2],a=h[3],o=h[4],s=h[5]);let g=(0,b.b)(),[y,x]=(0,f.useState)();h[6]===Symbol.for("react.memo_cache_sentinel")?(l=()=>x(void 0),h[6]=l):l=h[6],h[7]!==a?(c=[a],h[7]=a,h[8]=c):c=h[8],(0,f.useEffect)(l,c);let v=(0,_.pn)(e4);h[9]!==v?(d=new Set(v.filter(e5).map(e6)),h[9]=v,h[10]=d):d=h[10];let j=d,[C,N]=(0,f.useState)(),S=(0,f.useRef)(!1);h[11]!==g.service?(u=async e=>{N(void 0),S.current=!0;let t=await g.service.fetchRepo(e);t.ok?x(t.payload):N("Error: failed to load repository details. Please try again."),S.current=!1},h[11]=g.service,h[12]=u):u=h[12];let w=u,I=o.supportedReferenceTypes??eQ;h[13]!==I?(m=eH(I),h[13]=I,h[14]=m):m=h[14];let k=m;if(!y){let e,i,o;return h[15]!==n?(e=e=>{S.current||n(e)},h[15]=n,h[16]=e):e=h[16],h[17]===Symbol.for("react.memo_cache_sentinel")?(i=new Set,h[17]=i):i=h[17],h[18]!==t||h[19]!==k||h[20]!==w||h[21]!==a||h[22]!==j||h[23]!==C||h[24]!==s||h[25]!==e?(o=(0,r.jsx)(eF.X1,{selectionVariant:"instant",open:a,onOpenChange:e,selectedRepoIds:i,onSelectRepo:w,cancelReturnFocusRef:t,submitReturnFocusRef:s,description:k,featuredRepoIds:j,error:C}),h[18]=t,h[19]=k,h[20]=w,h[21]=a,h[22]=j,h[23]=C,h[24]=s,h[25]=e,h[26]=o):o=h[26],o}return h[27]!==t||h[28]!==n||h[29]!==a||h[30]!==o||h[31]!==y||h[32]!==s?(p=(0,r.jsx)(eJ,{...o,open:a,onOpenChange:n,sourceRepository:y,cancelReturnFocusRef:t,submitReturnFocusRef:s}),h[27]=t,h[28]=n,h[29]=a,h[30]=o,h[31]=y,h[32]=s,h[33]=p):p=h[33],p},eQ=["files","folders","symbols"],eJ=e=>{let t,n,a,o,s,l,c,d,u,m,p,h,g,y,x,v=(0,i.c)(42),{renderAnchor:j,anchorRef:C,open:N,onOpenChange:w,submitReturnFocusRef:I,cancelReturnFocusRef:k,sourceRepository:T,supportedReferenceTypes:E}=e,A=void 0===E?eQ:E,[R,L]=(0,f.useState)("");v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,ek.s)(L,250),v[0]=t):t=v[0];let P=(0,f.useRef)(t);v[1]!==N?(n=()=>{N||L("")},a=[N],v[1]=N,v[2]=n,v[3]=a):(n=v[2],a=v[3]),(0,f.useEffect)(n,a);let{initialLoading:D,filterLoading:O,selected:M,unselected:B,toggleSelection:F}=function(e,t,n,a=eQ){let r=(0,_.Pk)(),o=(0,b.b)(),s=function(e,t,n,a){let r,o,s,l,c,d=(0,i.c)(16),u=void 0===a?eQ:a;d[0]!==u?(r=u.includes("folders"),d[0]=u,d[1]=r):r=d[1];let m=r,p=u.includes("symbols");d[2]!==u?(o=u.includes("files"),d[2]=u,d[3]=o):o=d[3];let h=o,f=n?t:null,g=eP(f,m),y=eR(g.data?.paths??null,e),x=eR(g.data?.directories??null,e),v=eD(p?f:null,e);d[4]!==v.data?(s=v.data?.map(e3)??null,d[4]=v.data,d[5]=s):s=d[5];let _=eR(s,e);if(d[6]!==x||d[7]!==y.data||d[8]!==_.data||d[9]!==h||d[10]!==m){let e=h?y.data?.slice(0,7).map(e2)??[]:[];l=[...e,...m?x.data?.slice(0,7).map(e1)??[]:[],..._.data?.slice(0,7).map(e0)??[]],d[6]=x,d[7]=y.data,d[8]=_.data,d[9]=h,d[10]=m,d[11]=l}else l=d[11];let b=l,j=null===y.data&&null===x.data&&null===v.data,C=g.isFetching||y.isFetching||x.isFetching||v.isFetching||_.isFetching;return d[12]!==C||d[13]!==j||d[14]!==b?(c={items:b,filterLoading:C,initialLoading:j},d[12]=C,d[13]=j,d[14]=b,d[15]=c):c=d[15],c}(t,n,e,a),l=a.includes("symbols"),c=eD(e&&l?n:null,t).data,[d,u,m]=(0,f.useMemo)(()=>{let e=new Set,t=new Set,a=new Set;for(let i of r.currentReferences)"file"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?e.add(i.path):"folder"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?t.add(i.path):"symbol"===i.type&&"suggestionSymbol"===i.kind&&i.suggestionDefinitions?.some(e=>e.repoOwner===n?.ownerLogin&&e.repoName===n?.name)&&a.add(i.name);return[e,t,a]},[r.currentReferences,n?.ownerLogin,n?.name]),{selected:p=[],unselected:h=[]}=(0,eM.O)(s.items,e=>{switch(e.type){case"file":return d.has(e.text)?"selected":"unselected";case"folder":return u.has(e.text)?"selected":"unselected";case"symbol":return m.has(e.text)?"selected":"unselected"}}),g=(0,f.useCallback)(e=>{let t;if(!n)return;switch(e.type){case"file":t=(0,S.Od)(e.text,n);break;case"folder":t=(0,S.OC)(e.text,n);break;case"symbol":{let a=c?.find(t=>(0,S.Sm)(t)===e.text);if(!a)return;t=(0,S.Qt)(a,n)}}let a=(0,S.Vb)(t),i=r.currentReferences.find(e=>a===(0,S.Vb)(e));i?o.removeReference(i):o.addReference(t,"references-menu")},[o,n,r.currentReferences,c]);return{...s,selected:p,unselected:h,toggleSelection:g}}(N,R,T,A),$=M.length+B.length,U=`${T.ownerLogin}/${T.name}`;return v[4]===Symbol.for("react.memo_cache_sentinel")?(o={flexGrow:"0 !important"},v[4]=o):o=v[4],v[5]!==j?(s=j?.({}),v[5]=j,v[6]=s):s=v[6],v[7]!==A?(l=eU(A),v[7]=A,v[8]=l):l=v[8],v[9]!==U||v[10]!==A?(c=eV(U,A),v[9]=U,v[10]=A,v[11]=c):c=v[11],v[12]!==w||v[13]!==I.current?(d=()=>{(0,eh.flushSync)(()=>w(!1)),I.current?.focus()},v[12]=w,v[13]=I.current,v[14]=d):d=v[14],v[15]!==k.current||v[16]!==w?(u=()=>{(0,eh.flushSync)(()=>w(!1)),k.current?.focus()},v[15]=k.current,v[16]=w,v[17]=u):u=v[17],v[18]===Symbol.for("react.memo_cache_sentinel")?(m=e=>P.current(e.target.value),v[18]=m):m=v[18],v[19]!==O?(p=(0,r.jsx)(eT.X.Header,{children:(0,r.jsx)(eT.X.SearchInput,{loading:O,onChange:m,placeholder:e$,"aria-label":e$})}),v[19]=O,v[20]=p):p=v[20],v[21]===Symbol.for("react.memo_cache_sentinel")?(h={minHeight:340},v[21]=h):h=v[21],v[22]!==O||v[23]!==D||v[24]!==M||v[25]!==A||v[26]!==F||v[27]!==$||v[28]!==B?(g=(0,r.jsx)(H.l,{sx:h,children:D?(0,r.jsx)(eT.X.Loading,{children:ez(A)}):0!==$||O?(0,r.jsxs)(r.Fragment,{children:[M.map(e=>(0,r.jsx)(eX,{item:e,selected:!0,toggleSelection:F},eZ(e))),M.length>0&&B.length>0&&(0,r.jsx)(H.l.Divider,{}),B.map(e=>(0,r.jsx)(eX,{item:e,selected:!1,toggleSelection:F},eZ(e)))]}):(0,r.jsx)(eT.X.Message,{variant:"empty",title:eq(A),children:"Try a different search term"})}),v[22]=O,v[23]=D,v[24]=M,v[25]=A,v[26]=F,v[27]=$,v[28]=B,v[29]=g):g=v[29],v[30]!==C||v[31]!==N||v[32]!==u||v[33]!==p||v[34]!==g||v[35]!==l||v[36]!==c||v[37]!==d?(y=(0,r.jsxs)(eT.X,{anchorRef:C,title:l,description:c,onCancel:d,onSubmit:u,open:N,selectionVariant:"multiple",variant:"modal",width:"large",maxHeight:"xlarge",children:[p,g]}),v[30]=C,v[31]=N,v[32]=u,v[33]=p,v[34]=g,v[35]=l,v[36]=c,v[37]=d,v[38]=y):y=v[38],v[39]!==y||v[40]!==s?(x=(0,r.jsxs)(ee.A,{sx:o,children:[s,y]}),v[39]=y,v[40]=s,v[41]=x):x=v[41],x};function eY(e){let t,n,a,o,s,l=(0,i.c)(11),{open:c,setOpen:u,renderAnchor:m}=e;return l[0]!==u?(t=()=>u(!0),n=()=>u(!1),l[0]=u,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==m?(a=e=>m?.(e)??(0,r.jsx)(r.Fragment,{}),l[3]=m,l[4]=a):a=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsxs)("div",{className:eB.chooseRepoInstructionPanel,children:[(0,r.jsx)(d.PaperclipIcon,{}),(0,r.jsx)("h3",{className:eB.chooseRepoTitle,children:"Attach a repository first"}),(0,r.jsx)("p",{className:eB.chooseRepoSubtitle,children:"To pick attachments, attach a repository where the files are stored."})]}),l[5]=o):o=l[5],l[6]!==c||l[7]!==t||l[8]!==n||l[9]!==a?(s=(0,r.jsx)(eu.T,{open:c,onOpen:t,onClose:n,renderAnchor:a,children:o}),l[6]=c,l[7]=t,l[8]=n,l[9]=a,l[10]=s):s=l[10],s}let eZ=e=>`${e.type}#${e.text}`;function eX(e){let t,n,a,o,s,l,c,u=(0,i.c)(17),{toggleSelection:m,selected:p,item:h}=e;return u[0]!==h||u[1]!==m?(t=()=>{m(h),setTimeout(()=>{document.getElementById(eZ(h))?.focus()})},u[0]=h,u[1]=m,u[2]=t):t=u[2],u[3]!==h?(n=eZ(h),u[3]=h,u[4]=n):n=u[4],u[5]===Symbol.for("react.memo_cache_sentinel")?(a={mx:2,'&[data-is-active-descendant="activated-directly"]':{backgroundColor:"transparent",outline:"2px solid var(--focus-outlineColor, var(--color-accent-emphasis))",outlineOffset:"-2px"}},u[5]=a):a=u[5],u[6]!==h.type?(o=(0,r.jsx)(H.l.LeadingVisual,{children:"symbol"===h.type?(0,r.jsx)(d.CodeSquareIcon,{}):"folder"===h.type?(0,r.jsx)(d.FileDirectoryFillIcon,{}):(0,r.jsx)(d.FileIcon,{})}),u[6]=h.type,u[7]=o):o=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(s={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},u[8]=s):s=u[8],u[9]!==h.text?(l=(0,r.jsx)(ee.A,{sx:s,children:h.text}),u[9]=h.text,u[10]=l):l=u[10],u[11]!==p||u[12]!==t||u[13]!==n||u[14]!==o||u[15]!==l?(c=(0,r.jsxs)(H.l.Item,{onSelect:t,selected:p,"aria-checked":p,id:n,sx:a,children:[o,l]}),u[11]=p,u[12]=t,u[13]=n,u[14]=o,u[15]=l,u[16]=c):c=u[16],c}function e0(e){return{type:"symbol",text:e}}function e1(e){return{type:"folder",text:e}}function e2(e){return{type:"file",text:e}}function e3(e){return(0,S.Sm)(e)}try{eG.displayName||(eG.displayName="TopicReferencesSelectPanel")}catch{}try{eK.displayName||(eK.displayName="MultistepReferencesSelectPanel")}catch{}try{eJ.displayName||(eJ.displayName="ReferencesSelectPanel")}catch{}try{eY.displayName||(eY.displayName="ChooseRepositoryInstruction")}catch{}try{eX.displayName||(eX.displayName="ReferenceListItem")}catch{}function e4(e){return e.currentReferences}function e5(e){return"repository"===e.type}function e6(e){return e.id}let e7=(0,f.memo)(e=>{let t,n,a,l,c,u,m,p,h,g,y,x,v,j,C,N,w,I,k,T,E,A,R,L=(0,i.c)(85);L[0]!==e?({panel:n,onPanelChange:l,anchorRef:t,...a}=e,L[0]=e,L[1]=t,L[2]=n,L[3]=a,L[4]=l):(t=L[1],n=L[2],a=L[3],l=L[4]);let{inputRef:P}=a,D=(0,b.b)(),O=(0,_.Pk)(),{supportedAttachmentTypes:M,supportedReferenceTypes:B}=function(){let e=(0,_.Pk)(),{model:t}=(0,_.bP)("model"),n=null!==(0,G.G)(),a=[],r=!!F.W.topicsAsReferences||(0,S.Z6)(e.currentTopic),i=e.renderKnowledgeBases&&(e.currentTopic&&(0,S.Z6)(e.currentTopic)||!e.currentTopic),o=F.W.attachImagesImmersive&&"immersive"===e.mode&&!!t.capabilities.supports.vision||!1,s=F.W.pasteTextFiles;return n||a.push("repositories"),r&&a.push("references"),i&&!n&&a.push("knowledge-bases"),(o||s)&&a.push("upload"),n||a.push("agents"),{supportedAttachmentTypes:a,supportedReferenceTypes:n?["files"]:["files","folders","symbols"]}}(),{model:U}=(0,_.bP)("model"),W=F.W.attachImagesImmersive&&"immersive"===O.mode&&!!U.capabilities.supports.vision||!1,Q=F.W.attachMultipleImages,Y=F.W.pasteTextFiles,Z=(0,K.kw)(a),X=(0,f.useRef)(null),ee=(0,G.G)(),et=(0,z.FQ)(!0),en=!!(ee&&et);L[5]!==ee||L[6]!==W||L[7]!==D||L[8]!==U||L[9]!==en||L[10]!==O||L[11]!==M?(c=M.includes("upload")&&(0,r.jsx)("input",{id:"image-uploader",...(0,s.G)("image-uploader"),hidden:!0,ref:X,type:"file",accept:[W?$.s.getAllowedImageFileExtensions(U):"",Y?V.E.getTextFileExtensions():""].join(","),multiple:Y||Q,onChange:e=>{if(!e.target.files)return;let[t,n]=$.s.getAllowedFiles([...e.target.files],U),a=[];if(W?new $.s(O,D).addImageAttachments(t,"menu",ee,en):a.push(...t),Y)for(let e of n)new V.E(D).addAttachment(e);else a.push(...n);for(let e of a)(0,o.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),L[5]=ee,L[6]=W,L[7]=D,L[8]=U,L[9]=en,L[10]=O,L[11]=M,L[12]=c):c=L[12];let er="attachment-types"===n;L[13]!==l?(u=e=>l(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),L[13]=l,L[14]=u):u=L[14];let eo="assistive"===O.mode?eI.E5:void 0;L[15]!==l||L[16]!==O.mode||L[17]!==M?(m=M.includes("repositories")&&(0,r.jsxs)(H.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:O.mode}),l("repositories")},children:[(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(d.RepoIcon,{})}),F.W.topicsAsReferences?"Repositories":"Repository","\u2026"]}),L[15]=l,L[16]=O.mode,L[17]=M,L[18]=m):m=L[18],L[19]!==l||L[20]!==O.mode?(p=()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REFERENCES",mode:O.mode}),l("references")},L[19]=l,L[20]=O.mode,L[21]=p):p=L[21];let es=M.includes("references")?void 0:"First attach a repository";return L[22]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(d.FileCodeIcon,{})}),L[22]=h):h=L[22],L[23]!==B?(g=eW(B),L[23]=B,L[24]=g):g=L[24],L[25]!==p||L[26]!==es||L[27]!==g?(y=(0,r.jsxs)(H.l.Item,{onSelect:p,inactiveText:es,children:[h,g,"\u2026"]}),L[25]=p,L[26]=es,L[27]=g,L[28]=y):y=L[28],L[29]!==l||L[30]!==O.mode||L[31]!==M?(x=M.includes("knowledge-bases")&&(0,r.jsxs)(H.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:O.mode}),l("knowledge-bases")},children:[(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(d.BookIcon,{})}),(0,r.jsxs)("span",{...(0,s.G)("knowledge-bases-action-list-item"),children:[F.W.topicsAsReferences?"Knowledge bases":"Knowledge base","\u2026"]})]}),L[29]=l,L[30]=O.mode,L[31]=M,L[32]=x):x=L[32],L[33]!==l||L[34]!==O.mode||L[35]!==M?(v=M.includes("upload")&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.l.Divider,{}),(0,r.jsxs)(H.l.Item,{onSelect:()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:O.mode}),l(null),X.current?.click()},children:[(0,r.jsx)(H.l.LeadingVisual,{children:Y?(0,r.jsx)(d.UploadIcon,{}):(0,r.jsx)(d.ImageIcon,{})}),Y?"Upload from computer":"Image\u2026"]})]}),L[33]=l,L[34]=O.mode,L[35]=M,L[36]=v):v=L[36],L[37]!==Z||L[38]!==l||L[39]!==M?(j=M.includes("agents")&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.l.Divider,{}),(0,r.jsx)(J,{onSelectPanel:e=>l(e),onSelectAgent:e=>setTimeout(()=>Z(e.slug))})]}),L[37]=Z,L[38]=l,L[39]=M,L[40]=j):j=L[40],L[41]!==y||L[42]!==x||L[43]!==v||L[44]!==j||L[45]!==m?(C=(0,r.jsxs)(H.l,{children:[m,y,x,v,j]}),L[41]=y,L[42]=x,L[43]=v,L[44]=j,L[45]=m,L[46]=C):C=L[46],L[47]!==C||L[48]!==eo?(N=(0,r.jsx)(q.W.Overlay,{width:"small",side:"outside-top",align:"start",portalContainerName:eo,children:C}),L[47]=C,L[48]=eo,L[49]=N):N=L[49],L[50]!==t||L[51]!==N||L[52]!==er||L[53]!==u?(w=(0,r.jsx)(q.W,{anchorRef:t,open:er,onOpenChange:u,children:N}),L[50]=t,L[51]=N,L[52]=er,L[53]=u,L[54]=w):w=L[54],L[55]!==t||L[56]!==P||L[57]!==n||L[58]!==l||L[59]!==B?(I=F.W.topicsAsReferences?(0,r.jsx)(eK,{open:"references"===n,onOpenChange:e=>l(e?"references":null),submitReturnFocusRef:P,cancelReturnFocusRef:t,supportedReferenceTypes:B}):(0,r.jsx)(eG,{open:"references"===n,onOpenChange:e=>l(e?"references":null),submitReturnFocusRef:P,cancelReturnFocusRef:t,supportedReferenceTypes:B}),L[55]=t,L[56]=P,L[57]=n,L[58]=l,L[59]=B,L[60]=I):I=L[60],L[61]!==t||L[62]!==P||L[63]!==n||L[64]!==l?(k=F.W.topicsAsReferences?(0,r.jsx)(eF.FZ,{open:"repositories"===n,onOpenChange:e=>l(e?"repositories":null),submitReturnFocusRef:P,cancelReturnFocusRef:t}):(0,r.jsx)(eF.Ee,{open:"repositories"===n,onOpenChange:e=>l(e?"repositories":null),submitReturnFocusRef:P,cancelReturnFocusRef:t}),L[61]=t,L[62]=P,L[63]=n,L[64]=l,L[65]=k):k=L[65],L[66]!==t||L[67]!==n||L[68]!==l||L[69]!==M?(T=M.includes("knowledge-bases")&&(0,r.jsx)(ey,{disabledForPreviewModelsProps:{anchorRef:t},emptyKnowledgeBaseProps:{anchorRef:t},open:"knowledge-bases"===n,onOpenChange:e=>l(e?"knowledge-bases":null),anchorRef:t}),L[66]=t,L[67]=n,L[68]=l,L[69]=M,L[70]=T):T=L[70],L[71]!==n||L[72]!==l?(E="no-agents-available"===n&&(0,r.jsx)(ea,{onClose:()=>l(null)}),L[71]=n,L[72]=l,L[73]=E):E=L[73],L[74]!==n||L[75]!==l?(A="agents-not-supported"===n&&(0,r.jsx)(ei,{onClose:()=>l(null)}),L[74]=n,L[75]=l,L[76]=A):A=L[76],L[77]!==c||L[78]!==w||L[79]!==I||L[80]!==k||L[81]!==T||L[82]!==E||L[83]!==A?(R=(0,r.jsxs)("div",{children:[c,w,I,k,T,E,A]}),L[77]=c,L[78]=w,L[79]=I,L[80]=k,L[81]=T,L[82]=E,L[83]=A,L[84]=R):R=L[84],R});e7.displayName="AttachmentMenu";var e8=n(90051);let e9={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},te=[{name:e9.agents,icon:d.StackIcon,value:"agents",where:"start"},{name:e9.repositories,icon:d.RepoIcon,value:"repositories",where:"anywhere"},{name:e9.files,icon:d.FileIcon,value:"repositories:files",where:"anywhere"},{name:e9.issues,icon:d.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:e9.pulls,icon:d.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:e9.discussions,icon:d.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}],tt={is:e=>te.some(t=>t.value===e)};function tn(e){let t,n,a,o,s,l=(0,i.c)(12);return l[0]!==e?({agent:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.avatarUrl?(a=(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(Q.r,{src:t.avatarUrl})}),l[3]=t.avatarUrl,l[4]=a):a=l[4],l[5]!==t.slug?(o=(0,r.jsxs)(H.l.Description,{variant:"inline",truncate:!0,children:[K.Z3,t.slug]}),l[5]=t.slug,l[6]=o):o=l[6],l[7]!==t.name||l[8]!==n||l[9]!==a||l[10]!==o?(s=(0,r.jsxs)(H.l.Item,{...n,children:[a,t.name,o]}),l[7]=t.name,l[8]=n,l[9]=a,l[10]=o,l[11]=s):s=l[11],s}try{tn.displayName||(tn.displayName="AgentSuggestion")}catch{}function ta(e){let t,n,a,o,s,l,c,u,m=(0,i.c)(20);m[0]!==e?({leadingVisual:t,...n}=e,m[0]=e,m[1]=t,m[2]=n):(t=m[1],n=m[2]);let p=(0,f.useId)(),g=(0,f.useId)();return m[3]!==g||m[4]!==p?(a=(0,h.$)(p,g),m[3]=g,m[4]=p,m[5]=a):a=m[5],m[6]!==t?(o=void 0!==t&&(0,r.jsx)(H.l.LeadingVisual,{children:t}),m[6]=t,m[7]=o):o=m[7],m[8]!==p||m[9]!==n.children?(s=(0,r.jsx)("span",{id:p,children:n.children}),m[8]=p,m[9]=n.children,m[10]=s):s=m[10],m[11]!==g?(l=(0,r.jsx)("span",{className:"d-none","aria-hidden":!0,id:g,children:"Opens in new tab."}),m[11]=g,m[12]=l):l=m[12],m[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(H.l.TrailingVisual,{children:(0,r.jsx)(d.LinkExternalIcon,{})}),m[13]=c):c=m[13],m[14]!==n||m[15]!==a||m[16]!==o||m[17]!==s||m[18]!==l?(u=(0,r.jsxs)(H.l.Item,{...n,"aria-labelledby":a,children:[o,s,l,c]}),m[14]=n,m[15]=a,m[16]=o,m[17]=s,m[18]=l,m[19]=u):u=m[19],u}try{ta.displayName||(ta.displayName="LinkSuggestion")}catch{}function tr(e){return{value:`@${e.slug}`,render:t=>(0,r.jsx)(tn,{agent:e,...t})}}function ti(e){let t,n,a,o,s,l=(0,i.c)(9);return l[0]!==e?({leadingVisual:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t?(a=void 0!==t&&(0,r.jsx)(H.l.LeadingVisual,{children:t}),l[3]=t,l[4]=a):a=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(H.l.TrailingVisual,{children:(0,r.jsx)(d.ArrowRightIcon,{})}),l[5]=o):o=l[5],l[6]!==n||l[7]!==a?(s=(0,r.jsxs)(H.l.Item,{"aria-haspopup":!0,...n,children:[a,n.children,o]}),l[6]=n,l[7]=a,l[8]=s):s=l[8],s}try{ti.displayName||(ti.displayName="MultistepSuggestion")}catch{}function to(e){let t,n,a,o,s=(0,i.c)(9);s[0]!==e?({category:n,...t}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let{name:l,icon:c}=n;return s[3]!==c?(a=(0,r.jsx)(c,{}),s[3]=c,s[4]=a):a=s[4],s[5]!==l||s[6]!==t||s[7]!==a?(o=(0,r.jsx)(ti,{leadingVisual:a,...t,children:l}),s[5]=l,s[6]=t,s[7]=a,s[8]=o):o=s[8],o}try{to.displayName||(to.displayName="CategorySuggestion")}catch{}let ts={asyncSuggestion:"shared-module__asyncSuggestion--lDyxK",stale:"shared-module__stale--IEVWo"};function tl(e){let t,n,a,o,s,l,c,u,m,p,f,g=(0,i.c)(25);g[0]!==e?({discussion:n,stale:o,className:t,...a}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=a,g[4]=o):(t=g[1],n=g[2],a=g[3],o=g[4]);let y=o&&ts.stale;return g[5]!==t||g[6]!==y?(s=(0,h.$)(ts.asyncSuggestion,y,t),g[5]=t,g[6]=y,g[7]=s):s=g[7],g[8]!==n.state?(l="open"===n.state&&(0,r.jsx)(d.CommentDiscussionIcon,{className:"fgColor-open"}),g[8]=n.state,g[9]=l):l=g[9],g[10]!==n.state?(c="closed"===n.state&&(0,r.jsx)(d.DiscussionClosedIcon,{className:"fgColor-muted"}),g[10]=n.state,g[11]=c):c=g[11],g[12]!==l||g[13]!==c?(u=(0,r.jsxs)(H.l.LeadingVisual,{children:[l,c]}),g[12]=l,g[13]=c,g[14]=u):u=g[14],g[15]!==n.title?(m=(0,r.jsx)(em.A,{title:n.title,maxWidth:350,children:n.title}),g[15]=n.title,g[16]=m):m=g[16],g[17]!==n.number?(p=(0,r.jsxs)(H.l.Description,{children:["#",n.number]}),g[17]=n.number,g[18]=p):p=g[18],g[19]!==a||g[20]!==s||g[21]!==u||g[22]!==m||g[23]!==p?(f=(0,r.jsxs)(H.l.Item,{...a,className:s,children:[u,m,p]}),g[19]=a,g[20]=s,g[21]=u,g[22]=m,g[23]=p,g[24]=f):f=g[24],f}try{tl.displayName||(tl.displayName="DiscussionSuggestion")}catch{}function tc(e){let t,n,a,o,s,l,c,u,m,p,f,g,y,x,v,_=(0,i.c)(35);if(_[0]!==e?({type:s,path:n,stale:o,className:t,...a}=e,_[0]=e,_[1]=t,_[2]=n,_[3]=a,_[4]=o,_[5]=s):(t=_[1],n=_[2],a=_[3],o=_[4],s=_[5]),_[6]!==t||_[7]!==n||_[8]!==a||_[9]!==o||_[10]!==s){let e=n.split("/"),i=e.pop();c=H.l.Item,p=a;let x=o&&ts.stale;_[19]!==t||_[20]!==x?(f=(0,h.$)(ts.asyncSuggestion,x,t),_[19]=t,_[20]=x,_[21]=f):f=_[21],_[22]!==s?(g=(0,r.jsx)(H.l.LeadingVisual,{children:"folder"===s?(0,r.jsx)(d.FileDirectoryFillIcon,{}):(0,r.jsx)(d.FileIcon,{})}),_[22]=s,_[23]=g):g=_[23],y=i,l=H.l.Description,u="inline",m=e.join("/"),_[6]=t,_[7]=n,_[8]=a,_[9]=o,_[10]=s,_[11]=l,_[12]=c,_[13]=u,_[14]=m,_[15]=p,_[16]=f,_[17]=g,_[18]=y}else l=_[11],c=_[12],u=_[13],m=_[14],p=_[15],f=_[16],g=_[17],y=_[18];return _[24]!==l||_[25]!==u||_[26]!==m?(x=(0,r.jsxs)(l,{variant:u,children:[m,"/"]}),_[24]=l,_[25]=u,_[26]=m,_[27]=x):x=_[27],_[28]!==c||_[29]!==p||_[30]!==f||_[31]!==g||_[32]!==y||_[33]!==x?(v=(0,r.jsxs)(c,{...p,className:f,children:[g,y,x]}),_[28]=c,_[29]=p,_[30]=f,_[31]=g,_[32]=y,_[33]=x,_[34]=v):v=_[34],v}try{tc.displayName||(tc.displayName="FileSuggestion")}catch{}function td(e){let t,n,a,o,s,l,c,u,m,p,f,g,y=(0,i.c)(28);y[0]!==e?({issue:n,stale:o,className:t,...a}=e,y[0]=e,y[1]=t,y[2]=n,y[3]=a,y[4]=o):(t=y[1],n=y[2],a=y[3],o=y[4]);let x=o&&ts.stale;return y[5]!==t||y[6]!==x?(s=(0,h.$)(ts.asyncSuggestion,x,t),y[5]=t,y[6]=x,y[7]=s):s=y[7],y[8]!==n.state?(l="draft"===n.state&&(0,r.jsx)(d.IssueDraftIcon,{className:"fgColor-neutral"}),y[8]=n.state,y[9]=l):l=y[9],y[10]!==n.state?(c="open"===n.state&&(0,r.jsx)(d.IssueOpenedIcon,{className:"fgColor-open"}),y[10]=n.state,y[11]=c):c=y[11],y[12]!==n.state?(u="closed"===n.state&&(0,r.jsx)(d.IssueClosedIcon,{className:"fgColor-done"}),y[12]=n.state,y[13]=u):u=y[13],y[14]!==l||y[15]!==c||y[16]!==u?(m=(0,r.jsxs)(H.l.LeadingVisual,{children:[l,c,u]}),y[14]=l,y[15]=c,y[16]=u,y[17]=m):m=y[17],y[18]!==n.title?(p=(0,r.jsx)(em.A,{title:n.title,maxWidth:350,children:n.title}),y[18]=n.title,y[19]=p):p=y[19],y[20]!==n.number?(f=(0,r.jsxs)(H.l.Description,{children:["#",n.number]}),y[20]=n.number,y[21]=f):f=y[21],y[22]!==a||y[23]!==s||y[24]!==m||y[25]!==p||y[26]!==f?(g=(0,r.jsxs)(H.l.Item,{...a,className:s,children:[m,p,f]}),y[22]=a,y[23]=s,y[24]=m,y[25]=p,y[26]=f,y[27]=g):g=y[27],g}try{td.displayName||(td.displayName="IssueSuggestion")}catch{}function tu(e){let t,n,a,o,s,l,c,u,m,p,f,g,y=(0,i.c)(28);y[0]!==e?({pullRequest:a,stale:o,className:t,...n}=e,y[0]=e,y[1]=t,y[2]=n,y[3]=a,y[4]=o):(t=y[1],n=y[2],a=y[3],o=y[4]);let x=o&&ts.stale;return y[5]!==t||y[6]!==x?(s=(0,h.$)(ts.asyncSuggestion,x,t),y[5]=t,y[6]=x,y[7]=s):s=y[7],y[8]!==a.state?(l="draft"===a.state&&(0,r.jsx)(d.GitPullRequestDraftIcon,{className:"fgColor-neutral"}),y[8]=a.state,y[9]=l):l=y[9],y[10]!==a.state?(c="open"===a.state&&(0,r.jsx)(d.GitPullRequestIcon,{className:"fgColor-open"}),y[10]=a.state,y[11]=c):c=y[11],y[12]!==a.state?(u="closed"===a.state&&(0,r.jsx)(d.GitPullRequestClosedIcon,{className:"fgColor-done"}),y[12]=a.state,y[13]=u):u=y[13],y[14]!==l||y[15]!==c||y[16]!==u?(m=(0,r.jsxs)(H.l.LeadingVisual,{children:[l,c,u]}),y[14]=l,y[15]=c,y[16]=u,y[17]=m):m=y[17],y[18]!==a.title?(p=(0,r.jsx)(em.A,{title:a.title,maxWidth:350,children:a.title}),y[18]=a.title,y[19]=p):p=y[19],y[20]!==a.number?(f=(0,r.jsxs)(H.l.Description,{children:["#",a.number]}),y[20]=a.number,y[21]=f):f=y[21],y[22]!==n||y[23]!==s||y[24]!==m||y[25]!==p||y[26]!==f?(g=(0,r.jsxs)(H.l.Item,{...n,className:s,children:[m,p,f]}),y[22]=n,y[23]=s,y[24]=m,y[25]=p,y[26]=f,y[27]=g):g=y[27],g}try{tu.displayName||(tu.displayName="PullRequestSuggestion")}catch{}function tm(e){let t,n,a,o,s,l,c,u,m=(0,i.c)(18);m[0]!==e?({repository:o,isMultistep:n,stale:s,className:t,...a}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=a,m[4]=o,m[5]=s):(t=m[1],n=m[2],a=m[3],o=m[4],s=m[5]);let p=s&&ts.stale;m[6]!==t||m[7]!==p?(l=(0,h.$)(ts.asyncSuggestion,p,t),m[6]=t,m[7]=p,m[8]=l):l=m[8];let f=l;m[9]!==o.isInOrganization||m[10]!==o.ownerAvatarUrl?(c=o.ownerAvatarUrl?(0,r.jsx)(Q.r,{src:o.ownerAvatarUrl,alt:"",size:16,square:o.isInOrganization}):(0,r.jsx)(d.RepoIcon,{}),m[9]=o.isInOrganization,m[10]=o.ownerAvatarUrl,m[11]=c):c=m[11];let g=c;return m[12]!==g||m[13]!==f||m[14]!==n||m[15]!==a||m[16]!==o.nwo?(u=n?(0,r.jsx)(ti,{...a,className:f,leadingVisual:g,children:o.nwo},o.nwo):(0,r.jsxs)(H.l.Item,{...a,className:f,children:[(0,r.jsx)(H.l.LeadingVisual,{children:g}),o.nwo]},o.nwo),m[12]=g,m[13]=f,m[14]=n,m[15]=a,m[16]=o.nwo,m[17]=u):u=m[17],u}try{tm.displayName||(tm.displayName="RepositorySuggestion")}catch{}function tp(e){return{value:null,key:e.value,render:t=>(0,r.jsx)(to,{category:e,...t})}}function th(e){return null!==e}function tf(e){let t,n,a=(0,i.c)(3),[r,o]=(0,f.useState)(null);return(null===r&&null!==e||null!==r&&null===e)&&o(e),a[0]!==e?(t=()=>{let t=setTimeout(()=>o(e),200);return()=>clearTimeout(t)},n=[e],a[0]=e,a[1]=t,a[2]=n):(t=a[1],n=a[2]),(0,f.useEffect)(t,n),r}function tg(e){return e}function ty(e){return e}function tx(e){return e}var tv=n(6612);function t_(e){let t,n,a,o,s=(0,i.c)(9);return s[0]!==e?({org:t,...n}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==t.avatarUrl?(a=(0,r.jsx)(Q.r,{square:!0,src:t.avatarUrl}),s[3]=t.avatarUrl,s[4]=a):a=s[4],s[5]!==t.login||s[6]!==n||s[7]!==a?(o=(0,r.jsx)(ta,{leadingVisual:a,...n,children:t.login}),s[5]=t.login,s[6]=n,s[7]=a,s[8]=o):o=s[8],o}function tb(e){let t,n,a,o=(0,i.c)(7);return o[0]!==e?({orgs:t,...n}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),o[3]!==t[0]?.login||o[4]!==t.length||o[5]!==n?(a=1===t.length?(0,r.jsxs)(ta,{leadingVisual:(0,r.jsx)(d.ShieldLockIcon,{}),...n,children:["Single sign-on to ",(0,r.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,r.jsx)(ti,{leadingVisual:(0,r.jsx)(d.ShieldLockIcon,{}),...n,children:"Single sign-on for more"}),o[3]=t[0]?.login,o[4]=t.length,o[5]=n,o[6]=a):a=o[6],a}try{t_.displayName||(t_.displayName="SSOOrgSuggestion")}catch{}try{tb.displayName||(tb.displayName="SSOPromptSuggestion")}catch{}let tj=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function tC(e){return{value:null,key:`open-link:${tj(e)}`,render:t=>(0,r.jsx)(t_,{org:e,...t})}}let tN=e=>(t,n)=>e.has(t.databaseId)&&!e.has(n.databaseId)?-1:e.has(n.databaseId)&&!e.has(t.databaseId)?1:0,tS=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}];function tw(e){let t,n,a,s,l,c,u,m,p,h,g=(0,i.c)(25),{children:y,onSelectReference:x,onShowAgentsDialog:v}=e,{mode:C}=(0,_.Pk)(),[N,S]=(0,f.useState)(tI);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>S(!0),n=[],g[0]=t,g[1]=n):(t=g[0],n=g[1]),(0,f.useEffect)(t,n);let[w,I]=(0,f.useState)(null),{suggestions:k,stale:T}=function(e){let t=(0,i.c)(7),n=function(e){let t,n=(0,i.c)(3),{currentReferences:a}=(0,_.Pk)();e:{let i;if(!e){t=null;break e}if(n[0]!==a||n[1]!==e){let t=e.filter.toLowerCase(),o=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,s=a.map(e=>{let t=j.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!o(e))return null;return{value:j.Q.stringify(t),render:n=>(0,r.jsx)(tm,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...n})}}case"issue":{let e=t.reference.title??"";if(!o(e))return null;return{value:j.Q.stringify(t),render:n=>(0,r.jsx)(td,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"pull-request":{let e=t.reference.title??"";if(!o(e))return null;return{value:j.Q.stringify(t),render:n=>(0,r.jsx)(tu,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"discussion":{let e=t.reference.title??"";if(!o(e))return null;return{value:j.Q.stringify(t),render:n=>(0,r.jsx)(tl,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...n})}}case"file":{let e=t.reference.path;if(!o(e))return null;return{value:j.Q.stringify(t),render:n=>(0,r.jsx)(tc,{type:"folder"===t.reference.type?"folder":"file",path:e,...n})}}}return null}).filter(th),l=te.filter(n=>n.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(n.where,e)).map(tp);if(l.length>0){let e=s.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t,{...e}),(0,r.jsx)(H.l.Divider,{})]})}}i=s.concat(l),n[0]=a,n[1]=e,n[2]=i}else i=n[2];t=i}return t}(e?.category==="categories"?e:null),a=function(e){let t,n=(0,i.c)(4),{availableAgents:a,loading:o,showLimit:s,disabled:l}=(0,K.JE)(null!==e);e:{let i;if(l||!e){t=null;break e}if(o&&!a){t="loading";break e}n[0]!==a||n[1]!==e||n[2]!==s?(i=a?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(tr).concat({value:null,key:`open-link:${K.bn}`,render:e=>(0,r.jsxs)(r.Fragment,{children:[a.length>0&&(0,r.jsx)(H.l.Divider,{}),(0,r.jsx)(ta,{leadingVisual:(0,r.jsx)(d.TelescopeIcon,{}),...e,inactiveText:s?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,n[0]=a,n[1]=e,n[2]=s,n[3]=i):i=n[3],t=i}return t}(e?.category==="agents"?e:null),o=function(e){let{currentReferences:t}=(0,_.Pk)(),n=tf(e),a=e!==n,{repositories:i,loading:o}=(0,tv.U)(n?.filter??"",null!==n),s=(0,f.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:l}=(0,_.Pk)();return{suggestions:(0,f.useMemo)(()=>{if(!n)return null;if("initial"===o)return"loading";let e=void 0!==n.nextCategory,t=i.toSorted(tN(s)).slice(0,5).map(t=>({value:e?null:j.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:n=>(0,r.jsx)(tm,{repository:t,isMultistep:e,stale:!!o||a,...n})}))??[];return l.length>0&&t.push({value:null,key:1===l.length?`open-link:${tj(l[0])}`:"sso-orgs",render:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.l.Divider,{}),(0,r.jsx)(tb,{orgs:l,...e})]})}),t},[i,o,n,s,l,a]),stale:!0===o}}(e?.category==="repositories"?e:null),s=function(e){let t,n,a,o,s,l=(0,i.c)(18),{service:c}=(0,b.b)(),d=tf(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;l[0]!==p||l[1]!==h?(t=["copilot-autocomplete-issues",p,h],l[0]=p,l[1]=h,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(a={enabled:m,queryKey:t,queryFn:n,placeholderData:ty},l[6]=m,l[7]=t,l[8]=n,l[9]=a):a=l[9];let f=(0,eE.I)(a);e:{let e;if(!d){o=null;break e}if(f.isLoading){o="loading";break e}l[10]!==d||l[11]!==u||l[12]!==f.data||l[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:j.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(td,{...t,issue:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=f.data,l[13]=f.isPlaceholderData,l[14]=e):e=l[14],o=e}let g=o;return l[15]!==f.isPlaceholderData||l[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=s):s=l[17],s}(e?.category==="issues"?e:null),l=function(e){let t,n,a,o,s,l=(0,i.c)(18),{service:c}=(0,b.b)(),d=tf(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;l[0]!==p||l[1]!==h?(t=["copilot-autocomplete-pulls",p,h],l[0]=p,l[1]=h,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(a={enabled:m,queryKey:t,queryFn:n,placeholderData:tx},l[6]=m,l[7]=t,l[8]=n,l[9]=a):a=l[9];let f=(0,eE.I)(a);e:{let e;if(!d){o=null;break e}if(f.isLoading){o="loading";break e}l[10]!==d||l[11]!==u||l[12]!==f.data||l[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:j.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(tu,{...t,pullRequest:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=f.data,l[13]=f.isPlaceholderData,l[14]=e):e=l[14],o=e}let g=o;return l[15]!==f.isPlaceholderData||l[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=s):s=l[17],s}(e?.category==="pulls"?e:null),c=function(e){let t,n,a,o,s,l=(0,i.c)(18),{service:c}=(0,b.b)(),d=tf(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;l[0]!==p||l[1]!==h?(t=["copilot-autocomplete-discussions",p,h],l[0]=p,l[1]=h,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(a={enabled:m,queryKey:t,queryFn:n,placeholderData:tg},l[6]=m,l[7]=t,l[8]=n,l[9]=a):a=l[9];let f=(0,eE.I)(a);e:{let e;if(!d){o=null;break e}if(f.isLoading){o="loading";break e}l[10]!==d||l[11]!==f.data||l[12]!==f.isPlaceholderData||l[13]!==u?(e=f.data?.map(e=>({value:j.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(tl,{...t,discussion:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=f.data,l[12]=f.isPlaceholderData,l[13]=u,l[14]=e):e=l[14],o=e}let g=o;return l[15]!==f.isPlaceholderData||l[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=s):s=l[17],s}(e?.category==="discussions"?e:null),u=function(e){let t,n,a,o,s,l,c,d,u,m=(0,i.c)(23),p=(0,b.b)(),h=null!==e,f=e?.repository;m[0]!==f?(t=["copilot-repository",f],m[0]=f,m[1]=t):t=m[1],m[2]!==p||m[3]!==e?.repository?(n=async()=>{if(!e?.repository)return null;let t=await p.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},m[2]=p,m[3]=e?.repository,m[4]=n):n=m[4],m[5]!==h||m[6]!==t||m[7]!==n?(a={enabled:h,queryKey:t,queryFn:n,staleTime:3e5},m[5]=h,m[6]=t,m[7]=n,m[8]=a):a=m[8];let g=(0,eE.I)(a),y=eP(g.data??null);y.data?.directories,m[9]!==y.data?.directories?(s=y.data?.directories??[],m[9]=y.data?.directories,m[10]=s):s=m[10],m[11]!==s?(l=new Set(s),m[11]=s,m[12]=l):l=m[12],o=l,m[13]!==y.data?(c=y.data?(y.data.paths??[]).concat(y.data.directories??[]):null,m[13]=y.data,m[14]=c):c=m[14];let x=eR(c,e?.filter??"");e:{let t;if(!e){d=null;break e}if(g.isLoading||y.isLoading||x.isLoading){d="loading";break e}m[15]!==o||m[16]!==x.data||m[17]!==x.isPlaceholderData||m[18]!==e?(t=[...x.data?.slice(0,5).map(t=>({value:j.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,r.jsx)(tc,{...e,path:t,type:o.has(t)?"folder":"file",stale:x.isPlaceholderData})}))??[]],m[15]=o,m[16]=x.data,m[17]=x.isPlaceholderData,m[18]=e,m[19]=t):t=m[19];let n=t;d=n.length>0?n:null}let v=d;return m[20]!==g.isPlaceholderData||m[21]!==v?(u={suggestions:v,stale:g.isPlaceholderData},m[20]=g.isPlaceholderData,m[21]=v,m[22]=u):u=m[22],u}(e?.category==="files"?e:null),m=function(e){let t,n=(0,i.c)(5),{ssoOrganizations:a}=(0,_.Pk)();e:{let r;if(!e){t=null;break e}if(n[0]!==e||n[1]!==a){let t;n[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),n[3]=e,n[4]=t):t=n[4],r=a.filter(t).slice(0,10).map(tC),n[0]=e,n[1]=a,n[2]=r}else r=n[2];t=r}return t}(e?.category==="sso-orgs"?e:null);switch(e?.category){case void 0:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[0]=e):e=t[0],e}case"categories":{let e;return t[1]!==n?(e={suggestions:n,stale:!1},t[1]=n,t[2]=e):e=t[2],e}case"repositories":return o;case"issues":return s;case"agents":{let e;return t[3]!==a?(e={suggestions:a,stale:!1},t[3]=a,t[4]=e):e=t[4],e}case"discussions":return c;case"pulls":return l;case"files":return u;case"sso-orgs":{let e;return t[5]!==m?(e={suggestions:m,stale:!1},t[5]=m,t[6]=e):e=t[6],e}}}(w);if(g[2]!==v||g[3]!==w?(a={query:w,onShowAgentsDialog:v},g[2]=v,g[3]=w,g[4]=a):a=g[4],!function(e){let t,n,a=(0,i.c)(12),{query:r,onShowAgentsDialog:o}=e,s=r?.category==="agents",{availableAgents:l,loading:c,disabled:d}=(0,K.JE)(s);a[0]!==s||a[1]!==l?.length||a[2]!==d||a[3]!==c||a[4]!==o?(t=()=>{s&&!c&&(d?o("agents-not-supported"):l?.length||o("no-agents-available"))},a[0]=s,a[1]=l?.length,a[2]=d,a[3]=c,a[4]=o,a[5]=t):t=a[5],a[6]!==s||a[7]!==l||a[8]!==d||a[9]!==c||a[10]!==o?(n=[s,c,l,d,o],a[6]=s,a[7]=l,a[8]=d,a[9]=c,a[10]=o,a[11]=n):n=a[11],(0,f.useEffect)(t,n)}(a),!N){let e;return g[5]!==y?(e=(0,r.jsx)("div",{children:y}),g[5]=y,g[6]=e):e=g[6],e}g[7]!==C||g[8]!==x||g[9]!==w?(s=e=>{let{suggestion:t}=e,n="string"==typeof t?t:t.value;(0,o.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:C,suggestion:n});let a=null!==n&&w?.category!=="agents"?j.Q.parse(n):void 0;if(a&&x(a),"object"!=typeof t||null!==t.value)return;let r=/^open-link:(.+)$/.exec(t.key);if(r){I(null),window.open(r[1],"_blank");return}switch(w?.category){case"categories":tt.is(t.key)&&I(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?I({category:"sso-orgs",filter:""}):w.nextCategory&&I({category:w.nextCategory,filter:"",repository:t.key})}},g[7]=C,g[8]=x,g[9]=w,g[10]=s):s=g[10];let E=s;g[11]===Symbol.for("react.memo_cache_sentinel")?(l=e=>I(t=>t?{...t,filter:e.query}:{category:"categories",filter:e.query,index:(e.target.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)}),g[11]=l):l=g[11];let A=l;g[12]===Symbol.for("react.memo_cache_sentinel")?(c=()=>I(null),g[12]=c):c=g[12];let R=c;return g[13]!==w?(u=w&&function(e){switch(e.category){case"categories":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${e9[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return e9[e.category];case"discussions":case"issues":case"pulls":case"files":return`${e9[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(w)||void 0,g[13]=w,g[14]=u):u=g[14],g[15]!==y||g[16]!==E||g[17]!==k||g[18]!==u?(m=(0,r.jsx)(e8.a,{fullWidth:!0,suggestions:k,triggers:tS,tabInsertsSuggestions:!1,onHideSuggestions:R,onShowSuggestions:A,onSelectSuggestion:E,suggestionsPlacement:"above",title:u,asMenu:!0,children:y}),g[15]=y,g[16]=E,g[17]=k,g[18]=u,g[19]=m):m=g[19],g[20]!==T?(p=T&&(0,r.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),g[20]=T,g[21]=p):p=g[21],g[22]!==m||g[23]!==p?(h=(0,r.jsxs)(r.Fragment,{children:[m,p]}),g[22]=m,g[23]=p,g[24]=h):h=g[24],h}function tI(){return"undefined"!=typeof document}try{tw.displayName||(tw.displayName="ChatInputAutocomplete")}catch{}let tk={container:"ChatInput-module__container--NFzCy",input:"ChatInput-module__input--iApWs",clicked:"ChatInput-module__clicked--hHA9l",attachments:"ChatInput-module__attachments--a9G6d",inputContainer:"ChatInput-module__inputContainer--BcExV",inputPreview:"ChatInput-module__inputPreview--f_0H3",toolbar:"ChatInput-module__toolbar--ZtCiG",toolbarLeft:"ChatInput-module__toolbarLeft--cjV2H",toolbarRight:"ChatInput-module__toolbarRight--PiQJn",containerSmall:"ChatInput-module__containerSmall--PJkO5",submitSpinner:"ChatInput-module__submitSpinner--Y2WAX"};var tT=n(13897),tE=n(10370);let tA=(0,f.forwardRef)(function(e,t){let n,a,o,l,c,d=(0,i.c)(14),{text:u}=e;d[0]!==u?(n=(0,tT._)(u),d[0]=u,d[1]=n):n=d[1];let{availableAgents:m}=(0,K.JE)(n);d[2]!==m?(a=void 0===m?[]:m,d[2]=m,d[3]=a):a=d[3];let p=a,{currentReferences:h}=(0,_.Pk)(),g=(0,b.b)(),y=(0,x.l)().use(C.U,{references:h,agents:p}).parse(u),v=(0,tT.O)(y),j=(0,f.useRef)(v);d[4]!==h||d[5]!==g||d[6]!==v?(o=function(){for(let e of j.current)if(!v.has(e)){let t=h.find(t=>(0,S.Vb)(t)===e);t&&g.removeReference(t)}j.current=v},d[4]=h,d[5]=g,d[6]=v,d[7]=o):o=d[7],(0,f.useEffect)(o),d[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,s.G)("copilot-chat-input-textarea-preview"),d[8]=l):l=d[8];let N=y.children.map(tR);return d[9]!==t||d[10]!==N||d[11]!==l||d[12]!==tk.inputPreview?(c=(0,r.jsx)("div",{id:"copilot-chat-textarea-preview",...l,"aria-hidden":!0,className:tk.inputPreview,ref:t,role:"presentation",children:N}),d[9]=t,d[10]=N,d[11]=l,d[12]=tk.inputPreview,d[13]=c):c=d[13],c});try{tA.displayName||(tA.displayName="ChatInputPreview")}catch{}function tR(e,t){switch(e.type){case"text":return e.value;case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,r.jsx)("span",{className:tE.A.mention,...(0,s.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,r.jsx)("span",{className:tE.A.mention,children:e.value},t)}}var tL=n(69676),tP=n(82678),tD=n(5878),tO=n(33900);let tM={container:"ChatInputReferences-module__container--kZx3r",attachmentsList:"ChatInputReferences-module__attachmentsList--c0Z3e",scrolledToEnd:"ChatInputReferences-module__scrolledToEnd--qEVr3",loading:"ChatInputReferences-module__loading--G1S4m",divider:"ChatInputReferences-module__divider--m7eF_",menuButton:"ChatInputReferences-module__menuButton--R82CM",functionLoading:"ChatInputReferences-module__functionLoading--_Tp1T",convertToFileButton:"ChatInputReferences-module__convertToFileButton--JUfME",hoveringDismissConvertToFile:"ChatInputReferences-module__hoveringDismissConvertToFile--BVZ5r",convertToFileButtonContent:"ChatInputReferences-module__convertToFileButtonContent--pQ4zi"};var tB=n(53655);let tF=(0,f.memo)(e=>{let t,n,a,o,l,c,u,g,y,x,v,j,C,N,w,I,k,T=(0,i.c)(45),{className:E,isLoading:R,returnFocusRef:L,tokenSize:P,onSelectReference:D,getReferenceVersion:O,showConvertToFileText:M,onConvertToFile:B,onConvertToFileDismiss:F}=e,$=void 0===P?"medium":P,{currentReferences:U}=(0,_.Pk)(),V=(0,b.b)(),z=(0,f.useRef)(null),W=(0,tD.g)(z),[G,K]=(0,f.useState)(!1);T[0]!==U?(n=(0,S.rT)(U),T[0]=U,T[1]=n):n=T[1],t=n;let Q=(0,f.useRef)(null);T[2]===Symbol.for("react.memo_cache_sentinel")?(a={containerRef:Q,focusableElementFilter:tU,bindKeys:tL.z0.ArrowHorizontal|tL.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},T[2]=a):a=T[2],T[3]!==t?(o=[t],T[3]=t,T[4]=o):o=T[4],(0,tP.G)(a,o),T[5]===Symbol.for("react.memo_cache_sentinel")?(l=[],T[5]=l):l=T[5];let J=(0,f.useRef)(l),Y=(e,t)=>{let n=J.current[t+1]??J.current[t-1]??L.current;n?.focus(),V.removeReference(e)};T[6]!==V||T[7]!==L?(c=()=>{setTimeout(()=>L.current?.focus()),V.clearCurrentReferences()},T[6]=V,T[7]=L,T[8]=c):c=T[8];let Z=c,X=(0,f.useRef)(t);T[9]!==t?(u=()=>{if(X.current.length<t.length){let e=t.find(e=>!X.current.find(t=>(0,S.x_)(t,e))),n=e?t.indexOf(e):-1;J?.current?.[n]?.scrollIntoView({behavior:"smooth",inline:"end"})}X.current=t},g=[t],T[9]=t,T[10]=u,T[11]=g):(u=T[10],g=T[11]),(0,A.N)(u,g),T[12]!==F?(y=()=>{K(!1),F?.()},T[12]=F,T[13]=y):y=T[13];let ee=y,et=(0,f.useId)();T[14]!==ee||T[15]!==M?(x=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),M&&ee())},T[14]=ee,T[15]=M,T[16]=x):x=T[16];let en=x;if(0===t.length&&!R&&!M)return null;T[17]!==E?(v=(0,h.$)(E,tM.container),T[17]=E,T[18]=v):v=T[18];let ea=W&&tM.scrolledToEnd,er=R&&tM.loading;T[19]!==ea||T[20]!==er?(j=(0,h.$)(tM.attachmentsList,ea,er),T[19]=ea,T[20]=er,T[21]=j):j=T[21],T[22]!==et||T[23]!==ee||T[24]!==G||T[25]!==B||T[26]!==en||T[27]!==M||T[28]!==$?(C=M&&(0,r.jsx)(m.Q,{onClick:B,leadingVisual:d.FileIcon,className:(0,h.$)(tM.convertToFileButton,G&&tM.hoveringDismissConvertToFile),"aria-describedby":et,onKeyDown:en,children:(0,r.jsxs)("div",{className:tM.convertToFileButtonContent,children:["Convert to file",(0,r.jsx)(tB.lh,{size:$,onRemove:ee,descriptionId:et,onMouseOver:()=>K(!0),onMouseLeave:()=>K(!1)})]})}),T[22]=et,T[23]=ee,T[24]=G,T[25]=B,T[26]=en,T[27]=M,T[28]=$,T[29]=C):C=T[29];let ei=t.map((e,t)=>"repository"===e.type?(0,r.jsx)(t$,{reference:e,ref:e=>{J.current[t]=e},"data-index":t,size:$,onRemove:()=>Y(e,t),onClick:D,getReferenceVersion:O},(0,S.Vb)(e)):(0,r.jsx)(tB.BR,{reference:e,ref:e=>{J.current[t]=e},"data-index":t,size:$,onRemove:()=>Y(e,t),onClick:D,getReferenceVersion:O},(0,S.Vb)(e)));return T[30]!==R?(N=R&&(0,r.jsxs)("div",{className:tM.functionLoading,...(0,s.G)("loading-indicator"),children:[(0,r.jsx)(p.A,{size:"small"}),"Retrieving\u2026"]}),T[30]=R,T[31]=N):N=T[31],T[32]!==j||T[33]!==C||T[34]!==ei||T[35]!==N?(w=(0,r.jsxs)("div",{className:j,ref:z,children:[C,ei,N]}),T[32]=j,T[33]=C,T[34]=ei,T[35]=N,T[36]=w):w=T[36],T[37]!==Z||T[38]!==t.length||T[39]!==$?(I=t.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:tM.divider}),(0,r.jsxs)(q.W,{children:[(0,r.jsx)(q.W.Anchor,{children:(0,r.jsx)(es.K,{icon:d.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:tM.menuButton,size:$})}),(0,r.jsx)(q.W.Overlay,{width:"small",children:(0,r.jsx)(H.l,{children:(0,r.jsxs)(H.l.Item,{onSelect:Z,children:[(0,r.jsx)(H.l.LeadingVisual,{children:(0,r.jsx)(d.TrashIcon,{})}),"Remove attachments"]})})})]})]}),T[37]=Z,T[38]=t.length,T[39]=$,T[40]=I):I=T[40],T[41]!==v||T[42]!==w||T[43]!==I?(k=(0,r.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:v,ref:Q,children:[w,I]}),T[41]=v,T[42]=w,T[43]=I,T[44]=k):k=T[44],k});tF.displayName="ChatInputReferences";let t$=(0,f.forwardRef)(function(e,t){let n,a,o,s=(0,i.c)(8),l=e.reference,c=(0,_.pn)(tV),d=`${l.ownerLogin}/${l.name}`,[u,m]=(0,tO.vn)(d),p=(0,f.useRef)(!1),h=u.code===tO.W5.Unindexed||u.docs===tO.W5.Unindexed;return s[0]!==c||s[1]!==h||s[2]!==m?(n=function(){!p.current&&h&&c&&(p.current=!0,m())},a=[c,h,m],s[0]=c,s[1]=h,s[2]=m,s[3]=n,s[4]=a):(n=s[3],a=s[4]),(0,f.useEffect)(n,a),s[5]!==e||s[6]!==t?(o=(0,r.jsx)(tB.BR,{ref:t,...e}),s[5]=e,s[6]=t,s[7]=o):o=s[7],o});try{t$.displayName||(t$.displayName="RepoReferenceToken")}catch{}try{t$.displayName||(t$.displayName="RepoReferenceToken")}catch{}function tU(e){return!e.hasAttribute("aria-hidden")}function tV(e){return e.model&&!e.model.hasLimitedCapabilities}var tz=n(73451),tW=n(9591);let tH={overlayContent:"ConfigureMcpServersMenu-module__overlayContent--iB89J",dialogForm:"ConfigureMcpServersMenu-module__dialogForm--axjnZ",addMcpButton:"ConfigureMcpServersMenu-module__addMcpButton--eYaiz",underline:"ConfigureMcpServersMenu-module__underline--Ii6ZO",inputError:"ConfigureMcpServersMenu-module__inputError--xZK7_",formField:"ConfigureMcpServersMenu-module__formField--nch6o",hiddenSubmitButton:"ConfigureMcpServersMenu-module__hiddenSubmitButton--rguJJ"},tq=(0,r.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),tG=({panel:e,onPanelChange:t})=>{let[n,a]=(0,f.useState)(!1),i="add-mcp"===e||n,o=(0,f.useRef)(null),[s,l]=(0,f.useState)(""),[c,u]=(0,f.useState)(""),[p,h]=(0,f.useState)(null),g=(0,f.useCallback)(()=>{a(!1),l(""),u(""),h(null),t(null)},[t]),x=(0,f.useCallback)(()=>{n||(t(null),a(!1),l(""),u(""),h(null))},[t,n]),v=()=>""!==c.trim(),_=async e=>{if(e&&e.preventDefault(),!v()){c.trim()||h("MCP server URL is required");return}try{if(h(null),!function(e){try{let t=new URL(e.trim(),window.location.origin);return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)}catch{return!1}}(c))return void h("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",c.trim()),e.append("name",s.trim());let t=await (0,y.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let n=await t.text();try{let t=JSON.parse(n);"unsupported_server_type"===t.error?e=(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",tq,"."]}):t.message&&(e=t.message)}catch{e=n.includes("well-known/oauth-authorization-server")?(0,r.jsxs)(r.Fragment,{children:["This server does not conform to the ",tq,"."]}):n||e}}catch{e="Failed to add MCP server"}h(e);return}let n=(await t.json()).redirect_url;n&&"string"==typeof n?(g(),window.location.assign(n)):g()}catch(e){e instanceof Error?h(e.message):h("An unknown error occurred")}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eu.T,{open:i,side:"outside-top",align:"start",onOpen:()=>t("add-mcp"),onClose:x,renderAnchor:e=>(0,r.jsx)(m.Q,{...e,leadingVisual:d.ToolsIcon,variant:"invisible","aria-label":"MCPs",children:"MCPs"}),children:(0,r.jsx)("div",{className:tH.overlayContent,children:"add-mcp"===e&&!n&&(0,r.jsx)(m.Q,{variant:"invisible",leadingVisual:d.PlusIcon,ref:o,onClick:e=>{e.stopPropagation(),a(!0)},className:tH.addMcpButton,children:"Add MCP"})})}),n&&(0,r.jsx)(en.l,{title:"Add remote MCP",onClose:g,footerButtons:[{buttonType:"default",content:"Cancel",onClick:g},{buttonType:"primary",content:(0,r.jsxs)(r.Fragment,{children:["Connect to MCP",(0,r.jsx)("span",{style:{marginLeft:8},children:(0,r.jsx)(d.LinkExternalIcon,{size:16})})]}),onClick:()=>{_()}}],returnFocusRef:o,children:(0,r.jsxs)("form",{className:tH.dialogForm,onSubmit:_,autoComplete:"on",children:[(0,r.jsxs)(tz.A,{className:tH.formField,children:[(0,r.jsx)(tz.A.Label,{children:"Name"}),(0,r.jsx)(tW.A,{name:"mcp-server-name",type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Enter a name for this MCP",autoComplete:"on",block:!0})]}),(0,r.jsxs)(tz.A,{required:!0,className:tH.formField,children:[(0,r.jsx)(tz.A.Label,{children:"MCP server URL"}),(0,r.jsx)(tW.A,{name:"mcp-url",type:"url",value:c,onChange:e=>{u(e.target.value),h(null)},placeholder:"https://mcp.example.com/sse",className:p?tH.inputError:void 0,autoComplete:"on",block:!0}),p&&(0,r.jsx)(tz.A.Validation,{variant:"error",children:p})]}),(0,r.jsx)("button",{type:"submit",className:tH.hiddenSubmitButton,tabIndex:-1,children:"Submit"}),(0,r.jsxs)("p",{children:["MCP data will be processed by models coming from third-party providers. Always review the permissions required by the MCP and only connect to MCPs you know and trust. You can revoke access for the MCP at any time in"," ",(0,r.jsx)("a",{href:"/settings",className:tH.underline,children:"your settings"}),"."]})]})})]})};try{tq.displayName||(tq.displayName="MCP_SPEC_LINK")}catch{}try{tG.displayName||(tG.displayName="ConfigureMcpServersMenu")}catch{}var tK=n(66912),tQ=n(31637);let tJ=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],tY=e=>{let t=(0,_.Pk)(),n=(0,b.b)(),a=n.maxMessagesReached(),[d,m]=(0,f.useState)(null),p="loading"===t.slashCommandLoading.state,{safeSetTimeout:L}=(0,u.A)(),{isLicensedLimited:P}=(0,tQ.xR)(),{onSelectReference:W}=e,H=(0,f.useRef)(null),q=(0,f.useRef)(""),G=(0,f.useRef)(!1),K=(0,f.useCallback)((e=!1)=>{H.current=null,q.current="",G.current=!1,d&&(m(null),e&&(0,o.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:t.mode}))},[d,t.mode]),{typingHasStarted:Q,textAreaRef:J,textareaPreviewRef:Y,textAreaPreviewContainerRef:Z,text:X,setText:ee,handleSubmit:et,handleSubmitToNewThread:en,handleScroll:ea,handleChange:er,handleStop:ei,handleFocus:eo}=function(e){let t=(0,_.Pk)(),n=(0,b.b)(),{selectedThreadID:a,mode:r,autoSubmit:i,model:s}=t,{clearPastedFile:l,isLoading:c,onSubmit:d}=e,u=R.J.getSavedMessage(a),m=R.J.getSavedUserMessageOnError(a),{pathname:p}=(0,E.zy)(),[h,g]=(0,E.ok)(),[y,x]=(0,f.useState)(()=>M(t.mode,p,h)??m??u??""),[v,j]=(0,f.useState)(!1),C=(0,f.useRef)(null),N=e.textAreaRef||C,S=(0,f.useRef)(null),w=(0,f.useRef)(null),I=(0,f.useRef)(0),k=(0,f.useRef)(null),T=(0,f.useRef)(()=>{}),L=(0,f.useRef)(!1),P=(0,O.GF)(t.availableModels),B=(0,f.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await n.fetchKnowledgeBases()},[n,t.renderAttachKnowledgeBaseHerePopover]);(0,f.useEffect)(()=>{B()},[B]),(0,f.useEffect)(()=>{R.J.setSavedMessage(a,y)},[a,y]),(0,A.N)(()=>{let e=0;!function t(){if(!N.current||!w.current||!S.current)return;e++,0===N.current.scrollHeight&&e<10&&setTimeout(t,1),N.current.style.height="0";let n=N.current.scrollHeight,a=Math.min(n,300);S.current.style.height=`${n}px`,N.current.style.height=`${n}px`,w.current.style.height=`${a}px`}()},[y,N,S]);let F=(0,f.useCallback)(()=>{N?.current&&S?.current&&w?.current&&(S.current.scrollTop=N.current.scrollTop,S.current.scrollLeft=N.current.scrollLeft)},[N]),$=(0,f.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),U=(0,f.useCallback)(async e=>{if(j(!1),R.J.clearSavedUserMessage(a),R.J.clearSavedUserMessageOnError(a),t.defaultRecipient&&!y.includes(`@${t.defaultRecipient}`)&&n.clearDefaultRecipient(),e?.preventDefault(),"assistive"===t.mode&&await D(y,t,n)){(0,o.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:y}),"/new"===y.trim()&&R.J.setSavedMessageFast(a,null),x("");return}if(!c){let e=y;if(!e){let[t,a]=n.tryInferMessage($);if(!t||!a)return;e=a}x(""),await d?.(e)}},[c,n,d,a,$,t,y]),V=(0,f.useCallback)(()=>n.sendMessageToNewThread(a,y,$,t.context,P),[n,a,t.context,$,y,P]);(0,f.useEffect)(()=>{(async()=>{let e=M(r,p,h),t=new URLSearchParams(h),n=t.get("model"),a=!n||n===s.id;e&&a&&!L.current&&(t.delete("prompt"),t.delete("model"),(0,o.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),g(t,{replace:!0}),i&&(L.current=!0,await Promise.resolve(),await U()))})()},[p,h,g,r,i,s,U]);let z=(0,f.useCallback)(e=>{j(!0),N?.current&&(x(e.target.value),l?.(),I.current=0,F())},[F,l,N]),W=(0,f.useCallback)(async()=>{await n.stopStreaming(),null!=a&&(n.startThreadReload(),await new Promise(e=>{k.current=setTimeout(()=>e(a),6e3)}),T.current=await n.fetchMessages(a,!0,!0))},[n,a]);return(0,f.useEffect)(()=>{T.current&&(T.current(),T.current=()=>{})},[t.messages]),(0,f.useEffect)(()=>()=>{k.current&&(clearTimeout(k.current),k.current=null),n.cancelThreadReload(),T.current=()=>{}},[n]),{typingHasStarted:v,textAreaRef:N,textareaPreviewRef:S,textAreaPreviewContainerRef:w,text:y,setText:x,handleSubmit:U,handleSubmitToNewThread:V,handleScroll:F,handleChange:z,handleStop:W,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)}}}({isLoading:t.isWaitingOnCopilot||t.isWaitingOnAttachment||p,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:K}),es=(0,c.H)({inputRef:J,fallbackEventHandler:er}),{replaceUrlWithReferenceMention:el}=function(e){let t,n,a,r,o,s,l,c,d,u,m,p,h,f=(0,i.c)(37),{figmaAuthUrl:y,textAreaRef:x,emitChange:v}=e,C=(0,b.b)(),{currentReferences:N}=(0,_.Pk)();f[0]!==v||f[1]!==x?(t=(e,t,n)=>{if(!x.current||e===t)return;let a=n?.[0]??0,r=x.current.value.slice(a,n?.[1]),i=r.indexOf(e);for(;i>-1;){let n=i+e.length;v(t,[i+a,n+a]),i=(r=r.replace(e,t)).indexOf(e)}},f[0]=v,f[1]=x,f[2]=t):t=f[2];let E=t;f[3]!==C?(n=e=>{let{itemUrl:t}=e,n=(0,S.Vc)(t);return C.addReference(n,"url-attacher"),C.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),n},f[3]=C,f[4]=n):n=f[4],f[5]!==E||f[6]!==C?(a=(e,t,n)=>{let{parsedReferenceMention:a}=t;C.replaceReference(n,e);let r=j.Q.for(e);if(!r)return;let i=j.Q.stringify(a),o=j.Q.stringify(r);i!==o&&E(i,o)},r=(e,t,n)=>{let{itemUrl:a,parsedReferenceMention:r}=t;C.removeReference(n),E(j.Q.stringify(r),a)},f[5]=E,f[6]=C,f[7]=a,f[8]=r):(a=f[7],r=f[8]),f[9]!==C?(o=()=>{C.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},f[9]=C,f[10]=o):o=f[10],f[11]!==n||f[12]!==a||f[13]!==r||f[14]!==o?(s={mutationFn:T,onMutate:n,onSuccess:a,onError:r,onSettled:o},f[11]=n,f[12]=a,f[13]=r,f[14]=o,f[15]=s):s=f[15];let A=(0,g.n)(s);f[16]!==C?(l=e=>{let t=(0,S.Vc)(e);return C.addReference(t,"figma-attacher"),C.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),t},c=(e,t,n)=>{C.replaceReference(n,e)},f[16]=C,f[17]=l,f[18]=c):(l=f[17],c=f[18]),f[19]!==y||f[20]!==C?(d=(e,t,n)=>{n&&y&&e instanceof I?C.replaceReference(n,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:y,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):C.removeReference(n)},f[19]=y,f[20]=C,f[21]=d):d=f[21],f[22]!==C?(u=()=>{C.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},f[22]=C,f[23]=u):u=f[23],f[24]!==u||f[25]!==l||f[26]!==c||f[27]!==d?(m={mutationFn:k,onMutate:l,onSuccess:c,onError:d,onSettled:u},f[24]=u,f[25]=l,f[26]=c,f[27]=d,f[28]=m):m=f[28];let R=(0,g.n)(m);f[29]!==N||f[30]!==R||f[31]!==E||f[32]!==A||f[33]!==x?(p=e=>{let t=x.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let n=j.Q.fromUrl(t);n&&(N.every(e=>!j.Q.refersTo(n,e))&&A.mutate({itemUrl:t,parsedReferenceMention:n}),E(t,j.Q.stringify(n),e));let a=w.exec(t);return a&&(R.mutate(t),E(t,a[1],e)),t},f[29]=N,f[30]=R,f[31]=E,f[32]=A,f[33]=x,f[34]=p):p=f[34];let L=p;return f[35]!==L?(h={replaceUrlWithReferenceMention:L},f[35]=L,f[36]=h):h=f[36],h}({figmaAuthUrl:e.figmaAuthUrl,textAreaRef:J,emitChange:es}),{isLoading:ec,addReferenceForMention:ed,addReferencesForMentions:eu}=function(){let e=(0,b.b)(),{currentReferences:t,mode:n}=(0,_.Pk)(),a=(0,g.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,N(e.type),e.id??""],a=await (0,y.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!a.ok)throw Error(`Failed to fetch reference data (${a.status}: ${a.statusText})`);return(0,o.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:n,linkType:e.type}),await a.json()},onSuccess:t=>e.addReference(t,"chatInput")}),r=e=>{t.every(t=>!j.Q.refersTo(e,t))&&a.mutate(e)};return{isLoading:a.isPending,addReferenceForMention:r,addReferencesForMentions:e=>{let n=(0,x.l)().use(C.U,{references:t,agents:[]}).parse(e),a=0;(0,v.YR)(n,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&a<20&&(a++,r(e.data.referenceMention))})}}}(),em=(0,z.FQ)(),ep=e?.customCopilotId&&em,eh=p||ec||t.isWaitingOnAttachment||!!e.submitDisabled,ef=0===X.length,eg=(0,f.useCallback)(()=>{(0,o.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:t.mode}),ei()},[ei,t.mode]),ey=(0,f.useCallback)(async()=>{eh||((0,o.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:t.mode}),ep&&await n.selectPendingThread(e?.customCopilotId),d&&K(!1),et())},[eh,t.mode,ep,d,et,n,e?.customCopilotId,K]),ex=(0,f.useCallback)(async()=>{eh||(ep&&await n.selectPendingThread(e?.customCopilotId),en())},[en,eh,n,ep,e?.customCopilotId]),ev=(0,f.useCallback)(()=>{let e=t.messages.findLast(e=>"user"===e.role)?.id;e&&n.startEditingMessage(e)},[n,t.messages]),e_=t.isWaitingOnCopilot?`Copilot is responding\u{2026}`:t.defaultRecipient?void 0:a?"Message limit reached. To continue chatting with Copilot, start a new conversation.":e.placeholder?e.placeholder:"How can I help you?";t.defaultRecipient&&""===X&&!Q&&ee(`@${t.defaultRecipient} `);let eb=(0,f.useRef)(null),[ej,eC]=(0,f.useState)(null),eN=(0,f.useCallback)(()=>{(0,o.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:t.mode}),eC(e=>"attachment-types"===e?null:"attachment-types")},[t.mode]),eS=(0,f.useRef)(null),[ew,eI]=(0,f.useState)(null),ek=(0,f.useCallback)(()=>{(0,o.BI)("dotcom_chat.activate",{mode:t.mode}),eI("add-mcp")},[t.mode]),eT=(0,f.useCallback)(()=>{(0,o.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:t.mode}),n.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!t.skillOptions?.deepCodeSearch})},[n,t.mode,t.skillOptions?.deepCodeSearch]),{model:eE}=(0,_.bP)("model"),eA=F.W.attachImagesImmersive&&"immersive"===t.mode&&!!eE.capabilities.supports.vision||!1,eR=(0,f.useCallback)(async(a,r,i,o)=>{let s=new $.s(t,n),l=new V.E(n,e.existingFileNames),c=[];[...a].some(e=>e.type.startsWith("image/"))&&!eE.capabilities.supports.vision&&(n.addAmbientError(`The ${eE.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,U.d)("vision_not_supported_for_model",{modelId:eE.id,uploadType:r}));let[d,u]=$.s.getAllowedFiles([...a],eE);if(eA){let t=await s.addImageAttachments(d,r,e.customCopilotId,ep);t&&c.push(...t)}let m=[];for(let e of u)if(F.W.pasteTextFiles&&await V.E.isAttachable(e)){let t=await l.addAttachment(e,i,o);t&&c.push(t)}else m.push(e.type);return eA&&m.length>0&&(0,U.d)("included_unsupported_file",{fileTypes:m.join(","),uploadType:r}),c},[eA,eE,t,n,e.existingFileNames,e.customCopilotId,ep]),eL=(0,f.useCallback)(async()=>{if(!d)return;let e=[d],n=await eR(e,"paste",H.current||void 0,q.current);if(n.length>0&&n[0]?.type==="thread-scoped-file"){let e=await d.text();ee(X.replaceAll(e,`@${n[0].name}`)),K(!1),(0,o.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:t.mode})}},[d,eR,t.mode,X,ee,K]),eP=(0,f.useCallback)(()=>{K(!0)},[K]);(0,f.useEffect)(()=>{!d||t.isWaitingOnAttachment||G.current||(G.current=!0,(0,o.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:t.mode}))},[d,t.isWaitingOnAttachment,t.mode]);let eD=(0,f.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer?.files;t&&eR(t,"drag")},[eR]),eO=eA&&F.W.wholeAreaDragDrop;(0,f.useEffect)(()=>{if(eO&&!e.customCopilotId)return;let t=J?.current;if(!t)return;let n=e=>e.preventDefault();return t.addEventListener("dragover",n),t.addEventListener("drop",eD),()=>{t.removeEventListener("dragover",n),t.removeEventListener("drop",eD)}},[J,eO,eD,e.customCopilotId]);let eM=e.isStreaming||t.isWaitingOnCopilot;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.tL,{commands:(0,f.useMemo)(()=>({"github:cancel":eM?eg:void 0,"copilot-chat:send-message":ey,"copilot-chat:send-message-new-conversation":ex,"copilot-chat:add-attachment":eN,"copilot-chat:add-attachment-mcp":ek,"copilot-chat:edit-last-message":ef?ev:void 0,"copilot-chat:deep-codesearch":eT}),[eN,ek,ev,ey,ex,eT,eg,eM,ef]),children:(0,r.jsxs)("form",{className:(0,h.$)(tk.container,{[tk.containerSmall]:"small"===e.size}),children:[(0,r.jsx)(tF,{className:tk.attachments,returnFocusRef:eb,tokenSize:"small"===e.size?"small":"medium",isLoading:ec,onSelectReference:W,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:!!d&&!t.isWaitingOnAttachment,onConvertToFile:eL,onConvertToFileDismiss:eP}),(0,r.jsxs)(l.tL.LimitKeybindingScope,{commandIds:tJ,className:tk.inputContainer,ref:Z,children:[(0,r.jsx)(tw,{onSelectReference:ed,onShowAgentsDialog:eC,children:(0,r.jsx)("textarea",{autoFocus:!0,id:B.wg,className:tk.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",onPaste:t=>{let a=t.clipboardData;if(a?.items){let r=[];for(let t=0;t<a.items.length;t++){let i=a.items[t];if(i){if("file"===i.kind){let e=i.getAsFile();e&&r.push(e)}else if("string"===i.kind&&["text","text/plain"].includes(i.type)){let t=a.getData(i.type);if(F.W.pasteTextFiles&&t.length>1e3&&t.length<=V.E.getAttachmentSizeLimit())L(()=>{G.current=!1;let a=new File([t],"",{type:V.x}),r=new V.E(n,e.existingFileNames);m(a),H.current=r.generateFileName(t,a.type).then(e=>q.current=e)},1);else{eu(t);let e=J.current?.selectionStart??0;setTimeout(()=>el([e,e+t.length]));return}}}}r.length>0&&(t.preventDefault(),eR(r,"paste"))}},ref:J,onScroll:ea,onChange:er,onFocus:eo,placeholder:e_,value:X,"data-react-autofocus":!0,disabled:a||e.disabled,...(0,s.G)("copilot-chat-input-textarea")})}),(0,r.jsx)(tA,{text:X,ref:Y})]}),(0,r.jsx)(tZ,{addAttachment:eN,addMcpServer:ek,attachmentButtonRef:eb,mcpButtonRef:eS,deepCodeSearch:t.skillOptions?.deepCodeSearch,hideAttachmentButton:!!e.hideAttachmentButton,stoppable:eM,submitDisabled:eh,submitInProgress:e.submitInProgress,onNewThreadSelected:e.onNewThreadSelected,showModelPicker:e.showModelPicker,isLicensedLimited:P,configureMcpServersMenuPanel:ew,setConfigureMcpServersMenuPanel:eI,mode:t.mode,extraToolbarLeft:e.extraToolbarLeft,isCopilotSpacePath:em,submitButtonLabel:e.submitButtonLabel})]})}),(0,r.jsx)(e7,{inputRef:J,inputOnChange:er,anchorRef:eb,panel:ej,onPanelChange:eC})]})},tZ=(0,f.memo)(e=>{let t,n,a,o,s,c,u,f,g=(0,i.c)(32),{addAttachment:y,attachmentButtonRef:x,mcpButtonRef:v,deepCodeSearch:_,hideAttachmentButton:b,stoppable:j,submitDisabled:C,submitInProgress:N,onNewThreadSelected:S,showModelPicker:w,isLicensedLimited:I,configureMcpServersMenuPanel:k,setConfigureMcpServersMenuPanel:T,mode:E,extraToolbarLeft:A,isCopilotSpacePath:R,submitButtonLabel:L}=e;return g[0]!==_?(t=F.W.showDeepCodeSearchButton&&(0,r.jsx)(l.N5,{commandId:"copilot-chat:deep-codesearch",icon:d.RocketIcon,variant:"invisible",tooltipDirection:"n",className:(0,h.$)({[tk.clicked]:_})}),g[0]=_,g[1]=t):t=g[1],g[2]!==y||g[3]!==x||g[4]!==b?(n=!b&&(0,r.jsx)(m.Q,{ref:x,leadingVisual:d.PaperclipIcon,variant:"invisible",onClick:y,"data-testid":"attachment-menu-button",children:"Attach"}),g[2]=y,g[3]=x,g[4]=b,g[5]=n):n=g[5],g[6]!==k||g[7]!==R||g[8]!==v||g[9]!==E||g[10]!==T?(a=W(F.W.copilotMcp,E,R)&&(0,r.jsx)(tG,{anchorRef:v,panel:k,onPanelChange:T}),g[6]=k,g[7]=R,g[8]=v,g[9]=E,g[10]=T,g[11]=a):a=g[11],g[12]!==A||g[13]!==t||g[14]!==n||g[15]!==a?(o=(0,r.jsxs)("div",{className:tk.toolbarLeft,children:[t,n,a,A]}),g[12]=A,g[13]=t,g[14]=n,g[15]=a,g[16]=o):o=g[16],g[17]!==I||g[18]!==S||g[19]!==w?(s=S&&w&&(0,r.jsx)(tK.Yb,{onNewThreadSelected:S,limited:I}),g[17]=I,g[18]=S,g[19]=w,g[20]=s):s=g[20],g[21]!==j||g[22]!==L||g[23]!==C||g[24]!==N?(c=N?(0,r.jsx)(p.A,{size:"small",className:tk.submitSpinner}):j?(0,r.jsx)(t0,{}):(0,r.jsx)(tX,{disabled:C,label:L}),g[21]=j,g[22]=L,g[23]=C,g[24]=N,g[25]=c):c=g[25],g[26]!==s||g[27]!==c?(u=(0,r.jsxs)("div",{className:tk.toolbarRight,children:[s,c]}),g[26]=s,g[27]=c,g[28]=u):u=g[28],g[29]!==o||g[30]!==u?(f=(0,r.jsxs)("div",{className:tk.toolbar,children:[o,u]}),g[29]=o,g[30]=u,g[31]=f):f=g[31],f});function tX(e){let t,n=(0,i.c)(3),{disabled:a,label:o}=e,s=o||"Send now";return n[0]!==a||n[1]!==s?(t=(0,r.jsx)(l.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:d.PaperAirplaneIcon,"aria-label":s,disabled:a,tooltipDirection:"n"}),n[0]=a,n[1]=s,n[2]=t):t=n[2],t}function t0(){let e,t,n=(0,i.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.G)("copilot-chat-stop-button"),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(l.N5,{...e,commandId:"github:cancel",variant:"invisible",size:"medium",icon:d.SquareFillIcon,tooltipDirection:"n",sx:{bg:"danger.subtle",color:"danger.fg",":hover":{bg:"danger.muted"}}}),n[1]=t):t=n[1],t}tZ.displayName="ChatInputToolbar";try{tY.displayName||(tY.displayName="ChatInput")}catch{}try{tX.displayName||(tX.displayName="SubmitButton")}catch{}try{t0.displayName||(t0.displayName="StopButton")}catch{}},99357:(e,t,n)=>{n.d(t,{c:()=>P});var a=n(74848),r=n(21728),i=n(91936),o=n(8579),s=n(39459),l=n(38007),c=n(98386),d=n(38621),u=n(75177),m=n(52464),p=n(34164),h=n(96540),f=n(39376),g=n(22069),y=n(31971),x=n(34901),v=n(47397),_=n(97785),b=n(79929),j=n(83880),C=n(7096),N=n(8387),S=n(45064),w=n(56521),I=n(40509),k=n(57531),T=n(4699),E=n(87928),A=n(85332),R=n(79311);let L=({isLatestMessage:e,isFirstReply:t,isStreaming:n,...r})=>{let{message:L}=(0,j.V)(),P=(0,x.Pk)(),D=(0,v.b)(),{author:O,handleConfirmationAction:M,handleRetryErrorMessage:B,hasClientConfirmations:F,isAI:$,isCopilot:U,isError:V,isAgentError:z,isInterrupted:W,isUser:H,myRef:q,rendererConfig:G,renderFeedback:K,shouldShowMessageActions:Q,skillExecutionToUseForRespondingText:J,showRetryButton:Y}=(0,f.p)({excludeFeedback:r.excludeFeedback,inputRef:r.inputRef,isLatestMessage:e,isStreaming:n,excludeReferencesFromFocusZone:!0}),Z=L.clientToolResults&&L.clientToolResults.length>0,X=L.clientSkillsRequests&&L.clientSkillsRequests.length>0,ee=H&&!Z,et=n||Z||X,en=et&&e,ea=U||Z,er=(0,h.useMemo)(()=>(0,g.rT)(L.references??[]),[L.references]),ei=(0,h.useMemo)(()=>D.maxMessagesReached(),[D]),eo=er.filter(e=>"image"!==e.type&&"org-instructions"!==e.type),es=(0,h.useMemo)(()=>L.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[L.mediaContent]),el=(0,h.useMemo)(()=>y.W.attachImagesImmersive&&void 0!==es&&es.length>0||!1,[es]),ec=(0,h.useCallback)(e=>{let t=e.target.href,n=er.find(e=>e.url===t);n&&"immersive"===P.mode&&(D.selectReference(n),e.preventDefault())},[D,er,P.mode]),ed=(0,h.useCallback)(e=>{D.setWrapCodeLines(e)},[D]);return(0,a.jsxs)("div",{className:(0,p.$)("message-container",b.A.messageContainer,ee&&b.A.user,$&&b.A.ai),ref:q,...(0,c.G)(`message-${V?"error":n?"streaming":L.id}`),children:[ee&&el&&(0,a.jsx)("div",{children:es?.map(e=>(0,a.jsx)(_.o,{src:e?.url||"",alt:"Uploaded image",mode:P.mode},e?.url||""))}),ea||Z?(0,a.jsx)(S.W,{isLoading:et&&e,isError:V&&L.error?.type!=="agentUnauthorized",mode:P.mode,isFirstMessage:t,isLoadingSkills:(L.skillExecutions??[]).length>0&&et&&""===L.content&&e,message:L.content||"",createdAt:L.createdAt}):$?(0,a.jsx)("div",{className:b.A.avatar,children:(0,a.jsx)(s.r,{src:O.avatarURL,size:24,"aria-label":`${O.name} avatar`,alt:`${O.name} avatar`,"data-testid":"chat-message-author-avatar"})}):null,ee&&(0,a.jsx)(C.t,{size:"small",className:"mb-2",references:eo,message:L}),(0,a.jsxs)("div",{className:(0,p.$)(b.A.message,ee&&b.A.user),children:[F&&L.clientConfirmations?.length?(0,a.jsx)(u.A,{className:"my-1",sx:{display:"flex",alignItems:"baseline",justifyContent:ee?"flex-end":""},"data-testid":"chat-message-client-confirmations",children:(0,a.jsxs)(m.A,{sx:{fontWeight:"normal",color:"var(--fgColor-muted)"},children:[(0,a.jsx)(d.CheckIcon,{})," ",O.name," ",L.clientConfirmations?.[0]?.state," the action"]})}):null,U&&en&&!L.content&&(0,a.jsx)(R.b,{className:(0,p.$)(b.A.skillExecutionText,"mb-2 mt-1 ml-2"),children:`${(0,k.WA)(J)}...`}),(0,a.jsx)("div",{className:(0,p.$)(b.A.messageContent,!!F&&b.A.hasClientConfirmations),children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.A,{className:"js-snippet-clipboard-copy-unpositioned",sx:{fontSize:1,px:2,py:1,zIndex:1,".snippet-clipboard-content":{position:"relative",overflow:"auto",display:"flex",justifyContent:"space-between",backgroundColor:"canvas.subtle",marginBottom:3,zIndex:1,pre:{marginBottom:0},"clipboard-copy":{width:"28px",height:"28px"}}},children:["assistant"===L.role&&L.content&&(er?.length?(0,a.jsx)(C.s,{className:"mb-2",references:er}):null),!F&&(ee?(0,a.jsx)(A.R,{}):L.content&&(0,a.jsx)(i.To,{markdown:L.content,onLinkClick:ec,chatMode:"assistive",wrapCodeLines:P.wrapCodeLines,onWrapCodeLinesChange:ed,...G})),V?(0,a.jsx)(w.K,{manager:D}):null,z&&L.agentErrors?.length?(0,a.jsx)(w.h,{errors:L.agentErrors}):null,W?(0,a.jsx)(T.h,{messageHasContent:!!L.content||!!L.skillExecutions?.length}):null,(U||(0,g.yh)(O))&&(0,g.Ye)(L.confirmations).map((t,n)=>"indexrepo"===t.confirmation.name?null:(0,a.jsx)(N.m,{confirmation:t,handleConfirmation:M,isLatestMessage:e},n))]}),!Q&&Y&&(0,a.jsx)(E.$,{handleRetryMessage:B,disabled:ei}),Q&&(0,a.jsxs)(u.A,{className:"message-actions","data-testid":"message-action-bar",sx:{display:"inline-flex",alignItems:"center",position:e?void 0:"absolute",bottom:e?void 0:"-2.25rem",borderRadius:e?void 0:2,boxShadow:e?void 0:"var(--shadow-floating-small)",opacity:e?void 0:0,pointerEvents:e?void 0:"none","&::before":{content:e?void 0:'""',inset:"-0.5rem -0.75rem",zIndex:-1,position:"absolute"}},children:[K&&(0,a.jsx)(I.G,{iconSize:"small"}),U&&!!L.content&&!n&&(0,a.jsx)(o.T,{textToCopy:L.content??"",ariaLabel:"Copy to clipboard",size:"small",className:"d-flex flex-items-center",onCopy:()=>{(0,l.BI)("copilot_chat.activate",{target:"CHAT_MESSAGE_COPY",mode:P.mode})}}),Y&&(0,a.jsx)(E.$,{handleRetryMessage:B,disabled:ei})]})]})})]})]})},P=e=>{let t,n,i,o,s=(0,r.c)(8);return s[0]!==e?({message:t,...n}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==n?(i=(0,a.jsx)(L,{...n}),s[3]=n,s[4]=i):i=s[4],s[5]!==t||s[6]!==i?(o=(0,a.jsx)(j.$,{message:t,children:i}),s[5]=t,s[6]=i,s[7]=o):o=s[7],o};try{L.displayName||(L.displayName="InnerChatMessage")}catch{}try{P.displayName||(P.displayName="ChatMessage")}catch{}},83880:(e,t,n)=>{n.d(t,{$:()=>s,V:()=>l});var a=n(74848),r=n(21728),i=n(96540);let o=(0,i.createContext)(void 0),s=e=>{let t,n,i,s=(0,r.c)(5),{message:l,children:c}=e;return s[0]!==l?(n={message:l},s[0]=l,s[1]=n):n=s[1],t=n,s[2]!==c||s[3]!==t?(i=(0,a.jsx)(o.Provider,{value:t,children:c}),s[2]=c,s[3]=t,s[4]=i):i=s[4],i},l=()=>{let e=(0,i.useContext)(o);if(!e)throw Error("useChatMessage must be used with ChatMessageProvider.");return e};try{o.displayName||(o.displayName="ChatMessageContext")}catch{}try{s.displayName||(s.displayName="ChatMessageProvider")}catch{}},44669:(e,t,n)=>{n.d(t,{A:()=>d,i:()=>c});var a=n(74848),r=n(21728),i=n(96679),o=n(96540),s=n(34901),l=n(40136);let c=e=>{let t,n,c,d,u=(0,r.c)(10),{isLastGroup:m,children:p}=e,{scrollContainerHeight:h,scrollToBottom:f}=(0,l.b)(),{threadHasNewMessages:g}=(0,s.Pk)(),y=m&&g;if(u[0]!==y||u[1]!==f?(t=()=>{y&&f("smooth")},n=[y,f],u[0]=y,u[1]=f,u[2]=t,u[3]=n):(t=u[2],n=u[3]),(0,o.useEffect)(t,n),y)if(i.cg?.CSS?.supports("container-type: size")){let e;u[4]===Symbol.for("react.memo_cache_sentinel")?(e={minHeight:"100cqh"},u[4]=e):e=u[4],d=e}else{let e;u[5]!==h?(e={minHeight:h},u[5]=h,u[6]=e):e=u[6],d=e}return u[7]!==p||u[8]!==d?(c=(0,a.jsx)("div",{style:d,children:p}),u[7]=p,u[8]=d,u[9]=c):c=u[9],c};function d(e){return e.reduce((e,t)=>{let n=e.at(-1);return"assistant"===(n?.at(-1)?.role??"assistant")&&"user"===t.role?e.push([t]):n?.push(t),e},[])}try{c.displayName||(c.displayName="ChatMessagesGroup")}catch{}},7096:(e,t,n)=>{n.d(t,{t:()=>R,s:()=>E});var a,r=n(74848),i=n(38621),o=n(72010),s=n(38695),l=n(15385),c=n(34614),d=n(53110),u=n(34164),m=n(96540),p=n(22069),h=n(31971),f=n(34901),g=n(65011),y=n(30631),x=n(10569),v=n(47397),_=n(70066),b=n(53655);function j({reference:e}){let t,n=(0,f.Pk)(),a=(0,v.b)(),o=(0,m.useRef)(null),[s,c]=(0,m.useState)(!1),d=n?.mode??"assistive",{currentReferences:u}=n??{currentReferences:[]},g=(0,m.useMemo)(()=>u.map(e=>(0,p.Vb)(e)),[u]),j=(0,m.useMemo)(()=>(0,p.Vb)(e),[e]),C=(0,m.useMemo)(()=>"repo-instructions"===e.type,[e]),N=(0,m.useMemo)(()=>"org-instructions"===e.type,[e]),S=!C&&!N&&"web-search-result"!==e.type,w=(0,m.useMemo)(()=>C||N||g.includes(j),[C,N,g,j]),I=(0,m.useCallback)(t=>{t.stopPropagation(),w||a.addReference(e,"refMenu")},[a,e,w]),k=(0,p.JP)(e),T=(0,p.Xs)(k),E=(0,b.a_)(e,(0,p.P)(n?.currentTopic));if(h.W.newImmersiveReferencesUI)switch(e.type){case"file":case"snippet":{t=`${e.repoName}`;let n=e.path.lastIndexOf("/");-1!==n&&(t=`${t}/${e.path.substring(0,n)}`);break}case"web-search-result":t=new URL(e.url,window.location.origin).hostname.replace(/^www\./,"")}let A=(0,p.z$)(e);return(0,r.jsxs)(l.l.LinkItem,{href:k,rel:"noopener",sx:{wordBreak:"break-word",width:"100%"},className:"reference-action",target:"immersive"===d||"third-party"===e.type?"_blank":void 0,children:[E&&(0,r.jsx)(l.l.LeadingVisual,{children:(0,r.jsx)(E,{})}),(0,r.jsxs)(y.A,{title:A,maxWidth:"100%",className:h.W.newImmersiveReferencesUI?"text-semibold":void 0,children:[A,t&&(0,r.jsx)("span",{className:"color-fg-muted ml-2",children:t})]}),S&&(0,r.jsx)(l.l.TrailingAction,{onClick:()=>c(!0),icon:i.KebabHorizontalIcon,label:"More reference options",ref:o}),S&&(0,r.jsx)(x.W,{anchorRef:o,open:s,onOpenChange:c,children:(0,r.jsx)(_.UJ,{portalContainerName:_.Dq,children:(0,r.jsxs)(l.l,{children:[T&&("immersive"===d||["third-party","folder","repository","docset"].includes(e.type)?(0,r.jsxs)(l.l.LinkItem,{href:k,rel:"noopener",target:"_blank",children:[(0,r.jsx)(l.l.LeadingVisual,{children:(0,r.jsx)(i.LinkIcon,{})}),"Open"]}):(0,r.jsxs)(l.l.Item,{onSelect:()=>{a.selectReference(e)},children:[(0,r.jsx)(l.l.LeadingVisual,{children:(0,r.jsx)(i.LinkIcon,{})}),"Preview"]})),(0,r.jsxs)(l.l.Item,{onSelect:I,disabled:w,children:[(0,r.jsx)(l.l.LeadingVisual,{children:(0,r.jsx)(i.PaperclipIcon,{})}),"Attach to chat"]})]})})})]})}try{j.displayName||(j.displayName="OutputReference")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}let C={referencesContainer:"ChatReferences-module__referencesContainer--Lxpin",referencesListImmersiveContainer:"ChatReferences-module__referencesListImmersiveContainer--iscAs",title:"ChatReferences-module__title--zwhMS",assistiveTitle:"ChatReferences-module__assistiveTitle--vngwU",Details:"ChatReferences-module__Details--IrWzZ",referenceTokensOuterContainer:"ChatReferences-module__referenceTokensOuterContainer--tFG8Q",referenceTokensContainer:"ChatReferences-module__referenceTokensContainer--PGYAF",chatMessageReferenceListFooter:"ChatReferences-module__chatMessageReferenceListFooter--nkt6v"};var N=n(21728),S=n(63867);let w={referenceToken:"FigmaChatReference-module__referenceToken--Qn1Il",name:"FigmaChatReference-module__name--fKkEE",content:"FigmaChatReference-module__content--X8uXy",thumbnail:"FigmaChatReference-module__thumbnail--PaX46",thumbnailHidden:"FigmaChatReference-module__thumbnailHidden--PBOGz",thumbnailOuter:"FigmaChatReference-module__thumbnailOuter--sO8P4",thumbnailLoading:"FigmaChatReference-module__thumbnailLoading--PKK05",figmaIconOuter:"FigmaChatReference-module__figmaIconOuter--dd0HF",figmaIcon:"FigmaChatReference-module__figmaIcon--iPM9K"};var I=n(39038);let k=(0,m.forwardRef)(function(e,t){let n,a,i,o,s,l,c,d,h,f,g=(0,N.c)(23);g[0]!==e?({reference:n,...a}=e,g[0]=e,g[1]=n,g[2]=a):(n=g[1],a=g[2]);let[y,x]=(0,m.useState)(!0);return g[3]!==n?(i=(0,p.JP)(n),g[3]=n,g[4]=i):i=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,u.$)(w.referenceToken),g[5]=o):o=g[5],g[6]!==n.thumbnailUrl||g[7]!==n.title||g[8]!==y?(s=n.thumbnailUrl&&(0,r.jsxs)(r.Fragment,{children:[y&&(0,r.jsx)("span",{className:w.thumbnailLoading,children:(0,r.jsx)(S.A,{size:"medium"})}),(0,r.jsx)("img",{className:(0,u.$)(w.thumbnail,{[w.thumbnailHidden]:y}),src:n.thumbnailUrl,alt:`preview thumbnail for ${n.title}`,onLoad:()=>x(!1)})]}),g[6]=n.thumbnailUrl,g[7]=n.title,g[8]=y,g[9]=s):s=g[9],g[10]!==s?(l=(0,r.jsx)("span",{className:w.thumbnailOuter,children:s}),g[10]=s,g[11]=l):l=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)("div",{className:w.figmaIconOuter,children:(0,r.jsx)(I._,{className:w.figmaIcon})}),g[12]=c):c=g[12],g[13]!==n?(d=(0,p.z$)(n),g[13]=n,g[14]=d):d=g[14],g[15]!==d?(h=(0,r.jsxs)("span",{className:w.content,children:[c,(0,r.jsx)("span",{className:w.name,children:d})]}),g[15]=d,g[16]=h):h=g[16],g[17]!==t||g[18]!==a||g[19]!==i||g[20]!==l||g[21]!==h?(f=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("a",{href:i,className:o,ref:t,target:"_blank",rel:"noreferrer",...a,children:[l,h]})}),g[17]=t,g[18]=a,g[19]=i,g[20]=l,g[21]=h,g[22]=f):f=g[22],f});try{k.displayName||(k.displayName="FigmaChatReference")}catch{}var T=n(5279);function E({references:e,onToggle:t,isImmersive:n,className:a}){let h=(0,f.Pk)(),g=(0,m.useMemo)(()=>(0,p.rT)(e),[e]),{getDetailsProps:y}=(0,o.A)({}),x=(0,m.useMemo)(()=>(0,p.P)(h?.currentTopic)&&g.every(A),[h?.currentTopic,g]),v=(0,m.useMemo)(()=>g.some(e=>"web-search-result"===e.type),[g]);if(0===g.length)return null;let _=x&&h?.currentTopic?.name?`Search results from ${h.currentTopic.name}`:`${g.length} ${1===g.length?"reference":"references"}`;return(0,r.jsxs)(s.A,{...y(),onToggle:t,className:(0,u.$)(a,C.Details),children:[(0,r.jsxs)("summary",{className:(0,u.$)(C.referencesContainer),children:[(0,r.jsx)("span",{className:(0,u.$)(C.title,n?"":C.assistiveTitle),children:_}),(0,r.jsx)(d.A,{icon:i.ChevronDownIcon,className:"references-chevron-down",sx:{color:"fg.muted"}}),(0,r.jsx)(d.A,{icon:i.ChevronUpIcon,sx:{display:"none !important",color:"fg.muted"},className:"references-chevron-up"})]}),(0,r.jsxs)(l.l,{sx:{mt:2,mx:"-1rem",p:1},className:(0,u.$)(n&&C.referencesListImmersiveContainer),children:[g.map(e=>(0,r.jsx)(j,{reference:e},(0,p.Vb)(e))),v&&(0,r.jsxs)("div",{className:C.chatMessageReferenceListFooter,children:["Copilot used the"," ",(0,r.jsx)(c.A,{inline:!0,href:"https://gh.io/azure-ai-agent-with-bing-grounding",target:"_blank",rel:"noopener noreferrer",children:"Bing Search"})," ","tool."," ",(0,r.jsx)(c.A,{inline:!0,href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})]})]})]})}function A(e){return"snippet"===e.type&&!!e.languageName&&g.Yr.has(e.languageName)}function R({references:e,message:t,className:n,size:a,onClickReference:i,getReferenceVersion:o}){let{bigReferences:s,smallReferences:l}=(0,m.useMemo)(()=>(function(e){let t=(0,p.rT)(e),n=[],a=[];for(let e of t)L.has(e.type)?n.push(e):a.push(e);return{bigReferences:n,smallReferences:a}})(e),[e]),c=e=>"figma"===e.type&&h.W.immersiveFigmaIntegration?(0,r.jsx)(k,{reference:e,onClick:t=>i?.(e,t)},(0,p.Vb)(e)):(0,r.jsx)(b.BR,{message:t,reference:e,size:a,onClick:(t,n)=>i?.(e,n),getReferenceVersion:o},(0,p.Vb)(e));return(0,r.jsxs)(T.M,{"aria-label":"Attachments",className:(0,u.$)(C.referenceTokensOuterContainer,n),children:[s.map(c),(0,r.jsx)("div",{className:C.referenceTokensContainer,children:l.map(c)})]})}let L=new Set(["figma","image"]);try{E.displayName||(E.displayName="ChatMessageReferencesList")}catch{}try{R.displayName||(R.displayName="ChatMessageReferenceTokens")}catch{}try{L.displayName||(L.displayName="BIG_REFERENCE_TYPES")}catch{}},40136:(e,t,n)=>{n.d(t,{$:()=>c,b:()=>d});var a=n(74848),r=n(21728),i=n(34164),o=n(96540);let s={container:"ChatScrollContainer-module__container--b73rS"},l=(0,o.createContext)(null);function c(e){let t,n,c,d,u,m,p,h,f,g,y,x,v,_,b=(0,r.c)(24);b[0]!==e?({children:t,disabled:n,...c}=e,b[0]=e,b[1]=t,b[2]=n,b[3]=c):(t=b[1],n=b[2],c=b[3]);let j=(0,o.useRef)(null),C=(0,o.useRef)(null),[N,S]=(0,o.useState)(!1);b[4]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{let e=new IntersectionObserver(e=>{let[t]=e;return S(!t?.isIntersecting)},{root:j.current,threshold:0,rootMargin:"50px"});return e.observe(C.current),()=>e.disconnect()},u=[],b[4]=d,b[5]=u):(d=b[4],u=b[5]),(0,o.useEffect)(d,u);let[w,I]=(0,o.useState)();b[6]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{let e=()=>{if(!j.current)return;let e=getComputedStyle(j.current);I(`calc(${j.current.clientHeight}px - ${e.paddingTop} - ${e.paddingBottom})`)},t=new ResizeObserver(e);return e(),t.observe(j.current),()=>t.disconnect()},p=[],b[6]=m,b[7]=p):(m=b[6],p=b[7]),(0,o.useEffect)(m,p),b[8]!==n?(h=e=>{n||C.current?.scrollIntoView({behavior:e,block:"end"})},b[8]=n,b[9]=h):h=b[9];let k=h;return b[10]!==N||b[11]!==w||b[12]!==k?(g={isScrolledUp:N,scrollToBottom:k,scrollContainerHeight:w},b[10]=N,b[11]=w,b[12]=k,b[13]=g):g=b[13],f=g,b[14]!==c.className?(y=(0,i.$)(s.container,c.className),b[14]=c.className,b[15]=y):y=b[15],b[16]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)("div",{ref:C,style:{height:"1px",marginTop:"-1px"}}),b[16]=x):x=b[16],b[17]!==t||b[18]!==c||b[19]!==y?(v=(0,a.jsxs)("div",{ref:j,...c,className:y,children:[t,x]}),b[17]=t,b[18]=c,b[19]=y,b[20]=v):v=b[20],b[21]!==f||b[22]!==v?(_=(0,a.jsx)(l.Provider,{value:f,children:v}),b[21]=f,b[22]=v,b[23]=_):_=b[23],_}let d=()=>{let e=(0,o.useContext)(l);if(!e)throw Error("useChatScroll may only be called in a descendant of ChatScrollContainer");return e};try{l.displayName||(l.displayName="ChatScrollContext")}catch{}try{c.displayName||(c.displayName="ChatScrollContainer")}catch{}},8387:(e,t,n)=>{n.d(t,{m:()=>u});var a=n(74848),r=n(21728),i=n(84217),o=n(75177),s=n(55847),l=n(52464),c=n(96540),d=n(34901);function u(e){let t,n,l,u,p,h,f,g,y=(0,r.c)(21),{confirmation:x,handleConfirmation:v,isLatestMessage:_}=e,b=(0,d.Pk)();if(y[0]!==x.confirmation||y[1]!==b.allClientConfirmations){let e=JSON.stringify(Object.values(x.confirmation).sort());t=b.allClientConfirmations?.includes(e),y[0]=x.confirmation,y[1]=b.allClientConfirmations,y[2]=t}else t=y[2];let j=t,[C,N]=(0,c.useState)(j&&!_);y[3]!==x.confirmation||y[4]!==x.onSubmit||y[5]!==x.title||y[6]!==v?(n=e=>{N(!0),v({state:e,confirmation:x.confirmation},x.title,x.onSubmit)},y[3]=x.confirmation,y[4]=x.onSubmit,y[5]=x.title,y[6]=v,y[7]=n):n=y[7];let S=n;return y[8]===Symbol.for("react.memo_cache_sentinel")?(l={display:"flex",flexDirection:"column",p:3,marginTop:3},y[8]=l):l=y[8],y[9]===Symbol.for("react.memo_cache_sentinel")?(u={mb:1,fontSize:1,lineHeight:"condensed"},y[9]=u):u=y[9],y[10]!==x.title?(p=(0,a.jsx)(i.A,{as:"h3",sx:u,children:x.title}),y[10]=x.title,y[11]=p):p=y[11],y[12]!==x.message?(h=x.message.split(`
`).map(m),y[12]=x.message,y[13]=h):h=y[13],y[14]!==C||y[15]!==S?(f=!C&&(0,a.jsxs)(o.A,{sx:{display:"flex",justifyContent:"flex-start",gap:2,mt:3},children:[(0,a.jsx)(s.Q,{variant:"primary",onClick:()=>S("accepted"),children:"Allow"}),(0,a.jsx)(s.Q,{onClick:()=>S("dismissed"),children:"Dismiss"})]}),y[14]=C,y[15]=S,y[16]=f):f=y[16],y[17]!==p||y[18]!==h||y[19]!==f?(g=(0,a.jsxs)(o.A,{className:"border rounded-2",sx:l,children:[p,h,f]}),y[17]=p,y[18]=h,y[19]=f,y[20]=g):g=y[20],g}function m(e){return(0,a.jsx)(l.A,{as:"p",sx:{color:"fg.muted",mb:0},children:e},e)}try{u.displayName||(u.displayName="Confirmation")}catch{}},33484:(e,t,n)=>{n.d(t,{l:()=>u});var a=n(74848),r=n(21728),i=n(13455),o=n(60039),s=n(96540),l=n(31971),c=n(69458);let d=[{name:"Hate it",value:1,icon:i.YS,color:"veryDissatisfied"},{name:"Not great",value:2,icon:i.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:3,icon:i.Cf,color:"satisfied"},{name:"Love it",value:4,icon:i.mN,color:"verySatisfied"}],u=(0,s.forwardRef)(function(e,t){let n,u,m,p,h=(0,r.c)(7),{mode:f,returnFocusRef:g}=e,y=(0,s.useRef)(null),x=(0,s.useRef)(null),v=(0,s.useRef)(void 0);h[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:e=>{v.current=e,l.W.copilotChatInterviewSurvey?y.current?.openDialog():x.current?.openDialog(e)}}),h[0]=n):n=h[0],(0,s.useImperativeHandle)(t,n),h[1]!==f?(u=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let a={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:f};try{(await (0,o.lS)("/github-copilot/feedback",{method:"POST",body:a})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},h[1]=f,h[2]=u):u=h[2];let _=u;return h[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(c.E,{ref:y,onClose:e=>{"no-thanks"===e&&x.current?.openDialog(v.current)}}),h[3]=m):m=h[3],h[4]!==_||h[5]!==g?(p=(0,a.jsxs)(a.Fragment,{children:[m,(0,a.jsx)(i.NE,{ref:x,options:d,onSubmit:_,returnFocusRef:g})]}),h[4]=_,h[5]=g,h[6]=p):p=h[6],p});u.displayName="ConversationFeedbackDialog"},45064:(e,t,n)=>{n.d(t,{W:()=>h});var a=n(74848),r=n(21728),i=n(50539),o=n(75177),s=n(34164),l=n(96540);let c={copilotBadge:"CopilotBadgeV2-module__copilotBadge--OJjfk",loading:"CopilotBadgeV2-module__loading--NG3DO",animation:"CopilotBadgeV2-module__animation--cRY_E",assistive:"CopilotBadgeV2-module__assistive--aZiUP"},d=[i.L.Tickle,i.L.Celebrate,i.L.JumpWiggle],u=["yes","absolutely","certainly","sure","definitely","right","correct","indeed","precisely","exactly","true","affirmative","agree","agreed"],m=["no","never","negative","wrong","false","untrue","cannot","can't","sorry","incorrect","deny","disagree","refuse","unfortunately"];function p(e){let t=new Date(e);return(new Date().getTime()-t.getTime())/1e3/60<.5}function h(e){let t,n,h,g,y,x,v,_,b,j,C,N=(0,r.c)(38),{isFirstMessage:S,isLoading:w,isLoadingSkills:I,isError:k,className:T,mode:E,message:A,createdAt:R}=e,L=void 0!==S&&S;N[0]!==R||N[1]!==L?(t=()=>({animationType:L&&(!R||p(R))?i.L.Celebrate:i.L.Static,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!1}),N[0]=R,N[1]=L,N[2]=t):t=N[2];let[P,D]=(0,l.useState)(t);N[3]!==R||N[4]!==k||N[5]!==w||N[6]!==I||N[7]!==A?(n=()=>{p(R)&&D(e=>(function({previousState:e,isLoadingSkills:t,isAffirmativeSentiment:n,isNegativeSentiment:a,isError:r,isLoading:o}){switch(e.animationType){case i.L.Static:if((n||a)&&!r&&!e.hasLoadedMessage)return{animationType:n?i.L.Affirmative:i.L.Negative,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};if(t)return{...e,animationType:i.L.Thinking,loopAnimation:!0};if(!o&&!e.hasLoadedMessage&&!r)return{animationType:i.L.Confirm,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};if(r&&!e.hasLoadedMessage)return{animationType:i.L.Negative,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};return e;case i.L.Thinking:if(!t)return{...e,animationType:r?i.L.Negative:i.L.Static,loopAnimation:!1};return e;default:return e}})({previousState:e,isLoadingSkills:I||!1,isError:k||!1,isLoading:w||!1,isAffirmativeSentiment:function(e){if(e.length<200){let t=e.toLowerCase().split(/\W+/).filter(Boolean);return u.some(e=>t.includes(e.toLowerCase()))}return!1}(A),isNegativeSentiment:function(e){if(e.length<200){let t=e.toLowerCase().split(/\W+/).filter(Boolean);return m.some(e=>t.includes(e.toLowerCase()))}return!1}(A)}))},N[3]=R,N[4]=k,N[5]=w,N[6]=I,N[7]=A,N[8]=n):n=N[8],N[9]!==P.animationType||N[10]!==P.hasLoadedMessage||N[11]!==R||N[12]!==k||N[13]!==L||N[14]!==w||N[15]!==I||N[16]!==A?(h=[I,k,w,P.animationType,P.hasLoadedMessage,L,A,R],N[9]=P.animationType,N[10]=P.hasLoadedMessage,N[11]=R,N[12]=k,N[13]=L,N[14]=w,N[15]=I,N[16]=A,N[17]=h):h=N[17],(0,l.useEffect)(n,h),N[18]!==P||N[19]!==w?(g=()=>{w||D({...P,animationType:d[Math.floor(Math.random()*d.length)],onFinish:i.L.Static,loopAnimation:!1})},N[18]=P,N[19]=w,N[20]=g):g=N[20];let O=g,M=w&&c.loading;N[21]!==T||N[22]!==M?(y=(0,s.$)(c.copilotBadge,M,T),N[21]=T,N[22]=M,N[23]=y):y=N[23],N[24]===Symbol.for("react.memo_cache_sentinel")?(x={":hover":{cursor:"pointer"}},N[24]=x):x=N[24];let B=P.animationType;N[25]===Symbol.for("react.memo_cache_sentinel")?(v=()=>D(f),N[25]=v):v=N[25];let F=P.loopAnimation,$="assistive"===E&&c.assistive;return N[26]!==$?(_=(0,s.$)(c.animation,$),N[26]=$,N[27]=_):_=N[27],N[28]!==P.animationType||N[29]!==P.loopAnimation||N[30]!==_?(b=(0,a.jsx)(i.N,{animationType:B,onAnimationEnd:v,loopAnimation:F,className:_}),N[28]=P.animationType,N[29]=P.loopAnimation,N[30]=_,N[31]=b):b=N[31],N[32]!==O||N[33]!==b?(j=(0,a.jsx)(o.A,{sx:x,onClick:O,children:b}),N[32]=O,N[33]=b,N[34]=j):j=N[34],N[35]!==j||N[36]!==y?(C=(0,a.jsx)("div",{className:y,"aria-label":"Copilot badge",role:"img",children:j}),N[35]=j,N[36]=y,N[37]=C):C=N[37],C}function f(e){return{...e,animationType:e.onFinish}}try{h.displayName||(h.displayName="CopilotBadge")}catch{}},56521:(e,t,n)=>{n.d(t,{K:()=>y,h:()=>v});var a=n(74848),r=n(21728),i=n(91936),o=n(98386),s=n(38621),l=n(87330),c=n(55847),d=n(95726),u=n(34164),m=n(96540),p=n(22069),h=n(66889),f=n(79929),g=n(83880);function y(e){let t=(0,r.c)(8),{manager:n}=e,{message:i}=(0,g.V)(),{error:s}=i;if(!s)return null;switch(s.type){case"agentUnauthorized":{let e;return t[0]!==s||t[1]!==n?(e=(0,a.jsx)(x,{error:s,manager:n}),t[0]=s,t[1]=n,t[2]=e):e=t[2],e}case"agentRequest":{let e;return t[3]!==s.details?(e=(0,a.jsx)(v,{errors:[s.details]}),t[3]=s.details,t[4]=e):e=t[4],e}default:{let e,n;t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.G)("error-message-banner"),t[5]=e):e=t[5];let r=s.message||"Something went wrong";return t[6]!==r?(n=(0,a.jsx)(d.l,{...e,title:"Error",hideTitle:!0,description:r,variant:"warning"}),t[6]=r,t[7]=n):n=t[7],n}}}function x(e){let t,n,i,d,h,g,y,x,v,_,b,j=(0,r.c)(25),{error:C,manager:N}=e,{details:S}=C,[w,I]=(0,m.useState)(!1);j[0]!==S.name||j[1]!==N?(t=()=>{I(!0),N.dispatch({type:"MESSAGE_ADDED",message:(0,p.Y6)({role:"user",content:`Dismissed the connection with ${S.name}.`,mediaContent:[],parentMessageID:N.FindLastMessageID()})}),N.dispatch({type:"MESSAGE_ADDED",message:(0,p.Y6)({role:"assistant",content:`I was unable to connect you to ${S.name} because you cancelled the authentication.`,mediaContent:[],parentMessageID:N.FindLastMessageID()})})},j[0]=S.name,j[1]=N,j[2]=t):t=j[2];let k=t;j[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.G)("agent-unauthorized-error"),j[3]=n):n=j[3],j[4]!==w||j[5]!==k?(i=!w&&(0,a.jsx)(l.K,{"aria-label":"Close",className:"position-absolute top-0 right-0 mt-2 mr-2",icon:s.XIcon,onClick:k,variant:"invisible",unsafeDisableTooltip:!0}),j[4]=w,j[5]=k,j[6]=i):i=j[6],j[7]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(s.MarkGithubIcon,{size:48,className:"border circle borderColor-muted"}),h=(0,a.jsx)(s.LinkIcon,{className:"fgColor-muted"}),g=(0,u.$)("avatar",f.A.agentUnauthorizedAvatar,"border circle borderColor-muted"),j[7]=d,j[8]=h,j[9]=g):(d=j[7],h=j[8],g=j[9]);let T=`icon for ${S.name}`;return j[10]!==S.avatar_url||j[11]!==T?(y=(0,a.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[d,h,(0,a.jsx)("img",{className:g,src:S.avatar_url,alt:T})]}),j[10]=S.avatar_url,j[11]=T,j[12]=y):y=j[12],j[13]!==S.name?(v=(0,a.jsxs)("p",{className:"h4 m-0 text-center",children:["Connect with ",S.name]}),x=(0,a.jsxs)("p",{className:"fgColor-muted text-center",children:["To use the ",S.name," extension, you\u2019ll need to connect your GitHub account to your ",S.name," account."]}),j[13]=S.name,j[14]=x,j[15]=v):(x=j[14],v=j[15]),j[16]!==S.authorize_url||j[17]!==w?(_=!w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Q,{as:"a",variant:"primary",size:"large",className:"width-full",href:S.authorize_url,rel:"noopener",target:"_blank",children:"Connect"}),(0,a.jsxs)("p",{className:"fgColor-muted text-center f6 m-0",children:["Click connect to be redirected to ",S.authorize_url]})]}),j[16]=S.authorize_url,j[17]=w,j[18]=_):_=j[18],j[19]!==x||j[20]!==_||j[21]!==i||j[22]!==y||j[23]!==v?(b=(0,a.jsxs)("div",{className:"position-relative d-flex flex-column flex-items-center gap-3 border rounded-2 p-5",...n,children:[i,y,v,x,_]}),j[19]=x,j[20]=_,j[21]=i,j[22]=y,j[23]=v,j[24]=b):b=j[24],b}function v(e){let t,n,i=(0,r.c)(4),{errors:o}=e;return i[0]!==o?(t=o.map(_),i[0]=o,i[1]=t):t=i[1],i[2]!==t?(n=(0,a.jsx)("div",{className:"d-flex flex-column gap-2",children:t}),i[2]=t,i[3]=n):n=i[3],n}function _(e,t){var n;return(0,a.jsxs)("div",{className:"p-3 border rounded-2",children:[(0,a.jsxs)("div",{className:"text-bold",children:[(0,a.jsx)(s.AlertFillIcon,{className:"mr-1 fgColor-attention"})," ","http"===(n=e).type?`${n.code} ${n.identifier}`:`${(0,h.Z)(n.type)} error`]}),(0,a.jsx)(i.To,{markdown:e.message})]},t)}try{y.displayName||(y.displayName="ErrorMessage")}catch{}try{x.displayName||(x.displayName="AgentUnauthorizedError")}catch{}try{v.displayName||(v.displayName="AgentErrors")}catch{}},40509:(e,t,n)=>{n.d(t,{G:()=>x});var a=n(74848),r=n(21728),i=n(38621),o=n(87330),s=n(96540),l=n(34901),c=n(47397),d=n(83880),u=n(13455),m=n(31971),p=n(74244),h=n(69458);let f={thumbsUp:"MessageFeedbackDialog-module__thumbsUp--L1svG",thumbsDown:"MessageFeedbackDialog-module__thumbsDown--xdoe9"},g=[{name:"Bad",value:"NEGATIVE",icon:(0,a.jsx)(i.ThumbsdownIcon,{className:f.thumbsDown}),color:"bad"},{name:"Good",value:"POSITIVE",icon:(0,a.jsx)(i.ThumbsupIcon,{className:f.thumbsUp}),color:"good"}],y=(0,s.forwardRef)(function({messageId:e,threadId:t,returnFocusRef:n,onSubmitted:r,onClose:i},o){let l=(0,c.b)(),d=(0,s.useRef)(null),f=(0,s.useRef)(null),y=(0,s.useRef)(void 0);(0,s.useImperativeHandle)(o,()=>({openDialog:e=>{y.current=e,m.W.copilotChatInterviewSurvey?d.current?.openDialog():f.current?.openDialog(e)}}));let x=async(n,a)=>{let i=[];if(null==n&&i.push("Please select a rating."),a.length>500&&i.push("Please keep your feedback within 500 characters or less."),i.length>0)return i;try{(await l.service.sendFeedback({feedback:n,feedbackChoice:[],messageId:e,threadId:t,textResponse:a})).ok?r?.(n):i.push("An error occurred while submitting your feedback.")}catch{i.push("An error occurred while submitting your feedback.")}return i};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.E,{ref:d,title:"Give additional feedback",onClose:e=>{"no-thanks"===e?f.current?.openDialog(y.current):i?.()}}),(0,a.jsx)(u.NE,{title:"Give additional feedback",ref:f,options:g,onSubmit:x,onClose:i,requestID:p.J.getRequestID(e),returnFocusRef:n})]})});function x(e){let t,n,u,m,p,h=(0,r.c)(20),{iconSize:f}=e,{message:g}=(0,d.V)(),x=g.id,v=g.threadID,_=(0,c.b)(),b=(0,s.useRef)(null),j=(0,s.useRef)(null);h[0]!==_||h[1]!==g?(t=e=>{_.handleFeedback(g,e)},h[0]=_,h[1]=g,h[2]=t):t=h[2];let C=t,{optedInToUserFeedback:N}=(0,l.Pk)();h[3]!==_.service||h[4]!==x||h[5]!==C||h[6]!==N||h[7]!==v?(n=e=>{_.service.sendFeedback({feedback:e,messageId:x,threadId:v}),C(e),N?b.current?.openDialog(e):j.current?.focus()},h[3]=_.service,h[4]=x,h[5]=C,h[6]=N,h[7]=v,h[8]=n):n=h[8];let S=n;return h[9]!==f||h[10]!==g.feedback||h[11]!==S?(u=null!=g.feedback?(0,a.jsx)(o.K,{ref:j,"aria-label":`${g.feedback.toLocaleLowerCase()} feedback submitted`,icon:"POSITIVE"===g.feedback?i.ThumbsupIcon:i.ThumbsdownIcon,variant:"invisible",size:f,"aria-disabled":!0,sx:{color:"fg.default",bg:"canvas.subtle"}}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.K,{icon:i.ThumbsupIcon,"aria-label":"Good response",onClick:()=>S("POSITIVE"),variant:"invisible",size:f}),(0,a.jsx)(o.K,{icon:i.ThumbsdownIcon,size:f,"aria-label":"Bad response",onClick:()=>S("NEGATIVE"),variant:"invisible"})]}),h[9]=f,h[10]=g.feedback,h[11]=S,h[12]=u):u=h[12],h[13]!==x||h[14]!==C||h[15]!==v?(m=(0,a.jsx)(y,{ref:b,messageId:x,threadId:v,onSubmitted:C,returnFocusRef:j}),h[13]=x,h[14]=C,h[15]=v,h[16]=m):m=h[16],h[17]!==u||h[18]!==m?(p=(0,a.jsxs)(a.Fragment,{children:[u,m]}),h[17]=u,h[18]=m,h[19]=p):p=h[19],p}y.displayName="MessageFeedbackDialog";try{x.displayName||(x.displayName="Feedback")}catch{}},57531:(e,t,n)=>{n.d(t,{WA:()=>ej,BO:()=>eb});var a=n(74848),r=n(21728),i=n(59706),o=n(38621),s=n(30631),l=n(84217),c=n(52464),d=n(75177),u=n(99377),m=n(31971),p=n(74244),h=n(34614),f=n(63867),g=n(55847),y=n(15385),x=n(53110),v=n(96540),_=n(22069),b=n(34901);let j={functionReferenceListContainer:"FunctionLoadingUtils-module__functionReferenceListContainer--nLEFp",functionLoading:"FunctionLoadingUtils-module__functionLoading--ksfrz",spinner:"FunctionLoadingUtils-module__spinner--dWC1I",functionReferenceButton:"FunctionLoadingUtils-module__functionReferenceButton--RThXV",functionReferenceButtonContents:"FunctionLoadingUtils-module__functionReferenceButtonContents--p5oMB",functionReferenceTitle:"FunctionLoadingUtils-module__functionReferenceTitle--P1oyO",functionReferenceListFooter:"FunctionLoadingUtils-module__functionReferenceListFooter--xNrSv"};function C(e){let t,n,i=(0,r.c)(8),{chatManager:o,functionCall:s,skillArgs:l}=e,c=l.query;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(h.A,{href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"}),i[0]=t):t=i[0];let d=`An error occurred when searching for \u{201C}${c}\u{201D}`,u=`Searching the web for \u{201C}${c}\u{201D}`,m=`No web search results for \u{201C}${c}\u{201D} were found`,p=`Using web search results for \u{201C}${c}\u{201D}`;return i[1]!==o||i[2]!==s||i[3]!==d||i[4]!==u||i[5]!==m||i[6]!==p?(n=(0,a.jsx)(Q,{additionalFooterContent:t,chatManager:o,errorButtonText:d,errorTitle:"An error occurred when searching the web",toolLink:"https://bing.com",toolName:"Bing search",functionCall:s,inProgressMessage:u,noResultsMessage:m,resultsMapper:N,successButtonText:p,useSelectReference:!1}),i[1]=o,i[2]=s,i[3]=d,i[4]=u,i[5]=m,i[6]=p,i[7]=n):n=i[7],n}function N(e){return(e.references?.[0]?.results??[]).map(S)}function S(e){return{title:e.title,url:e.url,description:e.excerpt,leadingIcon:o.GlobeIcon}}function w(e){let t,n,i=(0,r.c)(8),{chatManager:o,functionCall:s,skillArgs:l}=e,c=l.query;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(h.A,{href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"}),i[0]=t):t=i[0];let d=`An error occurred when searching for \u{201C}${c}\u{201D}`,u=`Searching the web for \u{201C}${c}\u{201D}`,m=`No web search results for \u{201C}${c}\u{201D} were found`,p=`Using web search results for \u{201C}${c}\u{201D}`;return i[1]!==o||i[2]!==s||i[3]!==d||i[4]!==u||i[5]!==m||i[6]!==p?(n=(0,a.jsx)(Q,{additionalFooterContent:t,chatManager:o,errorButtonText:d,errorTitle:"An error occurred when searching the web",toolLink:"https://gh.io/azure-ai-agent-with-bing-grounding",toolName:"Bing Search",functionCall:s,inProgressMessage:u,noResultsMessage:m,resultsMapper:I,successButtonText:p,useSelectReference:!1}),i[1]=o,i[2]=s,i[3]=d,i[4]=u,i[5]=m,i[6]=p,i[7]=n):n=i[7],n}function I(e){let t=e.references?.[0];return(t?.results??[]).map(e=>({title:e.title,url:e.url,leadingIcon:"bing_search"===e.reference_type?i._:o.GlobeIcon}))}function k(e){var t;let n,i=(0,r.c)(9),{chatManager:o,functionCall:s,skillArgs:l,useSelectReference:c}=e,d=l.query,u="scopingQuery"in l?l.scopingQuery:l.repoOwner&&l.repoName?`repo:${l.repoOwner}/${l.repoName}`:void 0;u&&(u=(t=u).startsWith("repo:")?t.substring(5):t);let m="semantic-code-search"===l.kind?"semantic":"lexical",p=`An error occurred when searching for \u{201C}${d}\u{201D}`,h=`${m.charAt(0).toUpperCase()+m.slice(1)} search`,f=`Searching for \u{201C}${d}\u{201D}${u&&` in ${u}`}`,g=`No results were found when ${m} searching for \u{201C}${d}\u{201D}${u&&` in ${u}`}`,y=`Using ${m} search results for \u{201C}${d}\u{201D}${u&&` in ${u}`}`;return i[0]!==o||i[1]!==s||i[2]!==p||i[3]!==h||i[4]!==f||i[5]!==g||i[6]!==y||i[7]!==c?(n=(0,a.jsx)(Q,{chatManager:o,errorButtonText:p,errorTitle:"An error occurred when searching code",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:h,functionCall:s,inProgressMessage:f,noResultsMessage:g,resultsMapper:eo,successButtonText:y,useSelectReference:c}),i[0]=o,i[1]=s,i[2]=p,i[3]=h,i[4]=f,i[5]=g,i[6]=y,i[7]=c,i[8]=n):n=i[8],n}function T(e){let t,n=(0,r.c)(8),{chatManager:i,functionCall:o,skillArgs:s,useSelectReference:l}=e,c=s.query,d=s.kbID,{knowledgeBases:u}=(0,b.Pk)(),m=u.find(e=>e.id===d),p=m?.name??"the knowledge base",h=`An error occurred when searching for \u{201C}${c}\u{201D} in ${p}`,f=`Searching the ${p} knowledge base for \u{201C}${c}\u{201D}`,g=`No results were found when searching the ${p} knowledge base for \u{201C}${c}\u{201D}`,y=`Using search results from the ${p} knowledge base for \u{201C}${c}\u{201D}`;return n[0]!==i||n[1]!==o||n[2]!==h||n[3]!==f||n[4]!==g||n[5]!==y||n[6]!==l?(t=(0,a.jsx)(Q,{chatManager:i,errorButtonText:h,errorTitle:"An error occurred when searching the knowledge base",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Knowledge base search",functionCall:o,inProgressMessage:f,noResultsMessage:g,resultsMapper:eo,successButtonText:y,useSelectReference:l}),n[0]=i,n[1]=o,n[2]=h,n[3]=f,n[4]=g,n[5]=y,n[6]=l,n[7]=t):t=n[7],t}function E(e){let t,n,i,o,s,l=(0,r.c)(20),{chatManager:c,functionCall:d,skillArgs:u,useSelectReference:m}=e,{path:p,repo:h,ref:f}=u,g=`An error occurred when finding \u{201C}${p}\u{201D} in ${h}`;l[0]!==f||l[1]!==g?(t=P(g,f),l[0]=f,l[1]=g,l[2]=t):t=l[2];let y=`File results for \u{201C}${p}\u{201D} in ${h}`;l[3]!==f||l[4]!==y?(n=P(y,f),l[3]=f,l[4]=y,l[5]=n):n=l[5];let x=`No files matching \u{201C}${p}\u{201D} in ${h} were found`;l[6]!==f||l[7]!==x?(i=P(x,f),l[6]=f,l[7]=x,l[8]=i):i=l[8];let v=`Using results for \u{201C}${p}\u{201D} in ${h}`;return l[9]!==f||l[10]!==v?(o=P(v,f),l[9]=f,l[10]=v,l[11]=o):o=l[11],l[12]!==c||l[13]!==d||l[14]!==t||l[15]!==n||l[16]!==i||l[17]!==o||l[18]!==m?(s=(0,a.jsx)(Q,{chatManager:c,errorButtonText:t,errorTitle:"An error occurred when finding a file",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get file",functionCall:d,inProgressMessage:n,noResultsMessage:i,resultsMapper:A,successButtonText:o,useSelectReference:m}),l[12]=c,l[13]=d,l[14]=t,l[15]=n,l[16]=i,l[17]=o,l[18]=m,l[19]=s):s=l[19],s}function A(e){return(e.references??[]).map(R)}function R(e){return"file-v2"===e.type?{description:`${e.repoName}/${e.path}`,leadingIcon:o.FileIcon,reference:e,title:(0,_.Xo)(e),url:e.url}:void 0}function L(e){let t,n,i,s,l,c,d=(0,r.c)(23),{chatManager:u,functionCall:m,skillArgs:p,useSelectReference:h}=e,{path:f,repo:g,ref:y}=p,x=`An error occurred when finding file changes for \u{201C}${f}\u{201D} in ${g}`;d[0]!==y||d[1]!==x?(t=P(x,y),d[0]=y,d[1]=x,d[2]=t):t=d[2];let v=`File changes results for \u{201C}${f} in ${g}`;d[3]!==y||d[4]!==v?(n=P(v,y),d[3]=y,d[4]=v,d[5]=n):n=d[5];let b=`No files changes were found for \u{201C}${f}\u{201D} in ${g}`;d[6]!==y||d[7]!==b?(i=P(b,y),d[6]=y,d[7]=b,d[8]=i):i=d[8],d[9]!==f?(s=e=>(e.references??[]).map(e=>"file-changes"===e.type?{description:`${e.repository.name}/${f}`,leadingIcon:o.FileIcon,reference:e,title:(0,_.Xo)(e),url:e.url}:void 0),d[9]=f,d[10]=s):s=d[10];let j=`Using results for \u{201C}${f}\u{201D} in ${g}`;return d[11]!==y||d[12]!==j?(l=P(j,y),d[11]=y,d[12]=j,d[13]=l):l=d[13],d[14]!==u||d[15]!==m||d[16]!==t||d[17]!==n||d[18]!==i||d[19]!==s||d[20]!==l||d[21]!==h?(c=(0,a.jsx)(Q,{chatManager:u,errorButtonText:t,errorTitle:"An error occurred when finding the file changes",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get file changes",functionCall:m,inProgressMessage:n,noResultsMessage:i,resultsMapper:s,successButtonText:l,useSelectReference:h}),d[14]=u,d[15]=m,d[16]=t,d[17]=n,d[18]=i,d[19]=s,d[20]=l,d[21]=h,d[22]=c):c=d[22],c}let P=(e,t)=>t?`${e} on ref ${t}`:e;function D(e){let t,n=(0,r.c)(5),{chatManager:i,functionCall:o,skillArgs:s,useSelectReference:l}=e,c=`An error occurred when fetching alert information for ${s.url}`;return n[0]!==i||n[1]!==o||n[2]!==c||n[3]!==l?(t=(0,a.jsx)(Q,{chatManager:i,errorButtonText:c,errorTitle:"An error occurred when fetching alert information",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get alert information",functionCall:o,inProgressMessage:"Fetching alert information",noResultsMessage:"Unable to fetch alert information",resultsMapper:O,successButtonText:"Using alert information",useSelectReference:l}),n[0]=i,n[1]=o,n[2]=c,n[3]=l,n[4]=t):t=n[4],t}function O(e){return(e.references??[]).map(M)}function M(e){return"alert.api"===e.type?{description:"Alert",leadingIcon:B,title:"Alert"}:void 0}function B(){return(0,a.jsx)(o.ShieldIcon,{})}function F(e){let t,n=(0,r.c)(7),{chatManager:i,functionCall:o,skillArgs:s,useSelectReference:l}=e,c=`Fetching discussion ${s.discussionNumber}`,d=`Unable to fetch discussion ${s.discussionNumber}`,u=`Using discussion #${s.discussionNumber}`;return n[0]!==i||n[1]!==o||n[2]!==c||n[3]!==d||n[4]!==u||n[5]!==l?(t=(0,a.jsx)(Q,{chatManager:i,errorButtonText:"An error occurred when fetching discussion",errorTitle:"An error occurred when fetching discussion",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get discussion",functionCall:o,inProgressMessage:c,noResultsMessage:d,resultsMapper:$,successButtonText:u,useSelectReference:l}),n[0]=i,n[1]=o,n[2]=c,n[3]=d,n[4]=u,n[5]=l,n[6]=t):t=n[6],t}function $(e){return(e.references??[]).map(U)}function U(e){return"discussion"===e.type?{title:e.title??"Discussion",description:`Using discussion #${e.number} for ${e.repository.owner}/${e.repository.name}`,url:e.url,leadingIcon:o.CommentDiscussionIcon}:void 0}function V(e){let t,n,i=(0,r.c)(3),{children:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("span",{className:j.spinner,children:(0,a.jsx)(f.A,{size:"small"})}),i[0]=t):t=i[0],i[1]!==o?(n=(0,a.jsxs)("div",{className:j.functionLoading,children:[t,(0,a.jsx)("span",{children:o})]}),i[1]=o,i[2]=n):n=i[2],n}function z(e){let t=(0,r.c)(1),{functionCall:n}=e,{status:i}=n;if("started"===i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(V,{children:"Coming up with a plan"}),t[0]=e):e=t[0],e}}function W(e){let t,n=(0,r.c)(8),{chatManager:i,functionCall:o,skillArgs:s,useSelectReference:l}=e,c=K(s),d=`An error occurred when fetching logs for ${c} in ${s.repo}`,u=`Fetching logs for ${c} in ${s.repo}`,m=`Unable to fetch logs for ${c} in ${s.repo}`,p=`Using logs for ${c} in ${s.repo}`;return n[0]!==i||n[1]!==o||n[2]!==d||n[3]!==u||n[4]!==m||n[5]!==p||n[6]!==l?(t=(0,a.jsx)(Q,{chatManager:i,errorButtonText:d,errorTitle:"An error occurred when fetching a commit",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get job logs",functionCall:o,inProgressMessage:u,noResultsMessage:m,resultsMapper:H,successButtonText:p,useSelectReference:l}),n[0]=i,n[1]=o,n[2]=d,n[3]=u,n[4]=m,n[5]=p,n[6]=l,n[7]=t):t=n[7],t}function H(e){return(e.references??[]).filter(G).map(q)}function q(e){return{description:`${e.id} \xb7 ${e.repoOwner}/${e.repoName}`,leadingIcon:o.PlayIcon,title:"Job"}}function G(e){return"job"===e.type}function K(e){return e.jobId?`job ${e.jobId}`:e.runId?`workflow run ${e.runId}`:e.pullRequestNumber?`pull request ${e.pullRequestNumber}`:e.workflowPath?`workflow ${e.workflowPath}`:"unknown job"}function Q(e){let t,n,i=(0,r.c)(27),{additionalFooterContent:l,chatManager:c,errorButtonText:d,errorTitle:u,functionCall:m,inProgressMessage:p,noResultsMessage:h,resultsMapper:f,successButtonText:_,toolLink:b,toolName:C,useSelectReference:N}=e,[S,w]=(0,v.useState)(!1),I=(0,v.useId)();if(i[0]!==l||i[1]!==c||i[2]!==I||i[3]!==d||i[4]!==u||i[5]!==S||i[6]!==m||i[7]!==p||i[8]!==h||i[9]!==f||i[10]!==_||i[11]!==b||i[12]!==C||i[13]!==N){n=Symbol.for("react.early_return_sentinel");e:{let e,r,v,k,T=f(m),{status:E,errorMessage:A}=m;if(m.references?.length===1){let e=m.references[0];if(e)switch(e.type){case"text":E="error",A=e.text;break;case"unsupported":E="unsupported",A=e.text}}if("started"===E){let e;i[16]!==p?(e=(0,a.jsx)(V,{children:p}),i[16]=p,i[17]=e):e=i[17],n=e;break e}let R=S?o.ChevronUpIcon:o.ChevronDownIcon;i[18]===Symbol.for("react.memo_cache_sentinel")?(e=()=>w(J),i[18]=e):e=i[18],i[19]===Symbol.for("react.memo_cache_sentinel")?(r={marginBottom:1},i[19]=r):r=i[19];let L="error"===E?d:"unsupported"===E?h:_;i[20]!==L?(v=(0,a.jsx)("span",{className:j.functionReferenceButtonContents,children:L}),i[20]=L,i[21]=v):v=i[21],i[22]!==I||i[23]!==S||i[24]!==R||i[25]!==v?(k=(0,a.jsx)(g.Q,{"aria-expanded":S,"aria-controls":I,className:j.functionReferenceButton,leadingVisual:R,onClick:e,variant:"invisible",sx:r,children:v}),i[22]=I,i[23]=S,i[24]=R,i[25]=v,i[26]=k):k=i[26],t=(0,a.jsxs)(a.Fragment,{children:[k,S&&(0,a.jsxs)("div",{id:I,className:j.functionReferenceListContainer,children:[(0,a.jsx)(y.l,{children:"error"===E?(0,a.jsxs)(y.l.Item,{children:[u,(0,a.jsx)(y.l.Description,{variant:"block",children:A})]}):"unsupported"===E?(0,a.jsxs)(y.l.Item,{children:[A,(0,a.jsx)(y.l.Description,{truncate:!0,children:""})]}):0===T.length?(0,a.jsxs)(y.l.Item,{children:[h,(0,a.jsx)(y.l.Description,{truncate:!0,children:"Try modifying your query by reframing your question."})]}):T.map((e,t)=>e&&(0,a.jsxs)(y.l.LinkItem,{className:"width-fit",href:e.url,onClick:t=>{N&&e.reference&&(c.selectReference(e.reference),t.preventDefault())},target:"_blank",rel:"noopener",children:[e.leadingIcon&&(0,a.jsx)(y.l.LeadingVisual,{children:(0,a.jsx)(x.A,{icon:e.leadingIcon,sx:{...e.leadingIconColor&&{color:e.leadingIconColor}}})}),(0,a.jsx)(s.A,{className:j.functionReferenceTitle,title:e.title,children:e.title}),(0,a.jsx)(y.l.Description,{variant:"block",children:e.description})]},t))}),(0,a.jsxs)("span",{className:j.functionReferenceListFooter,children:["Copilot used the"," ",(0,a.jsx)("a",{href:b,target:"_blank",rel:"noopener noreferrer",children:C})," ","tool",l&&(0,a.jsxs)(a.Fragment,{children:[". ",l]})]})]})]})}i[0]=l,i[1]=c,i[2]=I,i[3]=d,i[4]=u,i[5]=S,i[6]=m,i[7]=p,i[8]=h,i[9]=f,i[10]=_,i[11]=b,i[12]=C,i[13]=N,i[14]=t,i[15]=n}else t=i[14],n=i[15];return n!==Symbol.for("react.early_return_sentinel")?n:t}function J(e){return!e}function Y(e){let t,n,i,s=(0,r.c)(15),{chatManager:l,functionCall:c,skillArgs:d,useSelectReference:u}=e,m="GitHub API",p=c.references?.[0];if(p){let e=p.type;if(e.endsWith(".api")){let t=e.split(".")[0];t&&(m=`${t.split("-").map(X).join(" ")} API`)}else"api-response"===p.type&&(m=`${p.resourceType} API`)}s[0]!==d.endpoint||s[1]!==d.endpointDescription?(t=d.endpointDescription?{errorButtonText:`An error occurred when using the GitHub API to ${d.endpointDescription}`,inProgressMessage:`Using the GitHub API to ${d.endpointDescription}`,noResultsMessage:`Unable to use the GitHub API to ${d.endpointDescription}`,successButtonText:`Using the GitHub API to ${d.endpointDescription}`}:{errorButtonText:`An error occurred when fetching from ${d.endpoint}`,inProgressMessage:`Fetching endpoint ${d.endpoint}`,noResultsMessage:`Unable to fetch from ${d.endpoint}`,successButtonText:`Using endpoint ${d.endpoint}`},s[0]=d.endpoint,s[1]=d.endpointDescription,s[2]=t):t=s[2];let h=t;return s[3]!==d?(n=e=>e.references?.filter(Z).map(e=>(function(e,t){switch(e.type){case"release.api":return{description:`Release ${e.tag_name} \xb7 ${t.repo}`,leadingIcon:o.TagIcon,title:e.name??"Release",url:e.html_url};case"issue.api":return{description:`#${e.number} \xb7 ${t.repo}`,leadingIcon:o.IssueOpenedIcon,title:e.title??"Issue",url:e.html_url};case"pull-request.api":return{description:`#${e.number} \xb7 ${t.repo}`,leadingIcon:o.GitPullRequestIcon,title:e.title??"Pull request",url:e.html_url};case"repository.api":return{description:e.description||"",title:e.name,leadingIcon:o.RepoIcon,url:e.html_url};case"commit.api":return{description:`${e.sha} \xb7 ${t.repo}`,leadingIcon:o.GitCommitIcon,title:e.commit.message??"Commit",url:e.html_url};case"topic.api":return{description:e.short_description||"",leadingIcon:o.HashIcon,title:e.display_name??e.name};case"api-response":switch(e.resourceType){case"Repository":return{description:e.data.description||"",title:e.data.name,leadingIcon:o.RepoIcon,url:e.data.html_url};case"Issue":return{description:`#${e.data.number} \xb7 ${t.repo}`,leadingIcon:o.IssueOpenedIcon,title:e.data.title??"Issue",url:e.data.html_url};case"Release":return{description:`Release ${e.data.tag_name} \xb7 ${t.repo}`,leadingIcon:o.TagIcon,title:e.data.name??"Release",url:e.data.html_url};case"PullRequest":return{description:`#${e.data.number} \xb7 ${t.repo}`,leadingIcon:o.GitPullRequestIcon,title:e.data.title??"Pull request",url:e.data.html_url};case"Commit":return{description:`${e.data.sha} \xb7 ${t.repo}`,leadingIcon:o.GitCommitIcon,title:e.data.commit.message??"Commit",url:e.data.html_url};case"Topic":return{description:e.data.short_description||"",leadingIcon:o.HashIcon,title:e.data.display_name??e.data.name};default:return{description:"API endpoint returned results successfully",leadingIcon:o.InfoIcon,title:"API results"}}default:return{description:"API endpoint returned results successfully",leadingIcon:o.InfoIcon,title:"API results"}}})(e,d))??[],s[3]=d,s[4]=n):n=s[4],s[5]!==l||s[6]!==c||s[7]!==h.errorButtonText||s[8]!==h.inProgressMessage||s[9]!==h.noResultsMessage||s[10]!==h.successButtonText||s[11]!==n||s[12]!==m||s[13]!==u?(i=(0,a.jsx)(Q,{chatManager:l,errorTitle:"An error occurred when fetching data from the GitHub API",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:m,functionCall:c,errorButtonText:h.errorButtonText,inProgressMessage:h.inProgressMessage,noResultsMessage:h.noResultsMessage,successButtonText:h.successButtonText,useSelectReference:u,resultsMapper:n}),s[5]=l,s[6]=c,s[7]=h.errorButtonText,s[8]=h.inProgressMessage,s[9]=h.noResultsMessage,s[10]=h.successButtonText,s[11]=n,s[12]=m,s[13]=u,s[14]=i):i=s[14],i}function Z(e){return"text"!==e.type}function X(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ee(e){let t,n=(0,r.c)(7),{chatManager:i,functionCall:o,skillArgs:s}=e,l=`An error occurred when retrieving \u{201C}${s.name}\u{201D}`,c=`Getting Figma file \u{201C}${s.name}\u{201D}`,d=`Unable to retrieve \u{201C}${s.name}\u{201D}`,u=`Using result from \u{201C}${s.name}\u{201D}`;return n[0]!==i||n[1]!==o||n[2]!==l||n[3]!==c||n[4]!==d||n[5]!==u?(t=(0,a.jsx)(Q,{chatManager:i,errorButtonText:l,errorTitle:"An error occurred retrieving Figma file",toolLink:"https://figma.com",toolName:"Get Figma",functionCall:o,inProgressMessage:c,noResultsMessage:d,resultsMapper:et,successButtonText:u,useSelectReference:!1}),n[0]=i,n[1]=o,n[2]=l,n[3]=c,n[4]=d,n[5]=u,n[6]=t):t=n[6],t}function et(e){let t=e.references?.[0];return[{title:t?.title||"",url:t?.url||"",description:""}]}let en="https://docs.github.com/en/support/contacting-github-support/using-copilot-in-github-support";function ea(e){let t,n,i=(0,r.c)(8),{chatManager:o,functionCall:s,skillArgs:l}=e,c=l.rawUserQuery;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(h.A,{href:en,rel:"nofollow",target:"_blank",children:"Information on using Copilot in GitHub Support"}),i[0]=t):t=i[0];let d=`An error occurred when searching for \u{201C}${c}\u{201D}`,u=`Searching support documents for \u{201C}${c}\u{201D}`,m=`No support documents for \u{201C}${c}\u{201D} were found`,p=`Using support search results for \u{201C}${c}\u{201D}`;return i[1]!==o||i[2]!==s||i[3]!==d||i[4]!==u||i[5]!==m||i[6]!==p?(n=(0,a.jsx)(Q,{additionalFooterContent:t,chatManager:o,errorButtonText:d,errorTitle:"An error occurred when searching support documents",toolLink:en,toolName:"Support Search",functionCall:s,inProgressMessage:u,noResultsMessage:m,resultsMapper:er,successButtonText:p,useSelectReference:!1}),i[1]=o,i[2]=s,i[3]=d,i[4]=u,i[5]=m,i[6]=p,i[7]=n):n=i[7],n}function er(e){return(e.references?.[0]?.results??[]).map(ei)}function ei(e){return{title:e.title,url:e.url,description:e.url}}function eo(e){return(e.references??[]).map(e=>"file"===e.type||"snippet"===e.type?{description:(0,_.Z8)(e),leadingIcon:o.CodeIcon,reference:e,title:(0,_.z$)(e),url:e.url}:void 0)}try{C.displayName||(C.displayName="BingFunctionButton")}catch{}try{w.displayName||(w.displayName="BingGroundingFunctionButton")}catch{}try{k.displayName||(k.displayName="CodeSearchButton")}catch{}try{T.displayName||(T.displayName="KnowledgeBaseSearchButton")}catch{}try{E.displayName||(E.displayName="GetFileButton")}catch{}try{L.displayName||(L.displayName="GetFileChangesButton")}catch{}try{D.displayName||(D.displayName="GetAlertButton")}catch{}try{F.displayName||(F.displayName="GetDiscussionButton")}catch{}try{V.displayName||(V.displayName="FunctionLoading")}catch{}try{z.displayName||(z.displayName="PlanButton")}catch{}try{W.displayName||(W.displayName="GetJobLogsButton")}catch{}try{Q.displayName||(Q.displayName="ExpandableFunctionButton")}catch{}try{Y.displayName||(Y.displayName="GetGitHubDataButton")}catch{}try{ee.displayName||(ee.displayName="FigmaButton")}catch{}try{ea.displayName||(ea.displayName="SupportSearchButton")}catch{}let es=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(o.SearchIcon,{}),t[0]=e):e=t[0],e},el=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(o.FileIcon,{}),t[0]=e):e=t[0],e},ec=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(o.TagIcon,{}),t[0]=e):e=t[0],e},ed=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(o.PlayIcon,{}),t[0]=e):e=t[0],e},eu=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(o.BookIcon,{}),t[0]=e):e=t[0],e},em=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(o.CommentDiscussionIcon,{}),t[0]=e):e=t[0],e},ep=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(o.TasklistIcon,{}),t[0]=e):e=t[0],e},eh="planning response",ef=e=>{switch(e.kind){case"bing-search":return{id:"bing-search",referenceType:"web-search",loadingText:`Using Bing to search for "${e.query}"`,completedText:`Bing results for "${e.query}"`,icon:i._,name:"Bing search",activeSkillText:"searching Bing"};case"lexical-code-search":return{id:"codesearch",loadingText:`Search for "${e.query}" in "${e.scopingQuery}"`,completedText:`Search results for "${e.query}" in "${e.scopingQuery}"`,icon:es,name:"Code search",activeSkillText:"searching the codebase"};case"semantic-code-search":return{id:"codesearch",loadingText:`Search for "${e.query}" in "${e.repoOwner}/${e.repoName}"`,completedText:`Search results for "${e.query}" in "${e.repoOwner}/${e.repoName}"`,icon:es,name:"Code search",activeSkillText:"searching the codebase"};case"kb-search":return{id:"kb-search",loadingText:`Searching for "${e.query}" in the knowledge base`,completedText:`Knowledge base search results for "${e.query}"`,icon:eu,name:"Knowledge base search",activeSkillText:"searching the knowledge base"};case"getalert":return{id:"getalert",loadingText:"Retrieving information about alerts",completedText:"Including information about alerts",icon:()=>(0,a.jsx)(o.ShieldIcon,{}),name:"Get alert",activeSkillText:"getting alert"};case"get-github-data":return{id:"get-github-data",loadingText:`Fetching ${e.endpoint}`,completedText:`Results of ${e.endpoint}`,icon:ec,name:"Get GitHub Data",activeSkillText:"getting data"};case"get-actions-job-logs":{let t=K(e),n=t.charAt(0).toUpperCase()+t.slice(1);return{id:"get-actions-jog-logs",loadingText:`Retrieving ${t} in ${e.repo}`,completedText:`${n} in ${e.repo}`,icon:ed,name:"Get job logs",activeSkillText:"getting job logs"}}case"getdiscussion":return{id:"getdiscussion",loadingText:`Fetching discussion ${e.discussionNumber}`,completedText:`Details about discussion #${e.discussionNumber}`,icon:em,name:"Get discussion",activeSkillText:"getting discussion"};case"getfile":return{id:"getfile",loadingText:"Searching for file",completedText:"Using results of get file",icon:el,name:"Get file",activeSkillText:"searching for file"};case"getfilechanges":return{id:"getfilechanges",loadingText:"Searching for file changes",completedText:`File changes for ${e.path} in ${e.repo}`,icon:el,name:"Get file changes",activeSkillText:"searching for file changes"};case"planskill":return{id:"planskill",loadingText:"Planning response...",completedText:"Plan created",icon:ep,name:"Plan skill",activeSkillText:"planning response"};case"support-search":return{id:"supportsearch",loadingText:"Searching for support documents",completedText:"Using results of support search",icon:eu,name:"Support search",activeSkillText:"searching for support documents"};case"get-figma":return{id:"getfigma",loadingText:"Analyzing Figma file",completedText:"Using results of Figma file",icon:eu,name:"Get Figma",activeSkillText:"analyzing Figma file"};case"codesearchagentskill":return{id:"codesearchagentskill",loadingText:"Using the code search agent",completedText:"Using results of code search agent",icon:eu,name:"Code Search Agent",activeSkillText:"searching the codebase"}}};function eg(e){let t,n,i,o,l=(0,r.c)(10),{maxWidth:c,functionMetadata:d}=e;return l[0]!==d?(t=d.icon(),l[0]=d,l[1]=t):t=l[1],l[2]!==c?(n={maxWidth:c},l[2]=c,l[3]=n):n=l[3],l[4]!==d.completedText||l[5]!==n?(i=(0,a.jsx)(s.A,{title:d.completedText,sx:n,children:d.completedText}),l[4]=d.completedText,l[5]=n,l[6]=i):i=l[6],l[7]!==t||l[8]!==i?(o=(0,a.jsxs)(a.Fragment,{children:[t,i]}),l[7]=t,l[8]=i,l[9]=o):o=l[9],o}function ey(e){let t,n,i,o,l=(0,r.c)(10),{maxWidth:c,functionMetadata:d}=e;return l[0]!==d?(t=d.icon(),l[0]=d,l[1]=t):t=l[1],l[2]!==c?(n={maxWidth:c},l[2]=c,l[3]=n):n=l[3],l[4]!==d.loadingText||l[5]!==n?(i=(0,a.jsx)(s.A,{title:d.loadingText,sx:n,children:d.loadingText}),l[4]=d.loadingText,l[5]=n,l[6]=i):i=l[6],l[7]!==t||l[8]!==i?(o=(0,a.jsxs)(a.Fragment,{children:[t,i]}),l[7]=t,l[8]=i,l[9]=o):o=l[9],o}function ex(e){let t,n,i,o,s,u,m,p,h,f=(0,r.c)(15),{functionCall:g,functionMetadata:y}=e;return f[0]===Symbol.for("react.memo_cache_sentinel")?(t={p:2},f[0]=t):t=f[0],f[1]===Symbol.for("react.memo_cache_sentinel")?(n={fontSize:1},f[1]=n):n=f[1],f[2]!==y.activeSkillText?(i=(0,a.jsxs)(l.A,{as:"h3",sx:n,children:["An error occurred while ",y.activeSkillText]}),f[2]=y.activeSkillText,f[3]=i):i=f[3],f[4]===Symbol.for("react.memo_cache_sentinel")?(o={m:0},f[4]=o):o=f[4],f[5]!==g.errorMessage?(s=(0,a.jsx)(c.A,{as:"p",sx:o,children:g.errorMessage}),f[5]=g.errorMessage,f[6]=s):s=f[6],f[7]===Symbol.for("react.memo_cache_sentinel")?(u={mt:2,mb:0,fontSize:0,fontWeight:"normal",color:"fg.subtle"},f[7]=u):u=f[7],f[8]===Symbol.for("react.memo_cache_sentinel")?(m={fontWeight:"semibold"},f[8]=m):m=f[8],f[9]!==y.name?(p=(0,a.jsxs)(c.A,{as:"p",sx:u,children:["Copilot used the ",(0,a.jsx)(c.A,{sx:m,children:y.name})," tool"]}),f[9]=y.name,f[10]=p):p=f[10],f[11]!==i||f[12]!==s||f[13]!==p?(h=(0,a.jsxs)(d.A,{sx:t,children:[i,s,p]}),f[11]=i,f[12]=s,f[13]=p,f[14]=h):h=f[14],h}function ev(e){let t,n,i,o=(0,r.c)(7),{functionCall:s,functionMetadata:l,panelWidth:c}=e,u=c?c-130:p.J.DEFAULT_PANEL_WIDTH;o[0]!==s||o[1]!==l||o[2]!==u?(t=s?.status==="error"?(0,a.jsx)(ex,{functionCall:s,functionMetadata:l}):s?.status==="completed"?(0,a.jsx)(eg,{maxWidth:u,functionMetadata:l}):(0,a.jsx)(ey,{maxWidth:u,functionMetadata:l}),o[0]=s,o[1]=l,o[2]=u,o[3]=t):t=o[3];let m=t;return o[4]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",gap:"6px",alignItems:"center"},o[4]=n):n=o[4],o[5]!==m?(i=(0,a.jsx)(d.A,{sx:n,children:m}),o[5]=m,o[6]=i):i=o[6],i}function e_(e,t,n,r,i,o){if(!e||"confirmation error"===e.errorMessage)return null;switch(i.kind){case"bing-search":if(m.W.bingGroundingUIEnabled)return(0,a.jsx)(w,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});return(0,a.jsx)(C,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"lexical-code-search":case"semantic-code-search":return(0,a.jsx)(k,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"getalert":return(0,a.jsx)(D,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"getfile":return(0,a.jsx)(E,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"getfilechanges":return(0,a.jsx)(L,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"getdiscussion":return(0,a.jsx)(F,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"get-actions-job-logs":return(0,a.jsx)(W,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"kb-search":return(0,a.jsx)(T,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"planskill":return(0,a.jsx)(z,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"get-github-data":return(0,a.jsx)(Y,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"support-search":return(0,a.jsx)(ea,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});case"get-figma":if(!m.W.immersiveFigmaIntegration)return(0,a.jsx)(a.Fragment,{});return(0,a.jsx)(ee,{chatManager:n,functionCall:e,skillArgs:i,useSelectReference:o});default:return(0,a.jsx)("div",{className:"border rounded-2 p-2",children:(0,a.jsx)(ev,{functionCall:e,functionMetadata:t,panelWidth:r,parsedArgs:i})})}}function eb(e){let t,n=(0,r.c)(8);e:{let a,r,i;if(!e.arguments||!u.xP.includes(e.slug)){let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e={functionMetadata:void 0,functionRenderer:void 0,parsedArgs:void 0},n[0]=e):e=n[0],t=e;break e}n[1]!==e.arguments||n[2]!==e.slug?(r=ef(a={...JSON.parse(e.arguments),kind:e.slug}),n[1]=e.arguments,n[2]=e.slug,n[3]=a,n[4]=r):(a=n[3],r=n[4]);let o=r;n[5]!==o||n[6]!==a?(i={functionMetadata:o,functionRenderer:e_,parsedArgs:a},n[5]=o,n[6]=a,n[7]=i):i=n[7],t=i}return t}function ej(e){if(!e)return eh;let t=function(e){if(e)return ef({...JSON.parse(e?.arguments||"{}"),kind:e.slug})}(e);return e.statusMessage??t?.activeSkillText??eh}try{es.displayName||(es.displayName="CodeSearchIcon")}catch{}try{el.displayName||(el.displayName="GetFileIcon")}catch{}try{ec.displayName||(ec.displayName="ReleaseIcon")}catch{}try{ed.displayName||(ed.displayName="JobIcon")}catch{}try{eu.displayName||(eu.displayName="KnowledgeBaseIcon")}catch{}try{em.displayName||(em.displayName="DiscussionIcon")}catch{}try{ep.displayName||(ep.displayName="PlanIcon")}catch{}try{eg.displayName||(eg.displayName="FunctionCompleted")}catch{}try{ey.displayName||(ey.displayName="FunctionLoading")}catch{}try{ex.displayName||(ex.displayName="FunctionError")}catch{}try{ev.displayName||(ev.displayName="FunctionTitle")}catch{}},4699:(e,t,n)=>{n.d(t,{h:()=>l});var a=n(74848),r=n(21728),i=n(95726),o=n(34164);let s={interruptedBanner:"InterruptedBanner-module__interruptedBanner--XDG6C",hasContent:"InterruptedBanner-module__hasContent--NwTH4"};function l(e){let t,n,l=(0,r.c)(4),{messageHasContent:c}=e,d=c&&s.hasContent;return l[0]!==d?(t=(0,o.$)(s.interruptedBanner,d),l[0]=d,l[1]=t):t=l[1],l[2]!==t?(n=(0,a.jsx)(i.l,{className:t,"data-testid":"chat-message-interrupted",description:"Copilot was interrupted before it could finish this message.",hideTitle:!0,title:"Message interrupted",variant:"info"}),l[2]=t,l[3]=n):n=l[3],n}try{l.displayName||(l.displayName="InterruptedBanner")}catch{}},69458:(e,t,n)=>{n.d(t,{E:()=>u});var a=n(74848),r=n(21728),i=n(10871),o=n(55847),s=n(2724),l=n(96540);let c={dialog:"InterviewSurveyDialog-module__dialog--vBqY6",body:"InterviewSurveyDialog-module__body--zTKei",primaryText:"InterviewSurveyDialog-module__primaryText--E49Ba InterviewSurveyDialog-module__text--AnLTc",secondaryText:"InterviewSurveyDialog-module__secondaryText--uX6h1 InterviewSurveyDialog-module__text--AnLTc",surveyLink:"InterviewSurveyDialog-module__surveyLink--LnhEL",noThanksButton:"InterviewSurveyDialog-module__noThanksButton--loLSW"};function d(e,t){let n,d,u,m,p=(0,r.c)(10),{title:h,onClose:f}=e,g=void 0===h?"Give feedback":h,[y,x]=(0,l.useState)(!1);p[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:()=>x(!0)}),p[0]=n):n=p[0],(0,l.useImperativeHandle)(t,n),p[1]!==f?(d=e=>{x(!1),f?.(e)},p[1]=f,p[2]=d):d=p[2];let v=d;p[3]!==v?(u=()=>(0,a.jsxs)("div",{className:c.body,children:[(0,a.jsx)("img",{alt:"Mona and Copilot flying a Hubot-themed spaceship",src:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship.png",srcSet:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship@2x.png 2x"}),(0,a.jsx)("span",{className:c.primaryText,children:"Would you like to participate in our research?"}),(0,a.jsx)("span",{className:c.secondaryText,children:"You will be compensated for your time"}),(0,a.jsx)(i.z,{variant:"primary",className:c.surveyLink,href:"/github-copilot/chat/feedback/interview-survey",target:"_blank",children:"Book a session"}),(0,a.jsx)(o.Q,{variant:"link",className:c.noThanksButton,onClick:()=>v("no-thanks"),children:"No, thanks"})]}),p[3]=v,p[4]=u):u=p[4];let _=u;return p[5]!==v||p[6]!==y||p[7]!==_||p[8]!==g?(m=y&&(0,a.jsx)(s.l,{className:c.dialog,onClose:()=>v("close"),title:g,renderBody:_}),p[5]=v,p[6]=y,p[7]=_,p[8]=g,p[9]=m):m=p[9],m}let u=(0,l.forwardRef)(d);try{d.displayName||(d.displayName="InterviewSurveyDialogInner")}catch{}try{u.displayName||(u.displayName="InterviewSurveyDialog")}catch{}},75320:(e,t,n)=>{n.d(t,{Y:()=>I});var a,r=n(74848),i=n(21728),o=n(70170),s=n(38007),l=n(98386),c=n(42080),d=n(17515),u=n(60039),m=n(16255),p=n(73451),h=n(19647),f=n(55847),g=n(2724),y=n(96540),x=n(40961),v=n(34901),_=n(47397);let b={footerContainer:"PersonalInstructionsDialog-module__footerContainer--YsPvr"};var j=n(38621),C=n(15385);let N={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},S=(0,y.forwardRef)(function(e,t){let n,a,o,s,l,c,d,u,m=(0,i.c)(19),{onSelect:p}=e,[h,f]=(0,y.useState)(!1);m[0]!==h?(n=()=>f(!h),m[0]=h,m[1]=n):n=m[1];let g=n;m[2]===Symbol.for("react.memo_cache_sentinel")?(a={marginBottom:"1px"},m[2]=a):a=m[2],m[3]!==p||m[4]!==h?(o=h&&Object.entries(N)?.map(e=>{let[t,n]=e;return(0,r.jsxs)(C.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>p(t,n.body),children:[(0,r.jsx)(j.PlusIcon,{}),t]},t)}),m[3]=p,m[4]=h,m[5]=o):o=m[5],m[6]!==o?(s=(0,r.jsx)(C.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:o}),m[6]=o,m[7]=s):s=m[7];let x=h?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(l={border:"1px solid transparent"},m[8]=l):l=m[8],m[9]!==h?(c=h?(0,r.jsx)(j.XIcon,{}):(0,r.jsx)(j.LightBulbIcon,{}),m[9]=h,m[10]=c):c=m[10],m[11]!==x||m[12]!==c||m[13]!==g?(d=(0,r.jsx)(C.l,{className:"d-flex flex-column flex-justify-end",children:(0,r.jsx)(C.l.Item,{"aria-label":x,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:l,onSelect:g,children:c})}),m[11]=x,m[12]=c,m[13]=g,m[14]=d):d=m[14],m[15]!==t||m[16]!==s||m[17]!==d?(u=(0,r.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:a,children:[s,d]}),m[15]=t,m[16]=s,m[17]=d,m[18]=u):u=m[18],u});try{S.displayName||(S.displayName="PersonalInstructionsTemplates")}catch{}try{(a=PersonalInstructionsTemplatesWithRef).displayName||(a.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let w=(e,t)=>{let n,a,r=(0,i.c)(4),s=void 0===t?500:t,[l,c]=(0,y.useState)(48);return r[0]!==e||r[1]!==s?(n=()=>{let t=(0,o.s)(()=>{e?.current&&c(e.current.clientHeight??48)},s),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},a=[e,s],r[0]=e,r[1]=s,r[2]=n,r[3]=a):(n=r[2],a=r[3]),(0,y.useEffect)(n,a),l},I=({onDismiss:e,returnFocusRef:t})=>{let n=(0,v.Pk)(),a=(0,_.b)(),[i,o]=(0,y.useState)(n.personalInstructions??""),[j,C]=(0,y.useState)(void 0),[N,I]=(0,y.useState)(!1),T=(0,y.useRef)(null),E=(0,y.useRef)(null),[A,R]=(0,y.useState)(""),L=w(E);(0,d.N)(()=>{T?.current&&(T.current.scrollTop=T.current.scrollHeight)},[i]);let P=(0,y.useCallback)(async()=>{if(!N){I(!0),A&&(0,s.BI)("copilot_personal_instruction_template_usage",{content:A});try{let n=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:i}});if(n.ok)(0,s.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),a.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:i}),(0,x.flushSync)(()=>e()),t.current?.focus();else{let e=await n.json();C(String(e.errorMessage))}}catch{C("An error occurred while saving your personal instructions.")}finally{I(!1)}}},[N,i,a,t,e,A]),D=(e,t)=>{t&&(o(i?`${i}
${t}`:t),R(e),T?.current?.focus())},O=()=>{P()},M=(0,y.useCallback)(()=>{(0,s.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,x.flushSync)(()=>e()),t.current?.focus()},[e,t]);return(0,r.jsx)(m.Z,{children:(0,r.jsx)(g.l,{onClose:M,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",renderBody:()=>(0,r.jsx)(g.l.Body,{children:(0,r.jsx)("form",{onSubmit:P,children:(0,r.jsxs)(p.A,{children:[(0,r.jsx)(p.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,r.jsx)("div",{className:"width-full position-relative",children:(0,r.jsxs)(c.tL,{commands:{"github:submit-form":O},children:[(0,r.jsx)(h.Ay,{ref:T,className:"width-full",style:{paddingBottom:`${L}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:i,validationStatus:j||i.length>4e3?"error":void 0,...(0,l.G)("prompt-input"),onChange:e=>{o(e.target.value),C(void 0)}}),(0,r.jsx)(S,{ref:E,onSelect:D})]})}),(0,r.jsx)(k,{text:i,promptCharLimit:4e3}),j&&(0,r.jsx)(p.A.Validation,{variant:"error",children:(0,r.jsx)("span",{...(0,l.G)("error-message"),children:j})})]})})}),renderFooter:()=>(0,r.jsxs)("div",{className:b.footerContainer,children:[(0,r.jsx)(f.Q,{variant:"default",onClick:M,children:"Cancel"}),(0,r.jsx)(f.Q,{loading:N,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:P,children:"Save"})]})})})};function k(e){let t,n,a,o,s=(0,i.c)(10),{text:c,promptCharLimit:d}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.G)("current-character-count"),s[0]=t):t=s[0],s[1]!==c.length?(n=(0,r.jsx)("span",{className:"text-tabular-nums",...t,children:c.length}),s[1]=c.length,s[2]=n):n=s[2],s[3]!==d||s[4]!==n?(a=(0,r.jsxs)(r.Fragment,{children:[n," ","/ ",d," characters"]}),s[3]=d,s[4]=n,s[5]=a):a=s[5];let u=a;return s[6]!==u||s[7]!==d||s[8]!==c.length?(o=(0,r.jsx)(r.Fragment,{children:c.length>d?(0,r.jsx)(p.A.Validation,{variant:"error",children:u}):(0,r.jsx)(p.A.Caption,{children:u})}),s[6]=u,s[7]=d,s[8]=c.length,s[9]=o):o=s[9],o}try{I.displayName||(I.displayName="PersonalInstructionsDialog")}catch{}try{k.displayName||(k.displayName="CharacterCount")}catch{}},70066:(e,t,n)=>{n.d(t,{Cb:()=>f,Dq:()=>d,E5:()=>c,Gj:()=>u,UJ:()=>y,cB:()=>p,f1:()=>m,hl:()=>g,zc:()=>h});var a=n(74848),r=n(21728),i=n(16255),o=n(75177),s=n(10569),l=n(96540);let c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u="copilotChatPortalRoot",m="copilotChatTopicPickerPortalRoot",p=()=>{let e,t,n,s=(0,r.c)(3),c=(0,l.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(c.current,u)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,l.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(o.A,{ref:c,sx:{position:"absolute",top:0,right:0,zIndex:100}}),s[2]=n):n=s[2],n},h=()=>{let e,t,n,s=(0,r.c)(3),d=(0,l.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(d.current,c)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,l.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(o.A,{ref:d,sx:{position:"absolute",top:0,right:0}}),s[2]=n):n=s[2],n},f=()=>{let e,t,n,o=(0,r.c)(3),s=(0,l.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(s.current,d)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,l.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("div",{ref:s}),o[2]=n):n=o[2],n},g=()=>{let e,t,n,o=(0,r.c)(3),s=(0,l.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(s.current,m)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,l.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("div",{ref:s}),o[2]=n):n=o[2],n},y=e=>{let t,n,i,o,d,u,m=(0,r.c)(10);m[0]!==e?({children:t,portalContainerName:i,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i):(t=m[1],n=m[2],i=m[3]);let[p,h]=(0,l.useState)(x);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(o=()=>h(!0),d=[],m[4]=o,m[5]=d):(o=m[4],d=m[5]),(0,l.useEffect)(o,d),!p)return null;let f=i||c;return m[6]!==t||m[7]!==n||m[8]!==f?(u=(0,a.jsx)(s.W.Overlay,{...n,portalContainerName:f,children:t}),m[6]=t,m[7]=n,m[8]=f,m[9]=u):u=m[9],u};try{p.displayName||(p.displayName="ChatPortalContainer")}catch{}try{h.displayName||(h.displayName="MenuPortalContainer")}catch{}try{f.displayName||(f.displayName="MessagesPortalContainer")}catch{}try{g.displayName||(g.displayName="TopicPickerPortalContainer")}catch{}try{y.displayName||(y.displayName="ActionMenuOverlay")}catch{}function x(){return"undefined"!=typeof document}},74302:(e,t,n)=>{n.d(t,{X:()=>v});var a=n(74848),r=n(21728),i=n(38621),o=n(73451),s=n(19647),l=n(9591),c=n(75177),d=n(46309),u=n(81679),m=n(87330),p=n(55847),h=n(16255),f=n(2724),g=n(96540),y=n(74244),x=n(47397);let v=e=>{let t,n,v,b,j,C,N,S,w,I,k,T,E,A,R,L,P,D,O,M,B,F,$,U,V,z,W=(0,r.c)(56),{onDismiss:H,promptDialogRef:q}=e,G=(0,x.b)(),K=y.J.settings,[Q,J]=(0,g.useState)(K?.instructionPrompt||void 0);W[0]===Symbol.for("react.memo_cache_sentinel")?(t=K?.skillOverrides??[],W[0]=t):t=W[0];let[Y,Z]=(0,g.useState)(t),[X,ee]=(0,g.useState)(K?.temperature||.7),et=(0,g.useRef)(void 0);W[1]!==G||W[2]!==H||W[3]!==Q||W[4]!==X||W[5]!==Y?(n=()=>{let e=Y.filter(_);G.setCopilotSettings({instructionPrompt:Q||"",skillOverrides:e,temperature:X}),H()},W[1]=G,W[2]=H,W[3]=Q,W[4]=X,W[5]=Y,W[6]=n):n=W[6];let en=n;W[7]!==G?(v=async()=>{if(et.current)return void J(et.current);let e=await G.getSystemPrompt();et.current=e,J(e)},W[7]=G,W[8]=v):v=W[8];let ea=v;W[9]!==ea||W[10]!==Q?(b=()=>{(async()=>{void 0===Q&&await ea()})()},W[9]=ea,W[10]=Q,W[11]=b):b=W[11],W[12]!==ea||W[13]!==G||W[14]!==Q?(j=[ea,G,Q],W[12]=ea,W[13]=G,W[14]=Q,W[15]=j):j=W[15],(0,g.useEffect)(b,j),W[16]!==ea?(C=()=>{ea(),Z([]),ee(.7)},W[16]=ea,W[17]=C):C=W[17];let er=C;return W[18]===Symbol.for("react.memo_cache_sentinel")?(N={overflow:"auto"},W[18]=N):N=W[18],W[19]===Symbol.for("react.memo_cache_sentinel")?(S=(0,a.jsx)(o.A.Label,{children:"System Instructions"}),W[19]=S):S=W[19],W[20]===Symbol.for("react.memo_cache_sentinel")?(w=(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Make adjustments to the system instructions or add new instructions."})}),W[20]=w):w=W[20],W[21]===Symbol.for("react.memo_cache_sentinel")?(I={my:2},W[21]=I):I=W[21],W[22]===Symbol.for("react.memo_cache_sentinel")?(k=e=>J(e.target.value),W[22]=k):k=W[22],W[23]!==Q?(T=(0,a.jsxs)(o.A,{children:[S,w,(0,a.jsx)(s.Ay,{block:!0,sx:I,"aria-label":"Prompt",name:"Prompt",value:Q,onChange:k})]}),W[23]=Q,W[24]=T):T=W[24],W[25]===Symbol.for("react.memo_cache_sentinel")?(E={pt:3},A=(0,a.jsx)(o.A.Label,{children:"Temperature"}),R=(0,a.jsx)(o.A.Caption,{children:"Controls the randomness of the model's responses. Lower temperatures are more deterministic, while higher temperatures are more random."}),W[25]=E,W[26]=A,W[27]=R):(E=W[25],A=W[26],R=W[27]),W[28]===Symbol.for("react.memo_cache_sentinel")?(L=e=>ee(Number(e.target.value)),W[28]=L):L=W[28],W[29]!==X?(P=(0,a.jsxs)(o.A,{sx:E,children:[A,R,(0,a.jsx)(l.A,{type:"number",min:"0",max:"1",step:"0.01",block:!0,value:X,onChange:L})]}),W[29]=X,W[30]=P):P=W[30],W[31]===Symbol.for("react.memo_cache_sentinel")?(D=(0,a.jsx)(c.A,{sx:{fontSize:3,py:3},children:"Tools"}),W[31]=D):D=W[31],W[32]!==Y?(O=Y.map((e,t)=>(0,a.jsxs)(g.Fragment,{children:[(0,a.jsxs)(d.B,{direction:"horizontal",className:"py-2",children:[(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"Name"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Slug of tool you want to adjust"})}),(0,a.jsx)(l.A,{defaultValue:e.slug,onChange:e=>{Y.map((n,a)=>{a===t&&(n.slug=e.target.value)})}})]}),(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"Description"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Make changes to the tool description"})}),(0,a.jsx)(l.A,{defaultValue:e.description,onChange:n=>{Y.map((a,r)=>{r===t&&(e.description=n.target.value)})}})]}),(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{id:"toggle",children:"Enabled?"}),(0,a.jsx)(u.A,{size:"small","aria-labelledby":"toggle",defaultChecked:e.enabled,onChange:e=>{Y.map((n,a)=>{a===t&&(n.enabled=e)})}})]}),(0,a.jsx)(m.K,{icon:i.TrashIcon,"aria-label":"Delete tool",variant:"invisible",sx:{mt:"20px"},onClick:()=>{let e=[...Y];1===Y.length?Z([]):(e.splice(t,1),Z(e))}})]}),t===Y.length-1&&(0,a.jsx)(p.Q,{leadingVisual:(0,a.jsx)(i.PlusIcon,{}),onClick:()=>Z([...Y,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add another tool"})]},`tool-${e.slug}-${Math.random()}`)),W[32]=Y,W[33]=O):O=W[33],W[34]!==Y?(M=0===Y.length&&(0,a.jsx)(p.Q,{leadingVisual:(0,a.jsx)(i.PlusIcon,{}),onClick:()=>Z([...Y,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add a tool"}),W[34]=Y,W[35]=M):M=W[35],W[36]!==T||W[37]!==P||W[38]!==O||W[39]!==M?(B=(0,a.jsxs)(f.l.Body,{children:[T,P,D,O,M]}),W[36]=T,W[37]=P,W[38]=O,W[39]=M,W[40]=B):B=W[40],W[41]!==H?(F={type:"button",onClick:H,content:"Cancel"},W[41]=H,W[42]=F):F=W[42],W[43]!==er?($={type:"button",onClick:er,content:"Reset"},W[43]=er,W[44]=$):$=W[44],W[45]!==en?(U={type:"button",onClick:en,content:"Save",buttonType:"primary"},W[45]=en,W[46]=U):U=W[46],W[47]!==F||W[48]!==$||W[49]!==U?(V=(0,a.jsx)(f.l.Footer,{children:(0,a.jsx)(f.l.Buttons,{buttons:[F,$,U]})}),W[47]=F,W[48]=$,W[49]=U,W[50]=V):V=W[50],W[51]!==H||W[52]!==q||W[53]!==B||W[54]!==V?(z=(0,a.jsx)(h.Z,{children:(0,a.jsxs)(f.l,{ref:q,onClose:H,title:"Prompt Settings",width:"xlarge",sx:N,children:[B,V]})}),W[51]=H,W[52]=q,W[53]=B,W[54]=V,W[55]=z):z=W[55],z};try{v.displayName||(v.displayName="PromptDialog")}catch{}function _(e){return e.slug&&e.description}},53655:(e,t,n)=>{n.d(t,{BR:()=>_,lh:()=>C,a_:()=>b});var a,r=n(74848),i=n(21728),o=n(59706),s=n(38621),l=n(63867),c=n(87330),d=n(35642),u=n(34164),m=n(96540),p=n(22069),h=n(34901),f=n(47397),g=n(65011),y=n(39038);let x={referenceToken:"ReferenceToken-module__referenceToken--MoDht",small:"ReferenceToken-module__small--LxJV_",loadingName:"ReferenceToken-module__loadingName--OEUm0",name:"ReferenceToken-module__name--Wq2Bs",trailingVisual:"ReferenceToken-module__trailingVisual--JeIeK",removeButton:"ReferenceToken-module__removeButton--BIbYP",icon:"ReferenceToken-module__icon--WJse5",openIcon:"ReferenceToken-module__openIcon--LVVWZ",closedIcon:"ReferenceToken-module__closedIcon--qYsTG",pullRequestClosedIcon:"ReferenceToken-module__pullRequestClosedIcon--ivG0w",pullRequestMergedIcon:"ReferenceToken-module__pullRequestMergedIcon--S1IFs",figmaIconOuter:"ReferenceToken-module__figmaIconOuter--PpoUe",figmaIcon:"ReferenceToken-module__figmaIcon--x5K98"};var v=n(30581);let _=(0,m.forwardRef)(function(e,t){let n,a,o,l,c,g,y,_,j,S,w,I=(0,i.c)(40),{reference:k,message:T,onClick:E,onRemove:A,size:R,getReferenceVersion:L}=e;I[0]!==A?(n=e=>{A&&("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),A())},I[0]=A,I[1]=n):n=I[1];let P=n,D=(0,f.b)(),O=(0,h.pn)(N),M=(0,h.A3)("selectedThreadID");I[2]!==O||I[3]!==D||I[4]!==T||I[5]!==E||I[6]!==k||I[7]!==M?(a=e=>{if(!E||(E(k,e),!e.defaultPrevented)){if(!O){if(("issue"===k.type||"pull-request"===k.type||"discussion"===k.type)&&(window.open(k.url,"_blank"),self.focus()),["file","thread-scoped-file"].includes(k.type)){let e=M?`/copilot/c/${M}`:"/copilot";e+=`?reference_id=${(0,p.Vb)(k)}`,T&&(e+=`&message_index=${T.messageIndex}`),window.open(e,"_blank");return}["repository","folder","docset","third-party","image","issue","pull-request"].includes(k.type)||(e.preventDefault(),D.selectReference(k))}}},I[2]=O,I[3]=D,I[4]=T,I[5]=E,I[6]=k,I[7]=M,I[8]=a):a=I[8];let B=a,F=(0,h.A3)("currentTopic");I[9]!==k||I[10]!==F?(o=b(k,(0,p.P)(F)),I[9]=k,I[10]=F,I[11]=o):o=I[11];let $=o,U=(0,m.useId)();I[12]!==L||I[13]!==k?(l=L?.(k),I[12]=L,I[13]=k,I[14]=l):l=I[14];let V=l;I[15]!==k?(c=(0,p.JP)(k),I[15]=k,I[16]=c):c=I[16];let z="small"===R&&x.small;I[17]!==z?(g=(0,u.$)(x.referenceToken,z),I[17]=z,I[18]=g):g=I[18];let W=A&&U;return I[19]!==$?(y=$&&(0,r.jsx)($,{size:"small",className:(0,u.$)(x.icon,$===s.IssueOpenedIcon&&x.openIcon,$===s.GitPullRequestIcon&&x.openIcon,$===s.IssueClosedIcon&&x.closedIcon,$===s.GitPullRequestClosedIcon&&x.pullRequestClosedIcon,$===s.GitMergeIcon&&x.pullRequestMergedIcon)}),I[19]=$,I[20]=y):y=I[20],I[21]!==k?(_="loading"===k.type?(0,r.jsx)("span",{className:x.loadingName,children:(0,r.jsx)(d.r,{"aria-hidden":"true"})}):(0,r.jsx)("span",{className:x.name,children:(0,p.z$)(k)}),I[21]=k,I[22]=_):_=I[22],I[23]!==V?(j=void 0!==V&&(0,r.jsx)("span",{className:x.trailingVisual,children:(0,r.jsx)(v.g,{version:V})}),I[23]=V,I[24]=j):j=I[24],I[25]!==U||I[26]!==A||I[27]!==R?(S=A&&(0,r.jsx)(C,{size:R,onRemove:A,descriptionId:U}),I[25]=U,I[26]=A,I[27]=R,I[28]=S):S=I[28],I[29]!==B||I[30]!==P||I[31]!==t||I[32]!==y||I[33]!==_||I[34]!==j||I[35]!==S||I[36]!==c||I[37]!==g||I[38]!==W?(w=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("a",{href:c,className:g,onKeyDown:P,onClick:B,ref:t,"aria-describedby":W,children:[y,_,j,S]})}),I[29]=B,I[30]=P,I[31]=t,I[32]=y,I[33]=_,I[34]=j,I[35]=S,I[36]=c,I[37]=g,I[38]=W,I[39]=w):w=I[39],w});function b(e,t){switch(e.type){case"figma":return j;case"file":return s.FileIcon;case"folder":return s.FileDirectoryFillIcon;case"file-diff":return s.FileDiffIcon;case"snippet":return t&&"languageName"in e&&e.languageName&&g.Yr.has(e.languageName)?s.BookIcon:s.CodeIcon;case"repository":return s.RepoIcon;case"symbol":return s.CodeSquareIcon;case"docset":return s.BookIcon;case"commit":return s.GitCommitIcon;case"pull-request":if("pull-request"===e.type){if(e.draft&&"open"===e.state)return s.GitPullRequestDraftIcon;switch(e.state){case"open":default:return s.GitPullRequestIcon;case"closed":return s.GitPullRequestClosedIcon;case"merged":return s.GitMergeIcon}}return;case"repo-instructions":case"org-instructions":return s.NoteIcon;case"issue":if("issue"===e.type)switch(e.state){case"open":default:return s.IssueOpenedIcon;case"closed":return s.IssueClosedIcon;case"not_planned":return s.SkipIcon}return;case"draft-issue":return s.IssueDraftIcon;case"discussion":return s.CommentDiscussionIcon;case"web-search-result":if("web-search-result"===e.type)if("bing_search"===e.reference_type)return o._;else return s.GlobeIcon;return;case"thread-scoped-file":return"language"in e&&g.Yr.has(e.language)?s.MarkdownIcon:s.CodeIcon;case"loading":return l.A;default:return}}function j(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:x.figmaIconOuter,children:(0,r.jsx)(y._,{className:x.figmaIcon})}),t[0]=e):e=t[0],e}let C=e=>{let t,n,a,o,l=(0,i.c)(12),{size:d,onRemove:u,descriptionId:m,onMouseOver:p,onMouseLeave:h}=e;return l[0]!==u?(t=e=>{e.stopPropagation(),e.preventDefault(),u()},l[0]=u,l[1]=t):t=l[1],l[2]!==h||l[3]!==p||l[4]!==d||l[5]!==t?(n=(0,r.jsx)(c.K,{tabIndex:-1,"aria-hidden":!0,size:d,icon:s.XIcon,"aria-label":"Remove",onClick:t,tooltipDirection:"n",variant:"invisible",className:x.removeButton,onMouseOver:p,onMouseLeave:h}),l[2]=h,l[3]=p,l[4]=d,l[5]=t,l[6]=n):n=l[6],l[7]!==m?(a=(0,r.jsx)("span",{hidden:!0,id:m,children:"press backspace or delete to remove"}),l[7]=m,l[8]=a):a=l[8],l[9]!==n||l[10]!==a?(o=(0,r.jsxs)(r.Fragment,{children:[n,a]}),l[9]=n,l[10]=a,l[11]=o):o=l[11],o};try{_.displayName||(_.displayName="ReferenceToken")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}try{j.displayName||(j.displayName="StylizedFigmaIcon")}catch{}try{C.displayName||(C.displayName="RemoveReferenceTokenButton")}catch{}function N(e){return"immersive"===e.mode}},76016:(e,t,n)=>{n.d(t,{Ee:()=>b,FZ:()=>j,X1:()=>S});var a=n(74848),r=n(21728),i=n(38007),o=n(19139),s=n(98386),l=n(15385),c=n(83978),d=n(34164),u=n(96540),m=n(40961),p=n(6612),h=n(51295),f=n(22069),g=n(74244),y=n(34901),x=n(47397),v=n(70066),_=n(99629);function b(e){let t,n,i,o=(0,r.c)(9),{selectedThreadID:s,currentTopic:l}=(0,y.Pk)(),c=(0,x.b)();o[0]!==c||o[1]!==s?(t=async e=>{g.J.setSelectedTopic(s??"",e.toString()),c.clearCurrentReferences(["image","issue"]),await c.fetchCurrentRepo(e)},o[0]=c,o[1]=s,o[2]=t):t=o[2];let d=t;return o[3]!==l?(n=new Set(l?[l.id]:[]),o[3]=l,o[4]=n):n=o[4],o[5]!==d||o[6]!==e||o[7]!==n?(i=(0,a.jsx)(S,{...e,selectionVariant:"instant",selectedRepoIds:n,onSelectRepo:d,description:"Choose a repository to chat about."}),o[5]=d,o[6]=e,o[7]=n,o[8]=i):i=o[8],i}function j(e){let t,n,i,o,s=(0,r.c)(12),{currentReferences:l}=(0,y.Pk)(),c=(0,x.b)();s[0]!==l?(n=new Set((t=l.filter(N)).map(C)),s[0]=l,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let d=n,[m,p]=(0,u.useState)();s[3]!==c||s[4]!==e||s[5]!==t?(i=async n=>{p(void 0);let a=t.find(e=>e.id===n);if(a)return void c.removeReference(a);let r=await c.service.fetchRepo(n);if(!r.ok){p("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}let i=(0,f.qS)(r.payload);c.addReference(i,"repoMenu")},s[3]=c,s[4]=e,s[5]=t,s[6]=i):i=s[6];let h=i;return s[7]!==m||s[8]!==e||s[9]!==d||s[10]!==h?(o=(0,a.jsx)(S,{...e,selectionVariant:"multiple",selectedRepoIds:d,onSelectRepo:h,description:"Choose repositories to chat about.",error:m}),s[7]=m,s[8]=e,s[9]=d,s[10]=h,s[11]=o):o=s[11],o}function C(e){return e.id}function N(e){return"repository"===e.type}function S(e){let t,n,f,g,x,b,j,C,N,S,k,T,E,A,R,L,P,D,O,M,B,F=(0,r.c)(55),{open:$,onOpenChange:U,submitReturnFocusRef:V,cancelReturnFocusRef:z,selectedRepoIds:W,featuredRepoIds:H,onSelectRepo:q,selectionVariant:G,description:K,error:Q,ownerDisplayLogin:J,includeForks:Y}=e,Z=void 0===H?W:H,{ssoOrganizations:X}=(0,y.Pk)(),[ee,et]=(0,u.useState)("");F[0]!==$?(t=()=>{$||et("")},n=[$],F[0]=$,F[1]=t,F[2]=n):(t=F[1],n=F[2]),(0,u.useEffect)(t,n);let{repositories:en,loading:ea}=(0,p.U)(ee,$,void 0,J,void 0!==Y&&Y);e:{if(ea){f="Loading repositories";break e}if(0===en.length){f="No repositories found";break e}if(1===en.length){f="1 repository found";break e}f=`${en.length} repositories found`}let er=f;F[3]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{et(e.currentTarget.value)},F[3]=g):g=F[3];let ei=g;t:{let e;if(!X){let e;F[4]===Symbol.for("react.memo_cache_sentinel")?(e=[],F[4]=e):e=F[4],x=e;break t}F[5]!==X?(e=X.map(I),F[5]=X,F[6]=e):e=F[6],x=e}let eo=x;F[7]!==Z?(b=e=>Z.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",F[7]=Z,F[8]=b):b=F[8];let{featuredRepos:es,nonFeaturedRepos:el}=(0,h.O)(en,b),[ec,ed]=(0,u.useState)(!1);F[9]!==q?(j=async e=>{ed(!0),await q(e),ed(!1)},F[9]=q,F[10]=j):j=F[10];let eu=j;F[11]===Symbol.for("react.memo_cache_sentinel")?(C=(0,s.G)("repo-select-panel"),F[11]=C):C=F[11];let em=c.X;F[12]!==z.current||F[13]!==U?(N=()=>{(0,m.flushSync)(()=>U(!1)),z.current?.focus(),(0,i.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},F[12]=z.current,F[13]=U,F[14]=N):N=F[14],F[15]!==U||F[16]!==V.current?(S=()=>{(0,m.flushSync)(()=>U(!1)),V.current?.focus()},F[15]=U,F[16]=V.current,F[17]=S):S=F[17];let ep="multiple"===G?"Select repositories":"Select a repository",eh=eo.length>0&&"border-bottom-0";F[18]!==eh?(k=(0,d.$)(eh),F[18]=eh,F[19]=k):k=F[19];let ef=!0===ea||ec;F[20]!==ef?(T=(0,a.jsx)(c.X.SearchInput,{loading:ef,onChange:ei,placeholder:"Search repositories","aria-label":"Search repositories"}),F[20]=ef,F[21]=T):T=F[21],F[22]!==k||F[23]!==T?(E=(0,a.jsx)(c.X.Header,{className:k,children:T}),F[22]=k,F[23]=T,F[24]=E):E=F[24],F[25]!==J||F[26]!==eo?(A=(void 0===J||""===J)&&(0,a.jsx)(o.x,{portalContainerName:v.f1,protectedOrgs:eo,redirectURI:w,useFullWidthStyle:!0}),F[25]=J,F[26]=eo,F[27]=A):A=F[27],F[28]===Symbol.for("react.memo_cache_sentinel")?(R=(0,a.jsx)(v.hl,{}),F[28]=R):R=F[28],F[29]!==Q?(L=Q&&(0,a.jsx)(c.X.Message,{variant:"error",size:"inline",children:Q}),F[29]=Q,F[30]=L):L=F[30];let eg=l.l;F[31]===Symbol.for("react.memo_cache_sentinel")?(P={minHeight:340},F[31]=P):P=F[31],F[32]!==er?(D=(0,a.jsx)("div",{className:"sr-only",children:er}),F[32]=er,F[33]=D):D=F[33];let ey="initial"===ea?(0,a.jsx)(c.X.Loading,{children:"Fetching repositories\u2026"}):0!==en.length||ea?(0,a.jsxs)(a.Fragment,{children:[es?.map(e=>(0,a.jsx)(_.W,{repo:e,onSelect:eu,selected:W.has(e.databaseId)},e.databaseId)),es&&el&&(0,a.jsx)(l.l.Divider,{}),el?.map(e=>(0,a.jsx)(_.W,{repo:e,onSelect:eu,selected:W.has(e.databaseId)},e.databaseId))]}):(0,a.jsx)(c.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"});return F[34]!==eg||F[35]!==P||F[36]!==D||F[37]!==ey?(O=(0,a.jsxs)(eg,{sx:P,children:[D,ey]}),F[34]=eg,F[35]=P,F[36]=D,F[37]=ey,F[38]=O):O=F[38],F[39]!==em||F[40]!==K||F[41]!==$||F[42]!==G||F[43]!==N||F[44]!==S||F[45]!==ep||F[46]!==E||F[47]!==A||F[48]!==R||F[49]!==L||F[50]!==O?(M=(0,a.jsxs)(em,{width:"large",maxHeight:"xlarge",onCancel:N,onSubmit:S,open:$,variant:"modal",selectionVariant:G,title:ep,description:K,children:[E,A,R,L,O]}),F[39]=em,F[40]=K,F[41]=$,F[42]=G,F[43]=N,F[44]=S,F[45]=ep,F[46]=E,F[47]=A,F[48]=R,F[49]=L,F[50]=O,F[51]=M):M=F[51],F[52]!==C||F[53]!==M?(B=(0,a.jsx)("div",{...C,children:M}),F[52]=C,F[53]=M,F[54]=B):B=F[54],B}function w(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function I(e){return e.login}try{b.displayName||(b.displayName="RepoTopicSelectPanel")}catch{}try{j.displayName||(j.displayName="RepoReferencesSelectPanel")}catch{}try{S.displayName||(S.displayName="RepoSelectPanel")}catch{}},99629:(e,t,n)=>{n.d(t,{W:()=>s});var a=n(74848),r=n(21728),i=n(39459),o=n(15385);function s(e){let t,n,s,l,c=(0,r.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:p}=e,{databaseId:h,isInOrganization:f,nwo:g,ownerAvatarUrl:y}=u;return c[0]!==h||c[1]!==d?(t=()=>d(h),c[0]=h,c[1]=d,c[2]=t):t=c[2],c[3]!==f||c[4]!==y?(n=(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(i.r,{src:y,square:f,size:16})}),c[3]=f,c[4]=y,c[5]=n):n=c[5],c[6]!==p?(s=p&&(0,a.jsx)(o.l.TrailingVisual,{children:p}),c[6]=p,c[7]=s):s=c[7],c[8]!==g||c[9]!==m||c[10]!==t||c[11]!==n||c[12]!==s?(l=(0,a.jsxs)(o.l.Item,{onSelect:t,selected:m,children:[n,g,s]},g),c[8]=g,c[9]=m,c[10]=t,c[11]=n,c[12]=s,c[13]=l):l=c[13],l}try{s.displayName||(s.displayName="RepositoryListItem")}catch{}},87928:(e,t,n)=>{n.d(t,{$:()=>c});var a=n(74848),r=n(21728),i=n(38621),o=n(87330),s=n(31637),l=n(66912);function c(e){let t,n,c=(0,r.c)(11),{handleRetryMessage:d,disabled:u,showModelPicker:m,model:p,navigateToNewThread:h}=e,f=void 0!==u&&u,g=void 0!==m&&m;c[0]!==d||c[1]!==p?(t=()=>{d(p)},c[0]=d,c[1]=p,c[2]=t):t=c[2];let y=t,{isLicensedLimited:x}=(0,s.xR)();if(g&&(!h||!p))throw Error("navigateToNewThread and model must be provided in order to show the model picker");return c[3]!==f||c[4]!==y||c[5]!==d||c[6]!==x||c[7]!==p||c[8]!==h||c[9]!==g?(n=g?(0,a.jsx)(l.Yb,{onNewThreadSelected:h,limited:x,type:"message-retry",selectedModel:p,onModelSelected:d,disabled:f}):(0,a.jsx)(o.K,{variant:"invisible","aria-label":"Retry","data-testid":"retry-button",onClick:y,icon:i.SyncIcon,disabled:f}),c[3]=f,c[4]=y,c[5]=d,c[6]=x,c[7]=p,c[8]=h,c[9]=g,c[10]=n):n=c[10],n}try{c.displayName||(c.displayName="RetryButton")}catch{}},52523:(e,t,n)=>{n.d(t,{A:()=>C});var a=n(74848),r=n(21728),i=n(52450),o=n(34164),s=n(96540),l=n(31971);let c={scrollContainer:"ServiceView-module__scrollContainer--LFK5G",contentContainer:"ServiceView-module__contentContainer--DZVDS",v3SpacesContent:"ServiceView-module__v3SpacesContent--PvJhy",content:"ServiceView-module__content--B7ctp",small:"ServiceView-module__small--e46Wl",empty:"ServiceView-module__empty--I19W6",banner:"ServiceView-module__banner--kVai_",serviceHeader:"ServiceView-module__serviceHeader--R2TLR",serviceDescription:"ServiceView-module__serviceDescription--koXJM",serviceTitle:"ServiceView-module__serviceTitle--orySH",serviceIcon:"ServiceView-module__serviceIcon--a2C77",section:"ServiceView-module__section--_ycAN",sectionTitle:"ServiceView-module__sectionTitle--hD3JM",sectionGrid:"ServiceView-module__sectionGrid--Fa4lP",sectionGridEmpty:"ServiceView-module__sectionGridEmpty--KiT2u",skeletonCard:"ServiceView-module__skeletonCard--MT87J"};function d(e){let t,n,i,d,m,p=(0,r.c)(12),{children:h,empty:f,width:g}=e;if(p[0]!==h){for(let e of(t=[],n=[],s.Children.toArray(h)))s.isValidElement(e)&&e.type===u?t.push(e):n.push(e);p[0]=h,p[1]=t,p[2]=n}else t=p[1],n=p[2];let y="small"===g;return p[3]!==f||p[4]!==y?(i=(0,o.$)(c.content,{[c.v3SpacesContent]:l.W.spacesV3UI,[c.empty]:f,[c.small]:y}),p[3]=f,p[4]=y,p[5]=i):i=p[5],p[6]!==n||p[7]!==i?(d=(0,a.jsx)("div",{className:i,children:n}),p[6]=n,p[7]=i,p[8]=d):d=p[8],p[9]!==t||p[10]!==d?(m=(0,a.jsx)("div",{className:c.scrollContainer,children:(0,a.jsxs)("div",{className:c.contentContainer,children:[t,d]})}),p[9]=t,p[10]=d,p[11]=m):m=p[11],m}function u(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:c.banner,children:i}),n[0]=i,n[1]=t):t=n[1],t}function m(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:c.serviceHeader,children:i}),n[0]=i,n[1]=t):t=n[1],t}function p(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("section",{className:c.section,children:i}),n[0]=i,n[1]=t):t=n[1],t}function h(e){let t,n=(0,r.c)(2),{icon:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:c.serviceIcon,children:i}),n[0]=i,n[1]=t):t=n[1],t}function f(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("h2",{className:c.serviceTitle,children:i}),n[0]=i,n[1]=t):t=n[1],t}function g(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("p",{className:c.serviceDescription,children:i}),n[0]=i,n[1]=t):t=n[1],t}function y(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("h3",{className:c.sectionTitle,children:i}),n[0]=i,n[1]=t):t=n[1],t}function x(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:c.sectionGridEmpty,children:i}),n[0]=i,n[1]=t):t=n[1],t}function v(e){let t,n,i,o=(0,r.c)(8),{children:l,loading:d}=e;if(void 0!==d&&d){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:c.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(j)}),o[0]=e):e=o[0],e}if(o[1]!==l){let e=s.Children.toArray(l);t=e.find(b),n=e.filter(_),o[1]=l,o[2]=t,o[3]=n}else t=o[2],n=o[3];let u=n;if(0===u.length&&t){let e;return o[4]!==t?(e=(0,a.jsx)(a.Fragment,{children:t}),o[4]=t,o[5]=e):e=o[5],e}return o[6]!==u?(i=(0,a.jsx)("div",{className:c.sectionGrid,children:u}),o[6]=u,o[7]=i):i=o[7],i}function _(e){return!(s.isValidElement(e)&&e.type===x)}function b(e){return s.isValidElement(e)&&e.type===x}function j(e,t){return(0,a.jsx)(i.f,{className:c.skeletonCard},t)}v.Empty=x,p.Title=y,p.Grid=v;let C={Icon:h,Title:f,Description:g,Container:d,Banner:u,Header:m,Section:p};try{d.displayName||(d.displayName="ServiceContainer")}catch{}try{u.displayName||(u.displayName="ServiceBanner")}catch{}try{m.displayName||(m.displayName="ServiceHeader")}catch{}try{p.displayName||(p.displayName="ServiceSection")}catch{}try{h.displayName||(h.displayName="Icon")}catch{}try{f.displayName||(f.displayName="Title")}catch{}try{g.displayName||(g.displayName="Description")}catch{}try{y.displayName||(y.displayName="SectionTitle")}catch{}try{x.displayName||(x.displayName="SectionGridEmpty")}catch{}try{v.displayName||(v.displayName="SectionGrid")}catch{}},5279:(e,t,n)=>{n.d(t,{M:()=>l});var a=n(74848),r=n(21728),i=n(69676),o=n(82678),s=n(96540);function l(e){let t,n,l,c,d=(0,r.c)(8);d[0]!==e?({className:t,...n}=e,d[0]=e,d[1]=t,d[2]=n):(t=d[1],n=d[2]);let u=(0,s.useRef)(null);return d[3]===Symbol.for("react.memo_cache_sentinel")?(l={containerRef:u,focusInStrategy:"first",focusOutBehavior:"stop",bindKeys:i.z0.ArrowHorizontal|i.z0.HomeAndEnd},d[3]=l):l=d[3],(0,o.G)(l),d[4]!==t||d[5]!==e.children||d[6]!==n?(c=(0,a.jsx)("div",{ref:u,className:t,role:"toolbar",...n,children:e.children}),d[4]=t,d[5]=e.children,d[6]=n,d[7]=c):c=d[7],c}try{l.displayName||(l.displayName="Toolbar")}catch{}},85332:(e,t,n)=>{n.d(t,{R:()=>p});var a=n(74848),r=n(21728),i=n(34614),o=n(34164),s=n(7277),l=n(39818),c=n(36721),d=n(13897),u=n(83880),m=n(10370);function p(e){let t,n,i,p,f,g,y,x=(0,r.c)(24),{className:v,accessibleHeader:_}=e,{message:b}=(0,u.V)(),j=b.content??"";x[0]!==j?(t=(0,d._)(j),x[0]=j,x[1]=t):t=x[1];let{availableAgents:C}=(0,l.JE)(t);x[2]!==C?(n=void 0===C?[]:C,x[2]=C,x[3]=n):n=x[3];let N=n;if(x[4]!==_||x[5]!==N||x[6]!==v||x[7]!==b.references||x[8]!==j){let e;x[12]!==b.references?(e=b.references??[],x[12]=b.references,x[13]=e):e=x[13];let t=(0,s.l)().use(c.U,{references:e,agents:N}).parse(j);x[14]!==_?(f=_&&(0,a.jsx)("h3",{className:"sr-only",children:_}),x[14]=_,x[15]=f):f=x[15],x[16]!==v?(i=(0,o.$)(m.A.container,v),x[16]=v,x[17]=i):i=x[17],p=t.children.map(h),x[4]=_,x[5]=N,x[6]=v,x[7]=b.references,x[8]=j,x[9]=i,x[10]=p,x[11]=f}else i=x[9],p=x[10],f=x[11];return x[18]!==i||x[19]!==p?(g=(0,a.jsx)("div",{className:i,children:p}),x[18]=i,x[19]=p,x[20]=g):g=x[20],x[21]!==f||x[22]!==g?(y=(0,a.jsxs)(a.Fragment,{children:[f,g]}),x[21]=f,x[22]=g,x[23]=y):y=x[23],y}function h(e,t){switch(e.type){case"text":return e.value;case"agent-mention":return(0,a.jsx)(f,{agent:e.data.mentionedAgent,children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,a.jsx)("span",{className:m.A.mention,children:e.value},t):e.value}}function f(e){let t,n=(0,r.c)(4),{agent:o,children:s}=e,l=`/integrations/${o.slug}/hovercard`;return n[0]!==o.integrationUrl||n[1]!==s||n[2]!==l?(t=(0,a.jsx)(i.A,{href:o.integrationUrl,"data-hovercard-url":l,className:m.A.mention,children:s}),n[0]=o.integrationUrl,n[1]=s,n[2]=l,n[3]=t):t=n[3],t}try{p.displayName||(p.displayName="UserMessage")}catch{}try{f.displayName||(f.displayName="AgentLink")}catch{}},30581:(e,t,n)=>{n.d(t,{g:()=>s});var a=n(74848),r=n(21728),i=n(2676);let o={version:"VersionName-module__version--DI4zD"};function s(e){let t,n=(0,r.c)(3),{"data-testid":s,version:l}=e;return n[0]!==s||n[1]!==l?(t=(0,a.jsxs)(i.A,{className:o.version,as:"span","data-testid":s,children:["v",l]}),n[0]=s,n[1]=l,n[2]=t):t=n[2],t}try{s.displayName||(s.displayName="VersionName")}catch{}},39038:(e,t,n)=>{n.d(t,{_:()=>i});var a=n(74848),r=n(21728);function i(e){let t,n,i,o,s,l=(0,r.c)(8);return l[0]!==e?({className:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsxs)("g",{clipPath:"url(#clip0_216_3161)",children:[(0,a.jsx)("path",{d:"M7.99837 7.99967C7.99837 6.52683 9.1922 5.33301 10.665 5.33301C12.1379 5.33301 13.3317 6.52683 13.3317 7.99967C13.3317 9.47252 12.1379 10.6663 10.665 10.6663C9.1922 10.6663 7.99837 9.47252 7.99837 7.99967Z",fill:"#1ABCFE"}),(0,a.jsx)("path",{d:"M2.66504 13.3337C2.66504 11.8608 3.85886 10.667 5.33171 10.667H7.99837V13.3337C7.99837 14.8065 6.80455 16.0003 5.33171 16.0003C3.85886 16.0003 2.66504 14.8065 2.66504 13.3337Z",fill:"#0ACF83"}),(0,a.jsx)("path",{d:"M7.99837 0V5.33333H10.665C12.1379 5.33333 13.3317 4.13951 13.3317 2.66667C13.3317 1.19382 12.1379 0 10.665 0H7.99837Z",fill:"#FF7262"}),(0,a.jsx)("path",{d:"M2.665 2.66667C2.665 4.13951 3.85883 5.33333 5.33167 5.33333H7.99833V0H5.33167C3.85883 0 2.665 1.19382 2.665 2.66667Z",fill:"#F24E1E"}),(0,a.jsx)("path",{d:"M2.66504 7.99967C2.66504 9.47252 3.85886 10.6663 5.33171 10.6663H7.99837V5.33301H5.33171C3.85886 5.33301 2.66504 6.52683 2.66504 7.99967Z",fill:"#A259FF"})]}),l[3]=i):i=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_216_3161",children:(0,a.jsx)("rect",{width:"10.6667",height:"16",fill:"white",transform:"translate(2.665)"})})}),l[4]=o):o=l[4],l[5]!==t||l[6]!==n?(s=(0,a.jsxs)("svg",{"aria-label":"Figma logo",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...n,children:[i,o]}),l[5]=t,l[6]=n,l[7]=s):s=l[7],s}try{i.displayName||(i.displayName="FigmaIcon")}catch{}},48053:(e,t,n)=>{n.d(t,{Vx:()=>u});var a,r,i=n(74848),o=n(21728),s=n(28391),l=n(38621),c=n(96540);let d={subList:"Navigation-module__subList--Ued7A",section:"Navigation-module__section--KRddB",expandButton:"Navigation-module__expandButton--v40lv",item:"Navigation-module__item--KtIqz",link:"Navigation-module__link--ybSvz",contextButton:"Navigation-module__contextButton--AhNds",icon:"Navigation-module__icon--szbQF",textWrapper:"Navigation-module__textWrapper--qEAz8",text:"Navigation-module__text--KFINZ"};function u(e){let t,n,a,r,u,m,p,h,f,g,y,x=(0,o.c)(37),{"aria-current":v,children:_,contextMenuComponent:b,expandOnClick:j,hasItems:C,href:N,icon:S,iconOverride:w,onLinkClick:I,id:k,displayName:T,label:E}=e,A=void 0===j||j,[R,L]=(0,c.useState)(!1);x[0]!==R?(t=()=>{L(!R)},x[0]=R,x[1]=t):t=x[1];let P=t;x[2]!==A||x[3]!==k||x[4]!==I?(n=e=>{I?.(e,k),A&&L(!0)},x[2]=A,x[3]=k,x[4]=I,x[5]=n):n=x[5];let D=n;x[6]!==v||x[7]!==D?(a={"aria-current":v,className:d.link,onClick:D},x[6]=v,x[7]=D,x[8]=a):a=x[8];let O=a;return x[9]!==R||x[10]!==C||x[11]!==P?(r=C&&(0,i.jsx)("button",{"aria-label":"Expand","aria-expanded":R,className:d.expandButton,onClick:P,children:R?(0,i.jsx)(l.ChevronDownIcon,{size:12}):(0,i.jsx)(l.ChevronRightIcon,{size:12})}),x[9]=R,x[10]=C,x[11]=P,x[12]=r):r=x[12],x[13]!==S||x[14]!==w?(u=S?(0,i.jsx)(S,{size:16}):w,x[13]=S,x[14]=w,x[15]=u):u=x[15],x[16]!==u?(m=(0,i.jsx)("div",{className:d.icon,children:u}),x[16]=u,x[17]=m):m=x[17],x[18]!==T?(p=(0,i.jsx)("div",{className:d.textWrapper,children:(0,i.jsx)("div",{className:d.text,children:T})}),x[18]=T,x[19]=p):p=x[19],x[20]!==O||x[21]!==N||x[22]!==E||x[23]!==m||x[24]!==p?(h=(0,i.jsxs)(s.N,{to:N,...O,children:[m,p,E]}),x[20]=O,x[21]=N,x[22]=E,x[23]=m,x[24]=p,x[25]=h):h=x[25],x[26]!==b||x[27]!==r||x[28]!==h?(f=(0,i.jsxs)("div",{className:d.item,children:[r,h,b]}),x[26]=b,x[27]=r,x[28]=h,x[29]=f):f=x[29],x[30]!==_||x[31]!==R||x[32]!==C?(g=R&&C&&(0,i.jsx)("ul",{className:d.subList,children:_}),x[30]=_,x[31]=R,x[32]=C,x[33]=g):g=x[33],x[34]!==f||x[35]!==g?(y=(0,i.jsxs)("li",{className:d.section,children:[f,g]}),x[34]=f,x[35]=g,x[36]=y):y=x[36],y}try{u.displayName||(u.displayName="Navigation")}catch{}try{(a=function(e){let t,n,a,r,l=(0,o.c)(14),{"aria-current":c,contextMenuComponent:u,displayName:m,href:p,icon:h,iconOverride:f,onLinkClick:g}=e;return l[0]!==h||l[1]!==f?(t=h?(0,i.jsx)(h,{size:16,className:d.icon}):f,l[0]=h,l[1]=f,l[2]=t):t=l[2],l[3]!==m?(n=(0,i.jsx)("div",{className:d.textWrapper,children:(0,i.jsx)("div",{className:d.text,children:m})}),l[3]=m,l[4]=n):n=l[4],l[5]!==c||l[6]!==p||l[7]!==g||l[8]!==t||l[9]!==n?(a=(0,i.jsxs)(s.N,{className:d.link,to:p,"aria-current":c,onClick:g,children:[t,n]}),l[5]=c,l[6]=p,l[7]=g,l[8]=t,l[9]=n,l[10]=a):a=l[10],l[11]!==u||l[12]!==a?(r=(0,i.jsxs)("li",{className:d.item,children:[a,u]}),l[11]=u,l[12]=a,l[13]=r):r=l[13],r}).displayName||(a.displayName="NavigationSubItem")}catch{}try{(r=function(e){let t,n,a=(0,o.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(l.KebabHorizontalIcon,{size:16}),a[0]=t):t=a[0],a[1]!==e?(n=(0,i.jsx)("button",{...e,className:d.contextButton,children:t}),a[1]=e,a[2]=n):n=a[2],n}).displayName||(r.displayName="NavigationContextMenuButton")}catch{}},33005:(e,t,n)=>{n.d(t,{BH:()=>A,xx:()=>D,tZ:()=>O});var a=n(74848),r=n(21728),i=n(34901),o=n(31971),s=n(58779),l=n(31075),c=n(23812),d=n(96540),u=n(84464),m=n(67621),p=n(99168),h=n(47397),f=n(22069),g=n(85351),y=n(46996);let x=["thread-scoped-file","draft-issue"],v=e=>!!e.isUserEdited,_=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,y.A)(t.get(e),n)),b=(e,t)=>!_(new Map(e.filter(e=>x.includes(e.type)).map(e=>[(0,f.Vb)(e),e])),new Map(t.filter(e=>x.includes(e.type)).map(e=>[(0,f.Vb)(e),e]))),j=(e,t)=>!_(new Map(Array.from(e).filter(([,e])=>v(e))),new Map(Array.from(t).filter(([,e])=>v(e))));function C(e){return[e.id,e]}function N(e){return null!=e}function S(e){return[(0,f.Vb)(e),e]}function w(e){return null!=e}function I(e){return(0,p.g)(e)}let k=(0,d.createContext)(void 0),T=new Map,E=[];function A(e){let t,n,c,y,_,A,D,O,M,B,F,$,U,V,z,W=(0,r.c)(42),{children:H}=e,q=(0,s.AI)(!1),[G,K]=(0,d.useState)(T),[Q,J]=(0,d.useState)(E),[Y,Z]=(0,d.useState)(E),[X,ee]=(0,d.useState)(void 0),[et,en,ea]=(0,u.B)(!1),er=(0,l.S)((0,i.pn)(L)),ei=(0,i.pn)(R);W[0]!==q||W[1]!==er||W[2]!==ei?(t=()=>{er&&er!==ei&&(K(T),J(E),ee(void 0),null===ei&&q.setValue(!1))},n=[ei,er,q],W[0]=q,W[1]=er,W[2]=ei,W[3]=t,W[4]=n):(t=W[3],n=W[4]),(0,d.useEffect)(t,n),W[5]===Symbol.for("react.memo_cache_sentinel")?(c=(e,t)=>{let n=void 0===t||t;J(t=>{if(t.includes(e))return t;let n=(0,p.oy)(e),a=t.findIndex(e=>(0,p.oy)(e)===n),r=[...t];return -1===a?r.push(e):r.splice(a,1,e),r}),ee(t=>n||void 0===t||(0,p.oy)(t)===(0,p.oy)(e)?e:t)},W[5]=c):c=W[5];let eo=c;W[6]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{K(t=>{let n=new Map(t);return n.set(e.id,e),n})},W[6]=y):y=W[6];let es=y;W[7]!==Q||W[8]!==X?(_=e=>{let t=Q.indexOf(e),n=Q.toSpliced(t,1);X===e&&ee(n[t-1]??n[0]),J(n)},W[7]=Q,W[8]=X,W[9]=_):_=W[9];let el=(0,m.K)(_);W[10]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{J(E),ee(void 0)},W[10]=A):A=W[10];let ec=A;if(W[11]!==G){for(let[e,t]of(O=new Map,G)){let n=(0,p.oy)(e),a=O.get(n)??[];a.push(t.id),O.set(n,a)}for(let e of O.values())e.sort((e,t)=>{let n=G.get(e),a=G.get(t);return"timestamp"in n&&"timestamp"in a?n.timestamp.valueOf()-a.timestamp.valueOf():0});W[11]=G,W[12]=O}else O=W[12];D=O,W[13]!==el||W[14]!==Q||W[15]!==D?(M=e=>{if(e){for(let t of e)if(K(e=>{let n=new Map(e);return n.delete(t)?n:e}),Q.includes(t)){let e=(0,p.oy)(t),n=D.get(e),a=n?.indexOf(t)??-1,r=n?.[a-1];r?eo(r,!1):el(t)}}else K(T),J(E),ee(void 0)},W[13]=el,W[14]=Q,W[15]=D,W[16]=M):M=W[16];let ed=(0,m.K)(M);W[17]!==q.value||W[18]!==Q?(B=()=>q.value?Q:E,W[17]=q.value,W[18]=Q,W[19]=B):B=W[19];let eu=(0,m.K)(B);W[20]!==q?(F=()=>q.setValue(!0),W[20]=q,W[21]=F):F=W[21];let em=F;W[22]!==q?($=()=>q.setValue(!1),W[22]=q,W[23]=$):$=W[23];let ep=$;return W[24]!==el||W[25]!==ep||W[26]!==ea||W[27]!==en||W[28]!==eu||W[29]!==q||W[30]!==G||W[31]!==Q||W[32]!==Y||W[33]!==em||W[34]!==ed||W[35]!==X||W[36]!==et||W[37]!==D?(V={items:G,versionedItems:D,isContentPreviewOpen:q,getOpenItems:eu,allOpenItems:Q,openItemsBeforeSubthreadChange:Y,selectedItem:X,updateItem:es,setOpenItemsBeforeSubthreadChange:Z,openItem:eo,closeItem:el,openPreviewPane:em,closePreviewPane:ep,removeItems:ed,showLoadingState:et,enableLoadingState:en,disableLoadingState:ea,closeAllItems:ec},W[24]=el,W[25]=ep,W[26]=ea,W[27]=en,W[28]=eu,W[29]=q,W[30]=G,W[31]=Q,W[32]=Y,W[33]=em,W[34]=ed,W[35]=X,W[36]=et,W[37]=D,W[38]=V):V=W[38],P(U=V),!function(e){let t,n,a,s=(0,r.c)(10),{items:l,removeItems:c,updateItem:u}=e,{currentReferences:m,messages:y,selectedThreadID:_}=(0,i.Pk)(),k=(0,h.b)(),T=(0,d.useRef)(l),E=(0,d.useRef)(m);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.A)("sessionStorage"),s[0]=t):t=s[0];let A=t;s[1]!==m||s[2]!==l||s[3]!==k||s[4]!==y.length||s[5]!==c||s[6]!==_||s[7]!==u?(n=()=>{let e=j(T.current,l);T.current=l;let t=b(E.current,m);if(E.current=m,e){let e=new Map(Array.from(l.values()).filter(v).map(I).filter(w).map(S)),t=new Set;for(let n of m)if(x.includes(n.type)){let a=(0,f.Vb)(n);t.add(a);let r=e.get(a);r?b([r],[n])&&k.addReference(r,"content-preview"):k.removeReference(n)}for(let[n,a]of e)t.has(n)||k.addReference(a,"content-preview")}else if(t){let e=new Map(m.map(e=>(0,p.oR)({ref:e,messageIndex:y.length})).filter(N).map(C)),t=new Set;for(let[n,a]of l)if(v(a)){t.add(n);let r=e.get(n);null!=r?j(new Map([[r.id,r]]),new Map([[a.id,a]]))&&u(r):(c([n]),o.W.copilotPersistEditedDraftIssues&&A.removeItem(`edited-${_}-${n}`))}for(let[n,a]of e)t.has(n)||u(a)}},a=[l,k,m,y.length,c,u,A,_],s[1]=m,s[2]=l,s[3]=k,s[4]=y.length,s[5]=c,s[6]=_,s[7]=u,s[8]=n,s[9]=a):(n=s[8],a=s[9]),(0,d.useEffect)(n,a)}(U),W[39]!==H||W[40]!==U?(z=(0,a.jsx)(k.Provider,{value:U,children:H}),W[39]=H,W[40]=U,W[41]=z):z=W[41],z}function R(e){return e.selectedThreadID}function L(e){return e.selectedThreadID}let P=e=>{let t,n,a,s=(0,r.c)(8),{updateItem:l}=e,{messagesLoading:u,selectedThreadID:m}=(0,i.Pk)(),p=`edited-${m}`;if(o.W.copilotPersistEditedDraftIssues){let e;s[0]!==p?(e=(0,c.MV)(p),s[0]=p,s[1]=e):e=s[1],t=e}else{let e;s[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],s[2]=e):e=s[2],t=e}let h=t;s[3]!==h||s[4]!==u.state||s[5]!==l?(n=()=>{if(h&&"loaded"===u.state)for(let e of h)l(e)},a=[h,l,u.state],s[3]=h,s[4]=u.state,s[5]=l,s[6]=n,s[7]=a):(n=s[6],a=s[7]),(0,d.useEffect)(n,a)};function D(){let e=(0,d.useContext)(k);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function O(){let e=(0,d.useContext)(k);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,s.HN)(e.isContentPreviewOpen)}try{k.displayName||(k.displayName="ContentPreviewContext")}catch{}try{A.displayName||(A.displayName="ContentPreviewProvider")}catch{}},9677:(e,t,n)=>{n.d(t,{O:()=>w});var a=n(74848),r=n(21728),i=n(38621),o=n(75177),s=n(87330),l=n(84217),c=n(55847),d=n(15385),u=n(63867),m=n(53110),p=n(96540);function h(e){let t,n,i,s,l=(0,r.c)(5),{children:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={overflow:"auto",maxHeight:"calc(100dvh - 64px - 52px)"},l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n={overflow:"hidden",backgroundColor:"canvas.default"},l[1]=n):n=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",flexDirection:"column"},l[2]=i):i=l[2],l[3]!==c?(s=(0,a.jsx)(o.A,{sx:t,children:(0,a.jsx)(o.A,{sx:n,children:(0,a.jsx)(o.A,{sx:i,children:c})})}),l[3]=c,l[4]=s):s=l[4],s}function f(e){let t,n,c,d,u,m=(0,r.c)(9),{children:p,onDismiss:h}=e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(t={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"16px",fontSize:1},m[0]=t):t=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,"@media screen and (max-width: 768px)":{maxWidth:"80%"}},m[1]=n):n=m[1],m[2]!==p?(c=(0,a.jsx)(o.A,{sx:n,children:p}),m[2]=p,m[3]=c):c=m[3],m[4]!==h?(d=h&&(0,a.jsx)(s.K,{unsafeDisableTooltip:!0,"aria-label":"Dismiss",icon:i.XIcon,onClick:h,variant:"invisible",sx:{flexShrink:0}}),m[4]=h,m[5]=d):d=m[5],m[6]!==c||m[7]!==d?(u=(0,a.jsxs)(l.A,{as:"h3",sx:t,children:[c,d]}),m[6]=c,m[7]=d,m[8]=u):u=m[8],u}function g(e){let t,n,i=(0,r.c)(3),{children:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderTop:"1px solid var(--borderColor-default, var(--color-border-default))",backgroundColor:"canvas.subtle",px:3,py:2},i[0]=t):t=i[0],i[1]!==s?(n=(0,a.jsx)(o.A,{sx:t,children:s}),i[1]=s,i[2]=n):n=i[2],n}function y(e){let t,n,o,s,l,d,u=(0,r.c)(11),{children:h,title:f,initiallyOpen:g}=e,[y,v]=(0,p.useState)(g??!1);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>v(x),u[0]=t):t=u[0],u[1]===Symbol.for("react.memo_cache_sentinel")?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",'[data-component="buttonContent"]':{justifyContent:"start"}},u[1]=n):n=u[1];let _=y?i.ChevronDownIcon:i.ChevronRightIcon;u[2]===Symbol.for("react.memo_cache_sentinel")?(o={mr:2},u[2]=o):o=u[2],u[3]!==_?(s=(0,a.jsx)(m.A,{icon:_,sx:o}),u[3]=_,u[4]=s):s=u[4],u[5]!==s||u[6]!==f?(l=(0,a.jsxs)(c.Q,{onClick:t,sx:n,children:[s,f]}),u[5]=s,u[6]=f,u[7]=l):l=u[7];let b=y&&h;return u[8]!==l||u[9]!==b?(d=(0,a.jsxs)(a.Fragment,{children:[l,b]}),u[8]=l,u[9]=b,u[10]=d):d=u[10],d}function x(e){return!e}function v(e){let t,n,i=(0,r.c)(3),{children:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:3},i[0]=t):t=i[0],i[1]!==s?(n=(0,a.jsx)(o.A,{sx:t,children:s}),i[1]=s,i[2]=n):n=i[2],n}function _(e){let t,n,s,l,d,u,p,h=(0,r.c)(14),{direction:f,onExpand:g}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={justifyContent:"start"},h[0]=t):t=h[0],h[1]!==f?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",px:3,py:2,width:"100%",fontSize:0,fontWeight:"normal",color:"fg.muted",'[data-component="buttonContent"]':t,..."above"===f?{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}:{borderTop:"1px solid var(--borderColor-default, var(--color-border-default))"}},h[1]=f,h[2]=n):n=h[2],h[3]===Symbol.for("react.memo_cache_sentinel")?(s={display:"flex",alignItems:"center"},h[3]=s):s=h[3];let y="below"===f?i.FoldDownIcon:i.FoldUpIcon;return h[4]===Symbol.for("react.memo_cache_sentinel")?(l={mr:2},h[4]=l):l=h[4],h[5]!==y?(d=(0,a.jsx)(m.A,{icon:y,sx:l}),h[5]=y,h[6]=d):d=h[6],h[7]!==f||h[8]!==d?(u=(0,a.jsxs)(o.A,{sx:s,children:[d,"Show content ",f]}),h[7]=f,h[8]=d,h[9]=u):u=h[9],h[10]!==g||h[11]!==n||h[12]!==u?(p=(0,a.jsx)(c.Q,{onClick:g,sx:n,children:u}),h[10]=g,h[11]=n,h[12]=u,h[13]=p):p=h[13],p}function b(e){let t,n,i=(0,r.c)(3),{children:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(d.l.GroupHeading,{as:"h3",children:"Reference details"}),i[0]=t):t=i[0],i[1]!==o?(n=(0,a.jsx)(d.l,{children:(0,a.jsxs)(d.l.Group,{children:[t,o]})}),i[1]=o,i[2]=n):n=i[2],n}function j(e){let t,n,i=(0,r.c)(6),{children:o,href:s,icon:l}=e;return i[0]!==l?(t=(0,a.jsx)(d.l.LeadingVisual,{children:(0,a.jsx)(m.A,{icon:l})}),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==s||i[4]!==t?(n=(0,a.jsxs)(d.l.LinkItem,{href:s,children:[t,o]}),i[2]=o,i[3]=s,i[4]=t,i[5]=n):n=i[5],n}function C(){let e,t,n=(0,r.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",flexDirection:"column",alignItems:"center",m:"auto",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsxs)(o.A,{sx:e,children:[(0,a.jsx)(u.A,{sx:{mb:2}}),(0,a.jsx)("div",{children:"Loading..."})]}),n[1]=t):t=n[1],t}function N(){let e,t,n=(0,r.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"center",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(o.A,{sx:e,children:(0,a.jsx)(o.A,{sx:{color:"danger.fg",fontWeight:"bold"},children:"Failed to load reference details"})}),n[1]=t):t=n[1],t}function S(e){let t,n=(0,r.c)(4),{children:i,detailsError:o,detailsLoading:s}=e;return n[0]!==i||n[1]!==o||n[2]!==s?(t=o?(0,a.jsx)(N,{}):s?(0,a.jsx)(C,{}):(0,a.jsx)(a.Fragment,{children:i}),n[0]=i,n[1]=o,n[2]=s,n[3]=t):t=n[3],t}let w={Frame:h,Header:f,Body:S,Content:v,CollapsibleSubsection:y,ContentExpander:_,Details:b,DetailLink:j,SectionDivider:g};try{h.displayName||(h.displayName="Frame")}catch{}try{f.displayName||(f.displayName="Header")}catch{}try{g.displayName||(g.displayName="SectionDivider")}catch{}try{y.displayName||(y.displayName="CollapsibleSubsection")}catch{}try{v.displayName||(v.displayName="Content")}catch{}try{_.displayName||(_.displayName="ContentExpander")}catch{}try{b.displayName||(b.displayName="Details")}catch{}try{j.displayName||(j.displayName="DetailLink")}catch{}try{C.displayName||(C.displayName="Loading")}catch{}try{N.displayName||(N.displayName="Error")}catch{}try{S.displayName||(S.displayName="Body")}catch{}},59706:(e,t,n)=>{n.d(t,{_:()=>m,I:()=>d});var a=n(74848),r=n(21728),i=n(75177),o=n(52464),s=n(34614),l=n(9677);let c={"bing-icon":"WebSearchReferencePreview-module__bing-icon--kFZ4I"};function d(e){let t,n,c,d,p,h,f,g,y,x,v,_=(0,r.c)(19),{reference:b,onDismiss:j}=e;_[0]===Symbol.for("react.memo_cache_sentinel")?(t={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:2},n=(0,a.jsx)(m,{}),_[0]=t,_[1]=n):(t=_[0],n=_[1]),_[2]===Symbol.for("react.memo_cache_sentinel")?(c={fontSize:0,fontWeight:400,color:"fg.muted"},_[2]=c):c=_[2],_[3]===Symbol.for("react.memo_cache_sentinel")?(d={fontSize:1,fontWeight:600,color:"fg.default"},_[3]=d):d=_[3];let C=1===b.results.length?" result ":" results ";return _[4]!==b.results.length||_[5]!==C?(p=(0,a.jsxs)(i.A,{sx:t,children:[n,(0,a.jsxs)(o.A,{sx:c,children:[(0,a.jsxs)(o.A,{sx:d,children:[b.results.length," ",C]}),"from Bing search."]})]}),_[4]=b.results.length,_[5]=C,_[6]=p):p=_[6],_[7]!==j||_[8]!==p?(h=(0,a.jsx)(l.O.Header,{onDismiss:j,children:p}),_[7]=j,_[8]=p,_[9]=h):h=_[9],_[10]===Symbol.for("react.memo_cache_sentinel")?(f={display:"flex",flexDirection:"column",px:3,gap:3,pb:3},_[10]=f):f=_[10],_[11]!==b.results?(g=b.results.map(u),_[11]=b.results,_[12]=g):g=_[12],_[13]===Symbol.for("react.memo_cache_sentinel")?(y=(0,a.jsx)(o.A,{sx:{fontSize:0,fontWeight:400},children:(0,a.jsx)(s.A,{href:"https://privacy.microsoft.com/en-us/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})}),_[13]=y):y=_[13],_[14]!==g?(x=(0,a.jsx)(l.O.Body,{detailsError:!1,detailsLoading:!1,children:(0,a.jsxs)(i.A,{sx:f,children:[g,y]})}),_[14]=g,_[15]=x):x=_[15],_[16]!==x||_[17]!==h?(v=(0,a.jsxs)(l.O.Frame,{children:[h,x]}),_[16]=x,_[17]=h,_[18]=v):v=_[18],v}function u(e,t){return(0,a.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:1,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px",padding:3},children:[(0,a.jsx)(s.A,{sx:{fontWeight:600,fontSize:2},href:e.url,rel:"nofollow",children:e.title}),(0,a.jsx)("div",{children:e.excerpt}),(0,a.jsx)(i.A,{sx:{fontSize:0,color:"fg.muted"},children:e.url})]},t)}let m=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:c["bing-icon"]}),t[0]=e):e=t[0],e};try{d.displayName||(d.displayName="WebSearchReferencePreview")}catch{}try{m.displayName||(m.displayName="BingIcon")}catch{}},88795:(e,t,n)=>{n.d(t,{d:()=>s,t:()=>l});var a=n(74848),r=n(21728),i=n(96540);let o=i.createContext({});function s(e){let t,n=(0,r.c)(3),{repository:i,children:s}=e;return n[0]!==s||n[1]!==i?(t=(0,a.jsxs)(o.Provider,{value:i,children:[" ",s," "]}),n[0]=s,n[1]=i,n[2]=t):t=n[2],t}function l(){return i.useContext(o)}try{o.displayName||(o.displayName="CurrentRepositoryContext")}catch{}try{s.displayName||(s.displayName="CurrentRepositoryProvider")}catch{}},93955:(e,t,n)=>{n.d(t,{Q:()=>s,i:()=>l});var a=n(74848),r=n(21728),i=n(96540);let o=i.createContext(void 0);function s(e){let t,n=(0,r.c)(3),{user:i,children:s}=e;return n[0]!==s||n[1]!==i?(t=(0,a.jsxs)(o.Provider,{value:i,children:[" ",s," "]}),n[0]=s,n[1]=i,n[2]=t):t=n[2],t}function l(){return i.useContext(o)}try{o.displayName||(o.displayName="CurrentUserContext")}catch{}try{s.displayName||(s.displayName="CurrentUserProvider")}catch{}},23985:(e,t,n)=>{n.d(t,{B:()=>f});var a=n(74848),r=n(31971),i=n(38007),o=n(38621),s=n(91321),l=n(10871),c=n(10569),d=n(87330),u=n(15385);let m={actions:"EditorMenu-module__actions--AddF7",editorButton:"EditorMenu-module__editorButton--_thrU"};var p=n(33036),h=n(88245);function f({menuLocation:e,mode:t,onButtonClick:n}){let f=(n,a)=>{r.W.freeToPaidTelemetry?(0,p.F)({eventName:n,menuLocation:e,mode:t,action:a}):(0,i.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${n.toUpperCase()}`,mode:t})};return(0,a.jsxs)(s.A,{className:m.actions,children:[(0,a.jsx)(l.z,{className:m.editorButton,href:h.A.vscode.url,leadingVisual:(0,a.jsx)("img",{src:h.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{n?.(),f("vscode","ide_menu_primary_button_click")},children:h.A.vscode.name}),(0,a.jsxs)(c.W,{children:[(0,a.jsx)(c.W.Anchor,{children:(0,a.jsx)(d.K,{"aria-label":"More editors",icon:o.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{f("menu","ide_menu_open")},"data-testid":"editor-dropdown-button"})}),(0,a.jsx)(c.W.Overlay,{align:"end",children:(0,a.jsx)(u.l,{children:(0,a.jsx)(p.t,{menuLocation:e,mode:t,onItemClick:n})})})]})]})}try{f.displayName||(f.displayName="EditorMenu")}catch{}},33036:(e,t,n)=>{n.d(t,{F:()=>l,t:()=>c});var a=n(74848),r=n(31971),i=n(38007),o=n(15385),s=n(88245);function l({eventName:e,menuLocation:t,mode:n,action:a,text:r}){let o=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,i.BI)("dotcom_chat.activate",{target:o,text:r,category:t,action:a,mode:n})}function c({menuLocation:e,mode:t,onItemClick:n}){return Object.entries(s.A).map(([i,{name:s,url:c,icon:d}])=>(0,a.jsxs)(o.l.LinkItem,{href:c,onClick:()=>{n?.(),r.W.freeToPaidTelemetry&&l({eventName:i,menuLocation:e,mode:t,action:"menu_item_click",text:s})},children:[s,(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)("img",{src:d,alt:"",height:"20",width:"20"})})]},i))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},35066:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(74848),r=n(21728),i=n(96540),o=n(85647),s=n(44446);let l={cardContainer:"Card-module__cardContainer--Jk2It",cardContent:"Card-module__cardContent--A8hpe",cardMenu:"Card-module__cardMenu--o6v0Y",itemHeader:"Card-module__itemHeader--WIpbQ",edgeToEdge:"Card-module__edgeToEdge--o6nFA",itemImage:"Card-module__itemImage--fVqUU",itemMain:"Card-module__itemMain--M__Bj",itemContent:"Card-module__itemContent--QdREU",itemHeaderTitle:"Card-module__itemHeaderTitle--TwWdH",itemHeaderDescription:"Card-module__itemHeaderDescription--KFU1e",itemMetadata:"Card-module__itemMetadata--DWvmz",itemMetadataItem:"Card-module__itemMetadataItem--t_AWQ"};var c=n(34164);let d=e=>{let t,n,s,d,y,x,v,_,b,j,C,N=(0,r.c)(47),S=null,w=null,I=null,k=null,T=null,E=null;if(N[0]!==e.children){for(let t of i.Children.toArray(e.children))i.isValidElement(t)&&(t.type===u?S=t:t.type===m?w=t:t.type===p?I=t:t.type===h?k=t:t.type===g?T=t:t.type===f&&(E=t));N[0]=e.children,N[1]=S,N[2]=w,N[3]=I,N[4]=k,N[5]=T,N[6]=E}else S=N[1],w=N[2],I=N[3],k=N[4],T=N[5],E=N[6];N[7]!==w?(t=(0,c.$)(l.itemHeader,w&&l.edgeToEdge),N[7]=w,N[8]=t):t=N[8];let A=S||w;N[9]!==t||N[10]!==A?(n=(0,a.jsx)("div",{className:t,children:A}),N[9]=t,N[10]=A,N[11]=n):n=N[11],N[12]!==k||N[13]!==I?(s=(0,a.jsxs)("div",{className:l.itemContent,children:[I,k]}),N[12]=k,N[13]=I,N[14]=s):s=N[14],N[15]!==T?(d=(0,a.jsx)("div",{className:l.itemMetadata,children:T}),N[15]=T,N[16]=d):d=N[16],N[17]!==s||N[18]!==d?(y=(0,a.jsxs)("div",{className:l.itemMain,children:[s,d]}),N[17]=s,N[18]=d,N[19]=y):y=N[19],N[20]!==n||N[21]!==y?(x=(0,a.jsxs)(a.Fragment,{children:[n,y]}),N[20]=n,N[21]=y,N[22]=x):x=N[22];let R=x;if("href"in e){let t,n,r,i,s;return N[23]!==e?({href:t,...n}=e,N[23]=e,N[24]=t,N[25]=n):(t=N[24],n=N[25]),N[26]!==R||N[27]!==t||N[28]!==n?(r=(0,a.jsx)(o.N_,{...n,to:t,className:l.cardContent,children:R}),N[26]=R,N[27]=t,N[28]=n,N[29]=r):r=N[29],N[30]!==E?(i=E?(0,a.jsx)("div",{className:l.cardMenu,children:E}):null,N[30]=E,N[31]=i):i=N[31],N[32]!==r||N[33]!==i?(s=(0,a.jsxs)("div",{className:l.cardContainer,children:[r,i]}),N[32]=r,N[33]=i,N[34]=s):s=N[34],s}return N[35]!==e?({onClick:v,..._}=e,N[35]=e,N[36]=v,N[37]=_):(v=N[36],_=N[37]),N[38]!==R||N[39]!==v||N[40]!==_?(b=(0,a.jsx)("button",{..._,className:l.cardContent,onClick:v,children:R}),N[38]=R,N[39]=v,N[40]=_,N[41]=b):b=N[41],N[42]!==E?(j=E?(0,a.jsx)("div",{className:l.cardMenu,children:E}):null,N[42]=E,N[43]=j):j=N[43],N[44]!==b||N[45]!==j?(C=(0,a.jsxs)("div",{className:l.cardContainer,children:[b,j]}),N[44]=b,N[45]=j,N[46]=C):C=N[46],C},u=e=>{let t,n=(0,r.c)(3),{icon:i,color:o}=e;return n[0]!==o||n[1]!==i?(t=(0,a.jsx)(s.I,{icon:i,hasBackground:!0,color:o,size:16}),n[0]=o,n[1]=i,n[2]=t):t=n[2],t},m=e=>{let t,n=(0,r.c)(3),{img:i,alt:o}=e,s=void 0===o?"":o;return n[0]!==s||n[1]!==i?(t=(0,a.jsx)("img",{src:i,alt:s,className:l.itemImage}),n[0]=s,n[1]=i,n[2]=t):t=n[2],t},p=e=>{let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("h3",{className:l.itemHeaderTitle,children:i}),n[0]=i,n[1]=t):t=n[1],t},h=e=>{let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("p",{className:l.itemHeaderDescription,children:i}),n[0]=i,n[1]=t):t=n[1],t},f=e=>{let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)(a.Fragment,{children:i}),n[0]=i,n[1]=t):t=n[1],t},g=e=>{let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:l.itemMetadataItem,children:i}),n[0]=i,n[1]=t):t=n[1],t};d.Icon=u,d.Image=m,d.Heading=p,d.Description=h,d.Menu=f,d.Metadata=g;try{d.displayName||(d.displayName="Card")}catch{}try{u.displayName||(u.displayName="Icon")}catch{}try{m.displayName||(m.displayName="Image")}catch{}try{p.displayName||(p.displayName="Heading")}catch{}try{h.displayName||(h.displayName="Description")}catch{}try{f.displayName||(f.displayName="Menu")}catch{}try{g.displayName||(g.displayName="Metadata")}catch{}},99038:(e,t,n)=>{n.d(t,{Dy:()=>l,GS:()=>i,LP:()=>c,OZ:()=>d});var a=n(74848),r=n(21728);let i=e=>{let t,n,i,o,s,l=(0,r.c)(7);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c}=t,d=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M.5 6v4.5A2.5 2.5 0 0 0 3 13h1.645a3.5 3.5 0 0 1-.11-1.5H3a1 1 0 0 1-1-1V6zM14 6v4.5a1 1 0 0 1-1 1h-1.535a3.5 3.5 0 0 1-.11 1.5H13a2.5 2.5 0 0 0 2.5-2.5V6zm-4 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0",clipRule:"evenodd"}),o=(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.5 10V5.5A2.5 2.5 0 0 0 13 3h-1.645a3.5 3.5 0 0 1 .11 1.5H13a1 1 0 0 1 1 1V10zM2 10V5.5a1 1 0 0 1 1-1h1.535a3.5 3.5 0 0 1 .11-1.5H3A2.5 2.5 0 0 0 .5 5.5V10zm4-6a2 2 0 1 1 4 0 2 2 0 0 1-4 0",clipRule:"evenodd"}),l[2]=n,l[3]=i,l[4]=o):(n=l[2],i=l[3],o=l[4]),l[5]!==d?(s=(0,a.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,o]}),l[5]=d,l[6]=s):s=l[6],s},o=e=>{let t,n,i,o,s=(0,r.c)(6);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l}=t,c=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"}),s[2]=n,s[3]=i):(n=s[2],i=s[3]),s[4]!==c?(o=(0,a.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),s[4]=c,s[5]=o):o=s[5],o},s=e=>{let t,n,i,o,s=(0,r.c)(6);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l}=t,c=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"}),s[2]=n,s[3]=i):(n=s[2],i=s[3]),s[4]!==c?(o=(0,a.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),s[4]=c,s[5]=o):o=s[5],o},l=e=>{let t,n,i,o,s=(0,r.c)(6);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l}=t,c=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9853 4.76795c.2467 1.23107.1819 2.55631-.3218 3.71134 1.0897-1.00527 1.7464-2.46826 1.7464-3.86921 0-.41421.3357-.75.75-.75.4142 0 .75.33579.75.75 0 2.80515-2.0553 5.92172-5.26314 6.53282.12999.0339.26315.0635.39904.0885 1.3486.2485 2.7916.0174 3.7282-.5446.3552-.2131.8159-.0979 1.029.2573.2131.3552.0979.8159-.2573 1.029-1.3033.782-3.1303 1.0359-4.77168.7335-1.47895-.2726-2.95185-1.0297-3.73462-2.4328.03609.3407.0998.6912.19117 1.0445.39625 1.5319 1.23152 2.7976 2.12066 3.2689.36598.194.5054.6479.31141 1.0139-.19399.366-.64793.5054-1.01391.3114-1.41889-.7521-2.42362-2.4914-2.87037-4.2186-.37219-1.439-.41354-3.09054.18406-4.40236-.18676.13263-.36743.27694-.54001.43237-1.03593.93306-1.73142 2.22122-1.73142 3.69879 0 .4142-.33579.75-.75.75-.41422 0-.75-.3358-.75-.75 0-1.97509.934-3.64826 2.22755-4.81334.88055-.7931 1.9505-1.37217 3.05387-1.65822-.11043-.0376-.22261-.07252-.33631-.10464-1.50098-.42402-2.98649-.28172-3.84609.36302-.33136.24853-.80147.18139-1.05-.14998-.24854-.33136-.1814-.80146.14997-1.05 1.38041-1.03537 3.4149-1.0978 5.1539-.60654 1.67421.47295 3.33259 1.53108 4.06402 3.11319l.0038.00674c.035-.47081.0022-.96424-.0972-1.46029-.2603-1.29954-.95701-2.50156-1.90466-3.21238-.33135-.24854-.39848-.71865-.14994-1.050006.24855-.331356.71865-.398487 1.05001-.14994C10.8023 1.6197 11.6657 3.17263 11.9853 4.76795ZM7.99998 6.0001c-1.10457 0-2 .89543-2 2s.89543 2 2 2 2-.89543 2-2-.89543-2-2-2Z",fill:"currentColor"}),s[2]=n,s[3]=i):(n=s[2],i=s[3]),s[4]!==c?(o=(0,a.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),s[4]=c,s[5]=o):o=s[5],o},c=e=>{let t,n,i,o,s=(0,r.c)(6);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l}=t,c=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M8 6.984c.59-.533 1.204-1.066 1.825-1.493.797-.548 1.7-.991 2.675-.991C14.414 4.5 16 6.086 16 8s-1.586 3.5-3.5 3.5c-.975 0-1.878-.444-2.675-.991-.621-.427-1.235-.96-1.825-1.493-.59.533-1.204 1.066-1.825 1.493-.797.547-1.7.991-2.675.991C1.586 11.5 0 9.914 0 8s1.586-3.5 3.5-3.5c.975 0 1.878.443 2.675.991.621.427 1.235.96 1.825 1.493ZM9.114 8c.536.483 1.052.922 1.56 1.273.704.483 1.3.727 1.826.727 1.086 0 2-.914 2-2 0-1.086-.914-2-2-2-.525 0-1.122.244-1.825.727-.51.35-1.025.79-1.561 1.273ZM3.5 6c-1.086 0-2 .914-2 2 0 1.086.914 2 2 2 .525 0 1.122-.244 1.825-.727.51-.35 1.025-.79 1.561-1.273-.536-.483-1.052-.922-1.56-1.273C4.621 6.244 4.025 6 3.5 6Z"}),s[2]=n,s[3]=i):(n=s[2],i=s[3]),s[4]!==c?(o=(0,a.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),s[4]=c,s[5]=o):o=s[5],o},d={compose:o,dice:s,loops:c,node:i,spaces:l};try{i.displayName||(i.displayName="NodeIcon")}catch{}try{o.displayName||(o.displayName="ComposeIcon")}catch{}try{s.displayName||(s.displayName="DiceIcon")}catch{}try{l.displayName||(l.displayName="SpacesIcon")}catch{}try{c.displayName||(c.displayName="LoopsIcon")}catch{}},44446:(e,t,n)=>{n.d(t,{I:()=>u});var a=n(74848),r=n(21728),i=n(34164),o=n(99038),s=n(38621);let l={container:"Icon-module__container--QOYOK",customColor:"Icon-module__customColor--HlhOS",hasBackground:"Icon-module__hasBackground--zz0fp",auburn:"Icon-module__auburn--qIzKn",blue:"Icon-module__blue--Ydgzj",brown:"Icon-module__brown--MphUd",coral:"Icon-module__coral--Jjxvj",cyan:"Icon-module__cyan--O0g_g",gray:"Icon-module__gray--rvF4R",green:"Icon-module__green--nHw65",indigo:"Icon-module__indigo--S8x7A",lemon:"Icon-module__lemon--Nc7fm",lime:"Icon-module__lime--ghjuW",olive:"Icon-module__olive--v6fBi",orange:"Icon-module__orange--AmLH_",pine:"Icon-module__pine--j5Ka1",pink:"Icon-module__pink--QHUu5",plum:"Icon-module__plum--JvLfU",purple:"Icon-module__purple--CLqTs",red:"Icon-module__red--ayaY4",teal:"Icon-module__teal--xmOZK",yellow:"Icon-module__yellow--Y3ymS"},c=new Set(Object.keys(l).filter(e=>!["container","hasBackground","customColor"].includes(e))),d=e=>e in s;function u(e){let t,n,u,m,p,h,f=(0,r.c)(18),{icon:g,hasBackground:y,color:x,size:v}=e,_=void 0!==y&&y,b=void 0===x?"gray":x,j=void 0===v?16:v;if("string"==typeof g)if(g in o.OZ)t=o.OZ[g];else{let e;f[0]!==g?(e=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return d(t)?s[t]:void 0}(g),f[0]=g,f[1]=e):e=f[1],t=e}else t=g;if(!t)return null;f[2]!==b?(n=c.has(b),f[2]=b,f[3]=n):n=f[3];let C=n,N=`${_?2*j:j}px`;f[4]!==b||f[5]!==C||f[6]!==N?(u={"--custom-size":N},C||(u["--custom-color"]=b),f[4]=b,f[5]=C,f[6]=N,f[7]=u):u=f[7];let S=C?l[b]:l.customColor,w=_&&l.hasBackground;return f[8]!==S||f[9]!==w?(m=(0,i.$)(l.container,S,w),f[8]=S,f[9]=w,f[10]=m):m=f[10],f[11]!==t||f[12]!==j?(p=(0,a.jsx)(t,{size:j,fill:"currentColor"}),f[11]=t,f[12]=j,f[13]=p):p=f[13],f[14]!==u||f[15]!==m||f[16]!==p?(h=(0,a.jsx)("div",{style:u,className:m,children:p}),f[14]=u,f[15]=m,f[16]=p,f[17]=h):h=f[17],h}try{u.displayName||(u.displayName="Icon")}catch{}},52311:(e,t,n)=>{n.d(t,{P:()=>d,w:()=>u});var a=n(74848),r=n(96540),i=n(38621),o=n(30631),s=n(55847),l=n(70170),c=n(56424);function d({currentSelection:e,repositoryLoader:t,onSelect:n,selectionVariant:d,selectAllOption:u,additionalButtonProps:m,buttonText:p=""}){let[h,f]=(0,r.useState)(""),[g,y]=(0,r.useState)([]),[x,v]=(0,r.useState)(!0),_=(0,r.useCallback)((0,l.s)(async e=>{try{let n=await t(e);y(n)}catch{}v(!1)},200),[t,y,v]);(0,r.useEffect)(()=>{v(!0),_(h)},[h,_,v]);let b=(0,r.useCallback)(e=>{"single"===d?!e[0]||e[0]._all?n(void 0):n(e[0]):n(e)},[d,n]),j=(0,r.useMemo)(()=>"multiple"===d?e||[]:e?[e]:[],[d,e]),C=(0,r.useCallback)(e=>{let t;return(e.name.length>24&&(t=`${e.name.substring(0,24)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,appendOnly:!1,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,a.jsx)(i.RepoLockedIcon,{size:16}):(0,a.jsx)(i.RepoIcon,{size:16})}},[]),N=(0,r.useCallback)(e=>e.name,[]),S=(0,r.useMemo)(()=>{let e=[];e.push(...g);let t=j.filter(t=>e.every(e=>e.name!==t.name))||[];return e.push(...t),u&&e.push({name:"$all$",_all:!0}),e},[g,u,j]),w=p,I=i.RepoIcon;return w||("multiple"===d?w=j.length>0?`${j.length} repositor${j.length>1?"ies":"y"}`:"Select repositories":j.length>0&&j[0]?(w=j[0].name,I=j[0].private?i.RepoLockedIcon:i.RepoIcon):w=u?"All repositories":"Select a repository"),(0,a.jsx)(c.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,a.jsx)(s.Q,{leadingVisual:I,trailingAction:i.TriangleDownIcon,"aria-labelledby":` ${e}`,...t,...m,children:(0,a.jsx)(o.A,{title:w,maxWidth:195,children:w})}),placeholderText:"Repos",items:S,loading:x,groups:u?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:d,initialSelectedItems:j,onSelectionChange:b,filterItems:f,getItemKey:N,convertToItemProps:C})}function u(e){return async t=>{let n=t.trim().toLowerCase();return n?e.filter(e=>e.name.toLowerCase().includes(n)||e.name.toLowerCase().includes(n)):e}}try{d.displayName||(d.displayName="ReposSelector")}catch{}},68415:(e,t,n)=>{n.d(t,{Gy:()=>c,LB:()=>h,nn:()=>f,lm:()=>m});var a=n(74848),r=n(96540);let i=null,o=null,s=new Set;function l(e){return s.add(e),i||(i=new ResizeObserver(()=>{o||(o=requestAnimationFrame(()=>{for(let e of(o=null,s))e()}))})).observe(document.documentElement),()=>{s.delete(e),0===s.size&&i&&(i.disconnect(),i=null)}}let c={small:1,medium:544,large:768,xlarge:1012,xxlarge:1280,xxxlarge:1350,xxxxlarge:1440},d=[c.xxxxlarge,c.xxxlarge,c.xxlarge,c.xlarge,c.large,c.medium,c.small],u=r.createContext({screenSize:c.small});function m(){return r.useContext(u)}function p(){return f(window.innerWidth)}function h({children:e,initialValue:t=c.small}){let n=(0,r.useSyncExternalStore)(l,p,(0,r.useCallback)(()=>t,[t])),i=(0,r.useMemo)(()=>({screenSize:n}),[n]);return(0,a.jsx)(u.Provider,{value:i,children:e})}function f(e){for(let t of d)if(e>=t)return t;return c.small}try{u.displayName||(u.displayName="ScreenContext")}catch{}try{h.displayName||(h.displayName="ScreenSizeProvider")}catch{}},19139:(e,t,n)=>{n.d(t,{x:()=>p});var a=n(74848),r=n(38621),i=n(75177),o=n(6869),s=n(34614),l=n(10569),c=n(15385),d=n(85647);let u={Box:"SingleSignOnBanner-module__Box--iwIEO",Flash:"SingleSignOnBanner-module__Flash--XK1g3",Box_1:"SingleSignOnBanner-module__Box_1--VPBly",Octicon:"SingleSignOnBanner-module__Octicon--JXNw_",Box_2:"SingleSignOnBanner-module__Box_2--kq0MT",ForceWrap:"SingleSignOnBanner-module__ForceWrap--tZqOV",Paragraph:"SingleSignOnBanner-module__Paragraph--rpV0k"};var m=n(34164);function p({className:e,portalContainerName:t,protectedOrgs:n,maxVisibleOrgNames:l=3,redirectURI:c,useFullWidthStyle:p,forceWrap:g,sx:y}){let x=(0,d.zy)();if(!n||0===n.length)return null;let v=Math.max(0,n.length-l),_=1===n.length||v>0?(0,a.jsx)("b",{children:n.slice(0,l).join(", ")}):(0,a.jsxs)("span",{children:[(0,a.jsx)("b",{children:n.slice(0,n.length-1).join(", ")}),n.length>2&&","," and ",(0,a.jsx)("b",{children:n[n.length-1]})]});return(0,a.jsx)(i.A,{sx:y,className:e,"data-testid":"sso-banner",children:(0,a.jsx)("div",{className:u.Box,children:(0,a.jsx)("section",{"aria-label":"Single sign-on information",children:(0,a.jsx)(o.A,{sx:{borderRadius:2*!p,borderWidth:p?"1px 0":1},className:u.Flash,children:1===n.length?(0,a.jsxs)("div",{children:[(0,a.jsx)(r.ShieldLockIcon,{}),(0,a.jsx)(s.A,{inline:!0,href:`/orgs/${n[0]}/sso?return_to=${f({location:x,redirectURI:c})}`,children:"Single sign-on"})," ","to see results in the ",(0,a.jsx)("b",{children:n[0]})," organization."]}):(0,a.jsxs)("div",{className:u.Box_1,children:[(0,a.jsx)(r.ShieldLockIcon,{className:u.Octicon}),(0,a.jsxs)("div",{className:(0,m.$)(u.Box_2,g&&u.ForceWrap),children:[(0,a.jsxs)("p",{className:u.Paragraph,children:["Single sign-on to see results in ",0===v&&"the ",l>0&&(0,a.jsxs)(a.Fragment,{children:[_," "]}),v>0&&(0,a.jsxs)(a.Fragment,{children:[l>0&&"and ",v," other"," "]}),n.length>1&&1!==v?"organizations":"organization","."]}),(0,a.jsx)("div",{style:{flexShrink:0},children:(0,a.jsx)(h,{portalContainerName:t,protectedOrgs:n,redirectURI:c})})]})]})})})})})}function h({portalContainerName:e,protectedOrgs:t,redirectURI:n}){let r=(0,d.zy)();return(0,a.jsxs)(l.W,{children:[(0,a.jsx)(l.W.Button,{size:"small",children:"Select an organization"}),(0,a.jsx)(l.W.Overlay,{portalContainerName:e,children:(0,a.jsx)(c.l,{children:t.map(e=>(0,a.jsx)(c.l.Item,{onSelect:()=>window.location.href=`/orgs/${encodeURIComponent(e)}/sso?return_to=${f({location:r,redirectURI:n})}`,children:e},`org-${e}`))})})]})}function f({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{p.displayName||(p.displayName="SingleSignOnBanner")}catch{}try{h.displayName||(h.displayName="SingleSignOnButton")}catch{}},94232:(e,t,n)=>{n.d(t,{O:()=>u});var a=n(75177),r=n(59299),i=n(44999),o=n(38267);let s=(0,o.i7)(["0%{transform:translateX(-100%);}50%{transform:translateX(100%);}100%{transform:translateX(100%);}"]),l=(0,o.AH)(["animation:"," 1.5s infinite linear;"],s),c=(0,o.i7)(["0%{opacity:.3;}10%{opacity:1;}100%{opacity:.3;}"]),d=(0,o.AH)(["animation:"," 2s infinite linear;"],c),u=(0,o.Ay)(a.A).withConfig({displayName:"LoadingSkeleton",componentId:"sc-bcbf24f9-0"})(["position:relative;overflow:hidden;mask-image:radial-gradient(white,black);",";&::after{",";background:linear-gradient(90deg,transparent,",",transparent);content:'';position:absolute;transform:translateX(-100%);bottom:0;left:0;right:0;top:0;}background-color:",";border-radius:",";display:block;height:1.2em;"," width:",";height:",";",""],({animationStyle:e})=>"pulse"===e&&d,({animationStyle:e})=>"pulse"!==e&&l,(0,r.Jt)("colors.neutral.subtle"),(0,r.Jt)("colors.neutral.subtle"),({theme:e,variant:t})=>{switch(t){case"rounded":return(0,r.Jt)("radii.1")(e);case"pill":return"100px";case"elliptical":return"50%";default:return"0"}},({variant:e})=>"elliptical"===e&&{borderRadius:"50%"},({width:e})=>{switch(e){case"random":return`${Math.floor(40*Math.random()+40)}%`;case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},({height:e})=>{switch(e){case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},i.A);try{u.displayName||(u.displayName="LoadingSkeleton")}catch{}},31993:(e,t,n)=>{n.d(t,{j:()=>a});function a(e){return e}},83592:(e,t,n)=>{n.d(t,{s:()=>r});var a=n(2642);function r(e,t){let n=(0,a.a)(e),r=(0,a.a)(t);return n.getFullYear()===r.getFullYear()}},9802:(e,t,n)=>{n.d(t,{e:()=>r});var a=n(83592);function r(e){return(0,a.s)(e,Date.now())}},79639:(e,t,n)=>{n.d(t,{P:()=>i});var a=n(85551),r=n(40828);function i(e){return(0,a.r)(e,(0,r.e)(Date.now(),1))}},74022:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(23125),r=n(23149);let i=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw TypeError("Expected a function");return(0,r.A)(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),(0,a.A)(e,t,{leading:i,maxWait:t,trailing:o})}},29710:e=>{e.exports=JSON.parse('{"M":[{"id":"6eab781c-49c1-41e1-ab63-ef7872033702","name":"","user_id":10053402,"agent_id":1143301,"state":"completed","logs":"","owner_id":9919,"repo_id":956201709,"resource_type":"pull","resource_id":1,"last_updated_at":"2025-06-27T15:28:12.164448308Z","created_at":"2025-06-27T15:22:56.301948291Z","completed_at":"2025-06-27T15:32:56.301948291Z","premium_requests":2,"workflow_run_id":12345,"log_entries":[],"error":null},{"id":"4dfb781c-49c1-41e1-ab63-ef7872033702","name":"review by @actor","user_id":10053402,"agent_id":1143301,"state":"in_progress","logs":"","owner_id":9919,"repo_id":956201709,"resource_type":"pull","resource_id":1,"last_updated_at":"2025-06-27T15:28:12.164448308Z","created_at":"2025-06-27T17:22:56.301948291Z","completed_at":null,"premium_requests":0,"workflow_run_id":12346,"log_entries":[],"error":null}]}')}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-1d3d52","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-b1c483","vendors-node_modules_cookie_index_js-node_modules_primer_live-region-element_dist_esm_index_j-1ca8f6","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_github_hotkey_dist_inde-70f9af","vendors-node_modules_lodash-es_isEqual_js","vendors-node_modules_github_catalyst_lib_index_js-node_modules_github_hydro-analytics-client_-4da1df","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-5ada6e","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_react-relay_index_js","vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js","vendors-node_modules_remark-gfm_lib_index_js-node_modules_remark-parse_lib_index_js-node_modu-44d0fc","vendors-node_modules_fzy_js_index_js-node_modules_github_paste-markdown_dist_index_js","vendors-node_modules_github_g-emoji-element_dist_index_js-node_modules_lit-labs_react_index_j-aaff98","vendors-node_modules_hastscript_lib_index_js-node_modules_lowlight_lib_all_js-node_modules_re-713cc1","vendors-node_modules_react-relay_hooks_js-node_modules_color2k_dist_index_exports_import_es_m-05025c","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_codemirror_commands_dist_index_js-node_modules_codemirror_language-data_-92b5c9","vendors-node_modules_tanstack_react-query_build_modern_useQuery_js-node_modules_diff_lib_index_mjs","vendors-node_modules_js-yaml_dist_js-yaml_mjs","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_accname_dist_access-64d9bd","vendors-node_modules_d3-zoom_src_index_js","vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_lz-string_libs_lz-string_js-6649eb","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_date-picker_date-picker_ts","ui_packages_drag-and-drop_drag-and-drop_ts-ui_packages_hydro-analytics_hydro-analytics_ts","ui_packages_list-view_src_hooks_use-next-header-tag_ts-ui_packages_list-view_src_ListItem_Lis-0a5d95","ui_packages_relay-environment_relay-environment_ts","ui_packages_item-picker_components_RepositoryPicker_tsx-ui_packages_safe-html_VerifiedHTML_tsx","ui_packages_copilot-chat_utils_copilot-chat-helpers_ts","ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx-ui_packages_date-picker_components-96ce24","ui_packages_copilot-markdown_MarkdownRenderer_tsx","ui_packages_commenting_constants_values_ts-ui_packages_commenting_components_ActivityHeader_t-8a1940","ui_packages_app-uuid_app-uuid_ts-ui_packages_signed-commit-badge_index_ts","ui_packages_copilot-chat_utils_CopilotChatContext_tsx","ui_packages_copilot-chat_components_LegalDisclaimer_tsx-ui_packages_copilot-chat_components_M-a4e33b","ui_packages_markdown-viewer_NewMarkdownViewer_tsx","ui_packages_issue-viewer_components_IssueViewer_tsx-ui_packages_issue-viewer_contexts_IssueVi-8ab8ec","ui_packages_copilot-chat_components_CopilotIconAnimation_tsx","ui_packages_document-metadata_document-metadata_ts-ui_packages_mergebox_index_ts-ui_packages_-6a9968","ui_packages_failbot_failbot_ts-ui_packages_history_history_ts-ui_packages_soft-nav_state_ts-u-034d7d"],()=>t(10079)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-f78e15c20c41.js.map